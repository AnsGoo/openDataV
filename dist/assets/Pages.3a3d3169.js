var x=(e,i,s)=>new Promise((l,u)=>{var h=o=>{try{f(s.next(o))}catch(g){u(g)}},_=o=>{try{f(s.throw(o))}catch(g){u(g)}},f=o=>o.done?l(o.value):Promise.resolve(o.value).then(h,_);f((s=s.apply(e,i)).next())});import{a as U,d as q}from"./pages.7dd56559.js";import{a9 as H,ax as Q,aa as E,d as j,ae as z,ag as V,bO as X,r as C,i as L,a3 as R,bq as M,b0 as Z,Z as G,a as J,Q as N,o as T,c as S,U as v,E as d,u as p,bk as O,bP as D,F as K,e as W,A as Y,z as A,t as ee,b as P,X as I,bQ as te,p as ne,j as ae,_ as se}from"./index.41c68991.js";import"./index.f53bf2ef.js";const ie=H("ellipsis",{overflow:"hidden"},[Q("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),E("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),E("cursor-pointer",`
 cursor: pointer;
 `)]);function F(e){return`${e}-ellipsis--line-clamp`}function $(e,i){return`${e}-ellipsis--cursor-${i}`}const le=Object.assign(Object.assign({},V.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),oe=j({name:"Ellipsis",inheritAttrs:!1,props:le,setup(e,{slots:i,attrs:s}){const{mergedClsPrefixRef:l}=z(e),u=V("Ellipsis","-ellipsis",ie,X,e,l),h=C(null),_=C(null),f=C(null),o=C(!1),g=L(()=>{const{lineClamp:t}=e,{value:a}=o;return t!==void 0?{textOverflow:"","-webkit-line-clamp":a?"":t}:{textOverflow:a?"":"ellipsis","-webkit-line-clamp":""}});function y(){let t=!1;const{value:a}=o;if(a)return!0;const{value:c}=h;if(c){const{lineClamp:b}=e;if(w(c),b!==void 0)t=c.scrollHeight<=c.offsetHeight;else{const{value:B}=_;B&&(t=B.getBoundingClientRect().width<=c.getBoundingClientRect().width)}r(c,t)}return t}const k=L(()=>e.expandTrigger==="click"?()=>{var t;const{value:a}=o;a&&((t=f.value)===null||t===void 0||t.setShow(!1)),o.value=!a}:void 0),n=()=>R("span",Object.assign({},Z(s,{class:[`${l.value}-ellipsis`,e.lineClamp!==void 0?F(l.value):void 0,e.expandTrigger==="click"?$(l.value,"pointer"):void 0],style:g.value}),{ref:"triggerRef",onClick:k.value,onMouseenter:e.expandTrigger==="click"?y:void 0}),e.lineClamp?i:R("span",{ref:"triggerInnerRef"},i));function w(t){if(!t)return;const a=g.value,c=F(l.value);e.lineClamp!==void 0?m(t,c,"add"):m(t,c,"remove");for(const b in a)t.style[b]!==a[b]&&(t.style[b]=a[b])}function r(t,a){const c=$(l.value,"pointer");e.expandTrigger==="click"&&!a?m(t,c,"add"):m(t,c,"remove")}function m(t,a,c){c==="add"?t.classList.contains(a)||t.classList.add(a):t.classList.contains(a)&&t.classList.remove(a)}return{mergedTheme:u,triggerRef:h,triggerInnerRef:_,tooltipRef:f,handleClick:k,renderTrigger:n,getTooltipDisabled:y}},render(){var e;const{tooltip:i,renderTrigger:s,$slots:l}=this;if(i){const{mergedTheme:u}=this;return R(M,Object.assign({ref:"tooltipRef",placement:"top"},i,{getDisabled:this.getTooltipDisabled,theme:u.peers.Tooltip,themeOverrides:u.peerOverrides.Tooltip}),{trigger:s,default:(e=l.tooltip)!==null&&e!==void 0?e:l.default})}else return s()}}),re=""+new URL("default.5fefac84.png",import.meta.url).href,ce=e=>(ne("data-v-271ddeb3"),e=e(),ae(),e),de={class:"page-list"},ue=A(" \u65B0\u5EFA "),pe=["src","onClick"],fe={class:"options"},ge=ce(()=>P("span",null,"\u7F16\u8F91",-1)),me=j({__name:"Pages",setup(e){const i=G(),s=C(!1),l=C([]),u=[{key:"preview",label:"\u9884\u89C8",icon:h("preview-open")},{key:"delete",label:"\u5220\u9664",icon:h("delete-one")}];J(()=>x(this,null,function*(){yield _()}));function h(n){return()=>R(I,{name:n})}const _=()=>x(this,null,function*(){try{const n=yield U();n.data&&(l.value=n.data)}catch(n){N.error("\u9875\u9762\u6570\u636E\u8BF7\u6C42\u5F02\u5E38")}}),f=(n,w)=>x(this,null,function*(){if(n==="preview")i.push({name:"PageView",params:{index:w.id}});else if(n==="delete")try{yield q(w.id),yield _()}catch(r){console.log((r==null?void 0:r.message)||r),N.error("\u5220\u9664\u5931\u8D25")}}),o=()=>{if(s.value)return!1;s.value=!0,i.push({name:"Create"})},g=n=>{if(s.value)return!1;s.value=!0,i.push({name:"Editor",params:{index:n.id}})},y=n=>{i.push({name:"PageView",params:{index:n.id}})},k=n=>n||re;return(n,w)=>(T(),S("div",de,[v(p(D),null,{default:d(()=>[v(p(O),{type:"primary",loading:s.value,onClick:o},{default:d(()=>[ue]),_:1},8,["loading"])]),_:1}),(T(!0),S(K,null,W(l.value,r=>(T(),S("div",{class:"card",key:r.id},[(T(),Y(p(D),{key:r.id,hoverable:""},{header:d(()=>[v(p(oe),{style:{"max-width":"8rem"}},{default:d(()=>[A(ee(r.name),1)]),_:2},1024)]),action:d(()=>[P("div",fe,[v(p(M),{trigger:"hover"},{trigger:d(()=>[v(p(O),{quaternary:"",onClick:m=>g(r)},{icon:d(()=>[v(p(I),{name:"editor"})]),_:2},1032,["onClick"])]),default:d(()=>[ge]),_:2},1024),v(p(te),{trigger:"hover",onSelect:m=>f(m,r),options:u},{default:d(()=>[v(p(I),{name:"setting"})]),_:2},1032,["onSelect"])])]),default:d(()=>[P("img",{src:k(r.thumbnail),class:"image",onClick:m=>y(r),alt:""},null,8,pe)]),_:2},1024))]))),128))]))}});const Ce=se(me,[["__scopeId","data-v-271ddeb3"]]);export{Ce as default};
