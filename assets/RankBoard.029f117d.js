var k=(r,_,c)=>new Promise((e,v)=>{var p=s=>{try{i(c.next(s))}catch(u){v(u)}},f=s=>{try{i(c.throw(s))}catch(u){v(u)}},i=s=>s.done?e(s.value):Promise.resolve(s.value).then(p,f);i((c=c.apply(r,_)).next())});import{_ as M,d as z,B as t,c as F,u as G,E as A,S as T,o as g,b as C,F as L,r as N,K as n,L as b,f as U,a as $,A as K,T as O,U as P}from"./index.e04c72e0.js";import{u as W}from"./useProp.afe31ed3.js";import{h as j}from"./index.bba27490.js";const q=r=>(O("data-v-6efc1d11"),r=r(),P(),r),J={class:"ranking-info"},Q={class:"rank"},X={class:"info-name"},Y={class:"ranking-value"},Z={class:"ranking-column"},aa=q(()=>n("div",{class:"shine"},null,-1)),ea=[aa],oa=z({__name:"RankBoard",props:{component:null},setup(r){const _=r;K(o=>({e5d718f6:f.value,"4a242ea2":u.value,"68417a24":i.value,"445d6dc7":s.value,a53e30e0:D.value,"0555e7da":V.value,c0ce41b6:p.value,e6fa776c:$(R),"7db4a315":w.value,daa1081a:B.value,c2d39dfa:h.value}));const c=(o,l,a)=>{if(o==="bar")switch(l){case"barHeight":p.value=`${a}px`;break;case"borderRadius":B.value=`${a}px`;break;case"color1":h.value=a;break;case"color2":S.value=a;break}else if(o==="line")switch(l){case"lineHeight":D.value=`${a}px`;break;case"borderGap":w.value=`${a}px`;break;case"lineColor":V.value=a;break}else if(o==="text")switch(l){case"fontSize":f.value=`${a}px`;break;case"labelColor":i.value=a;break;case"valueColor":s.value=a;break;case"rankColor":u.value=a;break}o==="data"&&l==="unit"&&(v.value=a)},{propValue:e}=W(_.component,c),v=t(e.data.unit),p=t(`${e.bar.barHeight}px`),f=t(`${e.text.fontSize}px`),i=t(e.text.labelColor||"#fff"),s=t(e.text.valueColor||"#fff"),u=t(e.text.rankColor||"#fff"),h=t(e.bar.color1||"#3DE7C9"),S=t(e.bar.color2||"#00BAFF"),B=t(`${e.bar.borderRadius}px`),D=t(`${e.line.lineHeight}px`),w=t(`${e.line.borderGap}px`),V=t(e.line.lineColor||"#3DE7C9"),R=F(()=>`linear-gradient(to right, ${h.value}, ${S.value})`);let d;const I=G(),m=t([]),E=F(()=>e.data.maxValue?e.data.maxValue:Math.max(...m.value.map(o=>o.value))),H=o=>{o.sort((l,a)=>a.value-l.value),m.value=o},y=()=>k(this,null,function*(){if(console.log(),e.data.url)try{const o=yield j.post({url:e.data.url});o.status===200&&H(o.data)}catch(o){if(console.log(o.message||o),I.isEditMode){const a=["\u79E6","\u9F50","\u695A","\u8D75","\u71D5","\u97E9","\u9B4F"].map(x=>({label:x,value:Math.round(Math.random()*(e.data.maxValue||100))}));H(a)}}console.log("update Data")});return A(()=>k(this,null,function*(){yield y(),d&&clearTimeout(d),d=setInterval(y,e.data.interval||1e5),console.log(d)})),T(()=>{d&&clearTimeout(d)}),(o,l)=>(g(),C("div",{class:"dv-scroll-ranking-board",ref:t},[(g(!0),C(L,null,N(m.value,(a,x)=>(g(),C("div",{class:"row-item",key:a.label},[n("div",J,[n("div",Q,"No."+b(x+1),1),n("div",X,b(a.label),1),n("div",Y,b(a.value)+" "+b(v.value),1)]),n("div",Z,[n("div",{class:"inside-column",style:U({width:`${$(E)?a.value*100/$(E):100}%`})},ea,4)])]))),128))]))}});var na=M(oa,[["__scopeId","data-v-6efc1d11"]]);export{na as default};
