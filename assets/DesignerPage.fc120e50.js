var mt=Object.defineProperty,pt=Object.defineProperties;var vt=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable;var je=(t,a,e)=>a in t?mt(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,fe=(t,a)=>{for(var e in a||(a={}))ft.call(a,e)&&je(t,e,a[e]);if(Me)for(var e of Me(a))_t.call(a,e)&&je(t,e,a[e]);return t},xe=(t,a)=>pt(t,vt(a));var ee=(t,a,e)=>new Promise((l,p)=>{var i=u=>{try{d(e.next(u))}catch(o){p(o)}},_=u=>{try{d(e.throw(u))}catch(o){p(o)}},d=u=>u.done?l(u.value):Promise.resolve(u.value).then(i,_);d((e=e.apply(t,a)).next())});import{d as L,r as F,e as De,k as z,a5 as ve,u as P,v as le,O as h,X as I,Y as T,Z as he,R as de,G as n,B as G,w as pe,c,F as q,_ as ue,P as S,a2 as Ne,a8 as ht,y as Ue,Q as v,W as gt,$ as Se,U as be,a3 as Fe,a as ke,a0 as yt,a1 as bt,m as oe}from"./@vue.a2815691.js";import{_ as H,n as ae,u as te,b as we,o as Te,E as Xe,f as Oe,l as Be,q as Ct,m as ie,t as xt,v as St,w as wt,x as ce,y as et,I as re,e as Dt,F as J,G as Ae,z as Ft,A as tt}from"./index.2ad55fca.js";import{u as nt,a as at,S as kt}from"./Shape.34938300.js";import{u as Et,a as lt}from"./vue-router.c997c3e8.js";import{u as Bt,s as It,g as $t}from"./pages.b0177fe4.js";import{A as ot,B as ut,C as Y,h as ne,g as Nt,D as Ee,E as X,F as me,f as Ve,G as Lt,H as Tt,I as At,J as _e,K as Ie,k as ge,L as ye,M as st,O as ze,P as zt,Q as Rt,i as it,R as $e,S as Pe,v as Ut,t as He,y as Le,w as Vt}from"./naive-ui.3474528c.js";import{l as We}from"./lodash.f91bfcd2.js";import{d as Re,c as ct}from"./lodash-es.5f1bdab1.js";import"./pinia.6e1173f7.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./dexie.78e6a997.js";import"./nprogress.5b68415b.js";import"./axios.744bc20e.js";import"./@icon-park.b1426ebe.js";import"./date-fns.3c009aaa.js";import"./seemly.50a99b79.js";import"./vueuc.e50d3fb2.js";import"./evtd.9eee5233.js";import"./@css-render.8efa119b.js";import"./vooks.5c35c0ee.js";import"./vdirs.9c42edfb.js";import"./@juggle.37ed2144.js";import"./css-render.d5050412.js";import"./@emotion.6322e2ae.js";import"./treemate.80cdf2c2.js";import"./date-fns-tz.851ed5df.js";import"./async-validator.fb49d0f5.js";import"./index.44682809.js";const Pt={class:"value"},Mt=L({__name:"RulerLine",props:{scale:null,thick:null,palette:null,index:null,start:null,vertical:{type:Boolean},value:null,isShowReferLine:{type:Boolean}},emits:["onMouseDown","onRelease","onRemove"],setup(t,{emit:a}){const e=t,l=F(0),p=F(!0);De(()=>{l.value=e.value});const i=r=>{p.value=r>=0},_=z(()=>{const r=(l.value-e.start)*e.scale;i(r);const f=r+"px";return e.vertical?{top:f}:{left:f}}),d=z(()=>{var C,y;const r=`1px ${((C=e.palette)==null?void 0:C.lineBoardStyle)||"dashed"} ${(y=e.palette)==null?void 0:y.lineColor}`,f=e.vertical?{borderTop:r}:{borderLeft:r},b=e.isShowReferLine?e.vertical?"ns-resize":"ew-resize":"none";return fe({cursor:b},f)}),u=z(()=>e.vertical?{left:e.thick+"px"}:{top:e.thick+"px"}),o=r=>{r.stopPropagation();const f=e.vertical?r.clientY:r.clientX,b=l.value;a("onMouseDown");const C=B=>{const k=e.vertical?B.clientY:B.clientX,M=Math.round(b+(k-f)/e.scale);l.value=M},y=()=>{a("onRelease",l.value,e.index),document.removeEventListener("mousemove",C,!0),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",C,!0),document.addEventListener("mouseup",y)},m=()=>{a("onRemove",e.index)},s=()=>[{text:"\u5220\u9664",subText:"",handler:()=>m()}];return(r,f)=>{const b=ve("contextmenu");return P((h(),I("div",{class:"line",style:de([n(_),n(d)]),onMousedown:o},[T("div",{class:"action",style:de(n(u))},[T("span",Pt,he(l.value),1)],4)],36)),[[le,p.value],[b,s]])}}});var jt=H(Mt,[["__scopeId","data-v-9030b9ae"]]);const Xt=t=>t<=.25?40:t<=.5?20:t<=1?10:t<=2?5:t<=4?2:1,Ye=.83,Ot=(t,a,e,l,p,i)=>{const{scale:_,width:d,height:u,ratio:o,palette:m}=p,{bgColor:s,fontColor:r,shadowColor:f,longfgColor:b,shortfgColor:C}=m;if(t.scale(o,o),t.clearRect(0,0,d,u),t.fillStyle=s,t.fillRect(0,0,d,u),l){const N=(e-a)*_,A=l*_;t.fillStyle=f,i?t.fillRect(N,0,A,u*3/8):t.fillRect(0,N,d*3/8,A)}const y=Xt(_),B=y*_,k=y*10,M=k*_,U=Math.floor(a/y)*y,W=Math.floor(a/k)*k,O=(U-a)/y*B,g=(W-a)/k*M,$=a+Math.ceil((i?d:u)/_);t.beginPath(),t.fillStyle=r,t.strokeStyle=b;for(let N=W,A=0;N<$;N+=k,A++){const D=g+A*M+.5;i?t.moveTo(D,0):t.moveTo(0,D),t.save(),i?t.translate(D,u*.4):t.translate(d*.4,D),i||t.rotate(-Math.PI/2),t.scale(Ye/o,Ye/o),t.fillText(N.toString(),4*o,7*o),t.restore(),i?t.lineTo(D,u*9/16):t.lineTo(d*9/16,D)}t.stroke(),t.closePath(),t.beginPath(),t.strokeStyle=C;for(let N=U,A=0;N<$;N+=y,A++){const D=O+A*B+.5;i?t.moveTo(D,0):t.moveTo(0,D),N%k!==0&&(i?t.lineTo(D,u*1/4):t.lineTo(d*1/4,D))}t.stroke(),t.closePath(),t.setTransform(1,0,0,1,0,0)},Ht=L({__name:"index",props:{showIndicator:{type:Boolean},valueNum:null,scale:null,ratio:null,palette:null,vertical:{type:Boolean},start:null,width:null,height:null,selectStart:null,selectLength:null},emits:["onAddLine","update:showIndicator","update:valueNum"],setup(t,{emit:a}){const e=t,l=G({canvasContext:null});let p=1;const i=F(null);De(()=>{p=e.ratio||window.devicePixelRatio||1,_(),d(p),u(p)});const _=()=>{l.canvasContext=i.value&&i.value.getContext("2d")},d=m=>{if(i.value){i.value.width=e.width*m,i.value.height=e.height*m;const s=l.canvasContext;s&&(s.font=`${12*m}px -apple-system,
                "Helvetica Neue", ".SFNSText-Regular",
                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",
                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif`,s.lineWidth=1,s.textBaseline="middle")}},u=m=>{const s={scale:e.scale,width:e.width,height:e.height,palette:e.palette,ratio:m};l.canvasContext&&Ot(l.canvasContext,e.start,e.selectStart,e.selectLength,s,!e.vertical)};pe(()=>e.start,()=>u(p)),pe([()=>e.width,()=>e.height],()=>{d(p),u(p)});const o=(m,s)=>{const r=(C,y,B)=>Math.round(y+C/B),f=e.vertical?m.offsetY:m.offsetX,b=r(f,e.start,e.scale);switch(s){case"click":a("onAddLine",b);break;case"enter":a("update:valueNum",b),a("update:showIndicator",!0);break;default:a("update:valueNum",b);break}};return(m,s)=>(h(),I("canvas",{ref_key:"canvas",ref:i,class:"ruler",onClick:s[0]||(s[0]=r=>o(r,"click")),onMouseenter:s[1]||(s[1]=r=>o(r,"enter")),onMousemove:s[2]||(s[2]=r=>o(r,"move")),onMouseleave:s[3]||(s[3]=r=>m.$emit("update:showIndicator",!1))},null,544))}});const Wt={class:"lines"},Yt={class:"value"},Gt=L({__name:"RulerWrapper",props:{scale:null,ratio:null,thick:null,selectStart:null,selectLength:null,isShowReferLine:{type:Boolean},palette:null,vertical:{type:Boolean,default:!0},width:{default:200},height:{default:200},start:{default:0}},setup(t,{expose:a}){const e=t,l=F(!1),p=F(0),i=F([]),_=z(()=>e.vertical?"v-container":"h-container");a({clearLines:()=>{i.value=[]}});const u=z(()=>{const f={width:`calc(100% - ${e.thick}px)`,height:`${e.thick+1}px`,left:`${e.start}px`},b={width:`${e.thick&&e.thick+1}px`,height:`calc(100% - ${e.thick}px)`,top:`${e.start}px`};return e.vertical?b:f}),o=z(()=>{var y,B;const f=(p.value-(e.start||0))*e.scale;let b="top",C="borderLeft";return b=e.vertical?"top":"left",C=e.vertical?"borderBottom":"borderLeft",{[b]:f+"px",[C]:`1px ${((y=e.palette)==null?void 0:y.lineBoardStyle)||"dashed"} ${(B=e.palette)==null?void 0:B.lineColor}`}}),m=f=>{i.value.push(f)},s=(f,b)=>{const C=f-(e.start||0),y=(e.vertical?e.height||200:e.width||200)/e.scale;C<0||C>y?r(b):i.value[b]=f},r=f=>{i.value.splice(f,1)};return(f,b)=>(h(),I("div",{class:Ne(n(_)),style:de(n(u))},[c(Ht,{vertical:t.vertical,scale:t.scale,width:t.width,height:t.height,start:t.start,ratio:t.ratio,"select-start":t.selectStart,"select-length":t.selectLength,palette:t.palette,valueNum:p.value,"onUpdate:valueNum":b[0]||(b[0]=C=>p.value=C),showIndicator:l.value,"onUpdate:showIndicator":b[1]||(b[1]=C=>l.value=C),onOnAddLine:m},null,8,["vertical","scale","width","height","start","ratio","select-start","select-length","palette","valueNum","showIndicator"]),P(T("div",Wt,[(h(!0),I(q,null,ue(i.value,(C,y)=>(h(),S(jt,{key:C+y,index:y,value:C>>0,scale:t.scale,start:t.start,thick:t.thick,palette:t.palette,vertical:t.vertical,"is-show-refer-line":t.isShowReferLine,onOnRemove:r,onOnRelease:s},null,8,["index","value","scale","start","thick","palette","vertical","is-show-refer-line"]))),128))],512),[[le,t.isShowReferLine]]),P(T("div",{class:"indicator",style:de(n(o))},[T("div",Yt,he(p.value),1)],4),[[le,l.value]])],6))}});var Ge=H(Gt,[["__scopeId","data-v-5a545815"]]);const qt={id:"mb-ruler",class:"style-ruler mb-ruler"},Kt=L({__name:"Index",props:{scale:{default:1},ratio:{default:0},thick:{default:16},palette:null,startX:null,startY:null,width:{default:200},height:{default:200},shadow:null},setup(t){const a=t,e=F(null),l=F(null),p=F(!0),i=()=>{var u,o;(u=e.value)==null||u.clearLines(),(o=l.value)==null||o.clearLines(),p.value=!0},_=()=>[{text:"\u663E\u793A\u8F85\u52A9\u7EBF",subText:"",disable:p.value,handler:()=>p.value=!0},{text:"\u9690\u85CF\u8F85\u52A9\u7EBF",subText:"",disable:!p.value,handler:()=>p.value=!1},{text:"\u6E05\u7A7A\u8F85\u52A9\u7EBF",subText:"",disable:!p.value,handler:i}],d=z(()=>{function u(o,m){return Object.keys(o).forEach(s=>{s&&o.hasOwnProperty(s)&&(typeof m.key=="object"?o[s]=u(o[s],m[s]):m.hasOwnProperty(s)&&(o[s]=m[s]))}),o}return u({bgColor:"rgba(225,225,225, 0)",longfgColor:"#BABBBC",shortfgColor:"#C8CDD0",fontColor:"#7D8694",shadowColor:"#E8E8E8",lineColor:"#37d4cf",lineBoardStyle:"dashed",borderColor:"#DADADC",cornerActiveColor:"rgb(235, 86, 72, 0.6)",menu:{bgColor:"#fff",dividerColor:"#DBDBDB",listItem:{textColor:"#415058",hoverTextColor:"#298DF8",disabledTextColor:"rgba(65, 80, 88, 0.4)",bgColor:"#fff",hoverBgColor:"#F2F2F2"}}},a.palette||{})});return(u,o)=>{var s,r,f,b;const m=ve("contextmenu");return P((h(),I("div",qt,[c(Ge,{vertical:!1,ref_key:"HRulerWrapperref",ref:l,width:t.width,height:16,"is-show-refer-line":p.value,thick:t.thick,ratio:t.ratio,start:t.startX,"select-start":((s=t.shadow)==null?void 0:s.x)||0,"select-length":((r=t.shadow)==null?void 0:r.width)||0,scale:t.scale,palette:n(d)},null,8,["width","is-show-refer-line","thick","ratio","start","select-start","select-length","scale","palette"]),c(Ge,{vertical:!0,ref_key:"VRulerWrapperref",ref:e,width:16,height:t.height,"is-show-refer-line":p.value,thick:t.thick,ratio:t.ratio,start:t.startY,"select-start":((f=t.shadow)==null?void 0:f.y)||0,"select-length":((b=t.shadow)==null?void 0:b.height)||0,scale:t.scale,palette:n(d)},null,8,["height","is-show-refer-line","thick","ratio","start","select-start","select-length","scale","palette"])])),[[m,_]])}}}),Jt=L({__name:"Ruler",props:{width:null,height:null,startX:null,startY:null},setup(t){return(a,e)=>(h(),S(n(Kt),{thick:16,scale:1,width:t.width,height:t.height,startX:t.startX,startY:t.startY},null,8,["width","height","startX","startY"]))}});const Qt=L({__name:"Area",props:{start:null,width:null,height:null},setup(t){const a=nt(),e=()=>{a.compose(),ae.emit("hideArea")},l=()=>{a.flushLeft(),ae.emit("hideArea")},p=()=>{a.flushRight(),ae.emit("hideArea")},i=()=>{a.flushTop(),ae.emit("hideArea")},_=()=>{a.flushBottom(),ae.emit("hideArea")},d=()=>{a.flushRow(),ae.emit("hideArea")},u=()=>{a.flushColumn(),ae.emit("hideArea")},o=()=>{a.batchDeleteComponent(a.components),ae.emit("hideArea")},m=()=>[{text:"\u7EC4\u5408",subText:"",disable:!a.canCompose,handler:e},{divider:!0},{text:"\u5220\u9664",subText:"",disable:a.components.length<=0,handler:o},{divider:!0},{text:"\u5DE6\u5BF9\u9F50",subText:"",handler:l},{text:"\u53F3\u5BF9\u9F50",subText:"",handler:p},{text:"\u9876\u5BF9\u9F50",subText:"",handler:i},{text:"\u5E95\u5BF9\u9F50",subText:"",handler:_},{divider:!0},{text:"\u6C34\u5E73\u5BF9\u9F50",subText:"",handler:d},{text:"\u5782\u76F4\u5BF9\u9F50",subText:"",handler:u}];return(s,r)=>{const f=ve("contextmenu");return P((h(),I("div",{style:de({left:t.start.x+"px",top:t.start.y+"px",width:t.width+"px",height:t.height+"px"}),class:"area"},null,4)),[[f,m]])}}});var qe=H(Qt,[["__scopeId","data-v-37e75a17"]]);const Zt={},en={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},tn=ht('<defs data-v-c1eb8d14><pattern id="smallGrid" width="7.236328125" height="7.236328125" patternUnits="userSpaceOnUse" data-v-c1eb8d14><path d="M 7.236328125 0 L 0 0 0 7.236328125" fill="none" stroke="rgba(207, 207, 207, 0.3)" stroke-width="1" data-v-c1eb8d14></path></pattern><pattern id="grid" width="36.181640625" height="36.181640625" patternUnits="userSpaceOnUse" data-v-c1eb8d14><rect width="36.181640625" height="36.181640625" fill="url(#smallGrid)" data-v-c1eb8d14></rect><path d="M 36.181640625 0 L 0 0 0 36.181640625" fill="none" stroke="rgba(186, 186, 186, 0.5)" stroke-width="1" data-v-c1eb8d14></path></pattern></defs><rect width="100%" height="100%" fill="url(#grid)" data-v-c1eb8d14></rect>',2),nn=[tn];function an(t,a){return h(),I("svg",en,nn)}var ln=H(Zt,[["render",an],["__scopeId","data-v-c1eb8d14"]]);const on={class:"mark-line"},un=L({__name:"MarkLine",setup(t){const a=te(),e=F([]),l=G(["xt","xc","xb","yl","yc","yr"]),p=F(3),i=G({xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}),_=r=>{e.value.push(r)},d=()=>{Object.keys(i).forEach(r=>{i[r]=!1})};we("move",r=>{u(r.isDownward,r.isRightward)}),we("unmove",()=>{d()});const u=(r,f)=>{const b=a.componentData;if(a.curComponent){const{top:C,left:y,right:B,bottom:k}=Te(a.curComponent.style),M=(B-y)/2,U=(k-C)/2;d(),b.forEach(W=>{if(W==a.curComponent)return;const O=Te(W.style),{top:g,left:$,bottom:N,right:A}=O,D=(A-$)/2,x=(N-g)/2,w={top:[{isNearly:o(C,g),lineNode:e.value[0],line:"xt",dragShift:g,lineShift:g},{isNearly:o(k,g),lineNode:e.value[0],line:"xt",dragShift:g-(k-C||0),lineShift:g},{isNearly:o((C||0)+U,g+x),lineNode:e.value[1],line:"xc",dragShift:g+x-U,lineShift:g+x},{isNearly:o(C,N),lineNode:e.value[2],line:"xb",dragShift:N,lineShift:N},{isNearly:o(k,N),lineNode:e.value[2],line:"xb",dragShift:N-(k-C||0),lineShift:N}],left:[{isNearly:o(y,$),lineNode:e.value[3],line:"yl",dragShift:$,lineShift:$},{isNearly:o(B,$),lineNode:e.value[3],line:"yl",dragShift:$-(B-y||0),lineShift:$},{isNearly:o((y||0)+M,$+D),lineNode:e.value[4],line:"yc",dragShift:$+D-M,lineShift:$+D},{isNearly:o(y,A),lineNode:e.value[5],line:"yr",dragShift:A,lineShift:A},{isNearly:o(B,A),lineNode:e.value[5],line:"yr",dragShift:A-(B-y||0),lineShift:A}]},E=[],{rotate:V}=a.curComponent.style;Object.keys(w).forEach(R=>{w[R].forEach(K=>{if(!K.isNearly)return;const j=V!=0?m(R,K,{width:B-y,height:k-C}):K.dragShift;a.setComponentSingleStyle({key:R,value:j}),K.lineNode.style[R]=`${K.lineShift}px`,E.push(K.line)})}),E.length&&s(E,r,f)})}},o=(r,f)=>Math.abs(r-f)<=p.value,m=(r,f,b)=>{const{width:C,height:y}=a.curComponent.style;return r=="top"?Math.round(f.dragShift-(y-b.height)/2):Math.round(f.dragShift-(C-b.width)/2)},s=(r,f,b)=>{b?r.includes("yr")?i.yr=!0:r.includes("yc")?i.yc=!0:r.includes("yl")&&(i.yl=!0):r.includes("yl")?i.yl=!0:r.includes("yc")?i.yc=!0:r.includes("yr")&&(i.yr=!0),f?r.includes("xb")?i.xb=!0:r.includes("xc")?i.xc=!0:r.includes("xt")&&(i.xt=!0):r.includes("xt")?i.xt=!0:r.includes("xc")?i.xc=!0:r.includes("xb")&&(i.xb=!0)};return(r,f)=>(h(),I("div",on,[(h(!0),I(q,null,ue(l,b=>P((h(),I("div",{key:b,class:Ne(["line",b.includes("x")?"xline":"yline"]),ref_for:!0,ref:_},null,2)),[[le,i[b]||!1]])),128))]))}});var sn=H(un,[["__scopeId","data-v-b4937e88"]]);const cn=L({__name:"Index",setup(t){const a=te(),e=nt(),l=at(),p=D=>Oe(D,["top","left","width","height","rotate"]),i=z(()=>e.style.width>0&&!g.value),_=z(()=>({x:e.style.left,y:e.style.top})),d=z(()=>e.style.width),u=z(()=>e.style.height),o=()=>{g.value=!1,W.value=0,O.value=0,e.setAreaData({left:0,top:0,width:0,height:0,rotate:0},[])},m=()=>{a.clearCanvas()},s=(D,x)=>{const w=document.querySelector("#editor").getBoundingClientRect(),E=x.pageY-w.top,V=x.pageX-w.left;l.paste(!0,V,E)},r=()=>[{text:"\u7C98\u8D34",subText:"Ctrl + V",handler:s},{text:"\u6E05\u7A7A\u753B\u5E03",subText:"",handler:m}];we("hideArea",o),De(()=>{console.log("\u8FDB\u5165\u7F16\u8F91\u6A21\u5F0F"),a.setEditMode(Xe.EDIT),document.addEventListener("paste",B)}),Ue(()=>{console.log("\u8FDB\u5165\u9884\u89C8\u6A21\u5F0F"),a.setEditMode(Xe.PREVIEW),document.removeEventListener("paste",B),a.clearCanvas()});const f=z(()=>a.componentData),b=z(()=>a.canvasStyleData),C=z(()=>a.curComponent),y=z(()=>{const D=xe(fe({},b.value),{backgroundImage:b.value.image,backgroundSize:"cover"});return Oe(D,["width","height","backgroundImage","backgroundSize"])}),B=D=>{if(D.clipboardData){const x=D.clipboardData.getData("text");try{const w=JSON.parse(x);"component"in w&&(w.style.top=w.style.top+10,w.style.left=w.style.left+10,Be(JSON.stringify(w)),D.preventDefault(),a.appendComponent(w))}catch(w){console.log(w)}}},k=F(0),M=F(0),U=G({x:0,y:0}),W=F(0),O=F(0),g=F(!1),$=F(null),N=D=>{var x;if(D.button===0){a.setCurComponent(void 0,void 0),D.preventDefault(),D.stopPropagation(),o();const w=(x=$.value)==null?void 0:x.getBoundingClientRect();k.value=w.x,M.value=w.y;const E=D.clientX,V=D.clientY;U.x=E-k.value,U.y=V-M.value,g.value=!0;const R=j=>{j.preventDefault(),j.stopPropagation(),W.value=Math.abs(j.clientX-E),O.value=Math.abs(j.clientY-V),j.clientX<E&&(U.x=j.clientX-k.value),j.clientY<V&&(U.y=j.clientY-M.value)},K=j=>{if(document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",K),j.clientX==E&&j.clientY==V){o();return}const Q={left:U.x,top:U.y,right:W.value+U.x,bottom:U.y+O.value},Ce=A(Q);if(Ce){const Z=Ce.rect;e.setAreaData({top:Z.top,left:Z.left,width:Z.right-Z.left,height:Z.bottom-Z.top,rotate:0},Ce.components),U.x=Z.left,U.y=Z.top,W.value=Z.right-Z.left,O.value=Z.bottom-Z.top}else o()};document.addEventListener("mousemove",R),document.addEventListener("mouseup",K)}},A=D=>{const x=[],w=new Set,E=new Set,V=new Set,R=new Set;if(a.componentData.forEach(K=>{const j=K.style,Q=Te(j);Q.left>=D.left&&Q.right<=D.right&&Q.top>=D.top&&Q.bottom<=D.bottom&&(x.push(K),w.add(Q.left),E.add(Q.top),V.add(Q.right),R.add(Q.bottom))}),x.length>0){const K=Math.min(...w),j=Math.max(...V),Q=Math.min(...E),Ce=Math.max(...R);return{components:x,rect:{left:K,right:j,top:Q,bottom:Ce}}}};return(D,x)=>{const w=ve("contextmenu");return P((h(),I("div",{class:"editor edit",ref_key:"editor",ref:$,id:"editor",style:de(n(y)),onMousedown:N},[c(ln),c(Jt,{width:n(b).width,height:n(b).height,startY:0,startX:0},null,8,["width","height"]),(h(!0),I(q,null,ue(n(f),(E,V)=>(h(),I(q,{key:E.id},[n(a).isEditMode&&E.display?(h(),S(kt,{key:0,id:"shape"+E.id,defaultStyle:E.style,style:de(p(E.style)),active:E.id===(n(C)||{}).id,info:E,index:V.toString(),class:Ne({lock:E.isLock})},{default:v(()=>[(h(),S(gt(E.component),{class:"component",style:de(n(Ct)(E)),propValue:E.propValue,componentId:E.id,id:"component"+E.id,index:V.toString(),subComponents:E.subComponents},null,8,["style","propValue","componentId","id","index","subComponents"]))]),_:2},1032,["id","defaultStyle","style","active","info","index","class"])):Se("",!0)],64))),128)),c(sn),g.value?(h(),S(qe,{key:0,start:U,width:W.value,height:O.value},null,8,["start","width","height"])):n(i)?(h(),S(qe,{key:1,start:n(_),width:n(d),height:n(u)},null,8,["start","width","height"])):Se("",!0)],36)),[[w,r]])}}});var rn=H(cn,[["__scopeId","data-v-4418a97f"]]);const dn="2946854",mn="\u65B9\u5411",pn="iconfont",vn="icon-",fn="",_n=[{icon_id:"11291350",name:"\u7EC4",font_class:"zu",unicode:"e854",unicode_decimal:59476},{icon_id:"1817751",name:"\u67F1\u5F62\u56FE",font_class:"zhuxingtu",unicode:"e626",unicode_decimal:58918},{icon_id:"3868284",name:"\u4EEA\u8868\u76D8",font_class:"yibiaopan",unicode:"eb67",unicode_decimal:60263},{icon_id:"4354243",name:"\u56FE\u8868-\u997C\u56FE",font_class:"tubiao-bingtu",unicode:"eb95",unicode_decimal:60309},{icon_id:"4354246",name:"\u56FE\u8868-\u5361\u7247",font_class:"tubiao-qiapian",unicode:"eb96",unicode_decimal:60310},{icon_id:"4354248",name:"\u56FE\u8868-\u6298\u7EBF\u56FE",font_class:"tubiao-zhexiantu",unicode:"eb97",unicode_decimal:60311},{icon_id:"4906240",name:"\u6309\u94AE\u7EC4",font_class:"anniuzu",unicode:"e782",unicode_decimal:59266},{icon_id:"5383645",name:"\u5BFC\u822A",font_class:"daohang",unicode:"e77d",unicode_decimal:59261},{icon_id:"5961366",name:"\u5217\u8868",font_class:"liebiao",unicode:"ec6b",unicode_decimal:60523},{icon_id:"5971297",name:"\u91C7\u7164\u673A",font_class:"caimeiji",unicode:"e603",unicode_decimal:58883},{icon_id:"7040619",name:"\u5176\u4ED6",font_class:"qita",unicode:"e63b",unicode_decimal:58939},{icon_id:"7556180",name:"\u5B9A\u5236",font_class:"dingzhi",unicode:"e609",unicode_decimal:58889},{icon_id:"9752796",name:"\u57FA\u7840",font_class:"jichu",unicode:"e60f",unicode_decimal:58895},{icon_id:"9921108",name:"chart",font_class:"chartt",unicode:"e60a",unicode_decimal:58890},{icon_id:"14475731",name:"\u88C5\u9970\u88C5\u4FEE",font_class:"zhuangshizhuangxiu",unicode:"e6a6",unicode_decimal:59046},{icon_id:"16562592",name:"\u6E29\u5EA6\u8BA1",font_class:"wenduji",unicode:"e6de",unicode_decimal:59102},{icon_id:"22712019",name:"\u6761\u5F62\u8FDB\u5EA6\u56FE",font_class:"tiaoxingjindutu",unicode:"e66b",unicode_decimal:58987},{icon_id:"22761375",name:"\u8FB9\u6846",font_class:"biankuang",unicode:"e6b7",unicode_decimal:59063},{icon_id:"22885432",name:"\u8FDB\u5EA6\u56FE",font_class:"jindutu",unicode:"f24b",unicode_decimal:62027},{icon_id:"124495",name:"\u8B66\u544A",font_class:"jinggao1",unicode:"e601",unicode_decimal:58881},{icon_id:"1846445",name:"\u9884\u8B66\u706F",font_class:"yujingdeng",unicode:"e67f",unicode_decimal:59007},{icon_id:"2239579",name:"\u81EA\u52A8\u7CFB\u7EDF\u8B66\u544A\u706F",font_class:"zidongxitongjinggaodeng1",unicode:"e605",unicode_decimal:58885},{icon_id:"4988542",name:"\u9884\u8B66",font_class:"yujing1",unicode:"e644",unicode_decimal:58948},{icon_id:"9974390",name:"\u9884\u8B66",font_class:"yujing3",unicode:"e6fe",unicode_decimal:59134},{icon_id:"10817515",name:"\u8B66\u544A\u706F",font_class:"jinggaodeng",unicode:"e64b",unicode_decimal:58955},{icon_id:"14151833",name:"\u62A5\u8B66",font_class:"baojing1",unicode:"e630",unicode_decimal:58928},{icon_id:"16965399",name:"\u8B66\u544A\u706F",font_class:"hong",unicode:"e60d",unicode_decimal:58893},{icon_id:"20379044",name:"\u9884\u8B66\u706F",font_class:"yujingdeng1",unicode:"e623",unicode_decimal:58915},{icon_id:"23819336",name:"\u62A5\u8B66 \u8B66\u544A \u9884\u8B66 \u8B66\u544A\u706F",font_class:"a-baojingjinggaoyujingjinggaodeng",unicode:"e628",unicode_decimal:58920},{icon_id:"24312218",name:"light",font_class:"light",unicode:"e63a",unicode_decimal:58938},{icon_id:"24614518",name:"\u544A\u8B66\u706F",font_class:"gaojingdeng9",unicode:"e664",unicode_decimal:58980},{icon_id:"25567211",name:"\u8B66\u544A\u706F",font_class:"jinggaodeng1",unicode:"e613",unicode_decimal:58899},{icon_id:"12041083",name:"\u9884\u8B66",font_class:"yujing5",unicode:"e671",unicode_decimal:58993},{icon_id:"577357",name:"\u5220\u9664",font_class:"shanchu",unicode:"e74b",unicode_decimal:59211},{icon_id:"1986988",name:"\u5220\u9664",font_class:"shanchu1",unicode:"e625",unicode_decimal:58917},{icon_id:"12795401",name:"\u9996\u9875",font_class:"shouye",unicode:"e62d",unicode_decimal:58925},{icon_id:"201556",name:"\u67E5\u770B",font_class:"chakan",unicode:"e600",unicode_decimal:58880},{icon_id:"201638",name:"\u7F16\u8F91",font_class:"bianji",unicode:"e602",unicode_decimal:58882},{icon_id:"11729723",name:"\u590D\u5236",font_class:"fuzhi",unicode:"e608",unicode_decimal:58888},{icon_id:"7269302",name:"\u9996\u9875-\u9ED8\u8BA4",font_class:"shouye-moren",unicode:"e619",unicode_decimal:58905},{icon_id:"658044",name:"\u89E3\u9501",font_class:"jiesuo",unicode:"e669",unicode_decimal:58985},{icon_id:"10097949",name:"\u65CB\u8F6C",font_class:"xuanzhuan",unicode:"e680",unicode_decimal:59008},{icon_id:"374774",name:"\u5F00\u5173",font_class:"kaiguan",unicode:"e61f",unicode_decimal:58911},{icon_id:"122162",name:"\u65F6\u949F",font_class:"clock",unicode:"e63e",unicode_decimal:58942},{icon_id:"1242185",name:"\u53CD\u9988\u4FE1\u606F",font_class:"fankuixinxi",unicode:"e660",unicode_decimal:58976},{icon_id:"2468505",name:"37\u7C7B\u5EFA\u7B51\u4FEE\u7406x16",font_class:"leijianzhuxiulix",unicode:"e695",unicode_decimal:59029},{icon_id:"11747267",name:"\u65F6\u95F4",font_class:"weibiaoti-",unicode:"e618",unicode_decimal:58904},{icon_id:"14794143",name:"sds_\u7B2C37\u7C7B \u5EFA\u7B51\u4FEE\u7406",font_class:"sds_di37leijianzhuxiuli",unicode:"e61e",unicode_decimal:58910},{icon_id:"17762035",name:"\u8054\u52A8\u63A7\u5236",font_class:"liandongkongzhi",unicode:"e624",unicode_decimal:58916},{icon_id:"18165278",name:"\u9501,\u5BC6\u7801,\u5F00\u9501,\u89E3\u9501",font_class:"unlock-full",unicode:"e882",unicode_decimal:59522},{icon_id:"288554",name:"ascend",font_class:"ascend",unicode:"e6b4",unicode_decimal:59060},{icon_id:"288556",name:"falling",font_class:"falling",unicode:"e6b6",unicode_decimal:59062},{icon_id:"815867",name:"\u6309\u94AE-\u5173",font_class:"buttonoff",unicode:"e614",unicode_decimal:58900},{icon_id:"815872",name:"\u6309\u94AE-\u5F00",font_class:"buttonon",unicode:"e615",unicode_decimal:58901},{icon_id:"2674878",name:"\u7BAD\u5934 \u4E0A",font_class:"jiantoushang",unicode:"e62c",unicode_decimal:58924},{icon_id:"2674928",name:"\u7BAD\u5934 \u53F3",font_class:"jiantouyou",unicode:"e632",unicode_decimal:58930},{icon_id:"2674929",name:"\u7BAD\u5934 \u4E0B",font_class:"jiantouxia",unicode:"e633",unicode_decimal:58931},{icon_id:"7594038",name:"24gl-next",font_class:"24gl-next",unicode:"ea6b",unicode_decimal:60011},{icon_id:"7594046",name:"24gl-pauseCircle",font_class:"24gl-pauseCircle",unicode:"ea6f",unicode_decimal:60015},{icon_id:"7594068",name:"24gl-previous",font_class:"24gl-previous",unicode:"ea73",unicode_decimal:60019},{icon_id:"7594086",name:"24gl-stopCircle",font_class:"24gl-stopCircle",unicode:"ea79",unicode_decimal:60025},{icon_id:"10268256",name:"\u6309\u94AE_\u5F00\u542F",font_class:"anniu_kaiqi",unicode:"e659",unicode_decimal:58969},{icon_id:"10268257",name:"\u6309\u94AE_\u5173\u95ED",font_class:"anniu_guanbi",unicode:"e65b",unicode_decimal:58971},{icon_id:"25807963",name:"\u7BAD\u5934 \u4E0A",font_class:"jiantoushangzuo-copy",unicode:"ec63",unicode_decimal:60515},{icon_id:"25808146",name:"\u5411\u53F32",font_class:"xiangzuo2-copy",unicode:"ec64",unicode_decimal:60516},{icon_id:"166602",name:"\u5173\u95ED\u64AD\u653E",font_class:"guanbibofang",unicode:"e61d",unicode_decimal:58909},{icon_id:"577396",name:"\u5411\u4E0A3",font_class:"xiangshang3",unicode:"e76f",unicode_decimal:59247},{icon_id:"577401",name:"\u5411\u4E0B5",font_class:"xiangxia5",unicode:"e774",unicode_decimal:59252},{icon_id:"577403",name:"\u5411\u53F32",font_class:"xiangyou2",unicode:"e776",unicode_decimal:59254},{icon_id:"1159910",name:"\u53F3\u64AD\u653E",font_class:"youbofang",unicode:"e62e",unicode_decimal:58926},{icon_id:"1159911",name:"\u5DE6\u64AD\u653E",font_class:"zuobofang",unicode:"e62f",unicode_decimal:58927},{icon_id:"1185945",name:"\u64AD\u653E",font_class:"bofang2",unicode:"e606",unicode_decimal:58886},{icon_id:"1488892",name:"\u64AD\u653E",font_class:"bofang5",unicode:"e607",unicode_decimal:58887},{icon_id:"1727559",name:"323\u5411\u5DE6\u4EA4\u6362",font_class:"xiangzuojiaohuan",unicode:"e8f8",unicode_decimal:59640},{icon_id:"1727561",name:"324\u5411\u53F3\u4EA4\u6362",font_class:"xiangyoujiaohuan",unicode:"e8f9",unicode_decimal:59641},{icon_id:"2076218",name:"\u64AD\u653E2",font_class:"bofang6",unicode:"e87c",unicode_decimal:59516},{icon_id:"7594051",name:"24gl-playCircle",font_class:"24gl-playCircle",unicode:"ea6e",unicode_decimal:60014},{icon_id:"11121478",name:"\u5411\u4E0A",font_class:"xiangshang7",unicode:"e63c",unicode_decimal:58940},{icon_id:"16388177",name:"\u64AD\u653E",font_class:"bofang26",unicode:"e60e",unicode_decimal:58894},{icon_id:"18176557",name:"\u64AD\u653E",font_class:"play1",unicode:"ea8d",unicode_decimal:60045},{icon_id:"24267227",name:"\u64AD\u653E-\u5FEB\u9000",font_class:"bofang-kuaitui",unicode:"e68a",unicode_decimal:59018},{icon_id:"24267260",name:"\u64AD\u653E09",font_class:"bofang09",unicode:"e690",unicode_decimal:59024},{icon_id:"24268374",name:"\u64AD\u653E-\u5FEB\u8FDB",font_class:"bofang-kuaijin",unicode:"e6d8",unicode_decimal:59096},{icon_id:"25807740",name:"\u5411\u4E0A",font_class:"xiangxia7",unicode:"ec62",unicode_decimal:60514}];var hn={id:dn,name:mn,font_family:pn,css_prefix_text:vn,description:fn,glyphs:_n};const gn={class:"icon_lists"},yn=["onClick"],bn=L({__name:"IconFont",props:{visible:{type:Boolean}},emits:["update:visible"],setup(t,{emit:a}){const e=z(()=>hn.glyphs.map(i=>`icon-${i.font_class}`)),l=()=>{a("update:visible",!1)},p=i=>{Be(i),ie.success(`\u590D\u5236\u56FE\u6807: ${i}`)};return(i,_)=>{const d=ve("click-outside");return h(),I("div",null,[c(n(ut),{show:t.visible},{default:v(()=>[P((h(),S(n(ot),{title:`\u56FE\u6807\u6570\u91CF${n(e).length}`,class:"tab-container"},{default:v(()=>[T("ul",gn,[(h(!0),I(q,null,ue(n(e),u=>(h(),I("li",{key:u,class:"dib",onClick:o=>p(u)},[T("span",{class:Ne(`icon iconfont ${u}`)},null,2)],8,yn))),128))])]),_:1},8,["title"])),[[d,l]])]),_:1},8,["show"])])}}});var Cn=H(bn,[["__scopeId","data-v-c07295dc"]]);const se=t=>(yt("data-v-28993e7d"),t=t(),bt(),t),xn={class:"tool-bar"},Sn={class:"tool-bar-item"},wn=se(()=>T("span",null,"\u9996\u9875",-1)),Dn=se(()=>T("span",null,"\u4FDD\u5B58",-1)),Fn=se(()=>T("span",null,"\u9884\u89C8",-1)),kn=se(()=>T("span",null,"\u64A4\u9500",-1)),En=se(()=>T("span",null,"\u6062\u590D",-1)),Bn=se(()=>T("span",null,"\u5BFC\u51FA",-1)),In=se(()=>T("span",null,"\u5BFC\u5165",-1)),$n=se(()=>T("span",null,"\u5168\u5C4F",-1)),Nn=se(()=>T("span",null,"\u5750\u6807",-1)),Ln={class:"tool-bar-item"},Tn=se(()=>T("span",null,"\u56FE\u6807",-1)),An=se(()=>T("span",null,"\u56FE\u7247",-1)),zn={class:"dialog-footer"},Rn=ke("\u53D6\u6D88"),Un=ke("\u65B0\u589E"),Vn=ke("\u66F4\u65B0"),Pn=L({__name:"Toolbar",setup(t){const a=te(),e=xt(),l=Et(),p=lt(),i=z(()=>a.componentData),_=z(()=>a.canvasStyleData),d=z(()=>p.name==="Create");let u="";const o=F(!1),m=F(!1),s=F(!1),r=G({name:"",thumbnail:""}),f=G({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0",trigger:"blur"}]});let b=0;De(()=>{setTimeout(()=>{r.name=a.name,r.thumbnail=a.thumbnail},500)});const C=()=>ee(this,null,function*(){let x;b<=0?x=yield e.undo():x=yield e.undo(b-1),x?(b=x.id,a.setLayoutData({canvasData:x.canvasData,canvasStyle:x.canvasStyle})):ie.warning("\u6CA1\u6709\u5FEB\u7167\u4E86")}),y=()=>{const{href:x}=l.resolve("/preview");window.open(x,"_blank")},B=()=>{l.push({name:"Pages"})},k=()=>{o.value=!0},M=()=>ee(this,null,function*(){let x;b<=0?x=yield e.undo():x=yield e.undo(b+1),x?(b=x.id,a.setLayoutData({canvasData:x.canvasData,canvasStyle:x.canvasStyle})):ie.warning("\u6CA1\u6709\u5FEB\u7167\u4E86")}),U=()=>{a.toggleShowEm()},W=()=>{m.value=!m.value},O=()=>{const x=document.querySelector(".center.scrollbar");document.fullscreenEnabled&&x&&x.requestFullscreen()},g=x=>ee(this,null,function*(){const{name:w,thumbnail:E}=r;if(!w){ie.error("\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0");return}const V={name:w,thumbnail:E,canvasData:i.value,canvasStyle:_.value};if(a.setName(w),a.setThumbnail(E),x==="update")try{yield Bt(u,V),ie.success("\u4FEE\u6539\u6210\u529F")}catch(R){ie.error("\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u5BFC\u51FA\u5230\u672C\u5730\uFF0C\u5E76\u91CD\u65B0\u8FDB\u5165\u6B64\u9875\u9762")}finally{o.value=!1}else try{const R=yield It(V);ie.success("\u4FDD\u5B58\u6210\u529F"),l.push({name:"Editor",params:{index:R.id}})}catch(R){ie.error(`\u4FDD\u5B58\u5931\u8D25\uFF0C\u5931\u8D25\u4FE1\u606F:${(R==null?void 0:R.message)||R}`)}finally{o.value=!1}}),$=()=>{const x=`${a.name}`||"layout";St(`${x}.json`,JSON.stringify({canvasData:i.value,canvasStyle:_.value}))},N=()=>{wt(A,".json")},A=x=>{if(x.target&&x.target.result){const w=JSON.parse(x.target.result);w&&(a.setComponentData(w.canvasData),a.setCanvasStyle(w.canvasStyle))}},D=pe(()=>p.params.index,(x,w)=>{u=x},{immediate:!0});return Ue(()=>{D()}),(x,w)=>{const E=be("icon-park"),V=ve("action");return h(),I(q,null,[T("div",xn,[T("div",Sn,[c(n(ne),null,{trigger:v(()=>[c(n(Y),{quaternary:"",size:"small",onClick:B,title:"\u9996\u9875"},{default:v(()=>[c(E,{name:"home",size:"24"})]),_:1})]),default:v(()=>[wn]),_:1}),c(n(Nt),{vertical:""}),c(n(ne),null,{trigger:v(()=>[P((h(),S(n(Y),{quaternary:"",size:"small",onClick:k,title:"\u4FDD\u5B58"},{default:v(()=>[c(E,{name:"save-one",size:"22"})]),_:1})),[[V,"add"]])]),default:v(()=>[Dn]),_:1}),c(n(ne),null,{trigger:v(()=>[c(n(Y),{quaternary:"",size:"small",onClick:y,title:"\u9884\u89C8"},{default:v(()=>[c(E,{name:"computer",size:"22"})]),_:1})]),default:v(()=>[Fn]),_:1}),c(n(ne),null,{trigger:v(()=>[c(n(Y),{quaternary:"",size:"small",onClick:C,title:"\u64A4\u9500"},{default:v(()=>[c(E,{name:"back",size:"22"})]),_:1})]),default:v(()=>[kn]),_:1}),c(n(ne),null,{trigger:v(()=>[c(n(Y),{quaternary:"",size:"small",onClick:M,title:"\u6062\u590D"},{default:v(()=>[c(E,{name:"next",size:"22"})]),_:1})]),default:v(()=>[En]),_:1}),c(n(ne),null,{trigger:v(()=>[c(n(Y),{quaternary:"",size:"small",onClick:$,title:"\u5BFC\u51FA"},{default:v(()=>[c(E,{name:"download-one",size:"22"})]),_:1})]),default:v(()=>[Bn]),_:1}),c(n(ne),null,{trigger:v(()=>[c(n(Y),{quaternary:"",size:"small",onClick:N,title:"\u5BFC\u5165"},{default:v(()=>[c(E,{name:"upload-one",size:"22"})]),_:1})]),default:v(()=>[In]),_:1}),c(n(ne),null,{trigger:v(()=>[c(n(Y),{quaternary:"",size:"small",onClick:O,title:"\u5168\u5C4F"},{default:v(()=>[c(E,{name:"full-screen",size:"22"})]),_:1})]),default:v(()=>[$n]),_:1}),c(n(ne),null,{trigger:v(()=>[c(n(Y),{quaternary:"",size:"small",onClick:U,title:"\u5750\u6807"},{default:v(()=>[c(E,{name:"cones",size:"22"})]),_:1})]),default:v(()=>[Nn]),_:1})]),T("div",Ln,[c(n(ne),null,{trigger:v(()=>[c(n(Y),{quaternary:"",class:"resource",size:"small",onClick:W,title:"\u56FE\u6807"},{default:v(()=>[c(E,{name:"game-ps",size:"22"})]),_:1})]),default:v(()=>[Tn]),_:1}),c(n(ne),null,{trigger:v(()=>[c(n(Y),{quaternary:"",class:"resource",size:"small",onClick:w[0]||(w[0]=()=>s.value=!0),title:"\u56FE\u7247"},{default:v(()=>[c(E,{name:"picture",size:"22"})]),_:1})]),default:v(()=>[An]),_:1})])]),c(n(ut),{show:o.value,"onUpdate:show":w[6]||(w[6]=R=>o.value=R),center:""},{default:v(()=>[c(n(ot),{title:"\u4FDD\u5B58\u5F53\u524D\u5E03\u5C40",style:{width:"30%"},size:"medium"},{footer:v(()=>[T("span",zn,[c(n(Y),{onClick:w[3]||(w[3]=R=>o.value=!1)},{default:v(()=>[Rn]),_:1}),n(d)?(h(),S(n(Y),{key:0,type:"primary",onClick:w[4]||(w[4]=R=>g("new"))},{default:v(()=>[Un]),_:1})):(h(),S(n(Y),{key:1,type:"primary",onClick:w[5]||(w[5]=R=>g("update"))},{default:v(()=>[Vn]),_:1}))])]),default:v(()=>[c(n(Ee),{model:r,rules:f,onSubmit:w[2]||(w[2]=Fe(()=>{},["prevent"]))},{default:v(()=>[c(n(X),{label:"\u9875\u9762\u540D\u79F0",prop:"name"},{default:v(()=>[c(n(me),{modelValue:r.name,"onUpdate:modelValue":w[1]||(w[1]=R=>r.name=R),placeholder:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["show"]),c(Cn,{visible:m.value,"onUpdate:visible":w[7]||(w[7]=R=>m.value=R)},null,8,["visible"])],64)}}});var Mn=H(Pn,[["__scopeId","data-v-28993e7d"]]);const jn=["data-component"],Xn=L({__name:"ComponentItem",props:{component:null,name:null},setup(t){return(a,e)=>(h(),I("div",{draggable:"true","data-component":t.component},[T("div",null,he(t.name),1)],8,jn))}}),On={class:"components"},Ke=L({__name:"ComponentList",setup(t){const a=z(()=>{const l={};Object.keys(ce).filter(i=>{if(ce[i].component.show!==!1)return ce[i]}).forEach(i=>{const _=ce[i].component.group;!_||(l[_]||(l[_]=[]),l[_].push(ce[i].component))});const p=[];return et.forEach(i=>{var _;p.push({label:()=>i.name,key:i.key,icon:()=>oe(re,{name:`${i.icon}`}),children:(_=l[i.key])==null?void 0:_.map(d=>({label:()=>oe(Xn,{component:d.component,name:d.label,ondragstart:e}),key:d.component}))})}),p}),e=l=>{l.dataTransfer.setData("componentName",l.target.dataset.component)};return(l,p)=>(h(),I("div",On,[c(n(Ve),{options:n(a),accordion:!1},null,8,["options"])]))}});const Hn={key:0,class:"layer"},Wn={key:1,class:"layer"},Yn=L({__name:"LayerItem",props:{component:null,index:null,activeKey:null,mode:{default:"expand"},contextmenus:null},emits:["select"],setup(t,{emit:a}){const e=t,l=te(),p=(u,o)=>{var m;(m=u.dataTransfer)==null||m.setData("compomentIndex",o),u.stopPropagation()},i=(u,o,m=!1)=>{u.preventDefault(),u.stopPropagation(),m&&o!==e.activeKey&&ae.emit("ActiveMenu",o)},_=(u,o)=>{var f;u.preventDefault(),u.stopPropagation();const m=(f=u.dataTransfer)==null?void 0:f.getData("compomentIndex"),s=d(m,o),r=l.cutComponent(m);r&&s&&(l.insertComponent(s,r),a("select",o))},d=(u,o)=>{const m=u.split("-").map(f=>parseInt(f)),s=o.split("-").map(f=>parseInt(f)),r=m.length;for(let f=0;f<r;f++)if(m[f]!==s[f]){if(m[f]>s[f])return o;if(m[f]<s[f])return f+1==r?(s[f]=s[f]-1,s.join("-")):o}return o};return(u,o)=>{const m=be("icon-park"),s=ve("contextmenu");return P((h(),I("div",{draggable:"true",onDragstart:o[0]||(o[0]=r=>p(r,t.index)),onDrop:o[1]||(o[1]=r=>_(r,t.index)),onDragover:o[2]||(o[2]=r=>i(r,t.index,!0))},[t.component.component==="Group"?(h(),I("div",Hn,[P(T("span",null,he(t.component.label||"\u5206\u7EC4"),513),[[le,t.mode==="expand"]]),t.component.display?(h(),S(m,{key:0,name:"preview-open",size:"24"})):(h(),S(m,{key:1,name:"preview-close-one",size:"24"}))])):(h(),I("div",Wn,[P(T("span",null,he(t.component.label),513),[[le,t.mode==="expand"]]),t.component.display?(h(),S(m,{key:0,size:"24",name:"preview-open"})):(h(),S(m,{key:1,size:"24",name:"preview-close-one"}))]))],32)),[[s,t.contextmenus]])}}});var Je=H(Yn,[["__scopeId","data-v-380bfd98"]]);const Gn=L({__name:"SimpleLayerItem",props:{component:null,index:null,activeKey:null,mode:{default:"expand"},name:null,contextmenus:null},emits:["select"],setup(t,{emit:a}){const e=t,l=te(),p=(u,o)=>{var m;(m=u.dataTransfer)==null||m.setData("compomentIndex",o),u.stopPropagation()},i=(u,o,m=!1)=>{u.preventDefault(),u.stopPropagation(),m&&o!==e.activeKey&&ae.emit("ActiveMenu",o)},_=(u,o)=>{var f;u.preventDefault(),u.stopPropagation();const m=(f=u.dataTransfer)==null?void 0:f.getData("compomentIndex"),s=d(m,o),r=l.cutComponent(m);r&&s&&(l.insertComponent(s,r),a("select",o))},d=(u,o)=>{const m=u.split("-").map(f=>parseInt(f)),s=o.split("-").map(f=>parseInt(f)),r=m.length;for(let f=0;f<r;f++)if(m[f]!==s[f]){if(m[f]>s[f])return o;if(m[f]<s[f])return f+1==r?(s[f]=s[f]-1,s.join("-")):o}return o};return(u,o)=>{const m=be("IconPark"),s=ve("contextmenu");return P((h(),S(m,{draggable:"true",onDragstart:o[0]||(o[0]=r=>p(r,t.index)),onDrop:o[1]||(o[1]=r=>_(r,t.index)),onDragover:o[2]||(o[2]=r=>i(r,t.index,!0)),name:t.name},null,8,["name"])),[[s,t.contextmenus]])}}});var Qe=H(Gn,[["__scopeId","data-v-14872fe0"]]);const Ze=L({__name:"Layer",setup(t){const a=te(),e=at(),l={};et.map(g=>{l[g.key]=g.icon});const p=z(()=>a.componentData),i=F(null),_=F("");we("ActiveMenu",g=>{const $=g;_.value=$,i.value&&i.value.open&&i.value.open($)});const u=g=>{_.value=g;const $=g.split("-").map(A=>Number(A)),N=a.getComponentByIndex($);a.setCurComponent(N,g)},o=F([]),m=(g,$,N)=>{for(let A=0;A<$.length;A++){const D=$[A],x=s(A,g);if(D.component==="Group"){const w=[];N.push({label:()=>oe(Je,{component:D,index:x,contextmenus:()=>O(x),onclick:()=>u(x)}),key:x,icon:()=>oe(Qe,{name:"branch-one",component:D,index:x,contextmenus:()=>O(x),onclick:()=>u(x)}),children:m(x,D.subComponents||[],w)})}else N.push({label:()=>oe(Je,{component:D,index:x,contextmenus:()=>O(x)}),key:x,icon:()=>oe(Qe,{name:`${l[D.group]}`,component:D,index:x,contextmenus:()=>O(x),onclick:()=>u(x)})})}return N},s=(g,$)=>$?`${$}-${g}`:g.toString(),r=g=>{const $=g.split("-").map(A=>Number(A)),N=a.getComponentByIndex($);N&&(N.groupStyle=void 0,Be(JSON.stringify(We.exports.cloneDeep(N))),e.copy())},f=g=>ee(this,null,function*(){u(g),a.removeComponent(g)}),b=g=>ee(this,null,function*(){u(g),a.upComponent(g)}),C=g=>ee(this,null,function*(){u(g),a.downComponent(g)}),y=g=>ee(this,null,function*(){u(g),a.topComponent(g)}),B=g=>ee(this,null,function*(){u(g),a.bottomComponent(g)}),k=g=>{u(g),a.hiddenComponent(g)},M=g=>{u(g),a.showComponent(g)},U=g=>{const $=a.cutComponent(g);Be(JSON.stringify($)),e.copy()},W=g=>{if(e.copyData){const N=We.exports.cloneDeep(e.copyData);N.id=Dt(),a.insertComponent(g,N)}},O=g=>{const $=g.split("-").map(N=>parseInt(N));return[{text:"\u590D\u5236",subText:"Ctrl + C",handler:()=>r(g)},{text:"\u7C98\u8D34",subText:"Ctrl + V",handler:()=>W(g)},{text:"\u526A\u5207",subText:"Ctrl + V",handler:()=>U(g)},{text:"\u62C6\u5206",subText:"Ctrl + V",handler:()=>r(g)},{text:"\u5220\u9664",subText:"",handler:()=>f(g)},{divider:!0},{text:"\u7F6E\u4E8E\u9876\u5C42",handler:()=>y(g),children:[{text:"\u7F6E\u4E8E\u9876\u5C42",handler:()=>y(g)},{text:"\u4E0A\u79FB\u4E00\u5C42",handler:()=>b(g)}]},{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:()=>B(g),children:[{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:()=>B(g)},{text:"\u4E0B\u79FB\u4E00\u5C42",handler:()=>C(g)}]},{divider:!0},{text:"\u663E\u793A",disable:a.getComponentByIndex($).display,subText:"",handler:()=>M(g)},{text:"\u9690\u85CF",disable:!a.getComponentByIndex($).display,subText:"",handler:()=>k(g)}]};return pe(()=>a.componentData,()=>{const g=a.componentData;o.value=[],o.value=m("",g,[])},{deep:!0,immediate:!0}),(g,$)=>(h(),I("div",null,[n(p).length>0?(h(),S(n(Ve),{key:0,options:o.value,"onUpdate:value":u},null,8,["options"])):(h(),S(n(At),{key:1,class:"placeholder"},{default:v(()=>[c(n(Tt),null,{default:v(()=>[c(n(Lt),{description:"\u753B\u5E03\u4E3A\u7A7A"})]),_:1})]),_:1}))]))}}),qn=T("span",null,"\u7EC4\u4EF6",-1),Kn=T("span",null,"\u56FE\u5C42",-1),Jn=L({__name:"SideBar",props:{iscollapsed:{type:Boolean,default:!1}},emits:["update:iscollapsed"],setup(t,{emit:a}){const e=F("components"),l=i=>{a("update:iscollapsed",!1),e.value=i},p=i=>{e.value=i};return(i,_)=>{const d=be("IconPark");return t.iscollapsed?(h(),S(n(Ie),{key:1,type:"line",animated:"","bar-width":48,"justify-content":"center","onUpdate:value":[l,_[4]||(_[4]=u=>e.value=u)],value:e.value},{default:v(()=>[e.value==="components"?(h(),S(n(_e),{key:0,name:"components","display-directive":"show:lazy"},{tab:v(()=>[c(d,{name:"components",onClick:_[2]||(_[2]=u=>p("layer"))})]),default:v(()=>[c(Ke)]),_:1})):e.value==="layer"?(h(),S(n(_e),{key:1,name:"layer","display-directive":"show:lazy"},{tab:v(()=>[c(d,{name:"layers",onClick:_[3]||(_[3]=u=>p("components"))})]),default:v(()=>[c(Ze)]),_:1})):Se("",!0)]),_:1},8,["value"])):(h(),S(n(Ie),{key:0,type:"line",animated:"","bar-width":100,"justify-content":"center",value:e.value,"onUpdate:value":[_[0]||(_[0]=u=>e.value=u),_[1]||(_[1]=u=>e.value=u)]},{default:v(()=>[c(n(_e),{name:"components","display-directive":"show:lazy"},{tab:v(()=>[c(d,{name:"components"}),qn]),default:v(()=>[c(Ke)]),_:1}),c(n(_e),{name:"layer","display-directive":"show:lazy"},{tab:v(()=>[c(d,{name:"layers"}),Kn]),default:v(()=>[c(Ze)]),_:1})]),_:1},8,["value"]))}}}),Qn=[{label:"4K",value:"3840X2160"},{label:"2k",value:"2048X1080"},{label:"1080P",value:"1920X1080"},{label:"720P",value:"1366X768"},{label:"iPhoneXR",value:"414X896"},{label:"iPhoneSE",value:"375X667"},{label:"iPhone12Pro",value:"390X884"},{label:"GalaxyS8+",value:"360X740"},{label:"GalaxyS20Ultra+",value:"412X915"},{label:"iPadAir",value:"820X1180"},{label:"iPadMini",value:"768X1024"},{label:"SurfacePro7",value:"912X1368"},{label:"NestHub",value:"1024X600"},{label:"NestMax",value:"1028X800"}];const Zn={class:"attr-list"},ea=L({__name:"Canvas",setup(t){const a=z(()=>[{label:"\u672C\u8BBE\u5907",value:`${window.innerWidth}X${window.innerHeight}`},...Qn]),e=te(),l=z(()=>e.canvasStyleData),p=F("\u672C\u8BBE\u5907"),i=[{key:"width",label:"\u5BBD\u5EA6",type:J.NUMBER},{key:"height",label:"\u9AD8\u5EA6",type:J.NUMBER},{key:"scale",label:"\u6BD4\u4F8B",type:J.NUMBER},{key:"dataWs",label:"\u5B9E\u65F6\u6570\u636E",type:J.TEXT},{key:"image",label:"\u80CC\u666F\u56FE",type:J.TEXT}],_=G(["top","left","width","height","fontSize","borderWidth"]),d=F(l.value.scale),u=r=>r*d.value/100,o=r=>r/(l.value.scale/100),m=Re(()=>{d.value=~~d.value||1;const r=ct(e.componentData);r.forEach(f=>{Object.keys(f.style).forEach(b=>{_.includes(b)&&(f.style[b]=Math.ceil(u(o(f.style[b]))))})}),e.setComponentData(r),e.setCanvasStyle(xe(fe({},l.value),{scale:d.value}))},1e3),s=r=>{const f=r.split("X"),b=parseInt(f[0]),C=parseInt(f[1]);e.setCanvasStyle(xe(fe({},l.value),{width:b,height:C}))};return(r,f)=>(h(),I("div",Zn,[c(n(st),null,{default:v(()=>[c(n(Ee),{size:"small",onSubmit:f[2]||(f[2]=Fe(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:v(()=>[c(n(X),{label:"\u5206\u8FA8\u7387"},{default:v(()=>[c(n(ge),{value:p.value,"onUpdate:value":[f[0]||(f[0]=b=>p.value=b),s],placeholder:"\u9009\u62E9\u5206\u8FA8\u7387",options:n(a)},null,8,["value","options"])]),_:1}),(h(),I(q,null,ue(i,({key:b,label:C,type:y},B)=>c(n(X),{key:B,label:C},{default:v(()=>[b==="scale"?(h(),S(n(ye),{key:0,modelValue:d.value,"onUpdate:modelValue":f[1]||(f[1]=k=>d.value=k),onInput:n(m)},null,8,["modelValue","onInput"])):y==="number"?(h(),S(n(ye),{key:1,value:n(l)[b],"onUpdate:value":k=>n(l)[b]=k},null,8,["value","onUpdate:value"])):(h(),S(n(me),{key:2,value:n(l)[b],"onUpdate:value":k=>n(l)[b]=k},null,8,["value","onUpdate:value"]))]),_:2},1032,["label"])),64))]),_:1})]),_:1})]))}});var ta=H(ea,[["__scopeId","data-v-636ad53a"]]);const na=[{label:"Arial",value:"Arial"},{label:"\u5FAE\u8F6F\u96C5\u9ED1",value:"Microsoft Yahei"},{label:"\u5B8B\u4F53",value:"SimSun"},{label:"\u9ED1\u4F53",value:"SimHei"},{label:"\u6977\u4F53",value:"KaiTi"},{label:"\u65B0\u5B8B\u4F53",value:"NSimSun"},{label:"\u4EFF\u5B8B",value:"FangSong"},{label:"\u82F9\u65B9",value:"PingFang SC"},{label:"\u534E\u6587\u9ED1\u4F53",value:"STHeiti"},{label:"\u534E\u6587\u6977\u4F53",value:"STKaiti"},{label:"\u534E\u6587\u5B8B\u4F53",value:"STSong"},{label:"\u534E\u6587\u4EFF\u5B8B",value:"STFangSong"},{label:"\u534E\u6587\u4E2D\u5B8B",value:"STZhongSong"},{label:"\u534E\u6587\u7425\u73C0",value:"STHupo"},{label:"\u534E\u6587\u65B0\u9B4F",value:"STXinwei"},{label:"\u534E\u6587\u96B6\u4E66",value:"STLiti"},{label:"\u534E\u6587\u884C\u6977",value:"STXingkai"},{label:"\u51AC\u9752\u9ED1\u4F53",value:"Hiragino Sans GB"},{label:"\u5170\u4EAD\u9ED1",value:"Lantinghei SC"},{label:"\u504F\u504F\u4F53",value:"Hanzipen SC"},{label:"\u624B\u672D\u4F53",value:"Hannotate SC"},{label:"\u5B8B\u4F53",value:"Songti SC"},{label:"\u5A03\u5A03\u4F53",value:"Wawati SC"},{label:"\u884C\u6977",value:"Xingkai SC"},{label:"\u5706\u4F53",value:"Yuanti SC"},{label:"\u534E\u6587\u7EC6\u9ED1",value:"STXihei"},{label:"\u5E7C\u5706",value:"YouYuan"},{label:"\u96B6\u4E66",value:"LiSu"},{label:"LED",value:"LED"},{label:"LCD",value:"LCD"}],aa=[{label:"100 Thin",value:100},{label:"200 ExtraThin",value:200},{label:"300 Light",value:300},{label:"400 Normal",value:400},{label:"500 Medium",value:500},{label:"600 Semi Bold",value:600},{label:"700 Bold",value:700},{label:"Extra Bold",value:800},{label:"Black",value:900}],la=L({__name:"FontStyle",props:{value:{default:""}},emits:["update:value","change"],setup(t,{emit:a}){const e=F(""),l=G(na),p=i=>{e.value=i,a("update:value",e.value),a("change",e.value)};return(i,_)=>(h(),S(n(ge),{clearable:"",modelValue:e.value,"onUpdate:modelValue":_[0]||(_[0]=d=>e.value=d),placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53","onUpdate:value":p,options:l},null,8,["modelValue","options"]))}}),oa=L({__name:"FontWeight",props:{value:{default:""}},emits:["update:value","change"],setup(t,{emit:a}){const e=F(""),l=G(aa),p=i=>{e.value=i,a("update:value",e.value),a("change",e.value)};return(i,_)=>(h(),S(n(ge),{clearable:"",modelValue:e.value,"onUpdate:modelValue":_[0]||(_[0]=d=>e.value=d),placeholder:"\u8BF7\u9009\u62E9\u5B57\u91CD","onUpdate:value":p,options:l},null,8,["modelValue","options"]))}}),ua={class:"linear-gradient"},sa=L({__name:"LinearGradient",props:{value:{default:{angle:0,color1:"",color2:""}}},emits:["update:value","change"],setup(t,{emit:a}){const e=t,l=F({angle:e.value.angle||0,color1:e.value.color1||"",color2:e.value.color2||""}),p=(i,_)=>{l.value[i]=_,a("update:value",l.value),a("change",l.value)};return(i,_)=>(h(),I("div",ua,[c(n(ye),{modelValue:t.value.angle,"onUpdate:value":_[0]||(_[0]=d=>p("angle",d)),controls:!0,min:0,max:360,step:1},null,8,["modelValue"]),c(n(ze),{size:"small",value:t.value.color1,"onUpdate:value":_[1]||(_[1]=d=>p("color1",d)),modes:["hex","rgb","hsl"],swatches:n(Ae)},null,8,["value","swatches"]),c(n(ze),{size:"small",value:t.value.color2,"onUpdate:value":_[2]||(_[2]=d=>p("color2",d)),modes:["hex","rgb","hsl"],swatches:n(Ae)},null,8,["value","swatches"])]))}});var ia=L({props:{args:{type:Object,default:()=>{}},component:{type:Object,default:()=>{}},value:{type:Object}},emits:["update:value","change"],setup(t,{emit:a}){const e=l=>{a("update:value",l),a("change",l)};return()=>[oe(t.component,xe(fe({},t.args),{value:t.value,onChange:e}))]}});const rt=L({__name:"FormItem",props:{data:null,children:null,ukey:null},emits:["change"],setup(t,{emit:a}){const e=t,l=G(e.data),p=(i,_)=>{a("change",i,_)};return pe(()=>e.data,i=>{Object.assign(l,i)},{deep:!0}),(i,_)=>(h(!0),I(q,null,ue(t.children,({key:d,label:u,type:o,componentOptions:m})=>(h(),S(n(X),{key:`${t.ukey}${d}`,label:u},{default:v(()=>[o===n(J).COLOR?(h(),S(n(ze),{key:0,value:l[d],"onUpdate:value":[s=>l[d]=s,s=>p(s,d)],swatches:n(Ae),modes:["hex","rgb","hsl"],size:"small"},null,8,["value","onUpdate:value","swatches"])):o===n(J).SELECT?(h(),S(n(ge),{key:1,modelValue:l[d],"onUpdate:modelValue":s=>l[d]=s,placeholder:u,"onUpdate:value":s=>p(s,d),options:(m==null?void 0:m.options)||[]},null,8,["modelValue","onUpdate:modelValue","placeholder","onUpdate:value","options"])):o===n(J).RADIO?(h(),S(n(zt),{key:2,value:l[d],"onUpdate:value":[s=>l[d]=s,s=>p(s,d)],placeholder:u},{default:v(()=>[(h(!0),I(q,null,ue((m==null?void 0:m.options)||[],s=>(h(),S(n(Rt),{label:s.value,key:s.value},{default:v(()=>[ke(he(s.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["value","onUpdate:value","placeholder"])):o===n(J).NUMBER?(h(),S(n(ye),{key:3,value:l[d],"onUpdate:value":[s=>l[d]=s,s=>p(s,d)]},null,8,["value","onUpdate:value"])):o===n(J).SWITCH?(h(),S(n(it),{key:4,value:l[d],"onUpdate:value":[s=>l[d]=s,s=>p(s,d)]},null,8,["value","onUpdate:value"])):o===n(J).FONT_STYLE?(h(),S(la,{key:5,modelValue:l[d],"onUpdate:modelValue":s=>l[d]=s,onChange:s=>p(s,d)},null,8,["modelValue","onUpdate:modelValue","onChange"])):o===n(J).FONT_WEIGHT?(h(),S(oa,{key:6,modelValue:l[d],"onUpdate:modelValue":s=>l[d]=s,onChange:s=>p(s,d)},null,8,["modelValue","onUpdate:modelValue","onChange"])):o===n(J).LINEAR_GRADIENT?(h(),S(sa,{key:7,value:l[d],"onUpdate:value":s=>l[d]=s,onChange:s=>p(s,d)},null,8,["value","onUpdate:value","onChange"])):o===n(J).CUSTOM?(h(),S(n(ia),{key:8,value:l[d],"onUpdate:value":s=>l[d]=s,onChange:s=>p(s,d),component:m.componentType,args:m.args},null,8,["value","onUpdate:value","onChange","component","args"])):(h(),S(n(me),{key:9,clearable:"",value:l[d],"onUpdate:value":[s=>l[d]=s,s=>p(s,d)]},null,8,["value","onUpdate:value"]))]),_:2},1032,["label"]))),128))}}),dt=L({__name:"FormAttr",props:{data:null,children:null,name:null,uid:null,ukey:null},emits:["change"],setup(t,{emit:a}){const l=G(t.data),p=(i,_)=>{a("change",_,i)};return(i,_)=>(h(),S(n(Ee),{size:"small",onSubmit:_[0]||(_[0]=Fe(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:v(()=>[c(rt,{children:t.children,data:l,ukey:t.ukey,onChange:p},null,8,["children","data","ukey"])]),_:1}))}});const ca={class:"attr-list"},ra=L({__name:"StyleList",props:{curComponent:null},setup(t){const a=t,e=te(),l=G({}),p=z(()=>a.curComponent&&a.curComponent.component in ce?ce[a.curComponent.component].style:[]),i=Re((o,m)=>{if(a.curComponent)if(["top","left","width","height","rotate"].findIndex(r=>r===o)>-1){const r=e.activeIndex.split("-").map(b=>Number(b));r.pop();const f=e.getComponentByIndex(r);e.syncComponentLoction({[o]:m},f.component==="Root"?void 0:f),f&&e.resizeAutoComponent(r)}else e.setCurComponentStyle(o,m)},300);we("changeStyle",o=>{const m=o;a.curComponent&&a.curComponent.id===m.id&&d(m.style)});const d=Re(o=>{const m=Ft(o,l);m&&Object.keys(m).forEach(s=>{l[s]=m[s]})},200),u=()=>{if(a.curComponent){tt(l);const o=fe(fe({},a.curComponent.style),a.curComponent.groupStyle||{});d(o)}};return pe([()=>a.curComponent.id,()=>a.curComponent.style],()=>{a.curComponent&&a.curComponent.id&&u()},{immediate:!0,deep:!0}),(o,m)=>(h(),I("div",ca,[c(n(Pe),{accordion:""},{default:v(()=>[(h(!0),I(q,null,ue(n(p),({name:s,uid:r,children:f})=>(h(),S(n($e),{key:`${t.curComponent.id}${r}`,title:s,name:r},{default:v(()=>[c(dt,{children:f,data:l,onChange:n(i),name:s,uid:r,ukey:t.curComponent.id},null,8,["children","data","onChange","name","uid","ukey"])]),_:2},1032,["title","name"]))),128))]),_:1})]))}});var da=H(ra,[["__scopeId","data-v-a3f05a6a"]]);const ma=L({__name:"CompAttr",props:{curComponent:null},setup(t){const a=t,e=F(""),l=te(),p=i=>{l.setCurComponentProps("label",i)};return pe(()=>a.curComponent,()=>{e.value=a.curComponent.label||""},{immediate:!0}),(i,_)=>(h(),S(n(Ee),{size:"small",onSubmit:_[2]||(_[2]=Fe(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:v(()=>[c(n(X),{label:"\u7C7B\u578B"},{default:v(()=>[c(n(me),{value:t.curComponent.component,readonly:!0},null,8,["value"])]),_:1}),c(n(X),{label:"ID"},{default:v(()=>[c(n(me),{value:t.curComponent.id,readonly:!0},null,8,["value"])]),_:1}),c(n(X),{label:"\u540D\u79F0"},{default:v(()=>[c(n(me),{value:e.value,"onUpdate:value":_[0]||(_[0]=d=>e.value=d),onChange:_[1]||(_[1]=d=>p(d))},null,8,["value"])]),_:1})]),_:1}))}});const pa={class:"title"},va=ke("+"),fa=L({__name:"DynamicAttr",props:{data:null,children:null,name:null,uid:null,max:null,ukey:null},emits:["change"],setup(t,{emit:a}){const e=t,l=F(e.data),p=()=>{a("change",l.value,e.uid)},i=z(()=>l.value.length<e.max),_=u=>{l.value.splice(u,1),a("change",l.value,e.uid)},d=()=>{const u=l.value.length,o={};e.children.map(m=>{u>0?o[m.key]=l.value[u-1][m.key]:o[m.key]=void 0}),l.value.push(o),a("change",l.value,e.uid)};return(u,o)=>{const m=be("icon-park");return h(),I(q,null,[c(n(Pe),{accordion:""},{default:v(()=>[(h(!0),I(q,null,ue(l.value,(s,r)=>(h(),S(n($e),{key:`${t.ukey}${r}`,name:t.max>1?`${t.uid}${r}`:t.uid},{header:v(()=>[T("div",pa,he(t.name)+he(r+1),1)]),"header-extra":v(()=>[c(m,{name:"delete-one",size:"14",onClick:f=>_(r)},null,8,["onClick"])]),default:v(()=>[c(rt,{children:t.children,data:s,ukey:t.ukey,onChange:p},null,8,["children","data","ukey"])]),_:2},1032,["name"]))),128))]),_:1}),P(c(n(Y),{class:"add",onClick:d},{default:v(()=>[va]),_:1},512),[[le,n(i)]])],64)}}});var _a=H(fa,[["__scopeId","data-v-62b141de"]]);const ha={class:"attr-list"},ga=L({__name:"AttrList",props:{curComponent:null},setup(t){const a=t,e=te(),l=G({}),p=z(()=>a.curComponent&&a.curComponent.component in ce?ce[a.curComponent.component].attrs:[]),i=(d,u)=>{e.setCurComponentPropValue(d,u)},_=()=>{if(tt(l),a.curComponent&&a.curComponent.propValue){const d=a.curComponent.propValue;Object.keys(d).forEach(u=>{l[u]=d[u]})}};return pe(()=>a.curComponent.id,()=>{_()},{immediate:!0}),(d,u)=>(h(),I("div",ha,[c(n(Pe),{accordion:""},{default:v(()=>[c(n($e),{title:"\u516C\u5171\u5C5E\u6027"},{default:v(()=>[c(ma,{curComponent:t.curComponent},null,8,["curComponent"])]),_:1}),(h(!0),I(q,null,ue(n(p),({name:o,uid:m,children:s,max:r})=>(h(),S(n($e),{key:`${t.curComponent.id}${m}`,title:o,name:m},{default:v(()=>[!r||r<1?(h(),S(dt,{key:0,children:s,data:l,onChange:i,name:o,uid:m,ukey:t.curComponent.id},null,8,["children","data","name","uid","ukey"])):(h(),S(_a,{key:1,children:s,data:l[m]||[],onChange:i,name:o,uid:m,max:r,ukey:t.curComponent.id},null,8,["children","data","name","uid","max","ukey"]))]),_:2},1032,["title","name"]))),128))]),_:1})]))}});var ya=H(ga,[["__scopeId","data-v-cd08404e"]]);const ba=L({__name:"StaticData",setup(t){const a=F([]),e=F(null),l=p=>{console.log(p)};return(p,i)=>(h(),S(n(X),{key:"staticData",label:"\u9759\u6001\u6570\u636E"},{default:v(()=>[c(n(ge),{value:e.value,"onUpdate:value":[i[0]||(i[0]=_=>e.value=_),i[1]||(i[1]=_=>l(_))],placeholder:"\u8BF7\u9009\u62E9\u9759\u6001\u6570\u636E",options:a.value},null,8,["value","options"])]),_:1}))}});const Ca=L({__name:"DynamicData",setup(t){const a=F([]),e=F([]),l=G({data:void 0,timeout:1e3,isInterval:!1,intervalTime:1e3,params:{}}),p=F(),i=d=>{console.log(d)},_=()=>{p.value?e.value.includes(p.value)?ie.warning("\u53C2\u6570\u91CD\u590D"):e.value.push(p.value):ie.warning("\u8BF7\u586B\u5199\u53C2\u6570")};return(d,u)=>{const o=be("icon-park");return h(),I(q,null,[c(n(X),{key:"dynamicData",label:"\u52A8\u6001\u6570\u636E"},{default:v(()=>[c(n(ge),{value:l.data,"onUpdate:value":[u[0]||(u[0]=m=>l.data=m),i],placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u63A5\u53E3",options:a.value},null,8,["value","options"])]),_:1}),c(n(X),{key:"timeout",label:"\u8D85\u65F6\u65F6\u95F4"},{default:v(()=>[c(n(ye),{value:l.timeout,"onUpdate:value":[u[1]||(u[1]=m=>l.timeout=m),i],placeholder:"\u8D85\u65F6\u65F6\u95F4"},null,8,["value"])]),_:1}),c(n(X),{key:"isInterval",label:"\u662F\u5426\u5B9A\u65F6\u83B7\u53D6\u65F6\u95F4"},{default:v(()=>[c(n(it),{modelValue:l.isInterval,"onUpdate:modelValue":u[2]||(u[2]=m=>l.isInterval=m)},null,8,["modelValue"])]),_:1}),l.isInterval?(h(),S(n(X),{key:"intervalTime",label:"\u95F4\u9694\u65F6\u95F4"},{default:v(()=>[c(n(ye),{value:l.intervalTime,"onUpdate:value":u[3]||(u[3]=m=>l.intervalTime=m),placeholder:"\u95F4\u9694\u65F6\u95F4"},null,8,["value"])]),_:1})):Se("",!0),(h(!0),I(q,null,ue(e.value,m=>(h(),S(n(X),{label:`\u53C2\u6570:${m}`,key:m},{default:v(()=>[c(n(me),{value:l.params[m],"onUpdate:value":s=>l.params[m]=s},null,8,["value","onUpdate:value"])]),_:2},1032,["label"]))),128)),c(n(X),{key:"addParams",label:"\u8BF7\u6C42\u53C2\u6570"},{default:v(()=>[c(n(me),{placeholder:"\u53C2\u6570",value:p.value,"onUpdate:value":u[4]||(u[4]=m=>p.value=m)},{suffix:v(()=>[c(o,{name:"add-three",onClick:_})]),_:1},8,["value"])]),_:1})],64)}}});var xa=H(Ca,[["__scopeId","data-v-4b9262b5"]]);const Sa=L({__name:"RealTimeData",setup(t){const a=F(null),e=l=>{console.log(l)};return(l,p)=>(h(),S(n(X),{key:"realTimeData",label:"\u5B9E\u65F6\u6570\u636E"},{default:v(()=>[c(n(me),{value:a.value,"onUpdate:value":[p[0]||(p[0]=i=>a.value=i),p[1]||(p[1]=i=>e(i))],placeholder:"\u5B9E\u65F6\u6570\u636E"},null,8,["value"])]),_:1}))}});const wa={class:"data-list"},Da=L({__name:"DataAttr",setup(t){const a=F("Static"),e=F(),l=G([{label:"\u9759\u6001\u6570\u636E",value:"Static"},{label:"\u5B9E\u65F6\u6570\u636E",value:"RealTime"},{label:"\u52A8\u6001\u6570\u636E",value:"Dynamic"}]),p=F([]),i=d=>{console.log(d)},_=d=>{console.log(d)};return(d,u)=>(h(),I("div",wa,[c(n(Ee),{size:"small",onSubmit:u[4]||(u[4]=Fe(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:v(()=>[c(n(X),{key:"dataType",label:"\u6570\u636E\u7C7B\u578B"},{default:v(()=>[c(n(ge),{value:a.value,"onUpdate:value":[u[0]||(u[0]=o=>a.value=o),u[1]||(u[1]=o=>_(o))],placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5904\u7406\u7B97\u6CD5",options:l},null,8,["value","options"])]),_:1}),a.value==="Static"?(h(),S(ba,{key:0})):a.value==="RealTime"?(h(),S(Sa,{key:1})):a.value==="Dynamic"?(h(),S(xa,{key:2})):Se("",!0),c(n(X),{key:"algorithm",label:"\u7B97\u6CD5"},{default:v(()=>[c(n(ge),{value:e.value,"onUpdate:value":[u[2]||(u[2]=o=>e.value=o),u[3]||(u[3]=o=>i(o))],placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5904\u7406\u7B97\u6CD5",options:p.value},null,8,["value","options"])]),_:1})]),_:1})]))}}),Fa={key:0},ka={key:1},Ea=L({__name:"SideBar",props:{iscollapsed:{type:Boolean,default:!1}},emits:["update:iscollapsed"],setup(t,{emit:a}){const e=F("attr"),l=te(),p=z(()=>l.curComponent),i=z(()=>l.curComponent?[{label:"\u6837\u5F0F",key:"4",icon:()=>oe(re,{name:"text-style",onClick:()=>_("style")})},{label:"\u5C5E\u6027",key:"2",icon:()=>oe(re,{name:"internal-data",onClick:()=>_("attr")})},{label:"\u6570\u636E",key:"3",icon:()=>oe(re,{name:"data",onClick:()=>_("data")})}]:[{label:"\u753B\u5E03",key:"1",icon:()=>oe(re,{name:"page",onClick:()=>_("canvas")})}]),_=d=>{a("update:iscollapsed",!1),e.value=d};return(d,u)=>t.iscollapsed?(h(),I("div",ka,[c(n(Ve),{options:n(i)},null,8,["options"])])):(h(),I("div",Fa,[n(p)?(h(),S(n(Ie),{key:0,type:"line",animated:"","justify-content":"center",value:e.value,"onUpdate:value":[u[0]||(u[0]=o=>e.value=o),u[1]||(u[1]=o=>e.value=o)]},{default:v(()=>[c(n(_e),{name:"style","display-directive":"show:lazy"},{tab:v(()=>[c(n(re),{name:"text-style"}),P(T("span",null,"\u6837\u5F0F",512),[[le,!t.iscollapsed]])]),default:v(()=>[c(n(da),{curComponent:n(p)},null,8,["curComponent"])]),_:1}),c(n(_e),{name:"attr","display-directive":"show:lazy"},{tab:v(()=>[c(n(re),{name:"internal-data"}),P(T("span",null,"\u5C5E\u6027",512),[[le,!t.iscollapsed]])]),default:v(()=>[c(n(ya),{curComponent:n(p)},null,8,["curComponent"])]),_:1}),c(n(_e),{name:"data","display-directive":"show:lazy"},{tab:v(()=>[c(n(re),{name:"data"}),P(T("span",null,"\u6570\u636E",512),[[le,!t.iscollapsed]])]),default:v(()=>[c(n(Da))]),_:1})]),_:1},8,["value"])):(h(),S(n(Ie),{key:1,type:"line",animated:"","justify-content":"center"},{default:v(()=>[c(n(_e),{name:"canvas","display-directive":"show:lazy"},{tab:v(()=>[c(n(re),{name:"canvas"}),P(T("span",null,"\u753B\u5E03",512),[[le,!t.iscollapsed]])]),default:v(()=>[c(ta)]),_:1})]),_:1}))]))}});const Ba=L({__name:"DesignerPage",setup(t){const a=te(),e=F(null),l=F(!1),p=F(!1),i=lt();De(()=>ee(this,null,function*(){const C=i.params.index;C&&(yield _(C))}));const _=C=>ee(this,null,function*(){const y=yield $t(C);!y||a.setLayoutData(y)}),d=F(0),u=F(0),o=z(()=>({width:d.value+"px",height:u.value+"px"})),m=C=>{const y=C[0],{width:B,height:k}=y.contentRect;d.value=B,u.value=k},s=C=>ee(this,null,function*(){C.preventDefault(),C.stopPropagation();const y=C.dataTransfer.getData("componentName");if(y){const B=ct(ce[y].component),k=document.querySelector("#editor").getBoundingClientRect();B.style.top=C.pageY-k.top,B.style.left=C.pageX-k.left,a.appendComponent(B)}}),r=C=>{C.preventDefault(),C.dataTransfer.dropEffect="copy"},f=()=>{a.curComponent||a.setCurComponent(void 0,void 0)};pe(()=>a.canvasStyleData.dataWs,C=>{var y;(y=e.value)==null||y.close(),C&&(e.value=b("actual",C))});const b=(C,y)=>{const B=new WebSocket(y);return B.onopen=()=>{console.log("websocket\u8FDE\u63A5\u6210\u529F")},B.onclose=()=>{console.log("websocket\u8FDE\u63A5\u88AB\u5173\u95ED")},B.onmessage=k=>{const M=JSON.parse(k.data);ae.emit(C,M)},B};return Ue(()=>{var C;(C=e.value)==null||C.close(),a.clearCanvas()}),(C,y)=>{const B=ve("resize");return h(),S(n(Le),{class:"home"},{default:v(()=>[c(n(Ut),{class:"header"},{default:v(()=>[c(n(Mn))]),_:1}),c(n(Le),{"has-sider":"",class:"main"},{default:v(()=>[c(n(He),{class:"left",width:"200",collapsed:l.value,"native-scrollbar":!1,bordered:"","collapse-mode":"width","show-trigger":"",onCollapse:y[2]||(y[2]=()=>l.value=!0),onExpand:y[3]||(y[3]=()=>l.value=!1)},{default:v(()=>[c(n(Jn),{iscollapsed:l.value,"onUpdate:iscollapsed":[y[0]||(y[0]=k=>l.value=k),y[1]||(y[1]=k=>l.value=k)]},null,8,["iscollapsed"])]),_:1},8,["collapsed"]),c(n(Le),{"has-sider":"","sider-placement":"right"},{default:v(()=>[P((h(),S(n(Vt),{class:"content"},{default:v(()=>[c(n(st),{"x-scrollable":"",style:de(n(o))},{default:v(()=>[c(rn,{onDrop:s,onDragover:r,onMousedown:f,onClick:f})]),_:1},8,["style"])]),_:1})),[[B,m]]),c(n(He),{class:"right",width:"240",collapsed:p.value,"native-scrollbar":!1,bordered:"","collapsed-width":35,"collapse-mode":"width","show-trigger":"arrow-circle",onCollapse:y[6]||(y[6]=()=>p.value=!0),onExpand:y[7]||(y[7]=()=>p.value=!1)},{default:v(()=>[c(n(Ea),{iscollapsed:p.value,"onUpdate:iscollapsed":[y[4]||(y[4]=k=>p.value=k),y[5]||(y[5]=k=>p.value=k)]},null,8,["iscollapsed"])]),_:1},8,["collapsed"])]),_:1})]),_:1})]),_:1})}}});var ul=H(Ba,[["__scopeId","data-v-3fbcd46e"]]);export{ul as default};
