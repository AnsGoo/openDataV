import{r as g,h as b}from"./echarts.4f9736bc.js";import{h as v}from"./index.1f44d164.js";import{u as w,b as x}from"./index.ef2789db.js";import{t as V}from"./mydark.e6801489.js";import{d as y}from"./lodash-es.5f1bdab1.js";import{f as S,r as k,q as z,w as E,o as L,a4 as N,G as T,N as B,W as D}from"./@vue.f8650cf9.js";import"./zrender.706c9170.js";import"./tslib.34a40861.js";import"./axios.19d3e859.js";import"./vue-router.32a64423.js";import"./pinia.30c42674.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./naive-ui.2edb364b.js";import"./date-fns.3ef01b04.js";import"./seemly.5d1c4af6.js";import"./vueuc.ebfd6ddc.js";import"./evtd.79485e8d.js";import"./@css-render.7ab96087.js";import"./vooks.ee7b0837.js";import"./vdirs.8ff5d312.js";import"./@juggle.37ed2144.js";import"./css-render.d5050412.js";import"./@emotion.6322e2ae.js";import"./treemate.80cdf2c2.js";import"./async-validator.fb49d0f5.js";import"./dexie.78e6a997.js";import"./nprogress.5f640c6a.js";import"./@icon-park.f4b03c54.js";const pe=S({props:{componentId:null,propValue:null},setup(u){const o=u;g("mydark",V);const p=k(null);let t=null,r=0;const d=w(),m=e=>{const s=e;o.propValue.datatag&&s.TagName===o.propValue.datatag&&(r=Number(s.TagValue),c())};z(()=>{f(),j()}),x("actual",m);function f(){v.post({url:o.propValue.history,data:[o.propValue.datatag]}).then(e=>{e.ErrorCode===200&&(r=Number(e.Results[0].TagValue))}).catch(e=>{console.log(e);const s=o.propValue.maxValue;r=Math.round(Math.random()*s)}).finally(()=>{c()})}const h=e=>{const s=e[0],{width:a,height:i}=s.contentRect;t==null||t.resize({width:a,height:i})},n=()=>{const e="#03b7c9",s=o.propValue.maxValue,a=o.propValue.name,i=o.propValue.unit,l=o.propValue.value;return{series:[{type:"gauge",radius:"80%",splitNumber:10,min:0,max:s,startAngle:225,endAngle:-45,axisLine:{show:!0,lineStyle:{width:2,shadowBlur:0,color:[[1,e]]}},axisTick:{show:!0,lineStyle:{color:e,width:1},length:-5,splitNumber:10},splitLine:{show:!0,length:-14,lineStyle:{color:e}},axisLabel:{distance:-20,color:e,fontSize:"14",fontWeight:"bold"},pointer:{show:!1},detail:{show:!1}},{name:a,type:"gauge",radius:"80%",startAngle:225,endAngle:-45,min:0,max:s,axisLine:{show:!0,lineStyle:{width:16,color:[[1,"rgba(255,255,255,.1)"]]}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},pointer:{show:!0,length:"105%"},detail:{show:!0,offsetCenter:[0,"100%"],fontSize:20,color:"#fff",formatter:["{value} "+(i||""),"{name|"+a+"}"].join(`
`),rich:{name:{fontSize:14,lineHeight:30,color:"#ddd"}}},itemStyle:{color:e},data:[{value:l}]}]}},c=y(()=>{const e=n();e.series[1].data[0]=r,t&&t.setOption({series:e.series})},300),j=()=>{t=b(p.value,"mydark"),t.clear(),t.setOption(n())};return d.isEditMode&&E(()=>o.propValue,()=>{t&&(t.clear(),t.setOption(n()))},{deep:!0}),L(()=>{t&&(t.clear(),t.dispose())}),(e,s)=>{const a=N("resize");return T((B(),D("div",{ref:(i,l)=>{l.chartEl=i,p.value=i}},null,512)),[[a,h]])}}});export{pe as default};
