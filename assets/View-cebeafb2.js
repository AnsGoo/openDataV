import{a8 as pt,a9 as q,aa as T,ab as Gt,ac as me,ad as Xe,ae as Yt,af as Kt,d as L,a1 as mt,a2 as Be,ag as qt,e as R,ah as Oe,a4 as ft,ai as Zt,aj as Jt,K as N,ak as Qt,al as en,i as ht,am as tn,an as Ge,o as w,c as O,b as i,w as D,u as y,Z as fe,a as z,C as te,ao as nn,l as B,$ as ve,s as Ce,F as X,ap as Ve,f as ue,r as on,_ as F,aq as ge,ar as vt,M as Ue,j as V,J as Ee,y as ne,B as U,as as G,h as gt,S as ze,at as an,au as De,v as I,X as ke,V as ee,av as sn,aw as _t,A as Z,z as $e,ax as Fe,x as oe,ay as He,az as W,aA as Re,aB as Ae,G as Ie,aC as Le,aD as Pe,aE as bt,aF as _e,aG as ln,aH as Te,E as he,aI as Ne,aJ as yt,aK as cn,aL as je,aM as We,n as Y,aN as rn,W as de,aO as Ye,g as xe,aP as Ct,aQ as Ke,aR as qe,aS as un,t as Ze,aT as dn,p as pn,aU as mn,aV as xt,aW as fn,U as hn,I as St,aX as vn,Q as we,aY as gn,aZ as _n,P as bn,T as Je,a_ as wt,a$ as yn,b0 as Cn,b1 as xn,b2 as Dt,b3 as kt,b4 as Sn,H as J,b5 as $t,N as Qe,b6 as wn,a5 as Rt,a7 as Dn,a6 as kn}from"./index-70139cdd.js";import{u as $n}from"./index-3c321de0.js";import{u as Rn}from"./index-76257893.js";import{u as It,a as Lt,S as In}from"./clipBoard-b544987d.js";import{i as Ln,L as Tn}from"./LogoView-911735ce.js";import{N as Nn}from"./Scrollbar-14215757.js";import{N as Bn}from"./LayoutFooter-06e16f15.js";import{u as En,s as zn,g as On}from"./pages-a508f63c.js";import{Q as An,R as Pn}from"./index-b32235b4.js";import"./index-c2b5f845.js";import"./staticData-3b11f627.js";function jn(n,e,t,s){var r=-1,l=n==null?0:n.length;for(s&&l&&(t=n[++r]);++r<l;)t=e(t,n[r],r,n);return t}function Mn(n){return function(e){return n?.[e]}}var Vn={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Un=Mn(Vn);const Fn=Un;var Hn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wn="\\u0300-\\u036f",Xn="\\ufe20-\\ufe2f",Gn="\\u20d0-\\u20ff",Yn=Wn+Xn+Gn,Kn="["+Yn+"]",qn=RegExp(Kn,"g");function Zn(n){return n=pt(n),n&&n.replace(Hn,Fn).replace(qn,"")}var Jn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Qn(n){return n.match(Jn)||[]}var eo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function to(n){return eo.test(n)}var Tt="\\ud800-\\udfff",no="\\u0300-\\u036f",oo="\\ufe20-\\ufe2f",ao="\\u20d0-\\u20ff",so=no+oo+ao,Nt="\\u2700-\\u27bf",Bt="a-z\\xdf-\\xf6\\xf8-\\xff",lo="\\xac\\xb1\\xd7\\xf7",io="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",co="\\u2000-\\u206f",ro=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Et="A-Z\\xc0-\\xd6\\xd8-\\xde",uo="\\ufe0e\\ufe0f",zt=lo+io+co+ro,Ot="['’]",et="["+zt+"]",po="["+so+"]",At="\\d+",mo="["+Nt+"]",Pt="["+Bt+"]",jt="[^"+Tt+zt+At+Nt+Bt+Et+"]",fo="\\ud83c[\\udffb-\\udfff]",ho="(?:"+po+"|"+fo+")",vo="[^"+Tt+"]",Mt="(?:\\ud83c[\\udde6-\\uddff]){2}",Vt="[\\ud800-\\udbff][\\udc00-\\udfff]",re="["+Et+"]",go="\\u200d",tt="(?:"+Pt+"|"+jt+")",_o="(?:"+re+"|"+jt+")",nt="(?:"+Ot+"(?:d|ll|m|re|s|t|ve))?",ot="(?:"+Ot+"(?:D|LL|M|RE|S|T|VE))?",Ut=ho+"?",Ft="["+uo+"]?",bo="(?:"+go+"(?:"+[vo,Mt,Vt].join("|")+")"+Ft+Ut+")*",yo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Co="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",xo=Ft+Ut+bo,So="(?:"+[mo,Mt,Vt].join("|")+")"+xo,wo=RegExp([re+"?"+Pt+"+"+nt+"(?="+[et,re,"$"].join("|")+")",_o+"+"+ot+"(?="+[et,re+tt,"$"].join("|")+")",re+"?"+tt+"+"+nt,re+"+"+ot,Co,yo,At,So].join("|"),"g");function Do(n){return n.match(wo)||[]}function ko(n,e,t){return n=pt(n),e=t?void 0:e,e===void 0?to(n)?Do(n):Qn(n):n.match(e)||[]}var $o="['’]",Ro=RegExp($o,"g");function Io(n){return function(e){return jn(ko(Zn(e).replace(Ro,"")),n,"")}}var Lo=Io(function(n,e,t){return n+(t?"-":"")+e.toLowerCase()});const To=Lo;function at(n,e="default",t=[]){const{children:s}=n;if(s!==null&&typeof s=="object"&&!Array.isArray(s)){const r=s[e];if(typeof r=="function")return r()}return t}const Ht="DESCRIPTION_ITEM_FLAG";function No(n){return typeof n=="object"&&n&&!Array.isArray(n)?n.type&&n.type[Ht]:!1}const Bo=q([T("descriptions",{fontSize:"var(--n-font-size)"},[T("descriptions-separator",`
 display: inline-block;
 margin: 0 8px 0 2px;
 `),T("descriptions-table-wrapper",[T("descriptions-table",[T("descriptions-table-row",[T("descriptions-table-header",{padding:"var(--n-th-padding)"}),T("descriptions-table-content",{padding:"var(--n-td-padding)"})])])]),Gt("bordered",[T("descriptions-table-wrapper",[T("descriptions-table",[T("descriptions-table-row",[q("&:last-child",[T("descriptions-table-content",{paddingBottom:0})])])])])]),me("left-label-placement",[T("descriptions-table-content",[q("> *",{verticalAlign:"top"})])]),me("left-label-align",[q("th",{textAlign:"left"})]),me("center-label-align",[q("th",{textAlign:"center"})]),me("right-label-align",[q("th",{textAlign:"right"})]),me("bordered",[T("descriptions-table-wrapper",`
 border-radius: var(--n-border-radius);
 overflow: hidden;
 background: var(--n-merged-td-color);
 border: 1px solid var(--n-merged-border-color);
 `,[T("descriptions-table",[T("descriptions-table-row",[q("&:not(:last-child)",[T("descriptions-table-content",{borderBottom:"1px solid var(--n-merged-border-color)"}),T("descriptions-table-header",{borderBottom:"1px solid var(--n-merged-border-color)"})]),T("descriptions-table-header",`
 font-weight: 400;
 background-clip: padding-box;
 background-color: var(--n-merged-th-color);
 `,[q("&:not(:last-child)",{borderRight:"1px solid var(--n-merged-border-color)"})]),T("descriptions-table-content",[q("&:not(:last-child)",{borderRight:"1px solid var(--n-merged-border-color)"})])])])])]),T("descriptions-header",`
 font-weight: var(--n-th-font-weight);
 font-size: 18px;
 transition: color .3s var(--n-bezier);
 line-height: var(--n-line-height);
 margin-bottom: 16px;
 color: var(--n-title-text-color);
 `),T("descriptions-table-wrapper",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[T("descriptions-table",`
 width: 100%;
 border-collapse: separate;
 border-spacing: 0;
 box-sizing: border-box;
 `,[T("descriptions-table-row",`
 box-sizing: border-box;
 transition: border-color .3s var(--n-bezier);
 `,[T("descriptions-table-header",`
 font-weight: var(--n-th-font-weight);
 line-height: var(--n-line-height);
 display: table-cell;
 box-sizing: border-box;
 color: var(--n-th-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),T("descriptions-table-content",`
 vertical-align: top;
 line-height: var(--n-line-height);
 display: table-cell;
 box-sizing: border-box;
 color: var(--n-td-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[Xe("content",`
 transition: color .3s var(--n-bezier);
 display: inline-block;
 color: var(--n-td-text-color);
 `)]),Xe("label",`
 font-weight: var(--n-th-font-weight);
 transition: color .3s var(--n-bezier);
 display: inline-block;
 margin-right: 14px;
 color: var(--n-th-text-color);
 `)])])])]),T("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color);
 --n-merged-td-color: var(--n-td-color);
 --n-merged-border-color: var(--n-border-color);
 `),Yt(T("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color-modal);
 --n-merged-td-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `)),Kt(T("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color-popover);
 --n-merged-td-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `))]),Eo=Object.assign(Object.assign({},Be.props),{title:String,column:{type:Number,default:3},columns:Number,labelPlacement:{type:String,default:"top"},labelAlign:{type:String,default:"left"},separator:{type:String,default:":"},size:{type:String,default:"medium"},bordered:Boolean,labelStyle:[Object,String],contentStyle:[Object,String]}),be=L({name:"Descriptions",props:Eo,setup(n){const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=mt(n),s=Be("Descriptions","-descriptions",Bo,qt,n,e),r=R(()=>{const{size:p,bordered:m}=n,{common:{cubicBezierEaseInOut:o},self:{titleTextColor:a,thColor:c,thColorModal:u,thColorPopover:d,thTextColor:h,thFontWeight:x,tdTextColor:b,tdColor:v,tdColorModal:S,tdColorPopover:k,borderColor:A,borderColorModal:P,borderColorPopover:j,borderRadius:M,lineHeight:_,[Oe("fontSize",p)]:f,[Oe(m?"thPaddingBordered":"thPadding",p)]:g,[Oe(m?"tdPaddingBordered":"tdPadding",p)]:C}}=s.value;return{"--n-title-text-color":a,"--n-th-padding":g,"--n-td-padding":C,"--n-font-size":f,"--n-bezier":o,"--n-th-font-weight":x,"--n-line-height":_,"--n-th-text-color":h,"--n-td-text-color":b,"--n-th-color":c,"--n-th-color-modal":u,"--n-th-color-popover":d,"--n-td-color":v,"--n-td-color-modal":S,"--n-td-color-popover":k,"--n-border-radius":M,"--n-border-color":A,"--n-border-color-modal":P,"--n-border-color-popover":j}}),l=t?ft("descriptions",R(()=>{let p="";const{size:m,bordered:o}=n;return o&&(p+="a"),p+=m[0],p}),r,n):void 0;return{mergedClsPrefix:e,cssVars:t?void 0:r,themeClass:l?.themeClass,onRender:l?.onRender,compitableColumn:Zt(n,["columns","column"]),inlineThemeDisabled:t}},render(){const n=this.$slots.default,e=n?Jt(n()):[];e.length;const{compitableColumn:t,labelPlacement:s,labelAlign:r,size:l,bordered:p,title:m,cssVars:o,mergedClsPrefix:a,separator:c,onRender:u}=this;u?.();const d=e.filter(v=>No(v)),h={span:0,row:[],secondRow:[],rows:[]},b=d.reduce((v,S,k)=>{const A=S.props||{},P=d.length-1===k,j=["label"in A?A.label:at(S,"label")],M=[at(S)],_=A.span||1,f=v.span;v.span+=_;const g=A.labelStyle||A["label-style"]||this.labelStyle,C=A.contentStyle||A["content-style"]||this.contentStyle;if(s==="left")p?v.row.push(N("th",{class:`${a}-descriptions-table-header`,colspan:1,style:g},j),N("td",{class:`${a}-descriptions-table-content`,colspan:P?(t-f)*2+1:_*2-1,style:C},M)):v.row.push(N("td",{class:`${a}-descriptions-table-content`,colspan:P?(t-f)*2:_*2},N("span",{class:`${a}-descriptions-table-content__label`,style:g},[...j,c&&N("span",{class:`${a}-descriptions-separator`},c)]),N("span",{class:`${a}-descriptions-table-content__content`,style:C},M)));else{const $=P?(t-f)*2:_*2;v.row.push(N("th",{class:`${a}-descriptions-table-header`,colspan:$,style:g},j)),v.secondRow.push(N("td",{class:`${a}-descriptions-table-content`,colspan:$,style:C},M))}return(v.span>=t||P)&&(v.span=0,v.row.length&&(v.rows.push(v.row),v.row=[]),s!=="left"&&v.secondRow.length&&(v.rows.push(v.secondRow),v.secondRow=[])),v},h).rows.map(v=>N("tr",{class:`${a}-descriptions-table-row`},v));return N("div",{style:o,class:[`${a}-descriptions`,this.themeClass,`${a}-descriptions--${s}-label-placement`,`${a}-descriptions--${r}-label-align`,`${a}-descriptions--${l}-size`,p&&`${a}-descriptions--bordered`]},m||this.$slots.header?N("div",{class:`${a}-descriptions-header`},m||Qt(this,"header")):null,N("div",{class:`${a}-descriptions-table-wrapper`},N("table",{class:`${a}-descriptions-table`},N("tbody",null,b))))}}),zo={label:String,span:{type:Number,default:1},labelStyle:[Object,String],contentStyle:[Object,String]},ye=L({name:"DescriptionsItem",[Ht]:!0,props:zo,render(){return null}}),Oo=Object.assign(Object.assign({},Be.props),{tag:{type:String,default:"div"}}),Ao=L({name:"Element",alias:["El"],props:Oo,setup(n){const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=mt(n),s=Be("Element","-element",void 0,en,n,e),r=R(()=>{const{common:p}=s.value;return Object.keys(p).reduce((m,o)=>(m[`--${To(o)}`]=p[o],m),{})}),l=t?ft("element",void 0,r,n):void 0;return{mergedClsPrefix:e,cssVars:t?void 0:r,themeClass:l?.themeClass,onRender:l?.onRender}},render(){var n;const{tag:e,mergedClsPrefix:t,cssVars:s,themeClass:r,onRender:l,$slots:p}=this;return l?.(),N(e,{role:"none",class:[`${t}-element`,r],style:s},(n=p.default)===null||n===void 0?void 0:n.call(p))}});function Po(){const n=ht(tn,null);return R(()=>{if(n===null)return Ge;const{mergedThemeRef:{value:e},mergedThemeOverridesRef:{value:t}}=n,s=e?.common||Ge;return t?.common?Object.assign({},s,t.common):s})}const st=L({__name:"ToolBarItem",props:{label:{},action:{},disable:{type:Function,default:()=>!1},icon:{},divider:{type:Boolean},children:{},otherShow:{},isButton:{type:Boolean,default:!0}},setup(n){const e=n,s=Ve().appContext.components.XIcon,r=R(()=>Ln(e.icon)?N(s,{name:e.icon,size:24}):e.icon());return(l,p)=>(w(),O(X,null,[i(y(nn),null,{trigger:D(()=>[i(y(fe),{quaternary:"",size:"small",title:l.label,onClick:l.action},{default:D(()=>[i(y(r))]),_:1},8,["title","onClick"])]),default:D(()=>[z("span",null,te(l.label),1)]),_:1}),l.divider?(w(),B(y(ve),{key:0,vertical:""})):Ce("",!0)],64))}}),jo={class:"tool-bar"},Mo={class:"tool-bar-item"},Vo={class:"tool-bar-middle"},Uo={class:"tool-bar-item"},Fo=L({__name:"ToolBar",props:{bars:{default:()=>[]}},setup(n){const e=n,t=R(()=>e.bars.filter(r=>r.location==="left"||r.location===void 0)),s=R(()=>e.bars.filter(r=>r.location==="right"));return(r,l)=>(w(),O("div",jo,[z("div",Mo,[(w(!0),O(X,null,ue(t.value,(p,m)=>(w(),B(st,{key:m,action:p.action,label:p.label,divider:p.divider,icon:p.icon},null,8,["action","label","divider","icon"]))),128))]),z("div",Vo,[on(r.$slots,"default",{},void 0,!0)]),z("div",Uo,[(w(!0),O(X,null,ue(s.value,(p,m)=>(w(),B(st,{key:m,action:p.action,label:p.label,divider:p.divider,icon:p.icon},null,8,["action","label","divider","icon"]))),128))])]))}}),Ho=F(Fo,[["__scopeId","data-v-9c59014a"]]),Wo=L({components:{NDescriptions:be,NDescriptionsItem:ye,NEmpty:ge},props:{desc:{type:String,required:!0}},setup(n){return()=>i(be,{class:"placeholder"},{default:()=>[i(ye,null,{default:()=>[i(ge,{description:n.desc},null)]})]})}}),Me=n=>i(Wo,{desc:n},null),Xo=["data-component"],Go=L({__name:"ComponentItem",props:{component:{},name:{}},setup(n){return(e,t)=>(w(),O("div",{draggable:"true","data-component":e.component},[z("div",null,te(e.name),1)],8,Xo))}}),Yo={class:"components"},Ko=L({__name:"ComponentList",setup(n){const e=V(),s=Ve().appContext.components.XIcon,r=R(()=>{const p=e.components,m={};Object.keys(p).forEach(a=>{const c=new p[a],u=c.group;!u||!c.show||(m[u]||(m[u]=[]),m[u].push(c))});const o=[];return vt.forEach(a=>{o.push({label:()=>a.name,key:a.key,icon:()=>N(s,{name:`${a.icon}`}),children:m[a.key]?.map(c=>({label:()=>N(Go,{component:c.component,name:c.name,ondragstart:l}),key:c.component}))})}),o}),l=p=>{p.dataTransfer.setData("componentName",p.target.dataset.component)};return(p,m)=>(w(),O("div",Yo,[i(y(Ue),{options:r.value,accordion:!1},null,8,["options"])]))}}),lt=F(Ko,[["__scopeId","data-v-7a048ed6"]]),qo={key:0,class:"layer"},Zo={key:1,class:"layer"},Jo=L({__name:"LayerItem",props:{component:{},index:{},activeKey:{},mode:{default:"expand"},contextmenus:{}},emits:["select"],setup(n,{emit:e}){const t=n,s=V(),r=o=>o?"previewOpen":"previewClose",l=(o,a)=>{o.dataTransfer?.setData("componentIndex",a),o.stopPropagation()},p=(o,a,c=!1)=>{o.preventDefault(),o.stopPropagation(),c&&a!==t.activeKey&&gt.emit(ze.ACTIVE_MENU,a)},m=(o,a)=>{o.preventDefault(),o.stopPropagation();const c=o.dataTransfer?.getData("componentIndex");if(!an(c,a))return;const d=c.split("-").map(S=>Number(S)),h=s.getComponentByIndex(d),x=De(h),b=a.split("-").map(S=>Number(S)),v=s.getComponentByIndex(b);if(x&&v&&a){const S=v.id;s.cutComponent(d[d.length-1],h?.parent);const k=v.parent||void 0,P=(k?k.subComponents:s.componentData).findIndex(j=>j.id===S);s.insertComponent(P,x,k),e("select",a)}};return(o,a)=>{const c=Ee("x-icon"),u=ne("contextmenu");return U((w(),O("div",{draggable:"true",onDragstart:a[0]||(a[0]=d=>l(d,o.index)),onDrop:a[1]||(a[1]=d=>m(d,o.index)),onDragover:a[2]||(a[2]=d=>p(d,o.index,!0))},[o.component.component==="Group"?(w(),O("div",qo,[U(z("span",null,te(o.component.name||"分组"),513),[[G,o.mode==="expand"]]),i(c,{name:r(o.component.display),size:18},null,8,["name"])])):(w(),O("div",Zo,[U(z("span",null,te(o.component.name),513),[[G,o.mode==="expand"]]),i(c,{name:r(o.component.display),size:18},null,8,["name"])]))],32)),[[u,o.contextmenus,void 0,{stop:!0}]])}}}),it=F(Jo,[["__scopeId","data-v-1de37028"]]),Qo=L({__name:"SimpleLayerItem",props:{component:{},index:{},activeKey:{},mode:{default:"expand"},name:{},contextmenus:{}},emits:["select"],setup(n,{emit:e}){const t=n,s=V(),r=(o,a)=>{o.dataTransfer?.setData("componentIndex",a),o.stopPropagation()},l=(o,a,c=!1)=>{o.preventDefault(),o.stopPropagation(),c&&a!==t.activeKey&&gt.emit(ze.ACTIVE_MENU,a)},p=(o,a)=>{o.preventDefault(),o.stopPropagation();const c=o.dataTransfer?.getData("componentIndex"),u=m(c,a),d=c.split("-").map(b=>Number(b)),h=s.getComponentByIndex(d),x=s.cutComponent(d[d.length-1],h?.parent);if(x&&u){const b=c.split("-").map(S=>Number(S)),v=s.getComponentByIndex(b);s.insertComponent(b[b.length-1],x,v),e("select",a)}},m=(o,a)=>{const c=o.split("-").map(h=>parseInt(h)),u=a.split("-").map(h=>parseInt(h)),d=c.length;for(let h=0;h<d;h++){if(c[h]>u[h])return a;if(c[h]<u[h])return h+1==d?(u[h]=u[h]-1,u.join("-")):a}return a};return(o,a)=>{const c=Ee("x-icon"),u=ne("contextmenu");return U((w(),B(c,{draggable:"true",size:18,name:o.name,onDragstart:a[0]||(a[0]=d=>r(d,o.index)),onDrop:a[1]||(a[1]=d=>p(d,o.index)),onDragover:a[2]||(a[2]=d=>l(d,o.index,!0))},null,8,["name"])),[[u,o.contextmenus,void 0,{stop:!0}]])}}}),ct=F(Qo,[["__scopeId","data-v-d9636860"]]),rt=L({__name:"Layer",setup(n){const e=V(),t=It(),s={};vt.map(_=>{s[_.key]=_.icon});const r=R(()=>e.componentData),l=I(null),p=I("");ke("ActiveMenu",_=>{const f=_;p.value=f,l.value&&l.value.open&&l.value.open(f)});const o=_=>{p.value=_;const f=_.split("-").map(C=>Number(C)),g=e.getComponentByIndex(f);g&&e.setCurComponent(g,_)},a=I([]),c=(_,f,g)=>{for(let C=0;C<f.length;C++){const $=f[C],E=u(C,_);if($.group===sn.CONTAINER){const K=[];g.push({label:()=>N(it,{component:$,index:E,contextmenus:()=>M(E),onclick:()=>o(E)}),key:E,icon:()=>N(ct,{name:"container",component:$,index:E,contextmenus:()=>M(E),onclick:()=>o(E)}),children:c(E,$.subComponents||[],K)})}else g.push({label:()=>N(it,{component:$,index:E,contextmenus:()=>M(E)}),key:E,icon:()=>N(ct,{name:`${s[$.group]}`,component:$,index:E,contextmenus:()=>M(E),onclick:()=>o(E)})})}return g},u=(_,f)=>f?`${f}-${_}`:_.toString(),d=_=>{const f=_.split("-").map(C=>Number(C)),g=De(e.getComponentByIndex(f));g&&t.copy(g)},h=async _=>{o(_);const f=_.split("-").map(g=>Number(g));e.removeComponent(f[f.length-1],e.curComponent?.parent)},x=async _=>{o(_);const f=_.split("-").map(g=>Number(g));e.upComponent(f[f.length-1],e.curComponent?.parent)},b=async _=>{o(_);const f=_.split("-").map(g=>Number(g));e.downComponent(f[f.length-1],e.curComponent?.parent)},v=async _=>{o(_);const f=_.split("-").map(g=>Number(g));e.topComponent(f[f.length-1],e.curComponent?.parent)},S=async _=>{o(_);const f=_.split("-").map(g=>Number(g));e.bottomComponent(f[f.length-1],e.curComponent?.parent)},k=_=>{o(_);const f=_.split("-").map(C=>Number(C)),g=e.getComponentByIndex(f);g&&g.setVisible(!1)},A=_=>{o(_);const f=_.split("-").map(C=>Number(C)),g=e.getComponentByIndex(f);g&&g.setVisible(!0)},P=_=>{const f=_.split("-").map($=>Number($)),g=e.getComponentByIndex(f),C=e.cutComponent(f[f.length-1],g?.parent);C&&t.copy(C)},j=_=>{const f=_.split("-").map(C=>Number(C)),g=e.getComponentByIndex(f);if(t.copyData){const C=De(t.copyData);C.id=_t(),e.insertComponent(f[f.length-1],C,g?.parent)}},M=_=>{const f=_.split("-").map(g=>parseInt(g));return[{text:"复制",subText:"Ctrl + C",handler:()=>d(_)},{text:"粘贴",subText:"Ctrl + V",handler:()=>j(_)},{text:"剪切",subText:"Ctrl + X",handler:()=>P(_)},{text:"拆分",subText:"",disable:e.getComponentByIndex(_.split("-").map(g=>Number(g)))?.component!=="Group",handler:()=>e.decompose()},{text:"删除",subText:"",handler:()=>h(_)},{divider:!0},{text:"置于顶层",handler:()=>v(_),children:[{text:"置于顶层",handler:()=>v(_)},{text:"上移一层",handler:()=>x(_)}]},{text:"置于底层",handler:()=>S(_),children:[{text:"置于底层",handler:()=>S(_)},{text:"下移一层",handler:()=>b(_)}]},{divider:!0},{text:"显示",disable:e.getComponentByIndex(f)?.display,subText:"",handler:()=>A(_)},{text:"隐藏",disable:!e.getComponentByIndex(f)?.display,subText:"",handler:()=>k(_)}]};return ee(()=>e.componentData,()=>{const _=e.componentData;a.value=[],a.value=c("",_,[])},{deep:!0,immediate:!0}),(_,f)=>(w(),O("div",null,[r.value.length>0?(w(),B(y(Ue),{key:0,options:a.value,"root-indent":1,indent:12,"onUpdate:value":o},null,8,["options"])):(w(),B(y(be),{key:1,class:"placeholder"},{default:D(()=>[i(y(ye),null,{default:D(()=>[i(y(ge),{description:"画布为空"})]),_:1})]),_:1}))]))}}),ea=z("span",null,"组件",-1),ta=z("span",null,"图层",-1),na=L({__name:"SideBar",props:{iscollapsed:{type:Boolean,default:!1}},emits:["update:iscollapsed"],setup(n,{emit:e}){const t=I("components"),s=l=>{e("update:iscollapsed",!1),t.value=l},r=l=>{t.value=l};return(l,p)=>{const m=Ee("x-icon");return l.iscollapsed?(w(),B(y($e),{key:1,value:t.value,"onUpdate:value":[p[4]||(p[4]=o=>t.value=o),s],type:"line",animated:"","bar-width":48,"justify-content":"center"},{default:D(()=>[t.value==="components"?(w(),B(y(Z),{key:0,name:"components","display-directive":"show:lazy"},{tab:D(()=>[i(m,{name:"components",onClick:p[2]||(p[2]=o=>r("layer"))})]),default:D(()=>[i(lt)]),_:1})):t.value==="layer"?(w(),B(y(Z),{key:1,name:"layer","display-directive":"show:lazy"},{tab:D(()=>[i(m,{name:"layers",onClick:p[3]||(p[3]=o=>r("components"))})]),default:D(()=>[i(rt)]),_:1})):Ce("",!0)]),_:1},8,["value"])):(w(),B(y($e),{key:0,value:t.value,"onUpdate:value":[p[0]||(p[0]=o=>t.value=o),p[1]||(p[1]=o=>{t.value=o})],type:"line",animated:"","bar-width":100,"justify-content":"center"},{default:D(()=>[i(y(Z),{name:"components","display-directive":"show:lazy"},{tab:D(()=>[i(m,{name:"components"}),ea]),default:D(()=>[i(lt)]),_:1}),i(y(Z),{name:"layer","display-directive":"show:lazy"},{tab:D(()=>[i(m,{name:"layers"}),ta]),default:D(()=>[i(rt)]),_:1})]),_:1},8,["value"]))}}}),oa=L({__name:"AttrList",props:{curComponent:{}},setup(n){const e=n,t=V(),s=R(()=>e.curComponent.defaultViewType),r=R(()=>m()),l=R(()=>e.curComponent?e.curComponent.propFromValue:[]),p=(o,a)=>{t.setCurComponentPropValue(o,a)},m=()=>{const o={common:{name:e.curComponent.name,component:e.curComponent.component,id:e.curComponent.id}};return e.curComponent&&e.curComponent.propValue&&Object.assign(o,e.curComponent.propValue),o};return(o,a)=>(w(),B(y(Fe),{config:l.value,data:r.value,mode:s.value,onChange:p},null,8,["config","data","mode"]))}}),aa=L({__name:"Canvas",setup(n){const e=V(),t=R(()=>e.canvasStyleConfig.formItems),s=R(()=>e.canvasStyleConfig.mode),r=R(()=>e.globalOption),l=(p,m)=>{e.setCanvasStyle(p,m)};return(p,m)=>(w(),B(y(Fe),{config:t.value,data:r.value,mode:s.value,onChange:l},null,8,["config","data","mode"]))}});function le(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!bt(n)}const ie=V(),sa=L({emits:["change"],setup(n){const e=He(),t=I(""),s=I([]);oe(()=>{Object.keys(e.globalPlugins).forEach(u=>{const d=e.globalPlugins[u];s.value.push({label:d.name,value:d.type})})});const r=(c,u)=>{const d=e.getPlugin(c),h=d?d.component:Me("未发现相应的数据插件"),x=ie.getDataSlotter(u);return i(h,{slotter:x},null)},l=()=>{t.value&&ie.appendDataSlotter(t.value)},p=R(()=>Object.keys(ie.globalSlotters).map(u=>({id:u,type:ie.getDataSlotter(u).type}))),m=(c,u,d)=>{let h,x,b;switch(ie.canvasStyleConfig.mode){case W.COLLAPSE:return i(Pe,{accordion:!0},{default:()=>[i(Le,{title:`全局数据${d+1}`,name:"dataType"},le(h=r(c,u))?h:{default:()=>[h]})]});case W.CARD:return i(X,null,[i(Ie,{title:`全局数据${d+1}`,size:"small",style:{marginBottom:"0.25rem"}},le(x=r(c,u))?x:{default:()=>[x]})]);case W.FORM:return i("div",{style:{padding:"0 1rem"}},[i(ve,{"title-placement":"left",style:{marginTop:"0px",marginBottom:"0px"}},{default:()=>[`全局数据${d+1}`]}),r(c,u)]);case W.TIMELINE:return i(Ae,null,{default:()=>[i(Re,{title:`全局数据${d+1}`,type:"success"},le(b=r(c,u))?b:{default:()=>[b]})]})}},o=()=>i(Ne,{size:"small",labelPlacement:"top",labelAlign:"left"},{default:()=>[i(_e,{key:"dataType",label:"数据类型"},{default:()=>[i(ln,null,{default:()=>[i(Te,{value:t.value,"onUpdate:value":c=>t.value=c,placeholder:"请选择数据类型",options:s.value,clearable:!0},null),i(fe,{type:"success",onClick:l},{default:()=>[he("新增")]})]})]})]}),a=()=>{let c,u,d;switch(ie.canvasStyleConfig.mode){case W.COLLAPSE:return i(Pe,{accordion:!0},{default:()=>[i(Le,{title:"添加数据",name:"dataType"},le(c=o())?c:{default:()=>[c]})]});case W.CARD:return i(X,null,[i(Ie,{title:"添加数据",size:"small",style:{marginBottom:"0.25rem"}},le(u=o())?u:{default:()=>[u]})]);case W.FORM:return i("div",{style:{padding:"0 1rem"}},[i(ve,{"title-placement":"left",style:{marginTop:"0px",marginBottom:"0px"}},{default:()=>["添加数据"]}),o()]);case W.TIMELINE:return i(Ae,null,{default:()=>[i(Re,{title:"添加数据",type:"success"},le(d=o())?d:{default:()=>[d]})]})}};return()=>Object.keys(e.plugins).length>0?i(X,null,[a(),p.value.map((c,u)=>m(c.type,c.id,u))]):i(be,null,{default:()=>[i(ye,null,{default:()=>[i(ge,{description:"未发现任何全局数据插件"},null)]})]})}});function ce(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!bt(n)}const la=L({props:{curComponent:{type:Object,required:!0}},emits:["change"],setup(n){const e=He(),t=cn(),s=I("DEMO"),r=I(null);ee(()=>n.curComponent,async h=>{if(h){const x=n.curComponent.dataConfig;x&&(s.value=x.type)}},{deep:!0,immediate:!0});const l=I([]);oe(()=>{Object.keys(e.componentPlugins).forEach(b=>{const v=e.componentPlugins[b];l.value.push({label:v.name,value:v.type})});const x=n.curComponent.dataConfig;x&&(s.value=x.type)});const p=h=>{r.value=h},m=()=>{const h=e.getPlugin(s.value),x=h?h.component:Me("未发现相应的数据插件");return i(x,{slotter:n.curComponent},null)},o=()=>{if(!r.value)return;const h=t.getPlugin(r.value),x=h?h.component:Me("未发现相应的脚本插件");return i(x,{slotter:n.curComponent},null)},a=h=>{s.value=h},c=()=>i(Ne,{size:"small",labelPlacement:"top",labelAlign:"left"},{default:()=>[i(_e,{key:"dataType",label:"数据类型"},{default:()=>[i(Te,{value:s.value,"onUpdate:value":h=>s.value=h,placeholder:"请选择数据类型",options:l.value,onUpdateValue:h=>a(h),clearable:!0},null)]}),m()]}),u=()=>i(Ne,{size:"small",labelPlacement:"top",labelAlign:"left"},{default:()=>[i(_e,{key:"scriptType",label:"脚本类型"},{default:()=>[i(Te,{value:r.value,"onUpdate:value":h=>r.value=h,placeholder:"请选择脚本类型",options:t.allScriptType,onUpdateValue:h=>p(h),clearable:!0},null)]}),o()]}),d=()=>{let h,x,b,v,S,k;switch(n.curComponent.defaultViewType){case W.COLLAPSE:return i(Pe,{accordion:!0},{default:()=>[i(Le,{title:"数据选择",name:"dataType"},ce(h=c())?h:{default:()=>[h]}),i(Le,{title:"脚本配置",name:"scriptOptions"},ce(x=u())?x:{default:()=>[x]})]});case W.CARD:return i(X,null,[i(Ie,{title:"数据选择",size:"small",style:{marginBottom:"0.25rem"}},ce(b=c())?b:{default:()=>[b]}),i(Ie,{title:"脚本配置",size:"small",style:{marginBottom:"0.25rem"}},ce(v=u())?v:{default:()=>[v]})]);case W.FORM:return i("div",{style:{padding:"0 1rem"}},[i(ve,{"title-placement":"left",style:{marginTop:"0px",marginBottom:"0px"}},{default:()=>["数据选择"]}),c(),i(ve,{"title-placement":"left",style:{marginTop:"0px",marginBottom:"0px"}},{default:()=>["脚本配置"]}),u()]);case W.TIMELINE:return i(Ae,null,{default:()=>[i(Re,{title:"数据选择",type:"success"},ce(S=c())?S:{default:()=>[S]}),i(Re,{title:"脚本配置",type:"success"},ce(k=u())?k:{default:()=>[k]})]})}};return()=>n.curComponent.dataMode||n.curComponent.dataIntegrationMode===yt.UNIVERSAL?d():i(be,null,{default:()=>[i(ye,null,{default:()=>[i(ge,{description:"未发现数据配置项"},null)]})]})}}),ia=L({__name:"StyleGrid",props:{curComponent:{}},setup(n){const e=n,t=V(),s=R(()=>e.curComponent.defaultViewType),r=["top","left","width","height","rotate"],l=I({...e.curComponent.style}),p=R(()=>e.curComponent?e.curComponent.styleFormValue:[]),m=je((a,c)=>{if(e.curComponent)if(a[0]==="position"&&r.includes(a[1])){const u=e.curComponent.parent;t.syncComponentLocation({[a[1]]:c},u,!0),u&&t.resizeAutoComponent(u)}else t.setCurComponentStyle(a,c)},300);ee(()=>e.curComponent.id,()=>{e.curComponent&&e.curComponent.id&&(l.value=De(e.curComponent.style))},{immediate:!0,deep:!0});const o=je(()=>{Object.assign(l.value,e.curComponent.positionStyle)},200);return ee(()=>e.curComponent.positionStyle,()=>{e.curComponent&&e.curComponent.id&&o()},{deep:!0}),(a,c)=>(w(),B(y(Fe),{config:p.value,data:l.value,mode:s.value,flat:!0,onChange:y(m)},null,8,["config","data","mode","onChange"]))}}),ca=F(ia,[["__scopeId","data-v-288e0ca8"]]),ra={key:0},ua={class:"attr-list"},da={class:"attr-list"},pa={class:"attr-list"},ma={class:"attr-list"},fa={class:"attr-list"},ha={key:1},va=L({__name:"SideBar",props:{iscollapsed:{type:Boolean,default:!1}},emits:["update:iscollapsed"],setup(n,{emit:e}){const s=Ve().appContext.components.XIcon,r=I("attr"),l=V(),p=R(()=>l.curComponent),m=R(()=>l.curComponent?[{label:"样式",key:"4",icon:()=>N(s,{name:"textStyle",onClick:()=>o("style")})},{label:"属性",key:"2",icon:()=>N(s,{name:"attr",onClick:()=>o("attr")})},{label:"数据",key:"3",icon:()=>N(s,{name:"data",onClick:()=>o("data")})}]:[{label:"画布",key:"1",icon:()=>N(s,{name:"page"})}]),o=a=>{e("update:iscollapsed",!1),r.value=a};return(a,c)=>a.iscollapsed?(w(),O("div",ha,[i(y(Ue),{options:m.value},null,8,["options"])])):(w(),O("div",ra,[p.value?(w(),B(y($e),{key:0,value:r.value,"onUpdate:value":[c[0]||(c[0]=u=>r.value=u),c[1]||(c[1]=u=>{r.value=u})],type:"line",animated:"","justify-content":"center"},{default:D(()=>[i(y(Z),{name:"style","display-directive":"show:lazy"},{tab:D(()=>[i(y(s),{name:"textStyle"}),U(z("span",null,"样式",512),[[G,!a.iscollapsed]])]),default:D(()=>[z("div",ua,[i(y(ca),{curComponent:p.value},null,8,["curComponent"])])]),_:1}),i(y(Z),{name:"attr","display-directive":"show:lazy"},{tab:D(()=>[i(y(s),{name:"attr"}),U(z("span",null,"属性",512),[[G,!a.iscollapsed]])]),default:D(()=>[z("div",da,[i(y(oa),{curComponent:p.value},null,8,["curComponent"])])]),_:1}),i(y(Z),{name:"data","display-directive":"show:lazy"},{tab:D(()=>[i(y(s),{name:"data"}),U(z("span",null,"数据",512),[[G,!a.iscollapsed]])]),default:D(()=>[z("div",pa,[i(y(la),{curComponent:p.value},null,8,["curComponent"])])]),_:1})]),_:1},8,["value"])):(w(),B(y($e),{key:1,type:"line",animated:"","justify-content":"center"},{default:D(()=>[i(y(Z),{name:"canvas","display-directive":"show:lazy"},{tab:D(()=>[i(y(s),{name:"canvas"}),U(z("span",null,"画布",512),[[G,!a.iscollapsed]])]),default:D(()=>[z("div",ma,[i(aa)])]),_:1}),i(y(Z),{name:"data","display-directive":"show:lazy"},{tab:D(()=>[i(y(s),{name:"data"}),U(z("span",null,"数据",512),[[G,!a.iscollapsed]])]),default:D(()=>[z("div",fa,[i(y(sa))])]),_:1})]),_:1}))]))}}),ga=F(va,[["__scopeId","data-v-b01cef53"]]),_a={class:"tool-bar-title"},ba=L({__name:"Toolbar",props:{toolbars:{default:()=>[]}},setup(n){const e=V();return(t,s)=>t.toolbars.length>0?(w(),B(y(Ho),{key:0,bars:t.toolbars},{default:D(()=>[z("div",_a,te(y(e).name),1)]),_:1},8,["bars"])):Ce("",!0)}}),ya=F(ba,[["__scopeId","data-v-f049a1af"]]),Ca=L({__name:"Area",setup(n){const e=Lt(),t=V(),s=R(()=>e.hidden),r=R(()=>e.style.left),l=R(()=>e.style.top),p=R(()=>e.style.width),m=R(()=>e.style.height),o=ee(()=>t.curComponent,()=>{e.components.length>0&&e.setHidden()}),a=()=>{e.compose(),e.setHidden()},c=()=>{e.flushLeft(),e.setHidden()},u=()=>{e.flushRight(),e.setHidden()},d=()=>{e.flushTop(),e.setHidden()},h=()=>{e.flushBottom(),e.setHidden()},x=()=>{e.flushRow(),e.setHidden()},b=()=>{e.flushColumn(),e.setHidden()},v=()=>{e.batchDeleteComponent(e.components),e.setHidden()},S=()=>[{text:"组合",subText:"",disable:!e.canCompose,handler:a},{divider:!0},{text:"删除",subText:"Ctrl + Delete",disable:e.components.length<=0,handler:v},{divider:!0},{text:"左对齐",subText:"",handler:c},{text:"右对齐",subText:"",handler:u},{text:"顶对齐",subText:"",handler:d},{text:"底对齐",subText:"",handler:h},{divider:!0},{text:"水平对齐",subText:"",handler:x},{text:"垂直对齐",subText:"",handler:b}];return We(()=>{o&&o()}),(k,A)=>{const P=ne("contextmenu");return s.value?U((w(),O("div",{key:0,style:Y({left:r.value+"px",top:l.value+"px",width:p.value+"px",height:m.value+"px"}),class:"area"},null,4)),[[P,S,void 0,{stop:!0}]]):Ce("",!0)}}}),xa=F(Ca,[["__scopeId","data-v-9f03c70d"]]),Sa={},wa={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},Da=rn('<defs data-v-9ff3aadd><pattern id="smallGrid" width="7.236328125" height="7.236328125" patternUnits="userSpaceOnUse" data-v-9ff3aadd><path d="M 7.236328125 0 L 0 0 0 7.236328125" fill="none" stroke="rgba(207, 207, 207, 0.3)" stroke-width="1" data-v-9ff3aadd></path></pattern><pattern id="grid" width="36.181640625" height="36.181640625" patternUnits="userSpaceOnUse" data-v-9ff3aadd><rect width="36.181640625" height="36.181640625" fill="url(#smallGrid)" data-v-9ff3aadd></rect><path d="M 36.181640625 0 L 0 0 0 36.181640625" fill="none" stroke="rgba(186, 186, 186, 0.5)" stroke-width="1" data-v-9ff3aadd></path></pattern></defs><rect width="100%" height="100%" fill="url(#grid)" data-v-9ff3aadd></rect>',2),ka=[Da];function $a(n,e){return w(),O("svg",wa,ka)}const Ra=F(Sa,[["render",$a],["__scopeId","data-v-9ff3aadd"]]),Ia={class:"mark-line"},La=L({__name:"MarkLine",setup(n){const e=V(),t=I([]),s=de(["xt","xc","xb","yl","yc","yr"]),r=I(3),l=de({xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}),p=d=>{t.value.push(d)},m=()=>{Object.keys(l).forEach(d=>{l[d]=!1})};ke("move",d=>{o(d.isDownward,d.isRightward)}),ke(ze.DRAG_STOP,()=>{m()});const o=(d,h)=>{const x=e.componentData;if(e.curComponent){const{top:b,left:v,right:S,bottom:k}=Ye(e.curComponent.positionStyle),A=(S-v)/2,P=(k-b)/2;m(),x.forEach(j=>{if(j==e.curComponent)return;const M=Ye(j.positionStyle),{top:_,left:f,bottom:g,right:C}=M,$=(C-f)/2,E=(g-_)/2,K={top:[{isNearly:a(b,_),lineNode:t.value[0],line:"xt",dragShift:_,lineShift:_},{isNearly:a(k,_),lineNode:t.value[0],line:"xt",dragShift:_-(k-b||0),lineShift:_},{isNearly:a((b||0)+P,_+E),lineNode:t.value[1],line:"xc",dragShift:_+E-P,lineShift:_+E},{isNearly:a(b,g),lineNode:t.value[2],line:"xb",dragShift:g,lineShift:g},{isNearly:a(k,g),lineNode:t.value[2],line:"xb",dragShift:g-(k-b||0),lineShift:g}],left:[{isNearly:a(v,f),lineNode:t.value[3],line:"yl",dragShift:f,lineShift:f},{isNearly:a(S,f),lineNode:t.value[3],line:"yl",dragShift:f-(S-v||0),lineShift:f},{isNearly:a((v||0)+A,f+$),lineNode:t.value[4],line:"yc",dragShift:f+$-A,lineShift:f+$},{isNearly:a(v,C),lineNode:t.value[5],line:"yr",dragShift:C,lineShift:C},{isNearly:a(S,C),lineNode:t.value[5],line:"yr",dragShift:C-(S-v||0),lineShift:C}]},H=[],{rotate:pe}=e.curComponent.style;Object.keys(K).forEach(ae=>{K[ae].forEach(se=>{if(!se.isNearly)return;const Xt=pe!=0?c(ae,se,{width:S-v,height:k-b}):se.dragShift;e.setCurComponentStyle(["position",ae],Xt),se.lineNode.style[ae]=`${se.lineShift}px`,H.push(se.line)})}),H.length&&u(H,d,h)})}},a=(d,h)=>Math.abs(d-h)<=r.value,c=(d,h,x)=>{const{width:b,height:v}=e.curComponent.style;return d=="top"?Math.round(h.dragShift-(v-x.height)/2):Math.round(h.dragShift-(b-x.width)/2)},u=(d,h,x)=>{x?d.includes("yr")?l.yr=!0:d.includes("yc")?l.yc=!0:d.includes("yl")&&(l.yl=!0):d.includes("yl")?l.yl=!0:d.includes("yc")?l.yc=!0:d.includes("yr")&&(l.yr=!0),h?d.includes("xb")?l.xb=!0:d.includes("xc")?l.xc=!0:d.includes("xt")&&(l.xt=!0):d.includes("xt")?l.xt=!0:d.includes("xc")?l.xc=!0:d.includes("xb")&&(l.xb=!0)};return(d,h)=>(w(),O("div",Ia,[(w(!0),O(X,null,ue(s,x=>U((w(),O("div",{key:x,ref_for:!0,ref:p,class:xe(["line",x.includes("x")?"xline":"yline"])},null,2)),[[G,l[x]||!1]])),128))]))}}),Ta=F(La,[["__scopeId","data-v-2306a27c"]]),Na=n=>n<=.25?40:n<=.5?20:n<=1?10:n<=2?5:n<=4?2:1,ut=.83,Ba=(n,e,t,s,r,l)=>{const{scale:p,width:m,height:o,ratio:a,palette:c}=r,{bgColor:u,fontColor:d,shadowColor:h,longfgColor:x,shortfgColor:b}=c;if(n.scale(a,a),n.clearRect(0,0,m,o),n.fillStyle=u,n.fillRect(0,0,m,o),s){const g=(t-e)*p,C=s*p;n.fillStyle=h,l?n.fillRect(g,0,C,o*3/8):n.fillRect(0,g,m*3/8,C)}const v=Na(p),S=v*p,k=v*10,A=k*p,P=Math.floor(e/v)*v,j=Math.floor(e/k)*k,M=(P-e)/v*S,_=(j-e)/k*A,f=e+Math.ceil((l?m:o)/p);n.beginPath(),n.fillStyle=d,n.strokeStyle=x;for(let g=j,C=0;g<f;g+=k,C++){const $=_+C*A+.5;l?n.moveTo($,0):n.moveTo(0,$),n.save(),l?n.translate($,o*.4):n.translate(m*.4,$),l||n.rotate(-Math.PI/2),n.scale(ut/a,ut/a),n.fillText(g.toString(),4*a,7*a),n.restore(),l?n.lineTo($,o*9/16):n.lineTo(m*9/16,$)}n.stroke(),n.closePath(),n.beginPath(),n.strokeStyle=b;for(let g=P,C=0;g<f;g+=v,C++){const $=M+C*S+.5;l?n.moveTo($,0):n.moveTo(0,$),g%k!==0&&(l?n.lineTo($,o/4):n.lineTo(m/4,$))}n.stroke(),n.closePath(),n.setTransform(1,0,0,1,0,0)},Ea=L({__name:"index",props:{showIndicator:{type:Boolean},valueNum:{},scale:{},ratio:{},palette:{},vertical:{type:Boolean},start:{},width:{},height:{},selectStart:{},selectLength:{}},emits:["onAddLine","update:showIndicator","update:valueNum"],setup(n,{emit:e}){const t=n,s=de({canvasContext:null});let r=1;const l=I(null);oe(()=>{r=t.ratio||window.devicePixelRatio||1,p(),m(r),o(r)});const p=()=>{s.canvasContext=l.value&&l.value.getContext("2d")},m=c=>{if(l.value){l.value.width=t.width*c,l.value.height=t.height*c;const u=s.canvasContext;u&&(u.font=`${12*c}px -apple-system,
                "Helvetica Neue", ".SFNSText-Regular",
                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",
                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif`,u.lineWidth=1,u.textBaseline="middle")}},o=c=>{const u={scale:t.scale,width:t.width,height:t.height,palette:t.palette,ratio:c};s.canvasContext&&Ba(s.canvasContext,t.start,t.selectStart,t.selectLength,u,!t.vertical)};ee(()=>t.start,()=>o(r)),ee([()=>t.width,()=>t.height],()=>{m(r),o(r)});const a=(c,u)=>{const d=(b,v,S)=>Math.round(v+b/S),h=t.vertical?c.offsetY:c.offsetX,x=d(h,t.start,t.scale);switch(u){case"click":e("onAddLine",x);break;case"enter":e("update:valueNum",x),e("update:showIndicator",!0);break;default:e("update:valueNum",x);break}};return(c,u)=>(w(),O("canvas",{ref_key:"canvas",ref:l,class:"ruler",onClick:u[0]||(u[0]=d=>a(d,"click")),onMouseenter:u[1]||(u[1]=d=>a(d,"enter")),onMousemove:u[2]||(u[2]=d=>a(d,"move")),onMouseleave:u[3]||(u[3]=d=>c.$emit("update:showIndicator",!1))},null,544))}}),za=L({__name:"RulerLine",props:{scale:{},thick:{},palette:{},index:{},start:{},vertical:{type:Boolean},value:{},isShowReferLine:{type:Boolean}},emits:["onMouseDown","onRelease","onRemove"],setup(n,{emit:e}){const t=n,s=I(0),r=I(!0);oe(()=>{s.value=t.value});const l=d=>{r.value=d>=0},p=R(()=>{const d=(s.value-t.start)*t.scale;l(d);const h=d+"px";return t.vertical?{top:h}:{left:h}}),m=R(()=>{const d=`1px ${t.palette?.lineBoardStyle||"dashed"} ${t.palette?.lineColor}`,h=t.vertical?{borderTop:d}:{borderLeft:d};return{cursor:t.isShowReferLine?t.vertical?"ns-resize":"ew-resize":"none",...h}}),o=R(()=>t.vertical?{left:t.thick+"px"}:{top:t.thick+"px"}),a=d=>{d.stopPropagation();const h=t.vertical?d.clientY:d.clientX,x=s.value;e("onMouseDown");const b=S=>{const k=t.vertical?S.clientY:S.clientX;s.value=Math.round(x+(k-h)/t.scale)},v=()=>{e("onRelease",s.value,t.index),document.removeEventListener("mousemove",b,!0),document.removeEventListener("mouseup",v)};document.addEventListener("mousemove",b,!0),document.addEventListener("mouseup",v)},c=()=>{e("onRemove",t.index)},u=()=>[{text:"删除",subText:"",handler:()=>c()}];return(d,h)=>{const x=ne("contextmenu");return U((w(),O("div",{class:"line",style:Y([p.value,m.value]),onMousedown:a},[z("div",{class:"action",style:Y(o.value)},[z("span",{class:xe({value:!0,"is-vertical":d.vertical})},te(s.value),3)],4)],36)),[[G,r.value],[x,u,void 0,{stop:!0}]])}}}),Oa=F(za,[["__scopeId","data-v-8f660674"]]),Aa={class:"lines"},Pa={class:"value"},ja=L({__name:"RulerWrapper",props:{scale:{},ratio:{},thick:{},selectStart:{},selectLength:{},isShowReferLine:{type:Boolean},palette:{},canvasHeight:{},canvasWidth:{},vertical:{type:Boolean,default:!0},width:{default:200},height:{default:200},start:{default:0}},setup(n,{expose:e}){const t=n;Ct(b=>({"6637e487":a.value,"4a522334":c.value}));const s=I(!1),r=I(0),l=I([]),p=R(()=>t.vertical?"v-container":"h-container");e({clearLines:()=>{l.value=[]}});const o=R(()=>{const b={width:`calc(100% - ${t.thick}px)`,height:`${t.thick+1}px`,left:`${t.start}px`},v={width:`${t.thick&&t.thick+1}px`,height:`calc(100% - ${t.thick}px)`,top:`${t.start}px`};return t.vertical?v:b}),a=R(()=>t.vertical?"100vh":`${t.canvasHeight}px`),c=R(()=>t.vertical?`${t.canvasWidth}px`:"100vw"),u=R(()=>{const b=(r.value-(t.start||0))*t.scale,v=t.vertical?"top":"left",S=t.vertical?"borderBottom":"borderLeft";return{[v]:b+"px",[S]:`1px ${t.palette?.lineBoardStyle||"dashed"} ${t.palette?.lineColor}`}}),d=b=>{l.value.push(b)},h=(b,v)=>{const S=b-(t.start||0),k=(t.vertical?t.height||200:t.width||200)/t.scale;S<0||S>k?x(v):l.value[v]=b},x=b=>{l.value.splice(b,1)};return(b,v)=>(w(),O("div",{class:xe(p.value),style:Y(o.value)},[i(Ea,{valueNum:r.value,"onUpdate:valueNum":v[0]||(v[0]=S=>r.value=S),showIndicator:s.value,"onUpdate:showIndicator":v[1]||(v[1]=S=>s.value=S),vertical:b.vertical,scale:b.scale,width:b.width,height:b.height,start:b.start,ratio:b.ratio,"select-start":b.selectStart,"select-length":b.selectLength,palette:b.palette,onOnAddLine:d},null,8,["valueNum","showIndicator","vertical","scale","width","height","start","ratio","select-start","select-length","palette"]),U(z("div",Aa,[(w(!0),O(X,null,ue(l.value,(S,k)=>(w(),B(Oa,{key:S+k,index:k,value:S>>0,scale:b.scale,start:b.start,thick:b.thick,palette:b.palette,vertical:b.vertical,"is-show-refer-line":b.isShowReferLine,onOnRemove:x,onOnRelease:h},null,8,["index","value","scale","start","thick","palette","vertical","is-show-refer-line"]))),128))],512),[[G,b.isShowReferLine]]),U(z("div",{class:"indicator",style:Y(u.value)},[z("div",Pa,te(r.value),1)],4),[[G,s.value]])],6))}}),dt=F(ja,[["__scopeId","data-v-e634d69a"]]),Ma={id:"mb-ruler",class:"style-ruler mb-ruler"},Va=L({__name:"Index",props:{scale:{default:1},ratio:{default:0},thick:{default:16},palette:{},startX:{},startY:{},width:{default:200},height:{default:200},shadow:{}},setup(n){const e=n,t=I(null),s=I(null),r=I(!0),l=()=>{t.value?.clearLines(),s.value?.clearLines(),r.value=!0},p=()=>[{text:"显示辅助线",subText:"",disable:r.value,handler:()=>r.value=!0},{text:"隐藏辅助线",subText:"",disable:!r.value,handler:()=>r.value=!1},{text:"清空辅助线",subText:"",disable:!r.value,handler:l}],m=R(()=>{function o(a,c){return Object.keys(a).forEach(u=>{u&&a.hasOwnProperty(u)&&(typeof c.key=="object"?a[u]=o(a[u],c[u]):c.hasOwnProperty(u)&&(a[u]=c[u]))}),a}return o({bgColor:"rgba(225,225,225, 0)",longfgColor:"#BABBBC",shortfgColor:"#C8CDD0",fontColor:"#7D8694",shadowColor:"#E8E8E8",lineColor:"#37d4cf",lineBoardStyle:"dashed",borderColor:"#DADADC",cornerActiveColor:"rgb(235, 86, 72, 0.6)",menu:{bgColor:"#fff",dividerColor:"#DBDBDB",listItem:{textColor:"#415058",hoverTextColor:"#298DF8",disabledTextColor:"rgba(65, 80, 88, 0.4)",bgColor:"#fff",hoverBgColor:"#F2F2F2"}}},e.palette||{})});return(o,a)=>{const c=ne("contextmenu");return U((w(),O("div",Ma,[i(dt,{ref_key:"HRulerWrapperRef",ref:s,vertical:!1,width:o.width,height:16,"canvas-height":o.height,"canvas-width":o.width,"is-show-refer-line":r.value,thick:o.thick,ratio:o.ratio??0,start:o.startX,"select-start":o.shadow?.x||0,"select-length":o.shadow?.width||0,scale:o.scale,palette:m.value},null,8,["width","canvas-height","canvas-width","is-show-refer-line","thick","ratio","start","select-start","select-length","scale","palette"]),i(dt,{ref_key:"VRulerWrapperRef",ref:t,vertical:!0,width:16,height:o.height,"canvas-height":o.height,"canvas-width":o.width,"is-show-refer-line":r.value,thick:o.thick,ratio:o.ratio??0,start:o.startY,"select-start":o.shadow?.y||0,"select-length":o.shadow?.height||0,scale:o.scale,palette:m.value},null,8,["height","canvas-height","canvas-width","is-show-refer-line","thick","ratio","start","select-start","select-length","scale","palette"])])),[[c,p,void 0,{stop:!0}]])}}}),Ua=1,Fa=0,Ha=0,Wa=20,Xa=L({__name:"Ruler",props:{width:{},height:{},isShowReferLine:{type:Boolean}},setup(n){const e={h:[],v:[]};return(t,s)=>(w(),B(y(Va),{thick:Wa,scale:Ua,width:t.width,height:t.height,startX:Fa,startY:Ha,lines:e,isShowReferLine:t.isShowReferLine},null,8,["width","height","isShowReferLine"]))}}),Ga=F(Xa,[["__scopeId","data-v-1810a66a"]]),Ya=["onMousedown"],Ka=L({__name:"Editor",setup(n){const e=Lt(),t=It(),s=V(),r=s.components,l=f=>Ze(f,["top","left","width","height","rotate"]),p=()=>{s.clearCanvas()},m=(f,g)=>{const C=document.querySelector("#editor").getBoundingClientRect(),$=g.pageY-C.top,E=g.pageX-C.left;t.paste(!0,E,$)},o=()=>[{text:"粘贴",subText:"Ctrl + V",handler:m},{text:"清空画布",subText:"",handler:p}];oe(()=>{Ke.debug("进入编辑模式"),s.setEditMode(qe.EDIT),document.addEventListener("paste",x),document.addEventListener("copy",h)}),We(()=>{Ke.debug("进入预览模式"),s.setEditMode(qe.PREVIEW),document.removeEventListener("paste",x),document.removeEventListener("copy",h),s.clearCanvas()});const a=R(()=>s.componentData),c=R(()=>s.canvasStyleData),u=R(()=>s.curComponent),d=R(()=>{const f=un(c.value.background),g={...c.value,...f};return Ze(g,["width","height","backgroundImage","backgroundSize","backgroundColor"])}),h=()=>{s.curComponent&&t.copy(s.curComponent)},x=f=>{if(f.clipboardData){const g=f.clipboardData.getData("text");try{const C=dn(JSON.parse(g));C&&(C.changeStyle(["position","top"],C.positionStyle.top+10),C.changeStyle(["position","left"],C.positionStyle.left+10),C.id=_t(),t.copy(C),f.preventDefault(),f.stopPropagation(),s.appendComponent(C))}catch{}}},b=I(0),v=I(0),S=de({x:0,y:0}),k=I(null),A=I(!0),P=f=>{s.setClickComponentStatus(!1),f.preventDefault(),f.stopPropagation(),e.setHidden();const g=k.value?.getBoundingClientRect();b.value=g.x,v.value=g.y;const C=f.clientX,$=f.clientY;S.x=(C-b.value)/s.scale,S.y=($-v.value)/s.scale;const E=H=>{H.preventDefault(),H.stopPropagation(),H.clientX<C&&(S.x=(H.clientX-b.value)/s.scale),H.clientY<$&&(S.y=(H.clientY-v.value)/s.scale);const pe=Math.abs(H.clientX-C)/s.scale,ae=Math.abs(H.clientY-$)/s.scale;e.setPostion({left:S.x,top:S.y,width:pe,height:ae})},K=H=>{if(document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",K),H.clientX==C&&H.clientY==$){e.setHidden();return}const pe={left:Math.round(e.style.left),top:Math.round(e.style.top),right:e.style.left+e.style.width,bottom:e.style.top+e.style.height};e.setSelectComponents(pe)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",K)},j=async f=>{f.preventDefault(),f.stopPropagation();const g=f.dataTransfer.getData("componentName");if(g){const C=new r[g];C.dataMode===yt.UNIVERSAL&&C.loadDemoData();const $=document.querySelector("#editor").getBoundingClientRect(),E=(f.pageY-$.top)/s.scale,K=(f.pageX-$.left)/s.scale;C.changeStyle(["position","top"],E),C.changeStyle(["position","left"],K),s.appendComponent(C)}},M=f=>{f.preventDefault(),f.dataTransfer.dropEffect="copy"},_=()=>{s.isClickComponent||s.setCurComponent(void 0)};return(f,g)=>{const C=ne("contextmenu");return U((w(),O("div",{id:"editor",ref_key:"editor",ref:k,class:"editor edit",style:Y(d.value),onMousedown:xt(P,["left"]),onDrop:j,onDragover:M,onMouseup:_},[i(Ra),i(Ga,{width:c.value.width,height:c.value.height,isShowReferLine:A.value},null,8,["width","height","isShowReferLine"]),(w(!0),O(X,null,ue(a.value,($,E)=>(w(),O(X,{key:$.id},[y(s).isEditMode&&$.display?(w(),B(y(In),{key:0,id:"shape"+$.id,defaultStyle:$.style,style:Y(l($.style)),active:$.id===(u.value||{}).id,info:$,class:xe({lock:$.locked}),index:E},{default:D(()=>[(w(),B(pn($.component),{id:"component"+$.id,class:"component",style:Y(y(mn)($)),component:$},null,8,["id","style","component"]))]),_:2},1032,["id","defaultStyle","style","active","info","class","index"])):Ce("",!0)],64))),128)),i(Ta),i(xa)],44,Ya)),[[C,o,void 0,{stop:!0}]])}}}),qa=F(Ka,[["__scopeId","data-v-cc602015"]]),Za=L({__name:"Canvas",setup(n){Ct(k=>({"899932ce":p.value,"5cd8fc46":s.value+"px"}));const e=I(0),t=I(0),s=I(35),r=I(100),l=I("100%"),p=I(1),m=V(),o=[{value:200,label:"200%"},{value:150,label:"150%"},{value:100,label:"100%"},{value:80,label:"80%"},{value:50,label:"50%"}],a=Po(),{primaryColor:c,cubicBezierEaseInOut:u}=a.value,d=R(()=>({width:e.value+"px",height:t.value+"px"})),h=k=>{const{width:A,height:P}=k.contentRect;e.value=A,t.value=P-s.value},x=k=>{l.value=`${k}%`,r.value=k,b(r.value)},b=je(k=>{m.setScale(k),p.value=k/100},300),v=I();function S(k){const{altKey:M,metaKey:_,deltaY:f}=k;let g=r.value;(M||_)&&(k.preventDefault(),10<g&&g<200?g=f>0?g+10:g-10:g<=10&&f>0?g+=10:g>=200&&f<0&&(g-=10),x(g))}return oe(()=>{v.value.$el.addEventListener("wheel",S,!1)}),fn(()=>{v.value.$el.removeEventListener("wheel",S,!1)}),(k,A)=>{const P=ne("resize");return U((w(),B(y(we),{ref_key:"centerCanvas",ref:v},{default:D(()=>[i(y(hn),{class:"content"},{default:D(()=>[i(y(Nn),{"x-scrollable":"",style:Y(d.value)},{default:D(()=>[i(y(qa))]),_:1},8,["style"])]),_:1}),i(y(Bn),{position:"absolute",class:"footer"},{default:D(()=>[i(y(St),{justify:"end",align:"center",style:{height:"100%","margin-right":"5px"}},{default:D(()=>[i(y(Ao),{tag:"span",style:Y({color:y(c),transition:`all 0.3s ${y(u)}`})},{default:D(()=>[he(" 画布缩放: ")]),_:1},8,["style"]),i(y(vn),{value:r.value,min:10,max:200,style:{width:"120px"},"onUpdate:value":x},null,8,["value"]),i(y(Te),{value:l.value,options:o,size:"tiny",style:{width:"90px"},"onUpdate:value":x},null,8,["value"])]),_:1})]),_:1})]),_:1})),[[P,h]])}}}),Ja=F(Za,[["__scopeId","data-v-a0c8f718"]]),Qa=L({__name:"Designer",props:{toolbars:{default:()=>[]}},setup(n,{expose:e}){const t=V(),s=I(!1),r=I(!1);return gn("HOOKS",_n({useProp:Rn,useData:$n})),e({setLayoutData:p=>{t.setLayoutData(p)}}),We(()=>{t.clearCanvas()}),(p,m)=>(w(),B(y(we),{class:"home"},{default:D(()=>[i(y(bn),{class:"header"},{default:D(()=>[i(y(ya),{toolbars:p.toolbars},null,8,["toolbars"])]),_:1}),i(y(we),{"has-sider":"",class:"main"},{default:D(()=>[i(y(Je),{class:"left",width:"15rem",collapsed:s.value,"native-scrollbar":!1,bordered:"","collapse-mode":"width","show-trigger":"",onCollapse:m[2]||(m[2]=o=>s.value=!0),onExpand:m[3]||(m[3]=o=>s.value=!1)},{default:D(()=>[i(y(na),{iscollapsed:s.value,"onUpdate:iscollapsed":[m[0]||(m[0]=o=>s.value=o),m[1]||(m[1]=o=>{s.value=o})]},null,8,["iscollapsed"])]),_:1},8,["collapsed"]),i(y(we),{"has-sider":"","sider-placement":"right"},{default:D(()=>[i(Ja),i(y(Je),{class:"right",width:"20rem",collapsed:r.value,"native-scrollbar":!1,bordered:"","collapse-mode":"width","show-trigger":"arrow-circle",onCollapse:m[6]||(m[6]=o=>r.value=!0),onExpand:m[7]||(m[7]=o=>r.value=!1)},{default:D(()=>[i(y(ga),{iscollapsed:r.value,"onUpdate:iscollapsed":[m[4]||(m[4]=o=>r.value=o),m[5]||(m[5]=o=>{r.value=o})]},null,8,["iscollapsed"])]),_:1},8,["collapsed"])]),_:1})]),_:1})]),_:1}))}}),es=F(Qa,[["__scopeId","data-v-f10c9a1b"]]),Wt=xn(),Q=V(),ts=async()=>{const n=await Wt.lastRecord();n?Q.setLayoutData({canvasData:n.canvasData,canvasStyle:n.canvasStyle,dataSlotters:n.dataSlotters}):wt.warn("没有快照了")},ns=async()=>{const n=await Wt.nextRecord();n?Q.setLayoutData({canvasData:n.canvasData,canvasStyle:n.canvasStyle,dataSlotters:n.dataSlotters}):wt.warn("没有快照了")},os=()=>{Q.toggleShowEm()},as=n=>{const e=`${Q.name}`||"OpenDataV";yn(`${e}.json`,JSON.stringify({id:n,name:e,canvasData:Q.layoutData,canvasStyle:Q.canvasStyleData,dataSlotters:Q.dataSlotterData}))},ss=()=>{Cn(ls,".json")},ls=n=>{if(n.target&&n.target.result){const e=JSON.parse(n.target.result);e&&Q.setComponentData(e.canvasData),Q.setLayoutData(e)}},is="2946854",cs="方向",rs="iconfont",us="icon-",ds="",ps=[{icon_id:"11291350",name:"组",font_class:"zu",unicode:"e854",unicode_decimal:59476},{icon_id:"1817751",name:"柱形图",font_class:"zhuxingtu",unicode:"e626",unicode_decimal:58918},{icon_id:"3868284",name:"仪表盘",font_class:"yibiaopan",unicode:"eb67",unicode_decimal:60263},{icon_id:"4354243",name:"图表-饼图",font_class:"tubiao-bingtu",unicode:"eb95",unicode_decimal:60309},{icon_id:"4354246",name:"图表-卡片",font_class:"tubiao-qiapian",unicode:"eb96",unicode_decimal:60310},{icon_id:"4354248",name:"图表-折线图",font_class:"tubiao-zhexiantu",unicode:"eb97",unicode_decimal:60311},{icon_id:"4906240",name:"按钮组",font_class:"anniuzu",unicode:"e782",unicode_decimal:59266},{icon_id:"5383645",name:"导航",font_class:"daohang",unicode:"e77d",unicode_decimal:59261},{icon_id:"5961366",name:"列表",font_class:"liebiao",unicode:"ec6b",unicode_decimal:60523},{icon_id:"5971297",name:"采煤机",font_class:"caimeiji",unicode:"e603",unicode_decimal:58883},{icon_id:"7040619",name:"其他",font_class:"qita",unicode:"e63b",unicode_decimal:58939},{icon_id:"7556180",name:"定制",font_class:"dingzhi",unicode:"e609",unicode_decimal:58889},{icon_id:"9752796",name:"基础",font_class:"jichu",unicode:"e60f",unicode_decimal:58895},{icon_id:"9921108",name:"chart",font_class:"chartt",unicode:"e60a",unicode_decimal:58890},{icon_id:"14475731",name:"装饰装修",font_class:"zhuangshizhuangxiu",unicode:"e6a6",unicode_decimal:59046},{icon_id:"16562592",name:"温度计",font_class:"wenduji",unicode:"e6de",unicode_decimal:59102},{icon_id:"22712019",name:"条形进度图",font_class:"tiaoxingjindutu",unicode:"e66b",unicode_decimal:58987},{icon_id:"22761375",name:"边框",font_class:"biankuang",unicode:"e6b7",unicode_decimal:59063},{icon_id:"22885432",name:"进度图",font_class:"jindutu",unicode:"f24b",unicode_decimal:62027},{icon_id:"124495",name:"警告",font_class:"jinggao1",unicode:"e601",unicode_decimal:58881},{icon_id:"1846445",name:"预警灯",font_class:"yujingdeng",unicode:"e67f",unicode_decimal:59007},{icon_id:"2239579",name:"自动系统警告灯",font_class:"zidongxitongjinggaodeng1",unicode:"e605",unicode_decimal:58885},{icon_id:"4988542",name:"预警",font_class:"yujing1",unicode:"e644",unicode_decimal:58948},{icon_id:"9974390",name:"预警",font_class:"yujing3",unicode:"e6fe",unicode_decimal:59134},{icon_id:"10817515",name:"警告灯",font_class:"jinggaodeng",unicode:"e64b",unicode_decimal:58955},{icon_id:"14151833",name:"报警",font_class:"baojing1",unicode:"e630",unicode_decimal:58928},{icon_id:"16965399",name:"警告灯",font_class:"hong",unicode:"e60d",unicode_decimal:58893},{icon_id:"20379044",name:"预警灯",font_class:"yujingdeng1",unicode:"e623",unicode_decimal:58915},{icon_id:"23819336",name:"报警 警告 预警 警告灯",font_class:"a-baojingjinggaoyujingjinggaodeng",unicode:"e628",unicode_decimal:58920},{icon_id:"24312218",name:"light",font_class:"light",unicode:"e63a",unicode_decimal:58938},{icon_id:"24614518",name:"告警灯",font_class:"gaojingdeng9",unicode:"e664",unicode_decimal:58980},{icon_id:"25567211",name:"警告灯",font_class:"jinggaodeng1",unicode:"e613",unicode_decimal:58899},{icon_id:"12041083",name:"预警",font_class:"yujing5",unicode:"e671",unicode_decimal:58993},{icon_id:"577357",name:"删除",font_class:"shanchu",unicode:"e74b",unicode_decimal:59211},{icon_id:"1986988",name:"删除",font_class:"shanchu1",unicode:"e625",unicode_decimal:58917},{icon_id:"12795401",name:"首页",font_class:"shouye",unicode:"e62d",unicode_decimal:58925},{icon_id:"201556",name:"查看",font_class:"chakan",unicode:"e600",unicode_decimal:58880},{icon_id:"201638",name:"编辑",font_class:"bianji",unicode:"e602",unicode_decimal:58882},{icon_id:"11729723",name:"复制",font_class:"fuzhi",unicode:"e608",unicode_decimal:58888},{icon_id:"7269302",name:"首页-默认",font_class:"shouye-moren",unicode:"e619",unicode_decimal:58905},{icon_id:"658044",name:"解锁",font_class:"jiesuo",unicode:"e669",unicode_decimal:58985},{icon_id:"10097949",name:"旋转",font_class:"xuanzhuan",unicode:"e680",unicode_decimal:59008},{icon_id:"374774",name:"开关",font_class:"kaiguan",unicode:"e61f",unicode_decimal:58911},{icon_id:"122162",name:"时钟",font_class:"clock",unicode:"e63e",unicode_decimal:58942},{icon_id:"1242185",name:"反馈信息",font_class:"fankuixinxi",unicode:"e660",unicode_decimal:58976},{icon_id:"2468505",name:"37类建筑修理x16",font_class:"leijianzhuxiulix",unicode:"e695",unicode_decimal:59029},{icon_id:"11747267",name:"时间",font_class:"weibiaoti-",unicode:"e618",unicode_decimal:58904},{icon_id:"14794143",name:"sds_第37类 建筑修理",font_class:"sds_di37leijianzhuxiuli",unicode:"e61e",unicode_decimal:58910},{icon_id:"17762035",name:"联动控制",font_class:"liandongkongzhi",unicode:"e624",unicode_decimal:58916},{icon_id:"18165278",name:"锁,密码,开锁,解锁",font_class:"unlock-full",unicode:"e882",unicode_decimal:59522},{icon_id:"288554",name:"ascend",font_class:"ascend",unicode:"e6b4",unicode_decimal:59060},{icon_id:"288556",name:"falling",font_class:"falling",unicode:"e6b6",unicode_decimal:59062},{icon_id:"815867",name:"按钮-关",font_class:"buttonoff",unicode:"e614",unicode_decimal:58900},{icon_id:"815872",name:"按钮-开",font_class:"buttonon",unicode:"e615",unicode_decimal:58901},{icon_id:"2674878",name:"箭头 上",font_class:"jiantoushang",unicode:"e62c",unicode_decimal:58924},{icon_id:"2674928",name:"箭头 右",font_class:"jiantouyou",unicode:"e632",unicode_decimal:58930},{icon_id:"2674929",name:"箭头 下",font_class:"jiantouxia",unicode:"e633",unicode_decimal:58931},{icon_id:"7594038",name:"24gl-next",font_class:"24gl-next",unicode:"ea6b",unicode_decimal:60011},{icon_id:"7594046",name:"24gl-pauseCircle",font_class:"24gl-pauseCircle",unicode:"ea6f",unicode_decimal:60015},{icon_id:"7594068",name:"24gl-previous",font_class:"24gl-previous",unicode:"ea73",unicode_decimal:60019},{icon_id:"7594086",name:"24gl-stopCircle",font_class:"24gl-stopCircle",unicode:"ea79",unicode_decimal:60025},{icon_id:"10268256",name:"按钮_开启",font_class:"anniu_kaiqi",unicode:"e659",unicode_decimal:58969},{icon_id:"10268257",name:"按钮_关闭",font_class:"anniu_guanbi",unicode:"e65b",unicode_decimal:58971},{icon_id:"25807963",name:"箭头 上",font_class:"jiantoushangzuo-copy",unicode:"ec63",unicode_decimal:60515},{icon_id:"25808146",name:"向右2",font_class:"xiangzuo2-copy",unicode:"ec64",unicode_decimal:60516},{icon_id:"166602",name:"关闭播放",font_class:"guanbibofang",unicode:"e61d",unicode_decimal:58909},{icon_id:"577396",name:"向上3",font_class:"xiangshang3",unicode:"e76f",unicode_decimal:59247},{icon_id:"577401",name:"向下5",font_class:"xiangxia5",unicode:"e774",unicode_decimal:59252},{icon_id:"577403",name:"向右2",font_class:"xiangyou2",unicode:"e776",unicode_decimal:59254},{icon_id:"1159910",name:"右播放",font_class:"youbofang",unicode:"e62e",unicode_decimal:58926},{icon_id:"1159911",name:"左播放",font_class:"zuobofang",unicode:"e62f",unicode_decimal:58927},{icon_id:"1185945",name:"播放",font_class:"bofang2",unicode:"e606",unicode_decimal:58886},{icon_id:"1488892",name:"播放",font_class:"bofang5",unicode:"e607",unicode_decimal:58887},{icon_id:"1727559",name:"323向左交换",font_class:"xiangzuojiaohuan",unicode:"e8f8",unicode_decimal:59640},{icon_id:"1727561",name:"324向右交换",font_class:"xiangyoujiaohuan",unicode:"e8f9",unicode_decimal:59641},{icon_id:"2076218",name:"播放2",font_class:"bofang6",unicode:"e87c",unicode_decimal:59516},{icon_id:"7594051",name:"24gl-playCircle",font_class:"24gl-playCircle",unicode:"ea6e",unicode_decimal:60014},{icon_id:"11121478",name:"向上",font_class:"xiangshang7",unicode:"e63c",unicode_decimal:58940},{icon_id:"16388177",name:"播放",font_class:"bofang26",unicode:"e60e",unicode_decimal:58894},{icon_id:"18176557",name:"播放",font_class:"play1",unicode:"ea8d",unicode_decimal:60045},{icon_id:"24267227",name:"播放-快退",font_class:"bofang-kuaitui",unicode:"e68a",unicode_decimal:59018},{icon_id:"24267260",name:"播放09",font_class:"bofang09",unicode:"e690",unicode_decimal:59024},{icon_id:"24268374",name:"播放-快进",font_class:"bofang-kuaijin",unicode:"e6d8",unicode_decimal:59096},{icon_id:"25807740",name:"向上",font_class:"xiangxia7",unicode:"ec62",unicode_decimal:60514}],ms={id:is,name:cs,font_family:rs,css_prefix_text:us,description:ds,glyphs:ps},fs={class:"icon-list"},hs=["onClick"],vs=L({__name:"IconFont",setup(n){const e=R(()=>ms.glyphs.map(l=>`icon-${l.font_class}`)),t=I(!0),s=()=>{t.value=!1},r=l=>{Sn(l),J.success(`复制图标: ${l}`)};return(l,p)=>(w(),B(kt,null,{default:D(()=>[i(y(Dt),{class:"show-card",show:t.value,preset:"card",title:`图标数量${e.value.length}`,style:{width:"50%","max-width":"800px"},onMaskClick:s,onClose:s,"onUpdate:show":p[0]||(p[0]=m=>t.value=!1)},{default:D(()=>[z("ul",fs,[(w(!0),O(X,null,ue(e.value,m=>(w(),O("li",{key:m,class:"dib",onClick:o=>r(m)},[z("span",{class:xe(`icon iconfont ${m}`)},null,2)],8,hs))),128))])]),_:1},8,["show","title"])]),_:1}))}});const gs=F(vs,[["__scopeId","data-v-7e742b09"]]),_s=()=>{const n=i(gs,{},null),e=document.createElement("div"),t=document.querySelector("#app");$t(n,e),t?.appendChild(e)},bs=_s,ys=L({__name:"SavePage",props:{index:{}},setup(n){const e=n,t=V(),s=I(!0),r=de({name:t.name,thumbnail:t.thumbnail}),l=de({name:[{required:!0,message:"请输入页面名称",trigger:"blur"}]}),p=async m=>{const{name:o,thumbnail:a}=r;if(!o){J.error("请输入页面名称");return}const c={name:o,thumbnail:a,canvasData:t.layoutData,canvasStyle:t.canvasStyleData,dataSlotters:t.dataSlotterData};if(m==="update")try{(await En(e.index,c)).status===200&&(J.success("修改成功"),t.name!==o&&t.setName(o))}catch{J.error("保存失败，请导出到本地，并重新进入此页面")}finally{s.value=!1}else try{const u=await zn(c);u.status===201&&(J.success("保存成功"),await wn.push({name:"Editor",params:{index:u.data.id}}))}catch(u){J.error(`保存失败，失败信息:${u?.message||u}`)}finally{s.value=!1}};return(m,o)=>(w(),B(kt,null,{default:D(()=>[i(y(Dt),{show:s.value,"mask-closable":!1,preset:"card",center:"",title:"保存当前布局",style:{width:"30%","min-width":"600px"},size:"medium","onUpdate:show":o[6]||(o[6]=a=>s.value=!1)},{footer:D(()=>[i(y(St),null,{default:D(()=>[i(y(fe),{onClick:o[3]||(o[3]=a=>s.value=!1)},{default:D(()=>[he("取消")]),_:1}),m.index?(w(),B(y(fe),{key:1,type:"primary",onClick:o[5]||(o[5]=a=>p("update"))},{default:D(()=>[he("更新")]),_:1})):(w(),B(y(fe),{key:0,type:"primary",onClick:o[4]||(o[4]=a=>p("new"))},{default:D(()=>[he("新增")]),_:1}))]),_:1})]),default:D(()=>[i(y(Ne),{model:r,rules:l,onSubmit:o[2]||(o[2]=xt(()=>{},["prevent"]))},{default:D(()=>[i(y(_e),{label:"页面名称",prop:"name"},{default:D(()=>[i(y(Qe),{value:r.name,"onUpdate:value":o[0]||(o[0]=a=>r.name=a),placeholder:"请输入页面名称"},null,8,["value"])]),_:1}),i(y(_e),{label:"页面缩略图",prop:"thumbnail"},{default:D(()=>[i(y(Qe),{value:r.thumbnail,"onUpdate:value":o[1]||(o[1]=a=>r.thumbnail=a),placeholder:"请输入缩略图地址"},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1}))}}),Cs=n=>{const e=i(ys,{index:n},null),t=document.createElement("div");$t(e,t)},xs=Cs,Ss=L({__name:"ThemeIcon",setup(n){const e=ht("DarkTheme",R(()=>!0)),t=R(()=>e.value?"sun":"moon");return(s,r)=>{const l=Ee("x-icon");return w(),B(l,{name:t.value},null,8,["name"])}}}),Se=Rt(),ws=()=>{Se.setNavTheme(Se.darkTheme?"dark":"light"),Se.setDarkTheme(!Se.darkTheme)};function Ds(n,e){return[{label:"首页",action:async t=>{await n.push({name:"Pages"})},icon:()=>N(Tn,{width:"40px"}),divider:!0},{label:"保存",action:()=>xs(e.params.index),icon:"save"},{label:"预览",action:t=>{const{href:s}=n.resolve("/preview");window.open(s,"_blank")},icon:"preview"},{label:"撤销",action:ts,icon:"back"},{label:"恢复",action:ns,icon:"next"},{label:"导出",action:()=>as(e.params.index||""),icon:"download"},{label:"导入",action:ss,icon:"upload"},{label:"全屏",action:()=>{const t=document.querySelector("#editor");document.fullscreenEnabled&&t&&t.requestFullscreen()},icon:"fullScreen"},{label:"坐标",action:os,icon:"axis"},{label:"图标",action:bs,icon:"cube",location:"right"},{label:"主题",action:ws,icon:()=>N(Ss),location:"right"},{label:"GitHub",action:()=>{window.open("https://github.com/AnsGoo/openDataV","_blank")},icon:"github",location:"right"}]}const As=L({__name:"View",setup(n){ke(ze.STDOUT,a=>{console.log(a);const c=a;if(c.name==="handle"){let u=J.info;c.type==="error"?u=J.error:c.type==="warn"&&(u=J.warning),u(c.message)}else{let u=console.info;c.type==="error"?u=console.error:c.type==="warn"&&(u=console.warn),u(c.message)}});const e=V();He().loadPlugins([An,Pn]);const s=Dn(),r=kn(),l=Ds(r,s),p=I(null),m=Rt();oe(async()=>{const a=s.params.index;a&&await o(a)});const o=async a=>{const c=await On(a);c.data&&p.value.setLayoutData(c.data)};return ee(()=>m.darkTheme,()=>{e.darkTheme=m.darkTheme}),(a,c)=>(w(),B(y(es),{ref_key:"designer",ref:p,toolbars:y(l)},null,8,["toolbars"]))}});export{As as default};
