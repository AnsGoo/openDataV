import{d as f,b_ as y,a7 as b,a8 as x,v as N,T as u,o as I,c as L,a as _,b as o,w as n,u as r,b2 as p,N as m,b$ as S,W as R,D as k,aq as U,b1 as V,ag as q,G as i,L as B,bH as F,bI as C,_ as D}from"./index-10d63009.js";import{a as K}from"./index-448c4cac.js";const T=""+new URL("../favicon.ico",import.meta.url).href,A=""+new URL("../home.png",import.meta.url).href,H=async s=>K.post({url:"/user/login",data:s}),O=s=>(F("data-v-e6ce6d58"),s=s(),C(),s),P={class:"login"},W=q('<div class="left" data-v-e6ce6d58><div class="name" data-v-e6ce6d58><span data-v-e6ce6d58><img class="logo" src="'+T+'" alt="" data-v-e6ce6d58></span><span data-v-e6ce6d58> OPenDataV</span></div><img class="home" src="'+A+'" alt="" data-v-e6ce6d58><div class="desc" data-v-e6ce6d58><span data-v-e6ce6d58>最具智能化数据可视化平台</span></div></div>',1),E={class:"right"},G=O(()=>_("div",{class:"tip"},"登录",-1)),M=f({__name:"Login",setup(s){const v=y(),g=b(),w=x(),c=N(),a=u({username:"",password:""}),h=u({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),l=async()=>{try{await c.value?.validate();const d={...a};try{const e=await H(d);if(e.status===200){await v.setToken(e.data),i.success("登录成功");const t=w.query.redirect;await g.push({path:t||"Pages"})}else i.error("登录失败")}catch{i.error("登录失败,请输入正确的账号密码")}}catch(d){B.log(d)}};return(d,e)=>(I(),L("div",P,[W,_("div",E,[o(r(V),{ref_key:"ruleFormRef",ref:c,rules:h,model:a,"show-message":!0,onSubmit:e[2]||(e[2]=U(()=>{},["prevent"]))},{default:n(()=>[G,o(r(p),{path:"username"},{default:n(()=>[o(r(m),{value:a.username,"onUpdate:value":e[0]||(e[0]=t=>a.username=t),placeholder:"请输入用户名",style:{width:"100%","min-width":"360px"}},null,8,["value"])]),_:1}),o(r(p),{path:"password"},{default:n(()=>[o(r(m),{value:a.password,"onUpdate:value":e[1]||(e[1]=t=>a.password=t),placeholder:"请输入密码",style:{width:"100%","min-width":"360px"},type:"password",onKeydown:S(l,["enter"])},null,8,["value","onKeydown"])]),_:1}),o(r(R),{type:"primary",style:{"min-width":"360px",width:"100%"},onClick:l},{default:n(()=>[k("登录")]),_:1})]),_:1},8,["rules","model"])])]))}});const z=D(M,[["__scopeId","data-v-e6ce6d58"]]);export{z as default};
