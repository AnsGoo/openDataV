import{bQ as st,ay as K,az as T,bR as Mt,aA as le,aJ as Be,bc as Vt,bd as Ut,d as I,ar as it,as as xe,bS as Ht,l as L,aK as De,au as lt,bT as Ft,bU as Wt,Q as z,bV as Xt,bW as Yt,X as ct,bX as Kt,bY as Ae,o as D,c as O,a as M,t as ae,E as $e,bZ as rt,b as u,u as b,ak as ze,aI as dt,_ as V,R as Ce,h as te,w as H,a9 as W,Y as ut,ab as Oe,b_ as Gt,a4 as ve,C as F,y as A,e as R,J as Re,s as ee,z as S,b$ as ge,c0 as qt,k as pt,S as X,T as re,B as we,c1 as Zt,f as ie,H as mt,bL as ce,aH as Pe,F as Z,U as je,bE as Jt,bz as _e,bA as Le,bB as Ie,c2 as Qt,c3 as en,c4 as Ne,i as de,K as Ee,n as Y,W as tn,P as se,c5 as Me,j as ue,q as ft,L as Ve,c6 as Ue,bN as nn,D as He,bP as on,$ as an,c7 as sn,c8 as ht,bh as ln,aq as cn,ah as vt,O as fe,ao as he,aZ as rn,bM as dn,an as un,ap as Fe,ag as q,c9 as pn,ca as mn,cb as fn,bK as gt,cc as _t,a5 as hn,cd as bt,aF as ke,N as We,ce as vn,av as gn,aV as _n,aw as bn}from"./index-3ca9a95a.js";import{u as yn,s as xn,g as Cn}from"./pages-82bf68f7.js";import{C as yt,N as Xe,a as wn,b as Te,c as xt,F as Sn,d as Dn,h as kn}from"./viewer.vue_vue_type_style_index_0_scoped_d4d5ffd9_lang-397c02a3.js";import{u as Ct,a as wt,S as $n}from"./Shape-1c8dd59a.js";import{T as Rn,L as Ln}from"./ToolBar-9455cbaa.js";import{N as In}from"./LayoutFooter-84a8f841.js";import{N as Nn}from"./Scrollbar-d93566bc.js";import"./index-25359c8e.js";import"./index-c01320d9.js";import"./shape.module-52bdef3b.js";/* empty css                                                                */function Tn(o,e,t,s){var r=-1,i=o==null?0:o.length;for(s&&i&&(t=o[++r]);++r<i;)t=e(t,o[r],r,o);return t}function zn(o){return function(e){return o?.[e]}}var On={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},En=zn(On);const Bn=En;var An=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pn="\\u0300-\\u036f",jn="\\ufe20-\\ufe2f",Mn="\\u20d0-\\u20ff",Vn=Pn+jn+Mn,Un="["+Vn+"]",Hn=RegExp(Un,"g");function Fn(o){return o=st(o),o&&o.replace(An,Bn).replace(Hn,"")}var Wn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Xn(o){return o.match(Wn)||[]}var Yn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Kn(o){return Yn.test(o)}var St="\\ud800-\\udfff",Gn="\\u0300-\\u036f",qn="\\ufe20-\\ufe2f",Zn="\\u20d0-\\u20ff",Jn=Gn+qn+Zn,Dt="\\u2700-\\u27bf",kt="a-z\\xdf-\\xf6\\xf8-\\xff",Qn="\\xac\\xb1\\xd7\\xf7",eo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",to="\\u2000-\\u206f",no=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$t="A-Z\\xc0-\\xd6\\xd8-\\xde",oo="\\ufe0e\\ufe0f",Rt=Qn+eo+to+no,Lt="['’]",Ye="["+Rt+"]",ao="["+Jn+"]",It="\\d+",so="["+Dt+"]",Nt="["+kt+"]",Tt="[^"+St+Rt+It+Dt+kt+$t+"]",io="\\ud83c[\\udffb-\\udfff]",lo="(?:"+ao+"|"+io+")",co="[^"+St+"]",zt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ot="[\\ud800-\\udbff][\\udc00-\\udfff]",oe="["+$t+"]",ro="\\u200d",Ke="(?:"+Nt+"|"+Tt+")",uo="(?:"+oe+"|"+Tt+")",Ge="(?:"+Lt+"(?:d|ll|m|re|s|t|ve))?",qe="(?:"+Lt+"(?:D|LL|M|RE|S|T|VE))?",Et=lo+"?",Bt="["+oo+"]?",po="(?:"+ro+"(?:"+[co,zt,Ot].join("|")+")"+Bt+Et+")*",mo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ho=Bt+Et+po,vo="(?:"+[so,zt,Ot].join("|")+")"+ho,go=RegExp([oe+"?"+Nt+"+"+Ge+"(?="+[Ye,oe,"$"].join("|")+")",uo+"+"+qe+"(?="+[Ye,oe+Ke,"$"].join("|")+")",oe+"?"+Ke+"+"+Ge,oe+"+"+qe,fo,mo,It,vo].join("|"),"g");function _o(o){return o.match(go)||[]}function bo(o,e,t){return o=st(o),e=t?void 0:e,e===void 0?Kn(o)?_o(o):Xn(o):o.match(e)||[]}var yo="['’]",xo=RegExp(yo,"g");function Co(o){return function(e){return Tn(bo(Fn(e).replace(xo,"")),o,"")}}var wo=Co(function(o,e,t){return o+(t?"-":"")+e.toLowerCase()});const So=wo;function Ze(o,e="default",t=[]){const{children:s}=o;if(s!==null&&typeof s=="object"&&!Array.isArray(s)){const r=s[e];if(typeof r=="function")return r()}return t}const At="DESCRIPTION_ITEM_FLAG";function Do(o){return typeof o=="object"&&o&&!Array.isArray(o)?o.type&&o.type[At]:!1}const ko=K([T("descriptions",{fontSize:"var(--n-font-size)"},[T("descriptions-separator",`
 display: inline-block;
 margin: 0 8px 0 2px;
 `),T("descriptions-table-wrapper",[T("descriptions-table",[T("descriptions-table-row",[T("descriptions-table-header",{padding:"var(--n-th-padding)"}),T("descriptions-table-content",{padding:"var(--n-td-padding)"})])])]),Mt("bordered",[T("descriptions-table-wrapper",[T("descriptions-table",[T("descriptions-table-row",[K("&:last-child",[T("descriptions-table-content",{paddingBottom:0})])])])])]),le("left-label-placement",[T("descriptions-table-content",[K("> *",{verticalAlign:"top"})])]),le("left-label-align",[K("th",{textAlign:"left"})]),le("center-label-align",[K("th",{textAlign:"center"})]),le("right-label-align",[K("th",{textAlign:"right"})]),le("bordered",[T("descriptions-table-wrapper",`
 border-radius: var(--n-border-radius);
 overflow: hidden;
 background: var(--n-merged-td-color);
 border: 1px solid var(--n-merged-border-color);
 `,[T("descriptions-table",[T("descriptions-table-row",[K("&:not(:last-child)",[T("descriptions-table-content",{borderBottom:"1px solid var(--n-merged-border-color)"}),T("descriptions-table-header",{borderBottom:"1px solid var(--n-merged-border-color)"})]),T("descriptions-table-header",`
 font-weight: 400;
 background-clip: padding-box;
 background-color: var(--n-merged-th-color);
 `,[K("&:not(:last-child)",{borderRight:"1px solid var(--n-merged-border-color)"})]),T("descriptions-table-content",[K("&:not(:last-child)",{borderRight:"1px solid var(--n-merged-border-color)"})])])])])]),T("descriptions-header",`
 font-weight: var(--n-th-font-weight);
 font-size: 18px;
 transition: color .3s var(--n-bezier);
 line-height: var(--n-line-height);
 margin-bottom: 16px;
 color: var(--n-title-text-color);
 `),T("descriptions-table-wrapper",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[T("descriptions-table",`
 width: 100%;
 border-collapse: separate;
 border-spacing: 0;
 box-sizing: border-box;
 `,[T("descriptions-table-row",`
 box-sizing: border-box;
 transition: border-color .3s var(--n-bezier);
 `,[T("descriptions-table-header",`
 font-weight: var(--n-th-font-weight);
 line-height: var(--n-line-height);
 display: table-cell;
 box-sizing: border-box;
 color: var(--n-th-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),T("descriptions-table-content",`
 vertical-align: top;
 line-height: var(--n-line-height);
 display: table-cell;
 box-sizing: border-box;
 color: var(--n-td-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[Be("content",`
 transition: color .3s var(--n-bezier);
 display: inline-block;
 color: var(--n-td-text-color);
 `)]),Be("label",`
 font-weight: var(--n-th-font-weight);
 transition: color .3s var(--n-bezier);
 display: inline-block;
 margin-right: 14px;
 color: var(--n-th-text-color);
 `)])])])]),T("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color);
 --n-merged-td-color: var(--n-td-color);
 --n-merged-border-color: var(--n-border-color);
 `),Vt(T("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color-modal);
 --n-merged-td-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `)),Ut(T("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color-popover);
 --n-merged-td-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `))]),$o=Object.assign(Object.assign({},xe.props),{title:String,column:{type:Number,default:3},columns:Number,labelPlacement:{type:String,default:"top"},labelAlign:{type:String,default:"left"},separator:{type:String,default:":"},size:{type:String,default:"medium"},bordered:Boolean,labelStyle:[Object,String],contentStyle:[Object,String]}),be=I({name:"Descriptions",props:$o,setup(o){const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=it(o),s=xe("Descriptions","-descriptions",ko,Ht,o,e),r=L(()=>{const{size:m,bordered:d}=o,{common:{cubicBezierEaseInOut:n},self:{titleTextColor:a,thColor:h,thColorModal:g,thColorPopover:l,thTextColor:y,thFontWeight:k,tdTextColor:_,tdColor:f,tdColorModal:C,tdColorPopover:w,borderColor:N,borderColorModal:E,borderColorPopover:P,borderRadius:j,lineHeight:c,[De("fontSize",m)]:v,[De(d?"thPaddingBordered":"thPadding",m)]:p,[De(d?"tdPaddingBordered":"tdPadding",m)]:x}}=s.value;return{"--n-title-text-color":a,"--n-th-padding":p,"--n-td-padding":x,"--n-font-size":v,"--n-bezier":n,"--n-th-font-weight":k,"--n-line-height":c,"--n-th-text-color":y,"--n-td-text-color":_,"--n-th-color":h,"--n-th-color-modal":g,"--n-th-color-popover":l,"--n-td-color":f,"--n-td-color-modal":C,"--n-td-color-popover":w,"--n-border-radius":j,"--n-border-color":N,"--n-border-color-modal":E,"--n-border-color-popover":P}}),i=t?lt("descriptions",L(()=>{let m="";const{size:d,bordered:n}=o;return n&&(m+="a"),m+=d[0],m}),r,o):void 0;return{mergedClsPrefix:e,cssVars:t?void 0:r,themeClass:i?.themeClass,onRender:i?.onRender,compitableColumn:Ft(o,["columns","column"]),inlineThemeDisabled:t}},render(){const o=this.$slots.default,e=o?Wt(o()):[];e.length;const{compitableColumn:t,labelPlacement:s,labelAlign:r,size:i,bordered:m,title:d,cssVars:n,mergedClsPrefix:a,separator:h,onRender:g}=this;g?.();const l=e.filter(f=>Do(f)),y={span:0,row:[],secondRow:[],rows:[]},_=l.reduce((f,C,w)=>{const N=C.props||{},E=l.length-1===w,P=["label"in N?N.label:Ze(C,"label")],j=[Ze(C)],c=N.span||1,v=f.span;f.span+=c;const p=N.labelStyle||N["label-style"]||this.labelStyle,x=N.contentStyle||N["content-style"]||this.contentStyle;if(s==="left")m?f.row.push(z("th",{class:`${a}-descriptions-table-header`,colspan:1,style:p},P),z("td",{class:`${a}-descriptions-table-content`,colspan:E?(t-v)*2+1:c*2-1,style:x},j)):f.row.push(z("td",{class:`${a}-descriptions-table-content`,colspan:E?(t-v)*2:c*2},z("span",{class:`${a}-descriptions-table-content__label`,style:p},[...P,h&&z("span",{class:`${a}-descriptions-separator`},h)]),z("span",{class:`${a}-descriptions-table-content__content`,style:x},j)));else{const $=E?(t-v)*2:c*2;f.row.push(z("th",{class:`${a}-descriptions-table-header`,colspan:$,style:p},P)),f.secondRow.push(z("td",{class:`${a}-descriptions-table-content`,colspan:$,style:x},j))}return(f.span>=t||E)&&(f.span=0,f.row.length&&(f.rows.push(f.row),f.row=[]),s!=="left"&&f.secondRow.length&&(f.rows.push(f.secondRow),f.secondRow=[])),f},y).rows.map(f=>z("tr",{class:`${a}-descriptions-table-row`},f));return z("div",{style:n,class:[`${a}-descriptions`,this.themeClass,`${a}-descriptions--${s}-label-placement`,`${a}-descriptions--${r}-label-align`,`${a}-descriptions--${i}-size`,m&&`${a}-descriptions--bordered`]},d||this.$slots.header?z("div",{class:`${a}-descriptions-header`},d||Xt(this,"header")):null,z("div",{class:`${a}-descriptions-table-wrapper`},z("table",{class:`${a}-descriptions-table`},z("tbody",null,_))))}}),Ro={label:String,span:{type:Number,default:1},labelStyle:[Object,String],contentStyle:[Object,String]},ye=I({name:"DescriptionsItem",[At]:!0,props:Ro,render(){return null}}),Lo=Object.assign(Object.assign({},xe.props),{tag:{type:String,default:"div"}}),Io=I({name:"Element",alias:["El"],props:Lo,setup(o){const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=it(o),s=xe("Element","-element",void 0,Yt,o,e),r=L(()=>{const{common:m}=s.value;return Object.keys(m).reduce((d,n)=>(d[`--${So(n)}`]=m[n],d),{})}),i=t?lt("element",void 0,r,o):void 0;return{mergedClsPrefix:e,cssVars:t?void 0:r,themeClass:i?.themeClass,onRender:i?.onRender}},render(){var o;const{tag:e,mergedClsPrefix:t,cssVars:s,themeClass:r,onRender:i,$slots:m}=this;return i?.(),z(e,{role:"none",class:[`${t}-element`,r],style:s},(o=m.default)===null||o===void 0?void 0:o.call(m))}});function No(){const o=ct(Kt,null);return L(()=>{if(o===null)return Ae;const{mergedThemeRef:{value:e},mergedThemeOverridesRef:{value:t}}=o,s=e?.common||Ae;return t?.common?Object.assign({},s,t.common):s})}const To=["data-component"],zo=I({__name:"ComponentItem",props:{component:{},name:{}},setup(o){return(e,t)=>(D(),O("div",{draggable:"true","data-component":e.component},[M("div",null,ae(e.name),1)],8,To))}}),Oo={class:"components"},Eo=I({__name:"ComponentList",setup(o){const t=dt().appContext.components.XIcon,s=L(()=>{const i={};Object.keys($e).forEach(d=>{const n=new $e[d],a=n.group;!a||!n.show||(i[a]||(i[a]=[]),i[a].push(n))});const m=[];return rt.forEach(d=>{m.push({label:()=>d.name,key:d.key,icon:()=>z(t,{name:`${d.icon}`}),children:i[d.key]?.map(n=>({label:()=>z(zo,{component:n.component,name:n.name,ondragstart:r}),key:n.component}))})}),m}),r=i=>{i.dataTransfer.setData("componentName",i.target.dataset.component)};return(i,m)=>(D(),O("div",Oo,[u(b(ze),{options:s.value,accordion:!1},null,8,["options"])]))}}),Je=V(Eo,[["__scopeId","data-v-e3d858f1"]]),Bo={key:0,class:"layer"},Ao={key:1,class:"layer"},Po=I({__name:"LayerItem",props:{component:{},index:{},activeKey:{},mode:{default:"expand"},contextmenus:{}},emits:["select"],setup(o,{emit:e}){const t=o,s=F(),r=n=>n?"previewOpen":"previewClose",i=(n,a)=>{n.dataTransfer?.setData("componentIndex",a),n.stopPropagation()},m=(n,a,h=!1)=>{n.preventDefault(),n.stopPropagation(),h&&a!==t.activeKey&&ut.emit(Oe.ACTIVE_MENU,a)},d=(n,a)=>{n.preventDefault(),n.stopPropagation();const h=n.dataTransfer?.getData("componentIndex");if(!Gt(h,a))return;const l=h.split("-").map(C=>Number(C)),y=s.getComponentByIndex(l),k=ve(y),_=a.split("-").map(C=>Number(C)),f=s.getComponentByIndex(_);if(k&&f&&a){const C=f.id;s.cutComponent(l[l.length-1],y?.parent);const w=f.parent||void 0,E=(w?w.subComponents:s.componentData).findIndex(P=>P.id===C);s.insertComponent(E,k,w),e("select",a)}};return(n,a)=>{const h=Ce("x-icon"),g=te("contextmenu");return H((D(),O("div",{draggable:"true",onDragstart:a[0]||(a[0]=l=>i(l,n.index)),onDrop:a[1]||(a[1]=l=>d(l,n.index)),onDragover:a[2]||(a[2]=l=>m(l,n.index,!0))},[n.component.component==="Group"?(D(),O("div",Bo,[H(M("span",null,ae(n.component.name||"分组"),513),[[W,n.mode==="expand"]]),u(h,{name:r(n.component.display),size:18},null,8,["name"])])):(D(),O("div",Ao,[H(M("span",null,ae(n.component.name),513),[[W,n.mode==="expand"]]),u(h,{name:r(n.component.display),size:18},null,8,["name"])]))],32)),[[g,n.contextmenus,void 0,{stop:!0}]])}}}),Qe=V(Po,[["__scopeId","data-v-a061056f"]]),jo=I({__name:"SimpleLayerItem",props:{component:{},index:{},activeKey:{},mode:{default:"expand"},name:{},contextmenus:{}},emits:["select"],setup(o,{emit:e}){const t=o,s=F(),r=(n,a)=>{n.dataTransfer?.setData("componentIndex",a),n.stopPropagation()},i=(n,a,h=!1)=>{n.preventDefault(),n.stopPropagation(),h&&a!==t.activeKey&&ut.emit(Oe.ACTIVE_MENU,a)},m=(n,a)=>{n.preventDefault(),n.stopPropagation();const h=n.dataTransfer?.getData("componentIndex"),g=d(h,a),l=h.split("-").map(_=>Number(_)),y=s.getComponentByIndex(l),k=s.cutComponent(l[l.length-1],y?.parent);if(k&&g){const _=h.split("-").map(C=>Number(C)),f=s.getComponentByIndex(_);s.insertComponent(_[_.length-1],k,f),e("select",a)}},d=(n,a)=>{const h=n.split("-").map(y=>parseInt(y)),g=a.split("-").map(y=>parseInt(y)),l=h.length;for(let y=0;y<l;y++){if(h[y]>g[y])return a;if(h[y]<g[y])return y+1==l?(g[y]=g[y]-1,g.join("-")):a}return a};return(n,a)=>{const h=Ce("x-icon"),g=te("contextmenu");return H((D(),A(h,{draggable:"true",size:18,name:n.name,onDragstart:a[0]||(a[0]=l=>r(l,n.index)),onDrop:a[1]||(a[1]=l=>m(l,n.index)),onDragover:a[2]||(a[2]=l=>i(l,n.index,!0))},null,8,["name"])),[[g,n.contextmenus,void 0,{stop:!0}]])}}}),et=V(jo,[["__scopeId","data-v-afb9bd9d"]]),tt=I({__name:"Layer",setup(o){const e=F(),t=Ct(),s={};rt.map(c=>{s[c.key]=c.icon});const r=L(()=>e.componentData),i=R(null),m=R("");Re("ActiveMenu",c=>{const v=c;m.value=v,i.value&&i.value.open&&i.value.open(v)});const n=c=>{m.value=c;const v=c.split("-").map(x=>Number(x)),p=e.getComponentByIndex(v);p&&e.setCurComponent(p,c)},a=R([]),h=(c,v,p)=>{for(let x=0;x<v.length;x++){const $=v[x],B=g(x,c);if($.group===qt.CONTAINER){const U=[];p.push({label:()=>z(Qe,{component:$,index:B,contextmenus:()=>j(B),onclick:()=>n(B)}),key:B,icon:()=>z(et,{name:"container",component:$,index:B,contextmenus:()=>j(B),onclick:()=>n(B)}),children:h(B,$.subComponents||[],U)})}else p.push({label:()=>z(Qe,{component:$,index:B,contextmenus:()=>j(B)}),key:B,icon:()=>z(et,{name:`${s[$.group]}`,component:$,index:B,contextmenus:()=>j(B),onclick:()=>n(B)})})}return p},g=(c,v)=>v?`${v}-${c}`:c.toString(),l=c=>{const v=c.split("-").map(x=>Number(x)),p=ve(e.getComponentByIndex(v));p&&t.copy(p)},y=async c=>{n(c);const v=c.split("-").map(p=>Number(p));e.removeComponent(v[v.length-1],e.curComponent?.parent)},k=async c=>{n(c);const v=c.split("-").map(p=>Number(p));e.upComponent(v[v.length-1],e.curComponent?.parent)},_=async c=>{n(c);const v=c.split("-").map(p=>Number(p));e.downComponent(v[v.length-1],e.curComponent?.parent)},f=async c=>{n(c);const v=c.split("-").map(p=>Number(p));e.topComponent(v[v.length-1],e.curComponent?.parent)},C=async c=>{n(c);const v=c.split("-").map(p=>Number(p));e.bottomComponent(v[v.length-1],e.curComponent?.parent)},w=c=>{n(c);const v=c.split("-").map(x=>Number(x)),p=e.getComponentByIndex(v);p&&p.hiddenComponent()},N=c=>{n(c);const v=c.split("-").map(x=>Number(x)),p=e.getComponentByIndex(v);p&&p.showComponent()},E=c=>{const v=c.split("-").map($=>Number($)),p=e.getComponentByIndex(v),x=e.cutComponent(v[v.length-1],p?.parent);x&&t.copy(x)},P=c=>{const v=c.split("-").map(x=>Number(x)),p=e.getComponentByIndex(v);if(t.copyData){const x=ve(t.copyData);x.id=pt(),e.insertComponent(v[v.length-1],x,p?.parent)}},j=c=>{const v=c.split("-").map(p=>parseInt(p));return[{text:"复制",subText:"Ctrl + C",handler:()=>l(c)},{text:"粘贴",subText:"Ctrl + V",handler:()=>P(c)},{text:"剪切",subText:"Ctrl + X",handler:()=>E(c)},{text:"拆分",subText:"",disable:e.getComponentByIndex(c.split("-").map(p=>Number(p)))?.component!=="Group",handler:()=>e.decompose()},{text:"删除",subText:"",handler:()=>y(c)},{divider:!0},{text:"置于顶层",handler:()=>f(c),children:[{text:"置于顶层",handler:()=>f(c)},{text:"上移一层",handler:()=>k(c)}]},{text:"置于底层",handler:()=>C(c),children:[{text:"置于底层",handler:()=>C(c)},{text:"下移一层",handler:()=>_(c)}]},{divider:!0},{text:"显示",disable:e.getComponentByIndex(v)?.display,subText:"",handler:()=>N(c)},{text:"隐藏",disable:!e.getComponentByIndex(v)?.display,subText:"",handler:()=>w(c)}]};return ee(()=>e.componentData,()=>{const c=e.componentData;a.value=[],a.value=h("",c,[])},{deep:!0,immediate:!0}),(c,v)=>(D(),O("div",null,[r.value.length>0?(D(),A(b(ze),{key:0,options:a.value,"root-indent":1,indent:12,"onUpdate:value":n},null,8,["options"])):(D(),A(b(be),{key:1,class:"placeholder"},{default:S(()=>[u(b(ye),null,{default:S(()=>[u(b(ge),{description:"画布为空"})]),_:1})]),_:1}))]))}}),Mo=M("span",null,"组件",-1),Vo=M("span",null,"图层",-1),Uo=I({__name:"SideBar",props:{iscollapsed:{type:Boolean,default:!1}},emits:["update:iscollapsed"],setup(o,{emit:e}){const t=R("components"),s=i=>{e("update:iscollapsed",!1),t.value=i},r=i=>{t.value=i};return(i,m)=>{const d=Ce("x-icon");return i.iscollapsed?(D(),A(b(re),{key:1,value:t.value,"onUpdate:value":[m[4]||(m[4]=n=>t.value=n),s],type:"line",animated:"","bar-width":48,"justify-content":"center"},{default:S(()=>[t.value==="components"?(D(),A(b(X),{key:0,name:"components","display-directive":"show:lazy"},{tab:S(()=>[u(d,{name:"components",onClick:m[2]||(m[2]=n=>r("layer"))})]),default:S(()=>[u(Je)]),_:1})):t.value==="layer"?(D(),A(b(X),{key:1,name:"layer","display-directive":"show:lazy"},{tab:S(()=>[u(d,{name:"layers",onClick:m[3]||(m[3]=n=>r("components"))})]),default:S(()=>[u(tt)]),_:1})):we("",!0)]),_:1},8,["value"])):(D(),A(b(re),{key:0,value:t.value,"onUpdate:value":[m[0]||(m[0]=n=>t.value=n),m[1]||(m[1]=n=>{t.value=n})],type:"line",animated:"","bar-width":100,"justify-content":"center"},{default:S(()=>[u(b(X),{name:"components","display-directive":"show:lazy"},{tab:S(()=>[u(d,{name:"components"}),Mo]),default:S(()=>[u(Je)]),_:1}),u(b(X),{name:"layer","display-directive":"show:lazy"},{tab:S(()=>[u(d,{name:"layers"}),Vo]),default:S(()=>[u(tt)]),_:1})]),_:1},8,["value"]))}}}),Ho={class:"attr-list"},Fo=I({__name:"AttrList",props:{curComponent:{}},setup(o){const e=o,t=F(),s=L(()=>e.curComponent.defaultViewType.propValue),r=L(()=>d()),i=L(()=>e.curComponent?e.curComponent.propFromValue:[]),m=(n,a)=>{t.setCurComponentPropValue(n,a)},d=()=>{const n={common:{name:e.curComponent.name,component:e.curComponent.component,id:e.curComponent.id}};return e.curComponent&&e.curComponent.propValue&&Object.assign(n,e.curComponent.propValue),n};return(n,a)=>(D(),O("div",Ho,[u(b(yt),{config:i.value,data:r.value,mode:s.value,onChange:m},null,8,["config","data","mode"])]))}}),Wo=V(Fo,[["__scopeId","data-v-1cc3403d"]]),Xo={class:"attr-list"},Yo=I({__name:"Canvas",setup(o){const e=F(),t=L(()=>e.canvasStyleConfig.formItems),s=L(()=>e.canvasStyleConfig.mode),r=R(e.canvasGlobalData),i=(m,d)=>{e.setCanvasStyle(m,d)};return(m,d)=>(D(),O("div",Xo,[u(b(yt),{config:t.value,data:r.value,mode:s.value,onChange:i},null,8,["config","data","mode"])]))}}),Ko=V(Yo,[["__scopeId","data-v-a3a4ace5"]]),Go=I({components:{NDescriptions:be,NDescriptionsItem:ye,NEmpty:ge},props:{desc:{type:String,required:!0}},setup(o){return()=>u(be,{class:"placeholder"},{default:()=>[u(ye,null,{default:()=>[u(ge,{description:o.desc},null)]})]})}}),nt=o=>u(Go,{desc:o},null);function G(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!Jt(o)}const qo=I({props:{curComponent:{type:Object,required:!0}},emits:["change"],setup(o){const e=Qt(),t=en(),s=R(Zt.DEMO),r=R(null);ee(()=>o.curComponent,async l=>{if(l){const y=o.curComponent.dataConfig;y&&(s.value=y.type)}},{deep:!0,immediate:!0}),ie(()=>{const l=o.curComponent.dataConfig;l&&(s.value=l.type)});const i=l=>{r.value=l},m=()=>{const l=e.getPlugin(s.value),y=l?l.component:nt("未发现相应的数据插件");return u(y,{curComponent:o.curComponent},null)},d=()=>{if(!r.value)return;const l=t.getPlugin(r.value),y=l?l.component:nt("未发现相应的脚本插件");return u(y,{curComponent:o.curComponent},null)},n=l=>{s.value=l},a=()=>u(Ie,{size:"small",labelPlacement:"top",labelAlign:"left"},{default:()=>[u(_e,{key:"dataType",label:"数据类型"},{default:()=>[u(Le,{value:s.value,"onUpdate:value":l=>s.value=l,placeholder:"请选择数据类型",options:e.allDataType,onUpdateValue:l=>n(l),clearable:!0},null)]}),m()]}),h=()=>u(Ie,{size:"small",labelPlacement:"top",labelAlign:"left"},{default:()=>[u(_e,{key:"scriptType",label:"脚本类型"},{default:()=>[u(Le,{value:r.value,"onUpdate:value":l=>r.value=l,placeholder:"请选择脚本类型",options:t.allScriptType,onUpdateValue:l=>i(l),clearable:!0},null)]}),d()]}),g=()=>{let l,y,k,_,f,C,w,N;switch(o.curComponent.defaultViewType.data){case ce.COLLAPSE:return u(xt,{accordion:!0},{default:()=>[u(Te,{title:"数据选择",name:"dataType"},G(l=a())?l:{default:()=>[l]}),u(Te,{title:"脚本配置",name:"scriptOptions"},G(y=h())?y:{default:()=>[y]})]});case ce.TABS:return u(re,{type:"line"},{default:()=>[u(X,{tab:"数据选择",name:"dataType"},G(k=a())?k:{default:()=>[k]}),u(X,{tab:"脚本配置",name:"scriptOptions"},G(_=h())?_:{default:()=>[_]})]});case ce.CARD:return u(Z,null,[u(je,{title:"数据选择",size:"small"},G(f=a())?f:{default:()=>[f]}),u(je,{title:"脚本配置",size:"small"},G(C=h())?C:{default:()=>[C]})]);case ce.FORM:return u(Z,null,[u(Pe,{"title-placement":"left",style:{marginTop:"0px",marginBottom:"0px"}},{default:()=>["数据选择"]}),a(),u(Pe,{"title-placement":"left",style:{marginTop:"0px",marginBottom:"0px"}},{default:()=>["脚本配置"]}),h()]);case ce.TIMELINE:return u(wn,null,{default:()=>[u(Xe,{title:"数据选择",type:"success"},G(w=a())?w:{default:()=>[w]}),u(Xe,{title:"脚本配置",type:"success"},G(N=h())?N:{default:()=>[N]})]})}};return()=>o.curComponent.dataIntegrationMode===mt.UNIVERSAL?g():u(be,null,{default:()=>[u(ye,null,{default:()=>[u(ge,{description:"未发现数据配置项"},null)]})]})}}),Zo={class:"attr-list"},Jo=I({__name:"StyleList",props:{curComponent:{}},setup(o){const e=o,t=F(),s=R({...e.curComponent.style}),r=L(()=>e.curComponent?e.curComponent.styleFormValue:[]),i=Ne((d,n)=>{if(e.curComponent){const a=["top","left","width","height","rotate"];if(d[0]==="position"&&a.includes(d[1])){const h=e.curComponent.parent;t.syncComponentLocation({[d[1]]:n},h,!0),h&&t.resizeAutoComponent(h)}else t.setCurComponentStyle(d,n)}},300);ee(()=>e.curComponent.id,()=>{e.curComponent&&e.curComponent.id&&(s.value=ve(e.curComponent.style))},{immediate:!0,deep:!0});const m=Ne(()=>{Object.assign(s.value,e.curComponent.positionStyle)},200);return ee(()=>e.curComponent.positionStyle,()=>{e.curComponent&&e.curComponent.id&&m()},{deep:!0}),(d,n)=>(D(),O("div",Zo,[u(b(xt),{accordion:""},{default:S(()=>[(D(!0),O(Z,null,de(r.value,({label:a,prop:h,children:g})=>(D(),A(b(Te),{key:`${d.curComponent.id}${h}`,title:a,name:h},{default:S(()=>[u(b(Sn),{children:g,data:s.value,name:a,uid:h,ukey:d.curComponent.id,onChange:b(i)},null,8,["children","data","name","uid","ukey","onChange"])]),_:2},1032,["title","name"]))),128))]),_:1})]))}}),Qo=V(Jo,[["__scopeId","data-v-3266e632"]]),ea={key:0},ta={key:1},na=I({__name:"SideBar",props:{iscollapsed:{type:Boolean,default:!1}},emits:["update:iscollapsed"],setup(o,{emit:e}){const s=dt().appContext.components.XIcon,r=R("attr"),i=F(),m=L(()=>i.curComponent),d=L(()=>i.curComponent?[{label:"样式",key:"4",icon:()=>z(s,{name:"textStyle",onClick:()=>n("style")})},{label:"属性",key:"2",icon:()=>z(s,{name:"attr",onClick:()=>n("attr")})},{label:"数据",key:"3",icon:()=>z(s,{name:"data",onClick:()=>n("data")})}]:[{label:"画布",key:"1",icon:()=>z(s,{name:"page"})}]),n=a=>{e("update:iscollapsed",!1),r.value=a};return(a,h)=>a.iscollapsed?(D(),O("div",ta,[u(b(ze),{options:d.value},null,8,["options"])])):(D(),O("div",ea,[m.value?(D(),A(b(re),{key:0,value:r.value,"onUpdate:value":[h[0]||(h[0]=g=>r.value=g),h[1]||(h[1]=g=>{r.value=g})],type:"line",animated:"","justify-content":"center"},{default:S(()=>[u(b(X),{name:"style","display-directive":"show:lazy"},{tab:S(()=>[u(b(s),{name:"textStyle"}),H(M("span",null,"样式",512),[[W,!a.iscollapsed]])]),default:S(()=>[u(b(Qo),{curComponent:m.value},null,8,["curComponent"])]),_:1}),u(b(X),{name:"attr","display-directive":"show:lazy"},{tab:S(()=>[u(b(s),{name:"attr"}),H(M("span",null,"属性",512),[[W,!a.iscollapsed]])]),default:S(()=>[u(b(Wo),{curComponent:m.value},null,8,["curComponent"])]),_:1}),u(b(X),{name:"data","display-directive":"show:lazy"},{tab:S(()=>[u(b(s),{name:"data"}),H(M("span",null,"数据",512),[[W,!a.iscollapsed]])]),default:S(()=>[u(b(qo),{curComponent:m.value},null,8,["curComponent"])]),_:1})]),_:1},8,["value"])):(D(),A(b(re),{key:1,type:"line",animated:"","justify-content":"center"},{default:S(()=>[u(b(X),{name:"canvas","display-directive":"show:lazy"},{tab:S(()=>[u(b(s),{name:"page"}),H(M("span",null,"画布",512),[[W,!a.iscollapsed]])]),default:S(()=>[u(Ko)]),_:1})]),_:1}))]))}}),oa={class:"tool-bar-title"},aa=I({__name:"Toolbar",props:{toolbars:{default:()=>[]}},setup(o){const e=F();return(t,s)=>t.toolbars.length>0?(D(),A(b(Rn),{key:0,bars:t.toolbars},{default:S(()=>[M("div",oa,ae(b(e).name),1)]),_:1},8,["bars"])):we("",!0)}}),sa=V(aa,[["__scopeId","data-v-ab0cab7e"]]),ia=I({__name:"Area",setup(o){const e=wt(),t=F(),s=L(()=>e.hidden),r=L(()=>e.style.left),i=L(()=>e.style.top),m=L(()=>e.style.width),d=L(()=>e.style.height),n=ee(()=>t.curComponent,()=>{e.components.length>0&&e.setHidden()}),a=()=>{e.compose(),e.setHidden()},h=()=>{e.flushLeft(),e.setHidden()},g=()=>{e.flushRight(),e.setHidden()},l=()=>{e.flushTop(),e.setHidden()},y=()=>{e.flushBottom(),e.setHidden()},k=()=>{e.flushRow(),e.setHidden()},_=()=>{e.flushColumn(),e.setHidden()},f=()=>{e.batchDeleteComponent(e.components),e.setHidden()},C=()=>[{text:"组合",subText:"",disable:!e.canCompose,handler:a},{divider:!0},{text:"删除",subText:"Ctrl + Delete",disable:e.components.length<=0,handler:f},{divider:!0},{text:"左对齐",subText:"",handler:h},{text:"右对齐",subText:"",handler:g},{text:"顶对齐",subText:"",handler:l},{text:"底对齐",subText:"",handler:y},{divider:!0},{text:"水平对齐",subText:"",handler:k},{text:"垂直对齐",subText:"",handler:_}];return Ee(()=>{n&&n()}),(w,N)=>{const E=te("contextmenu");return s.value?H((D(),O("div",{key:0,style:Y({left:r.value+"px",top:i.value+"px",width:m.value+"px",height:d.value+"px"}),class:"area"},null,4)),[[E,C,void 0,{stop:!0}]]):we("",!0)}}}),la=V(ia,[["__scopeId","data-v-a97db47e"]]),ca={},ra={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},da=tn('<defs data-v-9ff3aadd><pattern id="smallGrid" width="7.236328125" height="7.236328125" patternUnits="userSpaceOnUse" data-v-9ff3aadd><path d="M 7.236328125 0 L 0 0 0 7.236328125" fill="none" stroke="rgba(207, 207, 207, 0.3)" stroke-width="1" data-v-9ff3aadd></path></pattern><pattern id="grid" width="36.181640625" height="36.181640625" patternUnits="userSpaceOnUse" data-v-9ff3aadd><rect width="36.181640625" height="36.181640625" fill="url(#smallGrid)" data-v-9ff3aadd></rect><path d="M 36.181640625 0 L 0 0 0 36.181640625" fill="none" stroke="rgba(186, 186, 186, 0.5)" stroke-width="1" data-v-9ff3aadd></path></pattern></defs><rect width="100%" height="100%" fill="url(#grid)" data-v-9ff3aadd></rect>',2),ua=[da];function pa(o,e){return D(),O("svg",ra,ua)}const ma=V(ca,[["render",pa],["__scopeId","data-v-9ff3aadd"]]),fa={class:"mark-line"},ha=I({__name:"MarkLine",setup(o){const e=F(),t=R([]),s=se(["xt","xc","xb","yl","yc","yr"]),r=R(3),i=se({xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}),m=l=>{t.value.push(l)},d=()=>{Object.keys(i).forEach(l=>{i[l]=!1})};Re("move",l=>{n(l.isDownward,l.isRightward)}),Re(Oe.DRAG_STOP,()=>{d()});const n=(l,y)=>{const k=e.componentData;if(e.curComponent){const{top:_,left:f,right:C,bottom:w}=Me(e.curComponent.positionStyle),N=(C-f)/2,E=(w-_)/2;d(),k.forEach(P=>{if(P==e.curComponent)return;const j=Me(P.positionStyle),{top:c,left:v,bottom:p,right:x}=j,$=(x-v)/2,B=(p-c)/2,U={top:[{isNearly:a(_,c),lineNode:t.value[0],line:"xt",dragShift:c,lineShift:c},{isNearly:a(w,c),lineNode:t.value[0],line:"xt",dragShift:c-(w-_||0),lineShift:c},{isNearly:a((_||0)+E,c+B),lineNode:t.value[1],line:"xc",dragShift:c+B-E,lineShift:c+B},{isNearly:a(_,p),lineNode:t.value[2],line:"xb",dragShift:p,lineShift:p},{isNearly:a(w,p),lineNode:t.value[2],line:"xb",dragShift:p-(w-_||0),lineShift:p}],left:[{isNearly:a(f,v),lineNode:t.value[3],line:"yl",dragShift:v,lineShift:v},{isNearly:a(C,v),lineNode:t.value[3],line:"yl",dragShift:v-(C-f||0),lineShift:v},{isNearly:a((f||0)+N,v+$),lineNode:t.value[4],line:"yc",dragShift:v+$-N,lineShift:v+$},{isNearly:a(f,x),lineNode:t.value[5],line:"yr",dragShift:x,lineShift:x},{isNearly:a(C,x),lineNode:t.value[5],line:"yr",dragShift:x-(C-f||0),lineShift:x}]},J=[],{rotate:Se}=e.curComponent.style;Object.keys(U).forEach(pe=>{U[pe].forEach(ne=>{if(!ne.isNearly)return;const jt=Se!=0?h(pe,ne,{width:C-f,height:w-_}):ne.dragShift;e.setCurComponentStyle(["position",pe],jt),ne.lineNode.style[pe]=`${ne.lineShift}px`,J.push(ne.line)})}),J.length&&g(J,l,y)})}},a=(l,y)=>Math.abs(l-y)<=r.value,h=(l,y,k)=>{const{width:_,height:f}=e.curComponent.style;return l=="top"?Math.round(y.dragShift-(f-k.height)/2):Math.round(y.dragShift-(_-k.width)/2)},g=(l,y,k)=>{k?l.includes("yr")?i.yr=!0:l.includes("yc")?i.yc=!0:l.includes("yl")&&(i.yl=!0):l.includes("yl")?i.yl=!0:l.includes("yc")?i.yc=!0:l.includes("yr")&&(i.yr=!0),y?l.includes("xb")?i.xb=!0:l.includes("xc")?i.xc=!0:l.includes("xt")&&(i.xt=!0):l.includes("xt")?i.xt=!0:l.includes("xc")?i.xc=!0:l.includes("xb")&&(i.xb=!0)};return(l,y)=>(D(),O("div",fa,[(D(!0),O(Z,null,de(s,k=>H((D(),O("div",{key:k,ref_for:!0,ref:m,class:ue(["line",k.includes("x")?"xline":"yline"])},null,2)),[[W,i[k]||!1]])),128))]))}}),va=V(ha,[["__scopeId","data-v-08b7df93"]]),ga=o=>o<=.25?40:o<=.5?20:o<=1?10:o<=2?5:o<=4?2:1,ot=.83,_a=(o,e,t,s,r,i)=>{const{scale:m,width:d,height:n,ratio:a,palette:h}=r,{bgColor:g,fontColor:l,shadowColor:y,longfgColor:k,shortfgColor:_}=h;if(o.scale(a,a),o.clearRect(0,0,d,n),o.fillStyle=g,o.fillRect(0,0,d,n),s){const p=(t-e)*m,x=s*m;o.fillStyle=y,i?o.fillRect(p,0,x,n*3/8):o.fillRect(0,p,d*3/8,x)}const f=ga(m),C=f*m,w=f*10,N=w*m,E=Math.floor(e/f)*f,P=Math.floor(e/w)*w,j=(E-e)/f*C,c=(P-e)/w*N,v=e+Math.ceil((i?d:n)/m);o.beginPath(),o.fillStyle=l,o.strokeStyle=k;for(let p=P,x=0;p<v;p+=w,x++){const $=c+x*N+.5;i?o.moveTo($,0):o.moveTo(0,$),o.save(),i?o.translate($,n*.4):o.translate(d*.4,$),i||o.rotate(-Math.PI/2),o.scale(ot/a,ot/a),o.fillText(p.toString(),4*a,7*a),o.restore(),i?o.lineTo($,n*9/16):o.lineTo(d*9/16,$)}o.stroke(),o.closePath(),o.beginPath(),o.strokeStyle=_;for(let p=E,x=0;p<v;p+=f,x++){const $=j+x*C+.5;i?o.moveTo($,0):o.moveTo(0,$),p%w!==0&&(i?o.lineTo($,n/4):o.lineTo(d/4,$))}o.stroke(),o.closePath(),o.setTransform(1,0,0,1,0,0)},ba=I({__name:"index",props:{showIndicator:{type:Boolean},valueNum:{},scale:{},ratio:{},palette:{},vertical:{type:Boolean},start:{},width:{},height:{},selectStart:{},selectLength:{}},emits:["onAddLine","update:showIndicator","update:valueNum"],setup(o,{emit:e}){const t=o,s=se({canvasContext:null});let r=1;const i=R(null);ie(()=>{r=t.ratio||window.devicePixelRatio||1,m(),d(r),n(r)});const m=()=>{s.canvasContext=i.value&&i.value.getContext("2d")},d=h=>{if(i.value){i.value.width=t.width*h,i.value.height=t.height*h;const g=s.canvasContext;g&&(g.font=`${12*h}px -apple-system,
                "Helvetica Neue", ".SFNSText-Regular",
                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",
                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif`,g.lineWidth=1,g.textBaseline="middle")}},n=h=>{const g={scale:t.scale,width:t.width,height:t.height,palette:t.palette,ratio:h};s.canvasContext&&_a(s.canvasContext,t.start,t.selectStart,t.selectLength,g,!t.vertical)};ee(()=>t.start,()=>n(r)),ee([()=>t.width,()=>t.height],()=>{d(r),n(r)});const a=(h,g)=>{const l=(_,f,C)=>Math.round(f+_/C),y=t.vertical?h.offsetY:h.offsetX,k=l(y,t.start,t.scale);switch(g){case"click":e("onAddLine",k);break;case"enter":e("update:valueNum",k),e("update:showIndicator",!0);break;default:e("update:valueNum",k);break}};return(h,g)=>(D(),O("canvas",{ref_key:"canvas",ref:i,class:"ruler",onClick:g[0]||(g[0]=l=>a(l,"click")),onMouseenter:g[1]||(g[1]=l=>a(l,"enter")),onMousemove:g[2]||(g[2]=l=>a(l,"move")),onMouseleave:g[3]||(g[3]=l=>h.$emit("update:showIndicator",!1))},null,544))}}),ya=I({__name:"RulerLine",props:{scale:{},thick:{},palette:{},index:{},start:{},vertical:{type:Boolean},value:{},isShowReferLine:{type:Boolean}},emits:["onMouseDown","onRelease","onRemove"],setup(o,{emit:e}){const t=o,s=R(0),r=R(!0);ie(()=>{s.value=t.value});const i=l=>{r.value=l>=0},m=L(()=>{const l=(s.value-t.start)*t.scale;i(l);const y=l+"px";return t.vertical?{top:y}:{left:y}}),d=L(()=>{const l=`1px ${t.palette?.lineBoardStyle||"dashed"} ${t.palette?.lineColor}`,y=t.vertical?{borderTop:l}:{borderLeft:l};return{cursor:t.isShowReferLine?t.vertical?"ns-resize":"ew-resize":"none",...y}}),n=L(()=>t.vertical?{left:t.thick+"px"}:{top:t.thick+"px"}),a=l=>{l.stopPropagation();const y=t.vertical?l.clientY:l.clientX,k=s.value;e("onMouseDown");const _=C=>{const w=t.vertical?C.clientY:C.clientX;s.value=Math.round(k+(w-y)/t.scale)},f=()=>{e("onRelease",s.value,t.index),document.removeEventListener("mousemove",_,!0),document.removeEventListener("mouseup",f)};document.addEventListener("mousemove",_,!0),document.addEventListener("mouseup",f)},h=()=>{e("onRemove",t.index)},g=()=>[{text:"删除",subText:"",handler:()=>h()}];return(l,y)=>{const k=te("contextmenu");return H((D(),O("div",{class:"line",style:Y([m.value,d.value]),onMousedown:a},[M("div",{class:"action",style:Y(n.value)},[M("span",{class:ue({value:!0,"is-vertical":l.vertical})},ae(s.value),3)],4)],36)),[[W,r.value],[k,g,void 0,{stop:!0}]])}}}),xa=V(ya,[["__scopeId","data-v-f98fea10"]]),Ca={class:"lines"},wa={class:"value"},Sa=I({__name:"RulerWrapper",props:{scale:{},ratio:{},thick:{},selectStart:{},selectLength:{},isShowReferLine:{type:Boolean},palette:{},canvasHeight:{},canvasWidth:{},vertical:{type:Boolean,default:!0},width:{default:200},height:{default:200},start:{default:0}},setup(o,{expose:e}){const t=o;ft(_=>({"6637e487":a.value,"4a522334":h.value}));const s=R(!1),r=R(0),i=R([]),m=L(()=>t.vertical?"v-container":"h-container");e({clearLines:()=>{i.value=[]}});const n=L(()=>{const _={width:`calc(100% - ${t.thick}px)`,height:`${t.thick+1}px`,left:`${t.start}px`},f={width:`${t.thick&&t.thick+1}px`,height:`calc(100% - ${t.thick}px)`,top:`${t.start}px`};return t.vertical?f:_}),a=L(()=>t.vertical?"100vh":`${t.canvasHeight}px`),h=L(()=>t.vertical?`${t.canvasWidth}px`:"100vw"),g=L(()=>{const _=(r.value-(t.start||0))*t.scale,f=t.vertical?"top":"left",C=t.vertical?"borderBottom":"borderLeft";return{[f]:_+"px",[C]:`1px ${t.palette?.lineBoardStyle||"dashed"} ${t.palette?.lineColor}`}}),l=_=>{i.value.push(_)},y=(_,f)=>{const C=_-(t.start||0),w=(t.vertical?t.height||200:t.width||200)/t.scale;C<0||C>w?k(f):i.value[f]=_},k=_=>{i.value.splice(_,1)};return(_,f)=>(D(),O("div",{class:ue(m.value),style:Y(n.value)},[u(ba,{valueNum:r.value,"onUpdate:valueNum":f[0]||(f[0]=C=>r.value=C),showIndicator:s.value,"onUpdate:showIndicator":f[1]||(f[1]=C=>s.value=C),vertical:_.vertical,scale:_.scale,width:_.width,height:_.height,start:_.start,ratio:_.ratio,"select-start":_.selectStart,"select-length":_.selectLength,palette:_.palette,onOnAddLine:l},null,8,["valueNum","showIndicator","vertical","scale","width","height","start","ratio","select-start","select-length","palette"]),H(M("div",Ca,[(D(!0),O(Z,null,de(i.value,(C,w)=>(D(),A(xa,{key:C+w,index:w,value:C>>0,scale:_.scale,start:_.start,thick:_.thick,palette:_.palette,vertical:_.vertical,"is-show-refer-line":_.isShowReferLine,onOnRemove:k,onOnRelease:y},null,8,["index","value","scale","start","thick","palette","vertical","is-show-refer-line"]))),128))],512),[[W,_.isShowReferLine]]),H(M("div",{class:"indicator",style:Y(g.value)},[M("div",wa,ae(r.value),1)],4),[[W,s.value]])],6))}}),at=V(Sa,[["__scopeId","data-v-e634d69a"]]),Da={id:"mb-ruler",class:"style-ruler mb-ruler"},ka=I({__name:"Index",props:{scale:{default:1},ratio:{default:0},thick:{default:16},palette:{},startX:{},startY:{},width:{default:200},height:{default:200},shadow:{}},setup(o){const e=o,t=R(null),s=R(null),r=R(!0),i=()=>{t.value?.clearLines(),s.value?.clearLines(),r.value=!0},m=()=>[{text:"显示辅助线",subText:"",disable:r.value,handler:()=>r.value=!0},{text:"隐藏辅助线",subText:"",disable:!r.value,handler:()=>r.value=!1},{text:"清空辅助线",subText:"",disable:!r.value,handler:i}],d=L(()=>{function n(a,h){return Object.keys(a).forEach(g=>{g&&a.hasOwnProperty(g)&&(typeof h.key=="object"?a[g]=n(a[g],h[g]):h.hasOwnProperty(g)&&(a[g]=h[g]))}),a}return n({bgColor:"rgba(225,225,225, 0)",longfgColor:"#BABBBC",shortfgColor:"#C8CDD0",fontColor:"#7D8694",shadowColor:"#E8E8E8",lineColor:"#37d4cf",lineBoardStyle:"dashed",borderColor:"#DADADC",cornerActiveColor:"rgb(235, 86, 72, 0.6)",menu:{bgColor:"#fff",dividerColor:"#DBDBDB",listItem:{textColor:"#415058",hoverTextColor:"#298DF8",disabledTextColor:"rgba(65, 80, 88, 0.4)",bgColor:"#fff",hoverBgColor:"#F2F2F2"}}},e.palette||{})});return(n,a)=>{const h=te("contextmenu");return H((D(),O("div",Da,[u(at,{ref_key:"HRulerWrapperRef",ref:s,vertical:!1,width:n.width,height:16,"canvas-height":n.height,"canvas-width":n.width,"is-show-refer-line":r.value,thick:n.thick,ratio:n.ratio,start:n.startX,"select-start":n.shadow?.x||0,"select-length":n.shadow?.width||0,scale:n.scale,palette:d.value},null,8,["width","canvas-height","canvas-width","is-show-refer-line","thick","ratio","start","select-start","select-length","scale","palette"]),u(at,{ref_key:"VRulerWrapperRef",ref:t,vertical:!0,width:16,height:n.height,"canvas-height":n.height,"canvas-width":n.width,"is-show-refer-line":r.value,thick:n.thick,ratio:n.ratio,start:n.startY,"select-start":n.shadow?.y||0,"select-length":n.shadow?.height||0,scale:n.scale,palette:d.value},null,8,["height","canvas-height","canvas-width","is-show-refer-line","thick","ratio","start","select-start","select-length","scale","palette"])])),[[h,m,void 0,{stop:!0}]])}}}),$a=1,Ra=0,La=0,Ia=20,Na=I({__name:"Ruler",props:{width:{},height:{},isShowReferLine:{type:Boolean}},setup(o){const e={h:[],v:[]};return(t,s)=>(D(),A(b(ka),{thick:Ia,scale:$a,width:t.width,height:t.height,startX:Ra,startY:La,lines:e,isShowReferLine:t.isShowReferLine},null,8,["width","height","isShowReferLine"]))}}),Ta=V(Na,[["__scopeId","data-v-1810a66a"]]),za=["onMousedown"],Oa=I({__name:"Editor",setup(o){const e=wt(),t=Ct(),s=F(),r=c=>He(c,["top","left","width","height","rotate"]),i=()=>{s.clearCanvas()},m=(c,v)=>{const p=document.querySelector("#editor").getBoundingClientRect(),x=v.pageY-p.top,$=v.pageX-p.left;t.paste(!0,$,x)},d=()=>[{text:"粘贴",subText:"Ctrl + V",handler:m},{text:"清空画布",subText:"",handler:i}];ie(()=>{Ve.log("进入编辑模式"),s.setEditMode(Ue.EDIT),document.addEventListener("paste",y),document.addEventListener("copy",l)}),Ee(()=>{Ve.log("进入预览模式"),s.setEditMode(Ue.PREVIEW),document.removeEventListener("paste",y),document.removeEventListener("copy",l),s.clearCanvas()});const n=L(()=>s.componentData),a=L(()=>s.canvasStyleData),h=L(()=>s.curComponent),g=L(()=>{const c=nn(a.value.background),v={...a.value,...c};return He(v,["width","height","backgroundImage","backgroundSize","backgroundColor"])}),l=()=>{s.curComponent&&t.copy(s.curComponent)},y=c=>{if(c.clipboardData){const v=c.clipboardData.getData("text");try{const p=on(JSON.parse(v));p&&(p.change(["position","top"],p.positionStyle.top+10,"style"),p.change(["position","left"],p.positionStyle.left+10,"style"),p.id=pt(),t.copy(p),c.preventDefault(),c.stopPropagation(),s.appendComponent(p))}catch{}}},k=R(0),_=R(0),f=se({x:0,y:0}),C=R(null),w=R(!0),N=c=>{s.setClickComponentStatus(!1),c.preventDefault(),c.stopPropagation(),e.setHidden();const v=C.value?.getBoundingClientRect();k.value=v.x,_.value=v.y;const p=c.clientX,x=c.clientY;f.x=(p-k.value)/s.scale,f.y=(x-_.value)/s.scale;const $=U=>{U.preventDefault(),U.stopPropagation(),U.clientX<p&&(f.x=(U.clientX-k.value)/s.scale),U.clientY<x&&(f.y=(U.clientY-_.value)/s.scale);const J=Math.abs(U.clientX-p)/s.scale,Se=Math.abs(U.clientY-x)/s.scale;e.setPostion({left:f.x,top:f.y,width:J,height:Se})},B=U=>{if(document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",B),U.clientX==p&&U.clientY==x){e.setHidden();return}const J={left:Math.round(e.style.left),top:Math.round(e.style.top),right:e.style.left+e.style.width,bottom:e.style.top+e.style.height};e.setSelectComponents(J)};document.addEventListener("mousemove",$),document.addEventListener("mouseup",B)},E=async c=>{c.preventDefault(),c.stopPropagation();const v=c.dataTransfer.getData("componentName");if(v){const p=new $e[v];p.dataIntegrationMode===mt.UNIVERSAL&&p.loadDemoData();const x=document.querySelector("#editor").getBoundingClientRect(),$=(c.pageY-x.top)/s.scale,B=(c.pageX-x.left)/s.scale;p.change(["position","top"],$,"style"),p.change(["position","left"],B,"style"),s.appendComponent(p)}},P=c=>{c.preventDefault(),c.dataTransfer.dropEffect="copy"},j=()=>{s.isClickComponent||s.setCurComponent(void 0)};return(c,v)=>{const p=te("contextmenu");return H((D(),O("div",{id:"editor",ref_key:"editor",ref:C,class:"editor edit",style:Y(g.value),onMousedown:ht(N,["left"]),onDrop:E,onDragover:P,onMouseup:j},[u(ma),u(Ta,{width:a.value.width,height:a.value.height,isShowReferLine:w.value},null,8,["width","height","isShowReferLine"]),(D(!0),O(Z,null,de(n.value,(x,$)=>(D(),O(Z,{key:x.id},[b(s).isEditMode&&x.display?(D(),A(b($n),{key:0,id:"shape"+x.id,defaultStyle:x.style,style:Y(r(x.style)),active:x.id===(h.value||{}).id,info:x,class:ue({lock:x.locked}),index:$},{default:S(()=>[(D(),A(an(x.component),{id:"component"+x.id,class:"component",style:Y(b(sn)(x)),component:x},null,8,["id","style","component"]))]),_:2},1032,["id","defaultStyle","style","active","info","class","index"])):we("",!0)],64))),128)),u(va),u(la)],44,za)),[[p,d,void 0,{stop:!0}]])}}}),Ea=V(Oa,[["__scopeId","data-v-d77b0306"]]),Ba=I({__name:"Canvas",setup(o){ft(w=>({"4e84059f":m.value,"09459163":s.value+"px"}));const e=R(0),t=R(0),s=R(35),r=R(100),i=R("100%"),m=R(1),d=F(),n=[{value:200,label:"200%"},{value:150,label:"150%"},{value:100,label:"100%"},{value:80,label:"80%"},{value:50,label:"50%"}],a=No(),{primaryColor:h,cubicBezierEaseInOut:g}=a.value,l=L(()=>({width:e.value+"px",height:t.value+"px"})),y=w=>{const{width:N,height:E}=w.contentRect;e.value=N,t.value=E-s.value},k=w=>{i.value=`${w}%`,r.value=w,_(r.value)},_=Ne(w=>{d.setScale(w),m.value=w/100},300),f=R();function C(w){const{altKey:j,metaKey:c,deltaY:v}=w;let p=r.value;(j||c)&&(w.preventDefault(),10<p&&p<200?p=v>0?p+10:p-10:p<=10&&v>0?p+=10:p>=200&&v<0&&(p-=10),k(p))}return ie(()=>{f.value.$el.addEventListener("wheel",C,!1)}),ln(()=>{f.value.$el.removeEventListener("wheel",C,!1)}),(w,N)=>{const E=te("resize");return H((D(),A(b(he),{ref_key:"centerCanvas",ref:f},{default:S(()=>[u(b(cn),{class:"content"},{default:S(()=>[u(b(Nn),{"x-scrollable":"",style:Y(l.value)},{default:S(()=>[u(b(Ea))]),_:1},8,["style"])]),_:1}),u(b(In),{position:"absolute",class:"footer"},{default:S(()=>[u(b(vt),{justify:"end",align:"center",style:{height:"100%","margin-right":"5px"}},{default:S(()=>[u(b(Io),{tag:"span",style:Y({color:b(h),transition:`all 0.3s ${b(g)}`})},{default:S(()=>[fe(" 画布缩放: ")]),_:1},8,["style"]),u(b(Dn),{value:r.value,min:10,max:200,style:{width:"120px"},"onUpdate:value":k},null,8,["value"]),u(b(Le),{value:i.value,options:n,size:"tiny",style:{width:"90px"},"onUpdate:value":k},null,8,["value"])]),_:1})]),_:1})]),_:1})),[[E,y]])}}}),Aa=V(Ba,[["__scopeId","data-v-72188e0c"]]),Pa=I({__name:"Designer",props:{toolbars:{default:()=>[]}},setup(o,{expose:e}){const t=F(),s=R(!1),r=R(!1);return rn("HOOKS",dn(kn)),e({setLayoutData:m=>{t.setLayoutData(m)}}),Ee(()=>{t.clearCanvas()}),(m,d)=>(D(),A(b(he),{class:"home"},{default:S(()=>[u(b(un),{class:"header"},{default:S(()=>[u(b(sa),{toolbars:m.toolbars},null,8,["toolbars"])]),_:1}),u(b(he),{"has-sider":"",class:"main"},{default:S(()=>[u(b(Fe),{class:"left",width:"200",collapsed:s.value,"native-scrollbar":!1,bordered:"","collapse-mode":"width","show-trigger":"",onCollapse:d[2]||(d[2]=n=>s.value=!0),onExpand:d[3]||(d[3]=n=>s.value=!1)},{default:S(()=>[u(b(Uo),{iscollapsed:s.value,"onUpdate:iscollapsed":[d[0]||(d[0]=n=>s.value=n),d[1]||(d[1]=n=>{s.value=n})]},null,8,["iscollapsed"])]),_:1},8,["collapsed"]),u(b(he),{"has-sider":"","sider-placement":"right"},{default:S(()=>[u(Aa),u(b(Fe),{class:"right",width:"240",collapsed:r.value,"native-scrollbar":!1,bordered:"","collapsed-width":35,"collapse-mode":"width","show-trigger":"arrow-circle",onCollapse:d[6]||(d[6]=n=>r.value=!0),onExpand:d[7]||(d[7]=n=>r.value=!1)},{default:S(()=>[u(b(na),{iscollapsed:r.value,"onUpdate:iscollapsed":[d[4]||(d[4]=n=>r.value=n),d[5]||(d[5]=n=>{r.value=n})]},null,8,["iscollapsed"])]),_:1},8,["collapsed"])]),_:1})]),_:1})]),_:1}))}}),ja=V(Pa,[["__scopeId","data-v-b4275b0d"]]),Pt=fn(),Q=F(),Ma=async()=>{const o=await Pt.lastRecord();o?Q.setLayoutData({canvasData:o.canvasData,canvasStyle:o.canvasStyle}):q.warning("没有快照了")},Va=async()=>{const o=await Pt.nextRecord();o?Q.setLayoutData({canvasData:o.canvasData,canvasStyle:o.canvasStyle}):q.warning("没有快照了")},Ua=()=>{Q.toggleShowEm()},Ha=o=>{const e=`${Q.name}`||"OpenDataV";pn(`${e}.json`,JSON.stringify({id:o,name:e,canvasData:Q.layoutData,canvasStyle:Q.canvasStyleData}))},Fa=()=>{mn(Wa,".json")},Wa=o=>{if(o.target&&o.target.result){const e=JSON.parse(o.target.result);e&&Q.setComponentData(e.canvasData)}},Xa="2946854",Ya="方向",Ka="iconfont",Ga="icon-",qa="",Za=[{icon_id:"11291350",name:"组",font_class:"zu",unicode:"e854",unicode_decimal:59476},{icon_id:"1817751",name:"柱形图",font_class:"zhuxingtu",unicode:"e626",unicode_decimal:58918},{icon_id:"3868284",name:"仪表盘",font_class:"yibiaopan",unicode:"eb67",unicode_decimal:60263},{icon_id:"4354243",name:"图表-饼图",font_class:"tubiao-bingtu",unicode:"eb95",unicode_decimal:60309},{icon_id:"4354246",name:"图表-卡片",font_class:"tubiao-qiapian",unicode:"eb96",unicode_decimal:60310},{icon_id:"4354248",name:"图表-折线图",font_class:"tubiao-zhexiantu",unicode:"eb97",unicode_decimal:60311},{icon_id:"4906240",name:"按钮组",font_class:"anniuzu",unicode:"e782",unicode_decimal:59266},{icon_id:"5383645",name:"导航",font_class:"daohang",unicode:"e77d",unicode_decimal:59261},{icon_id:"5961366",name:"列表",font_class:"liebiao",unicode:"ec6b",unicode_decimal:60523},{icon_id:"5971297",name:"采煤机",font_class:"caimeiji",unicode:"e603",unicode_decimal:58883},{icon_id:"7040619",name:"其他",font_class:"qita",unicode:"e63b",unicode_decimal:58939},{icon_id:"7556180",name:"定制",font_class:"dingzhi",unicode:"e609",unicode_decimal:58889},{icon_id:"9752796",name:"基础",font_class:"jichu",unicode:"e60f",unicode_decimal:58895},{icon_id:"9921108",name:"chart",font_class:"chartt",unicode:"e60a",unicode_decimal:58890},{icon_id:"14475731",name:"装饰装修",font_class:"zhuangshizhuangxiu",unicode:"e6a6",unicode_decimal:59046},{icon_id:"16562592",name:"温度计",font_class:"wenduji",unicode:"e6de",unicode_decimal:59102},{icon_id:"22712019",name:"条形进度图",font_class:"tiaoxingjindutu",unicode:"e66b",unicode_decimal:58987},{icon_id:"22761375",name:"边框",font_class:"biankuang",unicode:"e6b7",unicode_decimal:59063},{icon_id:"22885432",name:"进度图",font_class:"jindutu",unicode:"f24b",unicode_decimal:62027},{icon_id:"124495",name:"警告",font_class:"jinggao1",unicode:"e601",unicode_decimal:58881},{icon_id:"1846445",name:"预警灯",font_class:"yujingdeng",unicode:"e67f",unicode_decimal:59007},{icon_id:"2239579",name:"自动系统警告灯",font_class:"zidongxitongjinggaodeng1",unicode:"e605",unicode_decimal:58885},{icon_id:"4988542",name:"预警",font_class:"yujing1",unicode:"e644",unicode_decimal:58948},{icon_id:"9974390",name:"预警",font_class:"yujing3",unicode:"e6fe",unicode_decimal:59134},{icon_id:"10817515",name:"警告灯",font_class:"jinggaodeng",unicode:"e64b",unicode_decimal:58955},{icon_id:"14151833",name:"报警",font_class:"baojing1",unicode:"e630",unicode_decimal:58928},{icon_id:"16965399",name:"警告灯",font_class:"hong",unicode:"e60d",unicode_decimal:58893},{icon_id:"20379044",name:"预警灯",font_class:"yujingdeng1",unicode:"e623",unicode_decimal:58915},{icon_id:"23819336",name:"报警 警告 预警 警告灯",font_class:"a-baojingjinggaoyujingjinggaodeng",unicode:"e628",unicode_decimal:58920},{icon_id:"24312218",name:"light",font_class:"light",unicode:"e63a",unicode_decimal:58938},{icon_id:"24614518",name:"告警灯",font_class:"gaojingdeng9",unicode:"e664",unicode_decimal:58980},{icon_id:"25567211",name:"警告灯",font_class:"jinggaodeng1",unicode:"e613",unicode_decimal:58899},{icon_id:"12041083",name:"预警",font_class:"yujing5",unicode:"e671",unicode_decimal:58993},{icon_id:"577357",name:"删除",font_class:"shanchu",unicode:"e74b",unicode_decimal:59211},{icon_id:"1986988",name:"删除",font_class:"shanchu1",unicode:"e625",unicode_decimal:58917},{icon_id:"12795401",name:"首页",font_class:"shouye",unicode:"e62d",unicode_decimal:58925},{icon_id:"201556",name:"查看",font_class:"chakan",unicode:"e600",unicode_decimal:58880},{icon_id:"201638",name:"编辑",font_class:"bianji",unicode:"e602",unicode_decimal:58882},{icon_id:"11729723",name:"复制",font_class:"fuzhi",unicode:"e608",unicode_decimal:58888},{icon_id:"7269302",name:"首页-默认",font_class:"shouye-moren",unicode:"e619",unicode_decimal:58905},{icon_id:"658044",name:"解锁",font_class:"jiesuo",unicode:"e669",unicode_decimal:58985},{icon_id:"10097949",name:"旋转",font_class:"xuanzhuan",unicode:"e680",unicode_decimal:59008},{icon_id:"374774",name:"开关",font_class:"kaiguan",unicode:"e61f",unicode_decimal:58911},{icon_id:"122162",name:"时钟",font_class:"clock",unicode:"e63e",unicode_decimal:58942},{icon_id:"1242185",name:"反馈信息",font_class:"fankuixinxi",unicode:"e660",unicode_decimal:58976},{icon_id:"2468505",name:"37类建筑修理x16",font_class:"leijianzhuxiulix",unicode:"e695",unicode_decimal:59029},{icon_id:"11747267",name:"时间",font_class:"weibiaoti-",unicode:"e618",unicode_decimal:58904},{icon_id:"14794143",name:"sds_第37类 建筑修理",font_class:"sds_di37leijianzhuxiuli",unicode:"e61e",unicode_decimal:58910},{icon_id:"17762035",name:"联动控制",font_class:"liandongkongzhi",unicode:"e624",unicode_decimal:58916},{icon_id:"18165278",name:"锁,密码,开锁,解锁",font_class:"unlock-full",unicode:"e882",unicode_decimal:59522},{icon_id:"288554",name:"ascend",font_class:"ascend",unicode:"e6b4",unicode_decimal:59060},{icon_id:"288556",name:"falling",font_class:"falling",unicode:"e6b6",unicode_decimal:59062},{icon_id:"815867",name:"按钮-关",font_class:"buttonoff",unicode:"e614",unicode_decimal:58900},{icon_id:"815872",name:"按钮-开",font_class:"buttonon",unicode:"e615",unicode_decimal:58901},{icon_id:"2674878",name:"箭头 上",font_class:"jiantoushang",unicode:"e62c",unicode_decimal:58924},{icon_id:"2674928",name:"箭头 右",font_class:"jiantouyou",unicode:"e632",unicode_decimal:58930},{icon_id:"2674929",name:"箭头 下",font_class:"jiantouxia",unicode:"e633",unicode_decimal:58931},{icon_id:"7594038",name:"24gl-next",font_class:"24gl-next",unicode:"ea6b",unicode_decimal:60011},{icon_id:"7594046",name:"24gl-pauseCircle",font_class:"24gl-pauseCircle",unicode:"ea6f",unicode_decimal:60015},{icon_id:"7594068",name:"24gl-previous",font_class:"24gl-previous",unicode:"ea73",unicode_decimal:60019},{icon_id:"7594086",name:"24gl-stopCircle",font_class:"24gl-stopCircle",unicode:"ea79",unicode_decimal:60025},{icon_id:"10268256",name:"按钮_开启",font_class:"anniu_kaiqi",unicode:"e659",unicode_decimal:58969},{icon_id:"10268257",name:"按钮_关闭",font_class:"anniu_guanbi",unicode:"e65b",unicode_decimal:58971},{icon_id:"25807963",name:"箭头 上",font_class:"jiantoushangzuo-copy",unicode:"ec63",unicode_decimal:60515},{icon_id:"25808146",name:"向右2",font_class:"xiangzuo2-copy",unicode:"ec64",unicode_decimal:60516},{icon_id:"166602",name:"关闭播放",font_class:"guanbibofang",unicode:"e61d",unicode_decimal:58909},{icon_id:"577396",name:"向上3",font_class:"xiangshang3",unicode:"e76f",unicode_decimal:59247},{icon_id:"577401",name:"向下5",font_class:"xiangxia5",unicode:"e774",unicode_decimal:59252},{icon_id:"577403",name:"向右2",font_class:"xiangyou2",unicode:"e776",unicode_decimal:59254},{icon_id:"1159910",name:"右播放",font_class:"youbofang",unicode:"e62e",unicode_decimal:58926},{icon_id:"1159911",name:"左播放",font_class:"zuobofang",unicode:"e62f",unicode_decimal:58927},{icon_id:"1185945",name:"播放",font_class:"bofang2",unicode:"e606",unicode_decimal:58886},{icon_id:"1488892",name:"播放",font_class:"bofang5",unicode:"e607",unicode_decimal:58887},{icon_id:"1727559",name:"323向左交换",font_class:"xiangzuojiaohuan",unicode:"e8f8",unicode_decimal:59640},{icon_id:"1727561",name:"324向右交换",font_class:"xiangyoujiaohuan",unicode:"e8f9",unicode_decimal:59641},{icon_id:"2076218",name:"播放2",font_class:"bofang6",unicode:"e87c",unicode_decimal:59516},{icon_id:"7594051",name:"24gl-playCircle",font_class:"24gl-playCircle",unicode:"ea6e",unicode_decimal:60014},{icon_id:"11121478",name:"向上",font_class:"xiangshang7",unicode:"e63c",unicode_decimal:58940},{icon_id:"16388177",name:"播放",font_class:"bofang26",unicode:"e60e",unicode_decimal:58894},{icon_id:"18176557",name:"播放",font_class:"play1",unicode:"ea8d",unicode_decimal:60045},{icon_id:"24267227",name:"播放-快退",font_class:"bofang-kuaitui",unicode:"e68a",unicode_decimal:59018},{icon_id:"24267260",name:"播放09",font_class:"bofang09",unicode:"e690",unicode_decimal:59024},{icon_id:"24268374",name:"播放-快进",font_class:"bofang-kuaijin",unicode:"e6d8",unicode_decimal:59096},{icon_id:"25807740",name:"向上",font_class:"xiangxia7",unicode:"ec62",unicode_decimal:60514}],Ja={id:Xa,name:Ya,font_family:Ka,css_prefix_text:Ga,description:qa,glyphs:Za},Qa={class:"icon-list"},es=["onClick"],ts=I({__name:"IconFont",setup(o){const e=L(()=>Ja.glyphs.map(i=>`icon-${i.font_class}`)),t=R(!0),s=()=>{t.value=!1},r=i=>{hn(i),q.success(`复制图标: ${i}`)};return(i,m)=>(D(),A(_t,null,{default:S(()=>[u(b(gt),{class:"show-card",show:t.value,preset:"card",title:`图标数量${e.value.length}`,style:{width:"50%","max-width":"800px"},onMaskClick:s,onClose:s,"onUpdate:show":m[0]||(m[0]=d=>t.value=!1)},{default:S(()=>[M("ul",Qa,[(D(!0),O(Z,null,de(e.value,d=>(D(),O("li",{key:d,class:"dib",onClick:n=>r(d)},[M("span",{class:ue(`icon iconfont ${d}`)},null,2)],8,es))),128))])]),_:1},8,["show","title"])]),_:1}))}});const ns=V(ts,[["__scopeId","data-v-5f644279"]]),os=()=>{const o=u(ns,{},null),e=document.createElement("div"),t=document.querySelector("#app");bt(o,e),t?.appendChild(e)},as=os,ss=I({__name:"SavePage",props:{index:{}},setup(o){const e=o,t=F(),s=R(!0),r=se({name:t.name,thumbnail:t.thumbnail}),i=se({name:[{required:!0,message:"请输入页面名称",trigger:"blur"}]}),m=async d=>{const{name:n,thumbnail:a}=r;if(!n){q.error("请输入页面名称");return}const h={name:n,thumbnail:a,canvasData:t.layoutData,canvasStyle:t.canvasStyleData};if(d==="update")try{(await yn(e.index,h)).status===200&&(q.success("修改成功"),t.name!==n&&t.setName(n))}catch{q.error("保存失败，请导出到本地，并重新进入此页面")}finally{s.value=!1}else try{const g=await xn(h);g.status===201&&(q.success("保存成功"),await vn.push({name:"Editor",params:{index:g.data.id}}))}catch(g){q.error(`保存失败，失败信息:${g?.message||g}`)}finally{s.value=!1}};return(d,n)=>(D(),A(_t,null,{default:S(()=>[u(b(gt),{show:s.value,"mask-closable":!1,preset:"card",center:"",title:"保存当前布局",style:{width:"30%","min-width":"600px"},size:"medium","onUpdate:show":n[6]||(n[6]=a=>s.value=!1)},{footer:S(()=>[u(b(vt),null,{default:S(()=>[u(b(ke),{onClick:n[3]||(n[3]=a=>s.value=!1)},{default:S(()=>[fe("取消")]),_:1}),d.index?(D(),A(b(ke),{key:1,type:"primary",onClick:n[5]||(n[5]=a=>m("update"))},{default:S(()=>[fe("更新")]),_:1})):(D(),A(b(ke),{key:0,type:"primary",onClick:n[4]||(n[4]=a=>m("new"))},{default:S(()=>[fe("新增")]),_:1}))]),_:1})]),default:S(()=>[u(b(Ie),{model:r,rules:i,onSubmit:n[2]||(n[2]=ht(()=>{},["prevent"]))},{default:S(()=>[u(b(_e),{label:"页面名称",prop:"name"},{default:S(()=>[u(b(We),{value:r.name,"onUpdate:value":n[0]||(n[0]=a=>r.name=a),placeholder:"请输入页面名称"},null,8,["value"])]),_:1}),u(b(_e),{label:"页面缩略图",prop:"thumbnail"},{default:S(()=>[u(b(We),{value:r.thumbnail,"onUpdate:value":n[1]||(n[1]=a=>r.thumbnail=a),placeholder:"请输入缩略图地址"},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1}))}}),is=o=>{const e=u(ss,{index:o},null),t=document.createElement("div");bt(e,t)},ls=is,cs=I({__name:"ThemeIcon",setup(o){const e=ct("DarkTheme",L(()=>!0)),t=L(()=>e.value?"sun":"moon");return(s,r)=>{const i=Ce("x-icon");return D(),A(i,{name:t.value},null,8,["name"])}}}),me=gn(),rs=()=>{me.setNavTheme(me.darkTheme?"dark":"light"),me.setDarkTheme(!me.darkTheme)};function ds(o,e){return[{label:"首页",action:async t=>{await o.push({name:"Pages"})},icon:()=>z(Ln,{width:"40px"}),divider:!0},{label:"保存",action:()=>ls(e.params.index),icon:"save"},{label:"预览",action:t=>{const{href:s}=o.resolve("/preview");window.open(s,"_blank")},icon:"preview"},{label:"撤销",action:Ma,icon:"back"},{label:"恢复",action:Va,icon:"next"},{label:"导出",action:()=>Ha(e.params.index||""),icon:"download"},{label:"导入",action:Fa,icon:"upload"},{label:"全屏",action:()=>{const t=document.querySelector("#editor");document.fullscreenEnabled&&t&&t.requestFullscreen()},icon:"fullScreen"},{label:"坐标",action:Ua,icon:"axis"},{label:"图标",action:as,icon:"cube",location:"right"},{label:"主题",action:rs,icon:()=>z(cs),location:"right"},{label:"GitHub",action:()=>{window.open("https://github.com/AnsGoo/openDataV","_blank")},icon:"github",location:"right"}]}const Cs=I({__name:"View",setup(o){const e=_n(),t=bn(),s=ds(t,e),r=R(null);ie(async()=>{const m=e.params.index;m&&await i(m)});const i=async m=>{const d=await Cn(m);d.data&&r.value.setLayoutData(d.data)};return(m,d)=>(D(),A(b(ja),{ref_key:"designer",ref:r,toolbars:b(s)},null,8,["toolbars"]))}});export{Cs as default};
