var V=(y,t,s)=>new Promise((u,l)=>{var v=i=>{try{b(s.next(i))}catch(g){l(g)}},h=i=>{try{b(s.throw(i))}catch(g){l(g)}},b=i=>i.done?u(i.value):Promise.resolve(i.value).then(v,h);b((s=s.apply(y,t)).next())});import{h as F}from"./index.1f44d164.js";import{_ as P,c as N,b as G}from"./index.ef2789db.js";import{f as E,r as _,q as H,d as a,a4 as T,G as L,N as c,W as f,X as m,F as $,Z as w,u as r,Y as X,Q as q}from"./@vue.f8650cf9.js";import"./axios.19d3e859.js";import"./vue-router.32a64423.js";import"./pinia.30c42674.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./naive-ui.2edb364b.js";import"./date-fns.3ef01b04.js";import"./seemly.5d1c4af6.js";import"./vueuc.ebfd6ddc.js";import"./evtd.79485e8d.js";import"./@css-render.7ab96087.js";import"./vooks.ee7b0837.js";import"./vdirs.8ff5d312.js";import"./@juggle.37ed2144.js";import"./css-render.d5050412.js";import"./@emotion.6322e2ae.js";import"./treemate.80cdf2c2.js";import"./async-validator.fb49d0f5.js";import"./lodash-es.5f1bdab1.js";import"./dexie.78e6a997.js";import"./nprogress.5f640c6a.js";import"./@icon-park.f4b03c54.js";const M={class:"dv-percent-pond"},O=["id"],Q=["offset","stop-color"],Y=["id","x2"],Z=["offset","stop-color"],A=["x","y","rx","ry","stroke-width","stroke","width","height"],J=["stroke-width","stroke-dasharray","stroke","points"],K=["stroke","fill","x","y"],U=E({props:{componentId:null,propValue:null},setup(y){const t=y,s=_(150),u=_(150),l=_(60),v=_(`percent-pond-gradientId1-${N()}`),h=_(`percent-pond-gradientId2-${N()}`),b=o=>{const p=o[0].contentRect;s.value=p.width,u.value=p.height},i=o=>{const n=o;t.propValue.datatag&&n.TagName===t.propValue.datatag&&(l.value=Number((Number(n.TagValue)*100/Number(t.propValue.maxValue)).toFixed(2)))};H(()=>V(this,null,function*(){yield g()}));const g=()=>V(this,null,function*(){if(t.propValue.history)try{const o=yield F.post({url:t.propValue.history,data:[t.propValue.datatag]});o.ErrorCode===200&&(l.value=(Number(o.Results[0].TagValue)||0)*100/Number(t.propValue.maxValue))}catch(o){console.log(o.message||o)}}),e=a(()=>({colors:[t.propValue.color1,t.propValue.color1],borderWidth:Number(t.propValue.borderWidth),borderGap:Number(t.propValue.borderGap),lineDash:t.propValue.lineDash,gapWeight:t.propValue.gapWeight,textColor:t.propValue.textColor,fontSize:Number(t.propValue.fontSize),borderRadius:Number(t.propValue.borderRadius),localGradient:Boolean(t.propValue.localGradient),formatter:t.propValue.formatter})),j=a(()=>e.value.borderWidth?s.value-e.value.borderWidth:0),k=a(()=>e.value.borderWidth?u.value-e.value.borderWidth:0),z=a(()=>e.value?u.value-(e.value.borderWidth+e.value.borderGap)*2:0),S=a(()=>e.value&&e.value.localGradient?v.value:h.value),C=a(()=>{const o=u.value/2;if(!e.value)return`0, ${o} 0, ${o}`;const n=(s.value-(e.value.borderWidth+e.value.borderGap)*2)/100*l.value;return`
        ${e.value.borderWidth+e.value.borderGap}, ${o}
        ${e.value.borderWidth+e.value.borderGap+n}, ${o+.001}`}),W=a(()=>{if(!e.value.colors)return[];const o=e.value.colors.length,n=100/(o-1);return e.value.colors.map((p,d)=>[n*d,p])}),D=a(()=>e.value?"200%":"100%"),I=a(()=>e.value.formatter?e.value.formatter.replace("{value}",l.value.toString()):""),R=a(()=>({fontSize:(t.propValue.fontSize||12)+"px"})),B=o=>{o.key==="maxValue"&&(l.value=Number((Number(o.value)*100/Number(t.propValue.maxValue)).toFixed(2)))};return G(t.componentId,B),G("actual",i),(o,n)=>{const p=T("resize");return L((c(),f("div",M,[(c(),f("svg",null,[m("defs",null,[m("linearGradient",{id:v.value,x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[(c(!0),f($,null,w(r(W),(d,x)=>(c(),f("stop",{key:x,offset:`${d[0]}%`,"stop-color":d[1]},null,8,Q))),128))],8,O),m("linearGradient",{id:h.value,x1:"0%",y1:"0%",x2:r(D),y2:"0%"},[(c(!0),f($,null,w(r(W),(d,x)=>(c(),f("stop",{key:x,offset:`${d[0]}%`,"stop-color":d[1]},null,8,Z))),128))],8,Y)]),m("rect",{x:r(e)?r(e).borderWidth/2:"0",y:r(e)?r(e).borderWidth/2:"0",rx:r(e)?r(e).borderRadius:"0",ry:r(e)?r(e).borderRadius:"0",fill:"transparent","stroke-width":r(e)?r(e).borderWidth:"0",stroke:`url(#${v.value})`,width:r(j)>0?r(j):0,height:r(k)>0?r(k):0},null,8,A),m("polyline",{"stroke-width":r(z),"stroke-dasharray":r(e)?[r(e).lineDash,r(e).gapWeight].join(","):"0",stroke:`url(#${r(S)})`,points:r(C)},null,8,J),m("text",{style:q(r(R)),stroke:r(e)?r(e).textColor:"#fff",fill:r(e)?r(e).textColor:"#fff",x:s.value/2,y:u.value/2},X(r(I)),13,K)]))],512)),[[p,b]])}}});var Ne=P(U,[["__scopeId","data-v-98ad59aa"]]);export{Ne as default};
