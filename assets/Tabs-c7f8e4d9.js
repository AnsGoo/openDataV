import{d as L,l as d,s as P,G as A,k as F,v as p,e as C,o as y,c as f,a as H,F as W,i as j,j as v,n as S,t as q,b as w,u as _,x as K,y as O,z as U,A as X,B as Y,C as J,D as k,E as Q,H as Z,_ as tt}from"./index-3ca9a95a.js";import D from"./Group-4e0749cb.js";import{S as et}from"./Shape-1c8dd59a.js";import{u as ot}from"./index-c01320d9.js";import"./shape.module-52bdef3b.js";const nt=["onClick"],st=L({__name:"Tabs",props:{component:{}},setup(x){const i=x,m=J(),z=d(()=>m.isEditMode),{propValue:s}=ot(i.component),B=d(()=>s.label.items||[]);P(()=>s.label.mode,()=>{const e=(s.label.items||[]).length,h=s.label.mode||"horizontal",o=s.style.height,{top:a,left:c,width:u,height:r}=i.component.style;for(let l=0;l<e;l++)if(i.component.subComponents[l]){const t=i.component.subComponents[l];h==="horizontal"?(t.change(["position","top"],a+o,"style"),t.change(["position","left"],c,"style")):(t.change(["position","top"],a,"style"),t.change(["position","left"],c+o,"style")),t.groupStyle={gleft:p((t.positionStyle.left-c)/u),gtop:p((t.positionStyle.top-a)/r),gwidth:p(t.positionStyle.width/u),gheight:p(t.positionStyle.height/r),grotate:t.groupStyle.grotate||0}}else{const t=new A(F());h==="horizontal"?(t.change(["position","top"],a+o,"style"),t.change(["position","left"],c,"style"),t.change(["position","width"],u,"style"),t.change(["position","height"],r-o,"style")):(t.change(["position","top"],a,"style"),t.change(["position","left"],c+o,"style"),t.change(["position","width"],u-o,"style"),t.change(["position","height"],r,"style")),t.parent=i.component,t.groupStyle={gleft:0,gtop:p((t.positionStyle.top-a)/r),gwidth:100,gheight:p(t.positionStyle.height/r),grotate:i.component.positionStyle.rotate||0},i.component.updateChild(l,t)}},{immediate:!0});const E=e=>e.groupStyle?.gheight?k(e.groupStyle,["gtop","gleft","gwidth","gheight","grotate"]):k(e.style,["top","left","width","height","rotate"]),I=d(()=>m.curComponent),g=C(0),N=e=>!(m.isEditMode&&!e),M=e=>{g.value=e},T=e=>g.value===e,b=d(()=>s.label.mode?s.label.mode:"horizontal"),V=C(null),n=d(()=>i.component.subComponents[g.value]),$=d(()=>({[s.label.mode==="horizontal"?"height":"width"]:`${s.style.height}px`,color:s.style.color,fontSize:`${s.style.fontSize}px`,weight:`${s.style.fontWeight}px`,family:`${s.style.fontWeight}px`})),R=e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},G=async e=>{e.preventDefault(),e.stopPropagation();const h=e.dataTransfer.getData("componentName");if(h){const o=new Q[h];o.dataIntegrationMode===Z.UNIVERSAL&&o.loadDemoData();const{top:a,left:c}=document.querySelector("#editor").getBoundingClientRect(),u=(e.pageY-a)/m.scale,r=(e.pageX-c)/m.scale,l=i.component.subComponents[g.value].style;o.change(["position","top"],u,"style"),o.change(["position","left"],r,"style"),o.groupStyle={gleft:p((o.positionStyle.left-l.left)/l.width),gtop:p((o.positionStyle.top-l.top)/l.height),gwidth:p(o.positionStyle.width/l.width),gheight:p(o.positionStyle.height/l.height),grotate:o.positionStyle.rotate||0},o.parent=i.component,i.component.subComponents[g.value].appendChild(o)}};return(e,h)=>(y(),f("div",{class:v(["dv-tabs",b.value])},[H("div",{class:v(["tabs-nav",b.value])},[(y(!0),f(W,null,j(B.value,(o,a)=>(y(),f("div",{key:a,class:v(["tabs-tab",{active:T(a),[b.value]:!0}]),style:S($.value),onClick:c=>M(a)},q(o),15,nt))),128))],2),z.value?(y(),f("div",{key:1,ref_key:"contentRef",ref:V,class:"tabs-content",onDrop:G,onDragover:R},[N(n.value.display||!1)?(y(),O(_(et),{key:0,id:"shape"+n.value.id,defaultStyle:n.value.style,style:S(E(n.value)),active:n.value.id===(I.value||{}).id,info:n.value,class:v({lock:n.value.locked}),isInner:!0,index:g.value},{default:U(()=>[w(D,{id:"component"+n.value.id,class:"component",style:S(_(X)(n.value)),component:n.value},null,8,["id","style","component"])]),_:1},8,["id","defaultStyle","style","active","info","class","index"])):Y("",!0)],544)):(y(),f("div",{key:0,ref_key:"content",ref:n,class:"tabs-content"},[w(D,{id:"component"+n.value.id,class:"component",style:S(_(K)(n.value)),component:n.value},null,8,["id","style","component"])],512))],2))}});const rt=tt(st,[["__scopeId","data-v-c72fa0d4"]]);export{rt as default};
