var _t=Object.defineProperty,gt=Object.defineProperties;var yt=Object.getOwnPropertyDescriptors;var Ve=Object.getOwnPropertySymbols;var bt=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable;var Xe=(e,t,n)=>t in e?_t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_e=(e,t)=>{for(var n in t||(t={}))bt.call(t,n)&&Xe(e,n,t[n]);if(Ve)for(var n of Ve(t))Ct.call(t,n)&&Xe(e,n,t[n]);return e},ye=(e,t)=>gt(e,yt(t));var G=(e,t,n)=>new Promise((s,f)=>{var r=o=>{try{u(n.next(o))}catch(l){f(l)}},p=o=>{try{u(n.throw(o))}catch(l){f(l)}},u=o=>o.done?s(o.value):Promise.resolve(o.value).then(r,p);u((n=n.apply(e,t)).next())});import{g as I,r as B,aE as Fe,a as T,bk as pe,b1 as z,b2 as ne,o as h,v as k,aI as P,aM as me,n as ae,u as i,aC as Q,aD as ge,j as y,aP as Y,aN as ee,i as w,b0 as Ee,br as xt,bm as nt,w as b,t as St,aO as xe,bd as Be,s as Ne,bs as at,be as ot,bt as Ce,bu as Se,bv as Me,bw as Pe,aV as Ie,aG as q,aK as wt,aJ as Dt,q as kt,aB as lt,aF as je,bx as Ft,by as Et,bz as Bt,d as Nt,bA as de,bB as we,aR as Le,bC as ze,bD as st,bE as Te,bF as It,bG as Lt,aL as $t,bH as Oe,bI as it,bJ as ut,b5 as Tt,b4 as He,b8 as $e,b6 as Rt}from"./.pnpm.ec28eaac.js";import{_ as V,u as J,l as Re,E as We,f as Ye,j as De,n as At,b as Ae,o as Ut,q as ct,m as se,t as Mt,v as Pt,w as jt,I as le,x as rt,h as zt,F as K,G as Ue,y as Vt,z as dt}from"./index.3aefe4c7.js";import{u as mt,a as pt,S as Xt}from"./Shape.8a1b0f3a.js";import{e as te,u as ke}from"./useEventBus.c0f38016.js";import{u as Ot,s as Ht,g as Wt}from"./pages.c7931457.js";import"./index.c61b07e6.js";const Yt={class:"value"},Gt=I({__name:"RulerLine",props:{scale:null,thick:null,palette:null,index:null,start:null,vertical:{type:Boolean},value:null,isShowReferLine:{type:Boolean}},emits:["onMouseDown","onRelease","onRemove"],setup(e,{emit:t}){const n=e,s=B(0),f=B(!0);Fe(()=>{s.value=n.value});const r=m=>{f.value=m>=0},p=T(()=>{const m=(s.value-n.start)*n.scale;r(m);const d=m+"px";return n.vertical?{top:d}:{left:d}}),u=T(()=>{var D,S;const m=`1px ${((D=n.palette)==null?void 0:D.lineBoardStyle)||"dashed"} ${(S=n.palette)==null?void 0:S.lineColor}`,d=n.vertical?{borderTop:m}:{borderLeft:m},C=n.isShowReferLine?n.vertical?"ns-resize":"ew-resize":"none";return _e({cursor:C},d)}),o=T(()=>n.vertical?{left:n.thick+"px"}:{top:n.thick+"px"}),l=m=>{m.stopPropagation();const d=n.vertical?m.clientY:m.clientX,C=s.value;t("onMouseDown");const D=L=>{const R=n.vertical?L.clientY:L.clientX,H=Math.round(C+(R-d)/n.scale);s.value=H},S=()=>{t("onRelease",s.value,n.index),document.removeEventListener("mousemove",D,!0),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",D,!0),document.addEventListener("mouseup",S)},c=()=>{t("onRemove",n.index)},a=()=>[{text:"\u5220\u9664",subText:"",handler:()=>c()}];return(m,d)=>{const C=pe("contextmenu");return z((h(),k("div",{class:"line",style:ae([i(p),i(u)]),onMousedown:l},[P("div",{class:"action",style:ae(i(o))},[P("span",Yt,me(s.value),1)],4)],36)),[[ne,f.value],[C,a,void 0,{stop:!0}]])}}});var Kt=V(Gt,[["__scopeId","data-v-34f8e82d"]]);const qt=e=>e<=.25?40:e<=.5?20:e<=1?10:e<=2?5:e<=4?2:1,Ge=.83,Jt=(e,t,n,s,f,r)=>{const{scale:p,width:u,height:o,ratio:l,palette:c}=f,{bgColor:a,fontColor:m,shadowColor:d,longfgColor:C,shortfgColor:D}=c;if(e.scale(l,l),e.clearRect(0,0,u,o),e.fillStyle=a,e.fillRect(0,0,u,o),s){const _=(n-t)*p,x=s*p;e.fillStyle=d,r?e.fillRect(_,0,x,o*3/8):e.fillRect(0,_,u*3/8,x)}const S=qt(p),L=S*p,R=S*10,H=R*p,M=Math.floor(t/S)*S,W=Math.floor(t/R)*R,X=(M-t)/S*L,v=(W-t)/R*H,g=t+Math.ceil((r?u:o)/p);e.beginPath(),e.fillStyle=m,e.strokeStyle=C;for(let _=W,x=0;_<g;_+=R,x++){const F=v+x*H+.5;r?e.moveTo(F,0):e.moveTo(0,F),e.save(),r?e.translate(F,o*.4):e.translate(u*.4,F),r||e.rotate(-Math.PI/2),e.scale(Ge/l,Ge/l),e.fillText(_.toString(),4*l,7*l),e.restore(),r?e.lineTo(F,o*9/16):e.lineTo(u*9/16,F)}e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle=D;for(let _=M,x=0;_<g;_+=S,x++){const F=X+x*L+.5;r?e.moveTo(F,0):e.moveTo(0,F),_%R!==0&&(r?e.lineTo(F,o*1/4):e.lineTo(u*1/4,F))}e.stroke(),e.closePath(),e.setTransform(1,0,0,1,0,0)},Zt=I({__name:"index",props:{showIndicator:{type:Boolean},valueNum:null,scale:null,ratio:null,palette:null,vertical:{type:Boolean},start:null,width:null,height:null,selectStart:null,selectLength:null},emits:["onAddLine","update:showIndicator","update:valueNum"],setup(e,{emit:t}){const n=e,s=Q({canvasContext:null});let f=1;const r=B(null);Fe(()=>{f=n.ratio||window.devicePixelRatio||1,p(),u(f),o(f)});const p=()=>{s.canvasContext=r.value&&r.value.getContext("2d")},u=c=>{if(r.value){r.value.width=n.width*c,r.value.height=n.height*c;const a=s.canvasContext;a&&(a.font=`${12*c}px -apple-system,
                "Helvetica Neue", ".SFNSText-Regular",
                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",
                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif`,a.lineWidth=1,a.textBaseline="middle")}},o=c=>{const a={scale:n.scale,width:n.width,height:n.height,palette:n.palette,ratio:c};s.canvasContext&&Jt(s.canvasContext,n.start,n.selectStart,n.selectLength,a,!n.vertical)};ge(()=>n.start,()=>o(f)),ge([()=>n.width,()=>n.height],()=>{u(f),o(f)});const l=(c,a)=>{const m=(D,S,L)=>Math.round(S+D/L),d=n.vertical?c.offsetY:c.offsetX,C=m(d,n.start,n.scale);switch(a){case"click":t("onAddLine",C);break;case"enter":t("update:valueNum",C),t("update:showIndicator",!0);break;default:t("update:valueNum",C);break}};return(c,a)=>(h(),k("canvas",{ref_key:"canvas",ref:r,class:"ruler",onClick:a[0]||(a[0]=m=>l(m,"click")),onMouseenter:a[1]||(a[1]=m=>l(m,"enter")),onMousemove:a[2]||(a[2]=m=>l(m,"move")),onMouseleave:a[3]||(a[3]=m=>c.$emit("update:showIndicator",!1))},null,544))}});const Qt={class:"lines"},en={class:"value"},tn=I({__name:"RulerWrapper",props:{scale:null,ratio:null,thick:null,selectStart:null,selectLength:null,isShowReferLine:{type:Boolean},palette:null,vertical:{type:Boolean,default:!0},width:{default:200},height:{default:200},start:{default:0}},setup(e,{expose:t}){const n=e,s=B(!1),f=B(0),r=B([]),p=T(()=>n.vertical?"v-container":"h-container");t({clearLines:()=>{r.value=[]}});const o=T(()=>{const d={width:`calc(100% - ${n.thick}px)`,height:`${n.thick+1}px`,left:`${n.start}px`},C={width:`${n.thick&&n.thick+1}px`,height:`calc(100% - ${n.thick}px)`,top:`${n.start}px`};return n.vertical?C:d}),l=T(()=>{var S,L;const d=(f.value-(n.start||0))*n.scale;let C="top",D="borderLeft";return C=n.vertical?"top":"left",D=n.vertical?"borderBottom":"borderLeft",{[C]:d+"px",[D]:`1px ${((S=n.palette)==null?void 0:S.lineBoardStyle)||"dashed"} ${(L=n.palette)==null?void 0:L.lineColor}`}}),c=d=>{r.value.push(d)},a=(d,C)=>{const D=d-(n.start||0),S=(n.vertical?n.height||200:n.width||200)/n.scale;D<0||D>S?m(C):r.value[C]=d},m=d=>{r.value.splice(d,1)};return(d,C)=>(h(),k("div",{class:Ee(i(p)),style:ae(i(o))},[y(Zt,{vertical:e.vertical,scale:e.scale,width:e.width,height:e.height,start:e.start,ratio:e.ratio,"select-start":e.selectStart,"select-length":e.selectLength,palette:e.palette,valueNum:f.value,"onUpdate:valueNum":C[0]||(C[0]=D=>f.value=D),showIndicator:s.value,"onUpdate:showIndicator":C[1]||(C[1]=D=>s.value=D),onOnAddLine:c},null,8,["vertical","scale","width","height","start","ratio","select-start","select-length","palette","valueNum","showIndicator"]),z(P("div",Qt,[(h(!0),k(Y,null,ee(r.value,(D,S)=>(h(),w(Kt,{key:D+S,index:S,value:D>>0,scale:e.scale,start:e.start,thick:e.thick,palette:e.palette,vertical:e.vertical,"is-show-refer-line":e.isShowReferLine,onOnRemove:m,onOnRelease:a},null,8,["index","value","scale","start","thick","palette","vertical","is-show-refer-line"]))),128))],512),[[ne,e.isShowReferLine]]),z(P("div",{class:"indicator",style:ae(i(l))},[P("div",en,me(f.value),1)],4),[[ne,s.value]])],6))}});var Ke=V(tn,[["__scopeId","data-v-5a545815"]]);const nn={id:"mb-ruler",class:"style-ruler mb-ruler"},an=I({__name:"Index",props:{scale:{default:1},ratio:{default:0},thick:{default:16},palette:null,startX:null,startY:null,width:{default:200},height:{default:200},shadow:null},setup(e){const t=e,n=B(null),s=B(null),f=B(!0),r=()=>{var o,l;(o=n.value)==null||o.clearLines(),(l=s.value)==null||l.clearLines(),f.value=!0},p=()=>[{text:"\u663E\u793A\u8F85\u52A9\u7EBF",subText:"",disable:f.value,handler:()=>f.value=!0},{text:"\u9690\u85CF\u8F85\u52A9\u7EBF",subText:"",disable:!f.value,handler:()=>f.value=!1},{text:"\u6E05\u7A7A\u8F85\u52A9\u7EBF",subText:"",disable:!f.value,handler:r}],u=T(()=>{function o(l,c){return Object.keys(l).forEach(a=>{a&&l.hasOwnProperty(a)&&(typeof c.key=="object"?l[a]=o(l[a],c[a]):c.hasOwnProperty(a)&&(l[a]=c[a]))}),l}return o({bgColor:"rgba(225,225,225, 0)",longfgColor:"#BABBBC",shortfgColor:"#C8CDD0",fontColor:"#7D8694",shadowColor:"#E8E8E8",lineColor:"#37d4cf",lineBoardStyle:"dashed",borderColor:"#DADADC",cornerActiveColor:"rgb(235, 86, 72, 0.6)",menu:{bgColor:"#fff",dividerColor:"#DBDBDB",listItem:{textColor:"#415058",hoverTextColor:"#298DF8",disabledTextColor:"rgba(65, 80, 88, 0.4)",bgColor:"#fff",hoverBgColor:"#F2F2F2"}}},t.palette||{})});return(o,l)=>{var a,m,d,C;const c=pe("contextmenu");return z((h(),k("div",nn,[y(Ke,{vertical:!1,ref_key:"HRulerWrapperref",ref:s,width:e.width,height:16,"is-show-refer-line":f.value,thick:e.thick,ratio:e.ratio,start:e.startX,"select-start":((a=e.shadow)==null?void 0:a.x)||0,"select-length":((m=e.shadow)==null?void 0:m.width)||0,scale:e.scale,palette:i(u)},null,8,["width","is-show-refer-line","thick","ratio","start","select-start","select-length","scale","palette"]),y(Ke,{vertical:!0,ref_key:"VRulerWrapperref",ref:n,width:16,height:e.height,"is-show-refer-line":f.value,thick:e.thick,ratio:e.ratio,start:e.startY,"select-start":((d=e.shadow)==null?void 0:d.y)||0,"select-length":((C=e.shadow)==null?void 0:C.height)||0,scale:e.scale,palette:i(u)},null,8,["height","is-show-refer-line","thick","ratio","start","select-start","select-length","scale","palette"])])),[[c,p,void 0,{stop:!0}]])}}});const on=I({__name:"Ruler",props:{width:null,height:null,isShowReferLine:{type:Boolean}},setup(e){const f={h:[],v:[]},r=20;return(p,u)=>(h(),w(i(an),{thick:r,scale:1,width:e.width,height:e.height,startX:0,startY:0,lines:f,isShowReferLine:e.isShowReferLine},null,8,["width","height","isShowReferLine"]))}});var ln=V(on,[["__scopeId","data-v-4d6ebb97"]]);const sn=I({__name:"Area",props:{start:null,width:null,height:null},setup(e){const t=mt(),n=()=>{t.compose(),te.emit("hideArea")},s=()=>{t.flushLeft(),te.emit("hideArea")},f=()=>{t.flushRight(),te.emit("hideArea")},r=()=>{t.flushTop(),te.emit("hideArea")},p=()=>{t.flushBottom(),te.emit("hideArea")},u=()=>{t.flushRow(),te.emit("hideArea")},o=()=>{t.flushColumn(),te.emit("hideArea")},l=()=>{t.batchDeleteComponent(t.components),te.emit("hideArea")},c=()=>[{text:"\u7EC4\u5408",subText:"",disable:!t.canCompose,handler:n},{divider:!0},{text:"\u5220\u9664",subText:"Ctrl + Delete",disable:t.components.length<=0,handler:l},{divider:!0},{text:"\u5DE6\u5BF9\u9F50",subText:"",handler:s},{text:"\u53F3\u5BF9\u9F50",subText:"",handler:f},{text:"\u9876\u5BF9\u9F50",subText:"",handler:r},{text:"\u5E95\u5BF9\u9F50",subText:"",handler:p},{divider:!0},{text:"\u6C34\u5E73\u5BF9\u9F50",subText:"",handler:u},{text:"\u5782\u76F4\u5BF9\u9F50",subText:"",handler:o}];return(a,m)=>{const d=pe("contextmenu");return z((h(),k("div",{style:ae({left:e.start.x+"px",top:e.start.y+"px",width:e.width+"px",height:e.height+"px"}),class:"area"},null,4)),[[d,c,void 0,{stop:!0}]])}}});var qe=V(sn,[["__scopeId","data-v-32723092"]]);const un={},cn={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},rn=xt('<defs data-v-69b4bead><pattern id="smallGrid" width="7.236328125" height="7.236328125" patternUnits="userSpaceOnUse" data-v-69b4bead><path d="M 7.236328125 0 L 0 0 0 7.236328125" fill="none" stroke="rgba(207, 207, 207, 0.3)" stroke-width="1" data-v-69b4bead></path></pattern><pattern id="grid" width="36.181640625" height="36.181640625" patternUnits="userSpaceOnUse" data-v-69b4bead><rect width="36.181640625" height="36.181640625" fill="url(#smallGrid)" data-v-69b4bead></rect><path d="M 36.181640625 0 L 0 0 0 36.181640625" fill="none" stroke="rgba(186, 186, 186, 0.5)" stroke-width="1" data-v-69b4bead></path></pattern></defs><rect width="100%" height="100%" fill="url(#grid)" data-v-69b4bead></rect>',2),dn=[rn];function mn(e,t){return h(),k("svg",cn,dn)}var pn=V(un,[["render",mn],["__scopeId","data-v-69b4bead"]]);const fn={class:"mark-line"},hn=I({__name:"MarkLine",setup(e){const t=J(),n=B([]),s=Q(["xt","xc","xb","yl","yc","yr"]),f=B(3),r=Q({xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}),p=m=>{n.value.push(m)},u=()=>{Object.keys(r).forEach(m=>{r[m]=!1})};ke("move",m=>{o(m.isDownward,m.isRightward)}),ke("unmove",()=>{u()});const o=(m,d)=>{const C=t.componentData;if(t.curComponent){const{top:D,left:S,right:L,bottom:R}=Re(t.curComponent.positionStyle),H=(L-S)/2,M=(R-D)/2;u(),C.forEach(W=>{if(W==t.curComponent)return;const X=Re(W.positionStyle),{top:v,left:g,bottom:_,right:x}=X,F=(x-g)/2,A=(_-v)/2,fe={top:[{isNearly:l(D,v),lineNode:n.value[0],line:"xt",dragShift:v,lineShift:v},{isNearly:l(R,v),lineNode:n.value[0],line:"xt",dragShift:v-(R-D||0),lineShift:v},{isNearly:l((D||0)+M,v+A),lineNode:n.value[1],line:"xc",dragShift:v+A-M,lineShift:v+A},{isNearly:l(D,_),lineNode:n.value[2],line:"xb",dragShift:_,lineShift:_},{isNearly:l(R,_),lineNode:n.value[2],line:"xb",dragShift:_-(R-D||0),lineShift:_}],left:[{isNearly:l(S,g),lineNode:n.value[3],line:"yl",dragShift:g,lineShift:g},{isNearly:l(L,g),lineNode:n.value[3],line:"yl",dragShift:g-(L-S||0),lineShift:g},{isNearly:l((S||0)+H,g+F),lineNode:n.value[4],line:"yc",dragShift:g+F-H,lineShift:g+F},{isNearly:l(S,x),lineNode:n.value[5],line:"yr",dragShift:x,lineShift:x},{isNearly:l(L,x),lineNode:n.value[5],line:"yr",dragShift:x-(L-S||0),lineShift:x}]},he=[],{rotate:N}=t.curComponent.style;Object.keys(fe).forEach(U=>{fe[U].forEach(E=>{if(!E.isNearly)return;const $=N!=0?c(U,E,{width:L-S,height:R-D}):E.dragShift;t.setCurComponentStyle(U,$),E.lineNode.style[U]=`${E.lineShift}px`,he.push(E.line)})}),he.length&&a(he,m,d)})}},l=(m,d)=>Math.abs(m-d)<=f.value,c=(m,d,C)=>{const{width:D,height:S}=t.curComponent.style;return m=="top"?Math.round(d.dragShift-(S-C.height)/2):Math.round(d.dragShift-(D-C.width)/2)},a=(m,d,C)=>{C?m.includes("yr")?r.yr=!0:m.includes("yc")?r.yc=!0:m.includes("yl")&&(r.yl=!0):m.includes("yl")?r.yl=!0:m.includes("yc")?r.yc=!0:m.includes("yr")&&(r.yr=!0),d?m.includes("xb")?r.xb=!0:m.includes("xc")?r.xc=!0:m.includes("xt")&&(r.xt=!0):m.includes("xt")?r.xt=!0:m.includes("xc")?r.xc=!0:m.includes("xb")&&(r.xb=!0)};return(m,d)=>(h(),k("div",fn,[(h(!0),k(Y,null,ee(s,C=>z((h(),k("div",{key:C,class:Ee(["line",C.includes("x")?"xline":"yline"]),ref_for:!0,ref:p},null,2)),[[ne,r[C]||!1]])),128))]))}});var vn=V(hn,[["__scopeId","data-v-7f01a757"]]);const _n=["onMousedown"],gn=I({__name:"Index",setup(e){const t=J(),n=mt(),s=pt(),f=N=>Ye(N,["top","left","width","height","rotate"]),r=T(()=>n.style.width>0&&!v.value&&!t.isClickComponent),p=T(()=>({x:n.style.left,y:n.style.top})),u=T(()=>n.style.width),o=T(()=>n.style.height),l=()=>{v.value=!1,W.value=0,X.value=0,n.setAreaData({left:0,top:0,width:0,height:0},[])},c=()=>{t.clearCanvas()},a=(N,U)=>{const E=document.querySelector("#editor").getBoundingClientRect(),$=U.pageY-E.top,Z=U.pageX-E.left;s.paste(!0,Z,$)},m=()=>[{text:"\u7C98\u8D34",subText:"Ctrl + V",handler:a},{text:"\u6E05\u7A7A\u753B\u5E03",subText:"",handler:c}];ke("hideArea",l),Fe(()=>{console.log("\u8FDB\u5165\u7F16\u8F91\u6A21\u5F0F"),t.setEditMode(We.EDIT),document.addEventListener("paste",L)}),nt(()=>{console.log("\u8FDB\u5165\u9884\u89C8\u6A21\u5F0F"),t.setEditMode(We.PREVIEW),document.removeEventListener("paste",L),t.clearCanvas()});const d=T(()=>t.componentData),C=T(()=>t.canvasStyleData),D=T(()=>t.curComponent),S=T(()=>{const N=ye(_e({},C.value),{backgroundImage:C.value.image,backgroundSize:"cover"});return Ye(N,["width","height","backgroundImage","backgroundSize"])}),L=N=>{if(N.clipboardData){const U=N.clipboardData.getData("text");try{const E=JSON.parse(U);"component"in E&&(E.change("top",E.positionStyle.top+10),E.change("left",E.positionStyle.left+10),De(JSON.stringify(E)),N.preventDefault(),t.appendComponent(E))}catch(E){console.log(E)}}},R=B(0),H=B(0),M=Q({x:0,y:0}),W=B(0),X=B(0),v=B(!0),g=B(null),_=B(!0),x=N=>{var ce;t.setClickComponentStatus(!1),N.preventDefault(),N.stopPropagation(),l();const U=(ce=g.value)==null?void 0:ce.getBoundingClientRect();R.value=U.x,H.value=U.y;const E=N.clientX,$=N.clientY;M.x=E-R.value,M.y=$-H.value,v.value=!0;const Z=j=>{j.preventDefault(),j.stopPropagation(),W.value=Math.abs(j.clientX-E),X.value=Math.abs(j.clientY-$),j.clientX<E&&(M.x=j.clientX-R.value),j.clientY<$&&(M.y=j.clientY-H.value)},ue=j=>{if(document.removeEventListener("mousemove",Z),document.removeEventListener("mouseup",ue),j.clientX==E&&j.clientY==$){l();return}const ve={left:M.x,top:M.y,right:W.value+M.x,bottom:M.y+X.value},re=F(ve);if(re){const O=re.rect;n.setAreaData({top:O.top,left:O.left,width:O.right-O.left,height:O.bottom-O.top,rotate:0},re.components),M.x=O.left,M.y=O.top,W.value=O.right-O.left,X.value=O.bottom-O.top}else l()};document.addEventListener("mousemove",Z),document.addEventListener("mouseup",ue)},F=N=>{const U=[],E=new Set,$=new Set,Z=new Set,ue=new Set;if(t.componentData.forEach(ce=>{const{width:j,height:ve,left:re,top:O,rotate:vt}=ce.style,oe=Re({width:j,height:ve,left:re,top:O,rotate:vt});oe.left>=N.left&&oe.right<=N.right&&oe.top>=N.top&&oe.bottom<=N.bottom&&(U.push(ce),E.add(oe.left),$.add(oe.top),Z.add(oe.right),ue.add(oe.bottom))}),U.length>0){const ce=Math.min(...E),j=Math.max(...Z),ve=Math.min(...$),re=Math.max(...ue);return{components:U,rect:{left:ce,right:j,top:ve,bottom:re}}}},A=N=>G(this,null,function*(){N.preventDefault(),N.stopPropagation();const U=N.dataTransfer.getData("componentName");if(U){const E=new Ae[U],$=document.querySelector("#editor").getBoundingClientRect(),Z=N.pageY-$.top,ue=N.pageX-$.left;E.change("top",Z),E.change("left",ue),t.appendComponent(E)}}),fe=N=>{N.preventDefault(),N.dataTransfer.dropEffect="copy"},he=()=>{t.isClickComponent||t.setCurComponent(void 0)};return(N,U)=>{const E=pe("contextmenu");return z((h(),k("div",{class:"editor edit",ref_key:"editor",ref:g,id:"editor",style:ae(i(S)),onMousedown:Be(x,["left"]),onDrop:A,onDragover:fe,onMouseup:he},[y(pn),y(ln,{width:i(C).width,height:i(C).height,isShowReferLine:_.value},null,8,["width","height","isShowReferLine"]),(h(!0),k(Y,null,ee(i(d),($,Z)=>(h(),k(Y,{key:$.id},[i(t).isEditMode&&$.display?(h(),w(Xt,{key:0,id:"shape"+$.id,defaultStyle:$.style,style:ae(f($.style)),active:$.id===(i(D)||{}).id,info:$,class:Ee({lock:$.locked}),index:Z},{default:b(()=>[(h(),w(St($.component),{class:"component",style:ae(i(At)($)),component:$,id:"component"+$.id},null,8,["style","component","id"]))]),_:2},1032,["id","defaultStyle","style","active","info","class","index"])):xe("",!0)],64))),128)),y(vn),v.value?(h(),w(qe,{key:0,start:M,width:W.value,height:X.value},null,8,["start","width","height"])):i(r)?(h(),w(qe,{key:1,start:i(p),width:i(u),height:i(o)},null,8,["start","width","height"])):xe("",!0)],44,_n)),[[E,m,void 0,{stop:!0}]])}}});var yn=V(gn,[["__scopeId","data-v-47e5be5c"]]);const ft=Ut(),ie=J(),be=ct(),bn=()=>G(void 0,null,function*(){const e=yield ft.lastRecord();e?ie.setLayoutData({canvasData:e.canvasData,canvasStyle:e.canvasStyle}):se.warning("\u6CA1\u6709\u5FEB\u7167\u4E86")}),Cn=()=>G(void 0,null,function*(){const e=yield ft.nextRecord();e?ie.setLayoutData({canvasData:e.canvasData,canvasStyle:e.canvasStyle}):se.warning("\u6CA1\u6709\u5FEB\u7167\u4E86")}),xn=()=>{ie.toggleShowEm()},Sn=()=>{const e=`${ie.name}`||"layout";Mt(`${e}.json`,JSON.stringify({canvasData:ie.layoutData,canvasStyle:ie.canvasStyleData}))},wn=()=>{Pt(Dn,".json")},Dn=e=>{if(e.target&&e.target.result){const t=JSON.parse(e.target.result);t&&(ie.setComponentData(t.canvasData),ie.setCanvasStyle(t.canvasStyle))}},kn=()=>{be.setNavTheme(be.darkTheme?"dark":"light"),be.setDarkTheme(!be.darkTheme)},Fn=I({__name:"ThemeIcon",setup(e){const t=ct(),n=T(()=>t.darkTheme?"sun-one":"moon");return(s,f)=>{const r=Ne("icon-park");return h(),w(r,{name:i(n)},null,8,["name"])}}}),En="2946854",Bn="\u65B9\u5411",Nn="iconfont",In="icon-",Ln="",$n=[{icon_id:"11291350",name:"\u7EC4",font_class:"zu",unicode:"e854",unicode_decimal:59476},{icon_id:"1817751",name:"\u67F1\u5F62\u56FE",font_class:"zhuxingtu",unicode:"e626",unicode_decimal:58918},{icon_id:"3868284",name:"\u4EEA\u8868\u76D8",font_class:"yibiaopan",unicode:"eb67",unicode_decimal:60263},{icon_id:"4354243",name:"\u56FE\u8868-\u997C\u56FE",font_class:"tubiao-bingtu",unicode:"eb95",unicode_decimal:60309},{icon_id:"4354246",name:"\u56FE\u8868-\u5361\u7247",font_class:"tubiao-qiapian",unicode:"eb96",unicode_decimal:60310},{icon_id:"4354248",name:"\u56FE\u8868-\u6298\u7EBF\u56FE",font_class:"tubiao-zhexiantu",unicode:"eb97",unicode_decimal:60311},{icon_id:"4906240",name:"\u6309\u94AE\u7EC4",font_class:"anniuzu",unicode:"e782",unicode_decimal:59266},{icon_id:"5383645",name:"\u5BFC\u822A",font_class:"daohang",unicode:"e77d",unicode_decimal:59261},{icon_id:"5961366",name:"\u5217\u8868",font_class:"liebiao",unicode:"ec6b",unicode_decimal:60523},{icon_id:"5971297",name:"\u91C7\u7164\u673A",font_class:"caimeiji",unicode:"e603",unicode_decimal:58883},{icon_id:"7040619",name:"\u5176\u4ED6",font_class:"qita",unicode:"e63b",unicode_decimal:58939},{icon_id:"7556180",name:"\u5B9A\u5236",font_class:"dingzhi",unicode:"e609",unicode_decimal:58889},{icon_id:"9752796",name:"\u57FA\u7840",font_class:"jichu",unicode:"e60f",unicode_decimal:58895},{icon_id:"9921108",name:"chart",font_class:"chartt",unicode:"e60a",unicode_decimal:58890},{icon_id:"14475731",name:"\u88C5\u9970\u88C5\u4FEE",font_class:"zhuangshizhuangxiu",unicode:"e6a6",unicode_decimal:59046},{icon_id:"16562592",name:"\u6E29\u5EA6\u8BA1",font_class:"wenduji",unicode:"e6de",unicode_decimal:59102},{icon_id:"22712019",name:"\u6761\u5F62\u8FDB\u5EA6\u56FE",font_class:"tiaoxingjindutu",unicode:"e66b",unicode_decimal:58987},{icon_id:"22761375",name:"\u8FB9\u6846",font_class:"biankuang",unicode:"e6b7",unicode_decimal:59063},{icon_id:"22885432",name:"\u8FDB\u5EA6\u56FE",font_class:"jindutu",unicode:"f24b",unicode_decimal:62027},{icon_id:"124495",name:"\u8B66\u544A",font_class:"jinggao1",unicode:"e601",unicode_decimal:58881},{icon_id:"1846445",name:"\u9884\u8B66\u706F",font_class:"yujingdeng",unicode:"e67f",unicode_decimal:59007},{icon_id:"2239579",name:"\u81EA\u52A8\u7CFB\u7EDF\u8B66\u544A\u706F",font_class:"zidongxitongjinggaodeng1",unicode:"e605",unicode_decimal:58885},{icon_id:"4988542",name:"\u9884\u8B66",font_class:"yujing1",unicode:"e644",unicode_decimal:58948},{icon_id:"9974390",name:"\u9884\u8B66",font_class:"yujing3",unicode:"e6fe",unicode_decimal:59134},{icon_id:"10817515",name:"\u8B66\u544A\u706F",font_class:"jinggaodeng",unicode:"e64b",unicode_decimal:58955},{icon_id:"14151833",name:"\u62A5\u8B66",font_class:"baojing1",unicode:"e630",unicode_decimal:58928},{icon_id:"16965399",name:"\u8B66\u544A\u706F",font_class:"hong",unicode:"e60d",unicode_decimal:58893},{icon_id:"20379044",name:"\u9884\u8B66\u706F",font_class:"yujingdeng1",unicode:"e623",unicode_decimal:58915},{icon_id:"23819336",name:"\u62A5\u8B66 \u8B66\u544A \u9884\u8B66 \u8B66\u544A\u706F",font_class:"a-baojingjinggaoyujingjinggaodeng",unicode:"e628",unicode_decimal:58920},{icon_id:"24312218",name:"light",font_class:"light",unicode:"e63a",unicode_decimal:58938},{icon_id:"24614518",name:"\u544A\u8B66\u706F",font_class:"gaojingdeng9",unicode:"e664",unicode_decimal:58980},{icon_id:"25567211",name:"\u8B66\u544A\u706F",font_class:"jinggaodeng1",unicode:"e613",unicode_decimal:58899},{icon_id:"12041083",name:"\u9884\u8B66",font_class:"yujing5",unicode:"e671",unicode_decimal:58993},{icon_id:"577357",name:"\u5220\u9664",font_class:"shanchu",unicode:"e74b",unicode_decimal:59211},{icon_id:"1986988",name:"\u5220\u9664",font_class:"shanchu1",unicode:"e625",unicode_decimal:58917},{icon_id:"12795401",name:"\u9996\u9875",font_class:"shouye",unicode:"e62d",unicode_decimal:58925},{icon_id:"201556",name:"\u67E5\u770B",font_class:"chakan",unicode:"e600",unicode_decimal:58880},{icon_id:"201638",name:"\u7F16\u8F91",font_class:"bianji",unicode:"e602",unicode_decimal:58882},{icon_id:"11729723",name:"\u590D\u5236",font_class:"fuzhi",unicode:"e608",unicode_decimal:58888},{icon_id:"7269302",name:"\u9996\u9875-\u9ED8\u8BA4",font_class:"shouye-moren",unicode:"e619",unicode_decimal:58905},{icon_id:"658044",name:"\u89E3\u9501",font_class:"jiesuo",unicode:"e669",unicode_decimal:58985},{icon_id:"10097949",name:"\u65CB\u8F6C",font_class:"xuanzhuan",unicode:"e680",unicode_decimal:59008},{icon_id:"374774",name:"\u5F00\u5173",font_class:"kaiguan",unicode:"e61f",unicode_decimal:58911},{icon_id:"122162",name:"\u65F6\u949F",font_class:"clock",unicode:"e63e",unicode_decimal:58942},{icon_id:"1242185",name:"\u53CD\u9988\u4FE1\u606F",font_class:"fankuixinxi",unicode:"e660",unicode_decimal:58976},{icon_id:"2468505",name:"37\u7C7B\u5EFA\u7B51\u4FEE\u7406x16",font_class:"leijianzhuxiulix",unicode:"e695",unicode_decimal:59029},{icon_id:"11747267",name:"\u65F6\u95F4",font_class:"weibiaoti-",unicode:"e618",unicode_decimal:58904},{icon_id:"14794143",name:"sds_\u7B2C37\u7C7B \u5EFA\u7B51\u4FEE\u7406",font_class:"sds_di37leijianzhuxiuli",unicode:"e61e",unicode_decimal:58910},{icon_id:"17762035",name:"\u8054\u52A8\u63A7\u5236",font_class:"liandongkongzhi",unicode:"e624",unicode_decimal:58916},{icon_id:"18165278",name:"\u9501,\u5BC6\u7801,\u5F00\u9501,\u89E3\u9501",font_class:"unlock-full",unicode:"e882",unicode_decimal:59522},{icon_id:"288554",name:"ascend",font_class:"ascend",unicode:"e6b4",unicode_decimal:59060},{icon_id:"288556",name:"falling",font_class:"falling",unicode:"e6b6",unicode_decimal:59062},{icon_id:"815867",name:"\u6309\u94AE-\u5173",font_class:"buttonoff",unicode:"e614",unicode_decimal:58900},{icon_id:"815872",name:"\u6309\u94AE-\u5F00",font_class:"buttonon",unicode:"e615",unicode_decimal:58901},{icon_id:"2674878",name:"\u7BAD\u5934 \u4E0A",font_class:"jiantoushang",unicode:"e62c",unicode_decimal:58924},{icon_id:"2674928",name:"\u7BAD\u5934 \u53F3",font_class:"jiantouyou",unicode:"e632",unicode_decimal:58930},{icon_id:"2674929",name:"\u7BAD\u5934 \u4E0B",font_class:"jiantouxia",unicode:"e633",unicode_decimal:58931},{icon_id:"7594038",name:"24gl-next",font_class:"24gl-next",unicode:"ea6b",unicode_decimal:60011},{icon_id:"7594046",name:"24gl-pauseCircle",font_class:"24gl-pauseCircle",unicode:"ea6f",unicode_decimal:60015},{icon_id:"7594068",name:"24gl-previous",font_class:"24gl-previous",unicode:"ea73",unicode_decimal:60019},{icon_id:"7594086",name:"24gl-stopCircle",font_class:"24gl-stopCircle",unicode:"ea79",unicode_decimal:60025},{icon_id:"10268256",name:"\u6309\u94AE_\u5F00\u542F",font_class:"anniu_kaiqi",unicode:"e659",unicode_decimal:58969},{icon_id:"10268257",name:"\u6309\u94AE_\u5173\u95ED",font_class:"anniu_guanbi",unicode:"e65b",unicode_decimal:58971},{icon_id:"25807963",name:"\u7BAD\u5934 \u4E0A",font_class:"jiantoushangzuo-copy",unicode:"ec63",unicode_decimal:60515},{icon_id:"25808146",name:"\u5411\u53F32",font_class:"xiangzuo2-copy",unicode:"ec64",unicode_decimal:60516},{icon_id:"166602",name:"\u5173\u95ED\u64AD\u653E",font_class:"guanbibofang",unicode:"e61d",unicode_decimal:58909},{icon_id:"577396",name:"\u5411\u4E0A3",font_class:"xiangshang3",unicode:"e76f",unicode_decimal:59247},{icon_id:"577401",name:"\u5411\u4E0B5",font_class:"xiangxia5",unicode:"e774",unicode_decimal:59252},{icon_id:"577403",name:"\u5411\u53F32",font_class:"xiangyou2",unicode:"e776",unicode_decimal:59254},{icon_id:"1159910",name:"\u53F3\u64AD\u653E",font_class:"youbofang",unicode:"e62e",unicode_decimal:58926},{icon_id:"1159911",name:"\u5DE6\u64AD\u653E",font_class:"zuobofang",unicode:"e62f",unicode_decimal:58927},{icon_id:"1185945",name:"\u64AD\u653E",font_class:"bofang2",unicode:"e606",unicode_decimal:58886},{icon_id:"1488892",name:"\u64AD\u653E",font_class:"bofang5",unicode:"e607",unicode_decimal:58887},{icon_id:"1727559",name:"323\u5411\u5DE6\u4EA4\u6362",font_class:"xiangzuojiaohuan",unicode:"e8f8",unicode_decimal:59640},{icon_id:"1727561",name:"324\u5411\u53F3\u4EA4\u6362",font_class:"xiangyoujiaohuan",unicode:"e8f9",unicode_decimal:59641},{icon_id:"2076218",name:"\u64AD\u653E2",font_class:"bofang6",unicode:"e87c",unicode_decimal:59516},{icon_id:"7594051",name:"24gl-playCircle",font_class:"24gl-playCircle",unicode:"ea6e",unicode_decimal:60014},{icon_id:"11121478",name:"\u5411\u4E0A",font_class:"xiangshang7",unicode:"e63c",unicode_decimal:58940},{icon_id:"16388177",name:"\u64AD\u653E",font_class:"bofang26",unicode:"e60e",unicode_decimal:58894},{icon_id:"18176557",name:"\u64AD\u653E",font_class:"play1",unicode:"ea8d",unicode_decimal:60045},{icon_id:"24267227",name:"\u64AD\u653E-\u5FEB\u9000",font_class:"bofang-kuaitui",unicode:"e68a",unicode_decimal:59018},{icon_id:"24267260",name:"\u64AD\u653E09",font_class:"bofang09",unicode:"e690",unicode_decimal:59024},{icon_id:"24268374",name:"\u64AD\u653E-\u5FEB\u8FDB",font_class:"bofang-kuaijin",unicode:"e6d8",unicode_decimal:59096},{icon_id:"25807740",name:"\u5411\u4E0A",font_class:"xiangxia7",unicode:"ec62",unicode_decimal:60514}];var Tn={id:En,name:Bn,font_family:Nn,css_prefix_text:In,description:Ln,glyphs:$n};const Rn={class:"icon-list"},An=["onClick"],Un=I({__name:"IconFont",setup(e){const t=T(()=>Tn.glyphs.map(r=>`icon-${r.font_class}`)),n=B(!0),s=()=>{n.value=!1},f=r=>{De(r),se.success(`\u590D\u5236\u56FE\u6807: ${r}`)};return(r,p)=>(h(),w(i(at),{class:"show-card",show:n.value,preset:"card",onMaskClick:s,title:`\u56FE\u6807\u6570\u91CF${i(t).length}`,onClose:s,"onUpdate:show":p[0]||(p[0]=()=>n.value=!1),style:{width:"50%",maxWidth:"800px"}},{default:b(()=>[P("ul",Rn,[(h(!0),k(Y,null,ee(i(t),u=>(h(),k("li",{key:u,class:"dib",onClick:o=>f(u)},[P("span",{class:Ee(`icon iconfont ${u}`)},null,2)],8,An))),128))])]),_:1},8,["show","title"]))}});var Mn=V(Un,[["__scopeId","data-v-1c99c155"]]);const Pn=()=>{const e=y(Mn,{},null),t=document.createElement("div"),n=document.querySelector("#app");ot(e,t),n==null||n.appendChild(t)},jn={class:"dialog-footer"},zn=Ie("\u53D6\u6D88"),Vn=Ie("\u65B0\u589E"),Xn=Ie("\u66F4\u65B0"),On=I({__name:"SavePage",props:{index:null},setup(e){const t=e,n=J(),s=B(!0),f=Q({name:"",thumbnail:""}),r=Q({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0",trigger:"blur"}]}),p=u=>G(this,null,function*(){const{name:o,thumbnail:l}=f;if(!o){se.error("\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0");return}const c={name:o,thumbnail:l,canvasData:n.layoutData,canvasStyle:n.canvasStyleData};if(u==="update")try{yield Ot(t.index,c),se.success("\u4FEE\u6539\u6210\u529F")}catch(a){se.error("\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u5BFC\u51FA\u5230\u672C\u5730\uFF0C\u5E76\u91CD\u65B0\u8FDB\u5165\u6B64\u9875\u9762")}finally{s.value=!1}else try{const a=yield Ht(c);se.success("\u4FDD\u5B58\u6210\u529F"),jt.push({name:"Editor",params:{index:a.id}})}catch(a){se.error(`\u4FDD\u5B58\u5931\u8D25\uFF0C\u5931\u8D25\u4FE1\u606F:${(a==null?void 0:a.message)||a}`)}finally{s.value=!1}});return(u,o)=>(h(),w(i(at),{show:s.value,"mask-closable":!1,preset:"card",center:"",title:"\u4FDD\u5B58\u5F53\u524D\u5E03\u5C40",style:{width:"30%",minWidth:"600px"},"onUpdate:show":o[5]||(o[5]=()=>s.value=!1),size:"medium"},{footer:b(()=>[P("span",jn,[y(i(Ce),{onClick:o[2]||(o[2]=l=>s.value=!1)},{default:b(()=>[zn]),_:1}),e.index?(h(),w(i(Ce),{key:1,type:"primary",onClick:o[4]||(o[4]=l=>p("update"))},{default:b(()=>[Xn]),_:1})):(h(),w(i(Ce),{key:0,type:"primary",onClick:o[3]||(o[3]=l=>p("new"))},{default:b(()=>[Vn]),_:1}))])]),default:b(()=>[y(i(Pe),{model:f,rules:r,onSubmit:o[1]||(o[1]=Be(()=>{},["prevent"]))},{default:b(()=>[y(i(Se),{label:"\u9875\u9762\u540D\u79F0",prop:"name"},{default:b(()=>[y(i(Me),{modelValue:f.name,"onUpdate:modelValue":o[0]||(o[0]=l=>f.name=l),placeholder:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show"]))}}),Hn=e=>{const t=y(On,{index:e},null),n=document.createElement("div");ot(t,n)},Je=I({__name:"ToolBarItem",props:{label:null,action:null,disable:{type:Function,default:()=>!1},icon:null,divider:{type:[Boolean,null]},children:null,otherShow:null},setup(e){const t=e,n=T(()=>typeof t.icon=="string"?q(le,{name:t.icon,size:"24"}):t.icon());return(s,f)=>(h(),k(Y,null,[y(i(wt),null,{trigger:b(()=>[y(i(Ce),{quaternary:"",size:"small",onClick:e.action,title:e.label},{default:b(()=>[y(i(n))]),_:1},8,["onClick","title"])]),default:b(()=>[P("span",null,me(e.label),1)]),_:1}),e.divider?(h(),w(i(Dt),{key:0,vertical:""})):xe("",!0)],64))}});const Wn={class:"tool-bar"},Yn={class:"tool-bar-item"},Gn={class:"tool-bar-item"},Kn=I({__name:"Toolbar",setup(e){const t=kt(),n=lt(),s=[{label:"\u9996\u9875",action:p=>{t.push({name:"Pages"})},icon:"home",divider:!0,location:"left"},{label:"\u4FDD\u5B58",action:()=>Hn(n.params.index),icon:"save-one",location:"left"},{label:"\u9884\u89C8",action:p=>{const{href:u}=t.resolve("/preview");window.open(u,"_blank")},icon:"computer",location:"left"},{label:"\u64A4\u9500",action:bn,icon:"back",location:"left"},{label:"\u6062\u590D",action:Cn,icon:"next",location:"left"},{label:"\u5BFC\u51FA",action:Sn,icon:"download-one",location:"left"},{label:"\u5BFC\u5165",action:wn,icon:"upload-one",location:"left"},{label:"\u5168\u5C4F",action:()=>{const p=document.querySelector("#editor");document.fullscreenEnabled&&p&&p.requestFullscreen()},icon:"full-screen",location:"left"},{label:"\u5750\u6807",action:xn,icon:"cones",location:"left"},{label:"\u56FE\u6807",action:Pn,icon:"game-ps",location:"right"},{label:"\u4E3B\u9898",action:kn,icon:()=>q(Fn),location:"right"}],f=s.filter(p=>p.location==="left"),r=s.filter(p=>p.location==="right");return(p,u)=>(h(),k("div",Wn,[P("div",Yn,[(h(!0),k(Y,null,ee(i(f),(o,l)=>(h(),w(Je,{key:l,action:o.action,label:o.label,divider:o.divider,icon:o.icon},null,8,["action","label","divider","icon"]))),128))]),P("div",Gn,[(h(!0),k(Y,null,ee(i(r),(o,l)=>(h(),w(Je,{key:l,action:o.action,label:o.label,divider:o.divider,icon:o.icon},null,8,["action","label","divider","icon"]))),128))])]))}});var qn=V(Kn,[["__scopeId","data-v-b1e3babe"]]);const Jn=["data-component"],Zn=I({__name:"ComponentItem",props:{component:null,name:null},setup(e){return(t,n)=>(h(),k("div",{draggable:"true","data-component":e.component},[P("div",null,me(e.name),1)],8,Jn))}}),Qn={class:"components"},Ze=I({__name:"ComponentList",setup(e){const t=T(()=>{const s={};Object.keys(Ae).forEach(r=>{const p=new Ae[r],u=p.group;!u||!p.show||(s[u]||(s[u]=[]),s[u].push(p))});const f=[];return rt.forEach(r=>{var p;f.push({label:()=>r.name,key:r.key,icon:()=>q(le,{name:`${r.icon}`}),children:(p=s[r.key])==null?void 0:p.map(u=>({label:()=>q(Zn,{component:u.component,name:u.name,ondragstart:n}),key:u.component}))})}),f}),n=s=>{s.dataTransfer.setData("componentName",s.target.dataset.component)};return(s,f)=>(h(),k("div",Qn,[y(i(je),{options:i(t),accordion:!1},null,8,["options"])]))}});const ea={key:0,class:"layer"},ta={key:1,class:"layer"},na=I({__name:"LayerItem",props:{component:null,index:null,activeKey:null,mode:{default:"expand"},contextmenus:null},emits:["select"],setup(e,{emit:t}){const n=e,s=J(),f=(o,l)=>{var c;(c=o.dataTransfer)==null||c.setData("compomentIndex",l),o.stopPropagation()},r=(o,l,c=!1)=>{o.preventDefault(),o.stopPropagation(),c&&l!==n.activeKey&&te.emit("ActiveMenu",l)},p=(o,l)=>{var D;o.preventDefault(),o.stopPropagation();const c=(D=o.dataTransfer)==null?void 0:D.getData("compomentIndex"),a=u(c,l),m=c.split("-").map(S=>Number(S)),d=s.getComponentByIndex(m),C=s.cutComponent(m[m.length-1],d==null?void 0:d.parent);if(C&&a){const S=c.split("-").map(R=>Number(R)),L=s.getComponentByIndex(S);s.insertComponent(S[S.length-1],C,L),t("select",l)}},u=(o,l)=>{const c=o.split("-").map(d=>parseInt(d)),a=l.split("-").map(d=>parseInt(d)),m=c.length;for(let d=0;d<m;d++)if(c[d]!==a[d]){if(c[d]>a[d])return l;if(c[d]<a[d])return d+1==m?(a[d]=a[d]-1,a.join("-")):l}return l};return(o,l)=>{const c=Ne("icon-park"),a=pe("contextmenu");return z((h(),k("div",{draggable:"true",onDragstart:l[0]||(l[0]=m=>f(m,e.index)),onDrop:l[1]||(l[1]=m=>p(m,e.index)),onDragover:l[2]||(l[2]=m=>r(m,e.index,!0))},[e.component.component==="Group"?(h(),k("div",ea,[z(P("span",null,me(e.component.name||"\u5206\u7EC4"),513),[[ne,e.mode==="expand"]]),e.component.display?(h(),w(c,{key:0,name:"preview-open",size:"15"})):(h(),w(c,{key:1,name:"preview-close-one",size:"15"}))])):(h(),k("div",ta,[z(P("span",null,me(e.component.name),513),[[ne,e.mode==="expand"]]),e.component.display?(h(),w(c,{key:0,size:"15",name:"preview-open"})):(h(),w(c,{key:1,size:"15",name:"preview-close-one"}))]))],32)),[[a,e.contextmenus,void 0,{stop:!0}]])}}});var Qe=V(na,[["__scopeId","data-v-ea8a3288"]]);const aa=I({__name:"SimpleLayerItem",props:{component:null,index:null,activeKey:null,mode:{default:"expand"},name:null,contextmenus:null},emits:["select"],setup(e,{emit:t}){const n=e,s=J(),f=(o,l)=>{var c;(c=o.dataTransfer)==null||c.setData("compomentIndex",l),o.stopPropagation()},r=(o,l,c=!1)=>{o.preventDefault(),o.stopPropagation(),c&&l!==n.activeKey&&te.emit("ActiveMenu",l)},p=(o,l)=>{var D;o.preventDefault(),o.stopPropagation();const c=(D=o.dataTransfer)==null?void 0:D.getData("compomentIndex"),a=u(c,l),m=c.split("-").map(S=>Number(S)),d=s.getComponentByIndex(m),C=s.cutComponent(m[m.length-1],d==null?void 0:d.parent);if(C&&a){const S=c.split("-").map(R=>Number(R)),L=s.getComponentByIndex(S);s.insertComponent(S[S.length-1],C,L),t("select",l)}},u=(o,l)=>{const c=o.split("-").map(d=>parseInt(d)),a=l.split("-").map(d=>parseInt(d)),m=c.length;for(let d=0;d<m;d++)if(c[d]!==a[d]){if(c[d]>a[d])return l;if(c[d]<a[d])return d+1==m?(a[d]=a[d]-1,a.join("-")):l}return l};return(o,l)=>{const c=Ne("IconPark"),a=pe("contextmenu");return z((h(),w(c,{draggable:"true",onDragstart:l[0]||(l[0]=m=>f(m,e.index)),onDrop:l[1]||(l[1]=m=>p(m,e.index)),onDragover:l[2]||(l[2]=m=>r(m,e.index,!0)),name:e.name},null,8,["name"])),[[a,e.contextmenus,void 0,{stop:!0}]])}}});var et=V(aa,[["__scopeId","data-v-4341fe0f"]]);const tt=I({__name:"Layer",setup(e){const t=J(),n=pt(),s={};rt.map(v=>{s[v.key]=v.icon});const f=T(()=>t.componentData),r=B(null),p=B("");ke("ActiveMenu",v=>{const g=v;p.value=g,r.value&&r.value.open&&r.value.open(g)});const o=v=>{p.value=v;const g=v.split("-").map(x=>Number(x)),_=t.getComponentByIndex(g);_&&t.setCurComponent(_,v)},l=B([]),c=(v,g,_)=>{for(let x=0;x<g.length;x++){const F=g[x],A=a(x,v);if(F.component==="Group"){const fe=[];_.push({label:()=>q(Qe,{component:F,index:A,contextmenus:()=>X(A),onclick:()=>o(A)}),key:A,icon:()=>q(et,{name:"branch-one",component:F,index:A,contextmenus:()=>X(A),onclick:()=>o(A)}),children:c(A,F.subComponents||[],fe)})}else _.push({label:()=>q(Qe,{component:F,index:A,contextmenus:()=>X(A)}),key:A,icon:()=>q(et,{name:`${s[F.group]}`,component:F,index:A,contextmenus:()=>X(A),onclick:()=>o(A)})})}return _},a=(v,g)=>g?`${g}-${v}`:v.toString(),m=v=>{const g=v.split("-").map(x=>Number(x)),_=t.getComponentByIndex(g);_&&(_.groupStyle=void 0,De(JSON.stringify(_.toJson())),n.copy())},d=v=>G(this,null,function*(){var _;o(v);const g=v.split("-").map(x=>Number(x));t.removeComponent(g[g.length-1],(_=t.curComponent)==null?void 0:_.parent)}),C=v=>G(this,null,function*(){var _;o(v);const g=v.split("-").map(x=>Number(x));t.upComponent(g[g.length-1],(_=t.curComponent)==null?void 0:_.parent)}),D=v=>G(this,null,function*(){var _;o(v);const g=v.split("-").map(x=>Number(x));t.downComponent(g[g.length-1],(_=t.curComponent)==null?void 0:_.parent)}),S=v=>G(this,null,function*(){var _;o(v);const g=v.split("-").map(x=>Number(x));t.topComponent(g[g.length-1],(_=t.curComponent)==null?void 0:_.parent)}),L=v=>G(this,null,function*(){var _;o(v);const g=v.split("-").map(x=>Number(x));t.bottomComponent(g[g.length-1],(_=t.curComponent)==null?void 0:_.parent)}),R=v=>{o(v);const g=v.split("-").map(x=>Number(x)),_=t.getComponentByIndex(g);_&&_.hiddenComponent()},H=v=>{o(v);const g=v.split("-").map(x=>Number(x)),_=t.getComponentByIndex(g);_&&_.showComponent()},M=v=>{const g=v.split("-").map(F=>Number(F)),_=t.getComponentByIndex(g),x=t.cutComponent(g[g.length-1],_==null?void 0:_.parent);x&&(De(JSON.stringify(x.toJson())),n.copy())},W=v=>{const g=v.split("-").map(F=>Number(F)),_=n.copyData,x=t.getComponentByIndex(g);if(_){const F=Nt(n.copyData);F.id=zt(),t.insertComponent(g[g.length-1],F,x==null?void 0:x.parent)}},X=v=>{var _,x,F;const g=v.split("-").map(A=>parseInt(A));return[{text:"\u590D\u5236",subText:"Ctrl + C",handler:()=>m(v)},{text:"\u7C98\u8D34",subText:"Ctrl + V",handler:()=>W(v)},{text:"\u526A\u5207",subText:"Ctrl + V",handler:()=>M(v)},{text:"\u62C6\u5206",subText:"Ctrl + V",disable:((_=t.getComponentByIndex(v.split("-").map(A=>Number(A))))==null?void 0:_.component)!=="Group",handler:()=>t.decompose()},{text:"\u5220\u9664",subText:"",handler:()=>d(v)},{divider:!0},{text:"\u7F6E\u4E8E\u9876\u5C42",handler:()=>S(v),children:[{text:"\u7F6E\u4E8E\u9876\u5C42",handler:()=>S(v)},{text:"\u4E0A\u79FB\u4E00\u5C42",handler:()=>C(v)}]},{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:()=>L(v),children:[{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:()=>L(v)},{text:"\u4E0B\u79FB\u4E00\u5C42",handler:()=>D(v)}]},{divider:!0},{text:"\u663E\u793A",disable:(x=t.getComponentByIndex(g))==null?void 0:x.display,subText:"",handler:()=>H(v)},{text:"\u9690\u85CF",disable:!((F=t.getComponentByIndex(g))!=null&&F.display),subText:"",handler:()=>R(v)}]};return ge(()=>t.componentData,()=>{const v=t.componentData;l.value=[],l.value=c("",v,[])},{deep:!0,immediate:!0}),(v,g)=>(h(),k("div",null,[i(f).length>0?(h(),w(i(je),{key:0,options:l.value,"onUpdate:value":o},null,8,["options"])):(h(),w(i(Bt),{key:1,class:"placeholder"},{default:b(()=>[y(i(Et),null,{default:b(()=>[y(i(Ft),{description:"\u753B\u5E03\u4E3A\u7A7A"})]),_:1})]),_:1}))]))}}),oa=P("span",null,"\u7EC4\u4EF6",-1),la=P("span",null,"\u56FE\u5C42",-1),sa=I({__name:"SideBar",props:{iscollapsed:{type:Boolean,default:!1}},emits:["update:iscollapsed"],setup(e,{emit:t}){const n=B("components"),s=r=>{t("update:iscollapsed",!1),n.value=r},f=r=>{n.value=r};return(r,p)=>{const u=Ne("IconPark");return e.iscollapsed?(h(),w(i(we),{key:1,type:"line",animated:"","bar-width":48,"justify-content":"center","onUpdate:value":[s,p[4]||(p[4]=o=>n.value=o)],value:n.value},{default:b(()=>[n.value==="components"?(h(),w(i(de),{key:0,name:"components","display-directive":"show:lazy"},{tab:b(()=>[y(u,{name:"components",onClick:p[2]||(p[2]=o=>f("layer"))})]),default:b(()=>[y(Ze)]),_:1})):n.value==="layer"?(h(),w(i(de),{key:1,name:"layer","display-directive":"show:lazy"},{tab:b(()=>[y(u,{name:"layers",onClick:p[3]||(p[3]=o=>f("components"))})]),default:b(()=>[y(tt)]),_:1})):xe("",!0)]),_:1},8,["value"])):(h(),w(i(we),{key:0,type:"line",animated:"","bar-width":100,"justify-content":"center",value:n.value,"onUpdate:value":[p[0]||(p[0]=o=>n.value=o),p[1]||(p[1]=o=>n.value=o)]},{default:b(()=>[y(i(de),{name:"components","display-directive":"show:lazy"},{tab:b(()=>[y(u,{name:"components"}),oa]),default:b(()=>[y(Ze)]),_:1}),y(i(de),{name:"layer","display-directive":"show:lazy"},{tab:b(()=>[y(u,{name:"layers"}),la]),default:b(()=>[y(tt)]),_:1})]),_:1},8,["value"]))}}}),ia=[{label:"4K",value:"3840X2160"},{label:"2k",value:"2048X1080"},{label:"1080P",value:"1920X1080"},{label:"720P",value:"1366X768"},{label:"iPhoneXR",value:"414X896"},{label:"iPhoneSE",value:"375X667"},{label:"iPhone12Pro",value:"390X884"},{label:"GalaxyS8+",value:"360X740"},{label:"GalaxyS20Ultra+",value:"412X915"},{label:"iPadAir",value:"820X1180"},{label:"iPadMini",value:"768X1024"},{label:"SurfacePro7",value:"912X1368"},{label:"NestHub",value:"1024X600"},{label:"NestMax",value:"1028X800"}];const ua={class:"attr-list"},ca=I({__name:"Canvas",setup(e){const t=T(()=>[{label:"\u672C\u8BBE\u5907",value:`${window.screen.width}X${window.screen.height}`},...ia]),n=J(),s=T(()=>n.canvasStyleData),f=B("\u672C\u8BBE\u5907"),r=[{key:"width",label:"\u5BBD\u5EA6",type:K.NUMBER},{key:"height",label:"\u9AD8\u5EA6",type:K.NUMBER},{key:"image",label:"\u80CC\u666F\u56FE",type:K.TEXT}],p=u=>{const o=u.split("X"),l=parseInt(o[0]),c=parseInt(o[1]);n.setCanvasStyle(ye(_e({},s.value),{width:l,height:c}))};return(u,o)=>(h(),k("div",ua,[y(i(st),null,{default:b(()=>[y(i(Pe),{size:"small",onSubmit:o[1]||(o[1]=Be(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:b(()=>[y(i(Se),{label:"\u5206\u8FA8\u7387"},{default:b(()=>[y(i(Le),{value:f.value,"onUpdate:value":[o[0]||(o[0]=l=>f.value=l),p],placeholder:"\u9009\u62E9\u5206\u8FA8\u7387",options:i(t)},null,8,["value","options"])]),_:1}),(h(),k(Y,null,ee(r,({key:l,label:c,type:a},m)=>y(i(Se),{key:m,label:c},{default:b(()=>[a==="number"?(h(),w(i(ze),{key:0,value:i(s)[l],"onUpdate:value":d=>i(s)[l]=d},null,8,["value","onUpdate:value"])):(h(),w(i(Me),{key:1,value:i(s)[l],"onUpdate:value":d=>i(s)[l]=d},null,8,["value","onUpdate:value"]))]),_:2},1032,["label"])),64))]),_:1})]),_:1})]))}});var ra=V(ca,[["__scopeId","data-v-c4e88632"]]);const da=[{label:"Arial",value:"Arial"},{label:"\u5FAE\u8F6F\u96C5\u9ED1",value:"Microsoft Yahei"},{label:"\u5B8B\u4F53",value:"SimSun"},{label:"\u9ED1\u4F53",value:"SimHei"},{label:"\u6977\u4F53",value:"KaiTi"},{label:"\u65B0\u5B8B\u4F53",value:"NSimSun"},{label:"\u4EFF\u5B8B",value:"FangSong"},{label:"\u82F9\u65B9",value:"PingFang SC"},{label:"\u534E\u6587\u9ED1\u4F53",value:"STHeiti"},{label:"\u534E\u6587\u6977\u4F53",value:"STKaiti"},{label:"\u534E\u6587\u5B8B\u4F53",value:"STSong"},{label:"\u534E\u6587\u4EFF\u5B8B",value:"STFangSong"},{label:"\u534E\u6587\u4E2D\u5B8B",value:"STZhongSong"},{label:"\u534E\u6587\u7425\u73C0",value:"STHupo"},{label:"\u534E\u6587\u65B0\u9B4F",value:"STXinwei"},{label:"\u534E\u6587\u96B6\u4E66",value:"STLiti"},{label:"\u534E\u6587\u884C\u6977",value:"STXingkai"},{label:"\u51AC\u9752\u9ED1\u4F53",value:"Hiragino Sans GB"},{label:"\u5170\u4EAD\u9ED1",value:"Lantinghei SC"},{label:"\u504F\u504F\u4F53",value:"Hanzipen SC"},{label:"\u624B\u672D\u4F53",value:"Hannotate SC"},{label:"\u5B8B\u4F53",value:"Songti SC"},{label:"\u5A03\u5A03\u4F53",value:"Wawati SC"},{label:"\u884C\u6977",value:"Xingkai SC"},{label:"\u5706\u4F53",value:"Yuanti SC"},{label:"\u534E\u6587\u7EC6\u9ED1",value:"STXihei"},{label:"\u5E7C\u5706",value:"YouYuan"},{label:"\u96B6\u4E66",value:"LiSu"},{label:"LED",value:"LED"},{label:"LCD",value:"LCD"}],ma=[{label:"100 Thin",value:100},{label:"200 ExtraThin",value:200},{label:"300 Light",value:300},{label:"400 Normal",value:400},{label:"500 Medium",value:500},{label:"600 Semi Bold",value:600},{label:"700 Bold",value:700},{label:"Extra Bold",value:800},{label:"Black",value:900}],pa=I({__name:"FontStyle",props:{value:{default:""}},emits:["update:value","change"],setup(e,{emit:t}){const n=B(""),s=Q(da),f=r=>{n.value=r,t("update:value",n.value),t("change",n.value)};return(r,p)=>(h(),w(i(Le),{clearable:"",modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=u=>n.value=u),placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53","onUpdate:value":f,options:s},null,8,["modelValue","options"]))}}),fa=I({__name:"FontWeight",props:{value:{default:400}},emits:["update:value","change"],setup(e,{emit:t}){const s=B(e.value),f=Q(ma),r=p=>{s.value=p,t("update:value",s.value),t("change",s.value)};return(p,u)=>(h(),w(i(Le),{clearable:"",value:s.value,"onUpdate:value":[u[0]||(u[0]=o=>s.value=o),r],placeholder:"\u8BF7\u9009\u62E9\u5B57\u91CD",options:f},null,8,["value","options"]))}}),ha={class:"linear-gradient"},va=I({__name:"LinearGradient",props:{value:{default:()=>({angle:0,color1:"",color2:""})}},emits:["update:value","change"],setup(e,{emit:t}){const n=e,s=B({angle:n.value.angle||0,color1:n.value.color1||"",color2:n.value.color2||""}),f=(r,p)=>{s.value[r]=p,t("update:value",s.value),t("change",s.value)};return(r,p)=>(h(),k("div",ha,[y(i(ze),{modelValue:e.value.angle,"onUpdate:value":p[0]||(p[0]=u=>f("angle",u)),controls:!0,min:0,max:360,step:1},null,8,["modelValue"]),y(i(Te),{value:e.value.color1,"onUpdate:value":p[1]||(p[1]=u=>f("color1",u)),swatches:i(Ue)},null,8,["value","swatches"]),y(i(Te),{value:e.value.color2,"onUpdate:value":p[2]||(p[2]=u=>f("color2",u)),swatches:i(Ue)},null,8,["value","swatches"])]))}});var _a=I({props:{args:{type:Object,default:()=>{}},component:{type:Object,default:()=>{}},value:{type:Object}},emits:["update:value","change"],setup(e,{emit:t}){const n=s=>{t("update:value",s),t("change",s)};return()=>[q(e.component,ye(_e({},e.args),{value:e.value,onChange:n}))]}});const ht=I({__name:"FormAttr",props:{data:null,children:null,name:null,uid:null,ukey:null},emits:["change"],setup(e,{emit:t}){const s=Q(e.data),f=(r,p)=>{t("change",p,r)};return(r,p)=>(h(),w(i(Pe),{size:"small",onSubmit:p[0]||(p[0]=Be(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:b(()=>[(h(!0),k(Y,null,ee(e.children,({prop:u,label:o,type:l,componentOptions:c})=>(h(),w(i(Se),{key:`${e.ukey}${u}`,label:o},{default:b(()=>[l===i(K).COLOR?(h(),w(i(Te),{key:0,value:s[u],"onUpdate:value":[a=>s[u]=a,a=>f(a,u)],swatches:i(Ue),modes:["hex","rgb","hsl"]},null,8,["value","onUpdate:value","swatches"])):l===i(K).SELECT?(h(),w(i(Le),{key:1,modelValue:s[u],"onUpdate:modelValue":a=>s[u]=a,placeholder:o,"onUpdate:value":a=>f(a,u),options:(c==null?void 0:c.options)||[]},null,8,["modelValue","onUpdate:modelValue","placeholder","onUpdate:value","options"])):l===i(K).RADIO?(h(),w(i(It),{key:2,value:s[u],"onUpdate:value":[a=>s[u]=a,a=>f(a,u)],placeholder:o},{default:b(()=>[(h(!0),k(Y,null,ee((c==null?void 0:c.options)||[],a=>(h(),w(i(Lt),{label:a.value,key:a.value},{default:b(()=>[Ie(me(a.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["value","onUpdate:value","placeholder"])):l===i(K).NUMBER?(h(),w(i(ze),{key:3,value:s[u],"onUpdate:value":[a=>s[u]=a,a=>f(a,u)]},null,8,["value","onUpdate:value"])):l===i(K).SWITCH?(h(),w(i($t),{key:4,value:s[u],"onUpdate:value":[a=>s[u]=a,a=>f(a,u)]},null,8,["value","onUpdate:value"])):l===i(K).FONT_STYLE?(h(),w(i(pa),{key:5,value:s[u],"onUpdate:value":a=>s[u]=a,onChange:a=>f(a,u)},null,8,["value","onUpdate:value","onChange"])):l===i(K).FONT_WEIGHT?(h(),w(i(fa),{key:6,value:s[u],"onUpdate:value":a=>s[u]=a,onChange:a=>f(a,u)},null,8,["value","onUpdate:value","onChange"])):l===i(K).LINEAR_GRADIENT?(h(),w(i(va),{key:7,value:s[u],"onUpdate:value":a=>s[u]=a,onChange:a=>f(a,u)},null,8,["value","onUpdate:value","onChange"])):l===i(K).CUSTOM?(h(),w(i(_a),{key:8,value:s[u],"onUpdate:value":a=>s[u]=a,onChange:a=>f(a,u),component:c.componentType,args:c.args},null,8,["value","onUpdate:value","onChange","component","args"])):(h(),w(i(Me),{key:9,clearable:"",value:s[u],"onUpdate:value":[a=>s[u]=a,a=>f(a,u)],readonly:c.editable===!1,disabled:c.disabled},null,8,["value","onUpdate:value","readonly","disabled"]))]),_:2},1032,["label"]))),128))]),_:1}))}});const ga={class:"attr-list"},ya=I({__name:"StyleList",props:{curComponent:null},setup(e){const t=e,n=J(),s=Q({}),f=T(()=>t.curComponent?t.curComponent.styleFormValue:{}),r=Oe((o,l)=>{if(t.curComponent)if(["top","left","width","height","rotate"].includes(o)){const a=t.curComponent.parent;n.syncComponentLoction({[o]:l},a,!0),a&&n.resizeAutoComponent(a)}else n.setCurComponentStyle(o,l)},300),p=Oe(o=>{const l=Vt(o,s);l&&Object.keys(l).forEach(c=>{s[c]=l[c]})},200),u=()=>{t.curComponent&&(dt(s),p(t.curComponent.style))};return ge(()=>[t.curComponent.id,t.curComponent.positionStyle],()=>{t.curComponent&&t.curComponent.id&&u()},{immediate:!0,deep:!0}),(o,l)=>(h(),k("div",ga,[y(i(ut),{accordion:""},{default:b(()=>[(h(!0),k(Y,null,ee(i(f),({label:c,prop:a,children:m})=>(h(),w(i(it),{key:`${e.curComponent.id}${a}`,title:c,name:a},{default:b(()=>[y(ht,{children:m,data:s,onChange:i(r),name:c,uid:a,ukey:e.curComponent.id},null,8,["children","data","onChange","name","uid","ukey"])]),_:2},1032,["title","name"]))),128))]),_:1})]))}});var ba=V(ya,[["__scopeId","data-v-2648b246"]]);const Ca={class:"attr-list"},xa=I({__name:"AttrList",props:{curComponent:null},setup(e){const t=e,n=J(),s=Q({common:{name:t.curComponent.name,component:t.curComponent.component,id:t.curComponent.id}}),f=T(()=>t.curComponent?t.curComponent.propFromValue:[]),r=(u,o,l)=>{n.setCurComponentPropValue(u,o,l)},p=()=>{dt(s,["common"]),s.common.name=t.curComponent.name,s.common.component=t.curComponent.component,s.common.id=t.curComponent.id,t.curComponent&&t.curComponent.propValue&&Object.keys(t.curComponent.propValue).forEach(u=>{s[u]=t.curComponent.propValue[u]})};return ge(()=>t.curComponent.id,()=>{p()},{immediate:!0}),(u,o)=>(h(),k("div",Ca,[y(i(ut),{accordion:""},{default:b(()=>[(h(!0),k(Y,null,ee(i(f),({label:l,prop:c,children:a})=>(h(),w(i(it),{key:`${e.curComponent.id}${c}`,title:l,name:c},{default:b(()=>[y(ht,{children:a,data:s[c],onChange:(m,d)=>r(c,m,d),name:l,uid:c,ukey:e.curComponent.id},null,8,["children","data","onChange","name","uid","ukey"])]),_:2},1032,["title","name"]))),128))]),_:1})]))}});var Sa=V(xa,[["__scopeId","data-v-1c2784db"]]);const wa={key:0},Da={key:1},ka=I({__name:"SideBar",props:{iscollapsed:{type:Boolean,default:!1}},emits:["update:iscollapsed"],setup(e,{emit:t}){const n=B("attr"),s=J(),f=T(()=>s.curComponent),r=T(()=>s.curComponent?[{label:"\u6837\u5F0F",key:"4",icon:()=>q(le,{name:"text-style",onClick:()=>p("style")})},{label:"\u5C5E\u6027",key:"2",icon:()=>q(le,{name:"internal-data",onClick:()=>p("attr")})}]:[{label:"\u753B\u5E03",key:"1",icon:()=>q(le,{name:"page"})}]),p=u=>{t("update:iscollapsed",!1),n.value=u};return(u,o)=>e.iscollapsed?(h(),k("div",Da,[y(i(je),{options:i(r)},null,8,["options"])])):(h(),k("div",wa,[i(f)?(h(),w(i(we),{key:0,type:"line",animated:"","justify-content":"center",value:n.value,"onUpdate:value":[o[0]||(o[0]=l=>n.value=l),o[1]||(o[1]=l=>n.value=l)]},{default:b(()=>[y(i(de),{name:"style","display-directive":"show:lazy"},{tab:b(()=>[y(i(le),{name:"text-style"}),z(P("span",null,"\u6837\u5F0F",512),[[ne,!e.iscollapsed]])]),default:b(()=>[y(i(ba),{curComponent:i(f)},null,8,["curComponent"])]),_:1}),y(i(de),{name:"attr","display-directive":"show:lazy"},{tab:b(()=>[y(i(le),{name:"internal-data"}),z(P("span",null,"\u5C5E\u6027",512),[[ne,!e.iscollapsed]])]),default:b(()=>[y(i(Sa),{curComponent:i(f)},null,8,["curComponent"])]),_:1})]),_:1},8,["value"])):(h(),w(i(we),{key:1,type:"line",animated:"","justify-content":"center"},{default:b(()=>[y(i(de),{name:"canvas","display-directive":"show:lazy"},{tab:b(()=>[y(i(le),{name:"page"}),z(P("span",null,"\u753B\u5E03",512),[[ne,!e.iscollapsed]])]),default:b(()=>[y(ra)]),_:1})]),_:1}))]))}});const Fa=I({__name:"DesignerPage",setup(e){const t=J(),n=B(!1),s=B(!1),f=lt();Fe(()=>G(this,null,function*(){const c=f.params.index;c&&(yield r(c))}));const r=c=>G(this,null,function*(){const a=yield Wt(c);!a||t.setLayoutData(a)}),p=B(0),u=B(0),o=T(()=>({width:p.value+"px",height:u.value+"px"})),l=c=>{const a=c[0],{width:m,height:d}=a.contentRect;p.value=m,u.value=d};return nt(()=>{t.clearCanvas()}),(c,a)=>{const m=pe("resize");return h(),w(i($e),{class:"home"},{default:b(()=>[y(i(Tt),{class:"header"},{default:b(()=>[y(i(qn))]),_:1}),y(i($e),{"has-sider":"",class:"main"},{default:b(()=>[y(i(He),{class:"left",width:"200",collapsed:n.value,"native-scrollbar":!1,bordered:"","collapse-mode":"width","show-trigger":"",onCollapse:a[2]||(a[2]=()=>n.value=!0),onExpand:a[3]||(a[3]=()=>n.value=!1)},{default:b(()=>[y(i(sa),{iscollapsed:n.value,"onUpdate:iscollapsed":[a[0]||(a[0]=d=>n.value=d),a[1]||(a[1]=d=>n.value=d)]},null,8,["iscollapsed"])]),_:1},8,["collapsed"]),y(i($e),{"has-sider":"","sider-placement":"right"},{default:b(()=>[z((h(),w(i(Rt),{class:"content"},{default:b(()=>[y(i(st),{"x-scrollable":"",style:ae(i(o))},{default:b(()=>[y(yn)]),_:1},8,["style"])]),_:1})),[[m,l]]),y(i(He),{class:"right",width:"240",collapsed:s.value,"native-scrollbar":!1,bordered:"","collapsed-width":35,"collapse-mode":"width","show-trigger":"arrow-circle",onCollapse:a[6]||(a[6]=()=>s.value=!0),onExpand:a[7]||(a[7]=()=>s.value=!1)},{default:b(()=>[y(i(ka),{iscollapsed:s.value,"onUpdate:iscollapsed":[a[4]||(a[4]=d=>s.value=d),a[5]||(a[5]=d=>s.value=d)]},null,8,["iscollapsed"])]),_:1},8,["collapsed"])]),_:1})]),_:1})]),_:1})}}});var Ra=V(Fa,[["__scopeId","data-v-4ef404b5"]]);export{Ra as default};
