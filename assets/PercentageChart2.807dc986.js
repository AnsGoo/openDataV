import{r as k,h as H}from"./echarts.4f9736bc.js";import{h as x}from"./index.1f44d164.js";import{u as _}from"./index.ef2789db.js";import{t as A}from"./mydark.e6801489.js";import{f as w,r as B,q as C,w as P,o as z,a4 as E,G as F,N as V,W as O}from"./@vue.f8650cf9.js";import"./zrender.706c9170.js";import"./tslib.34a40861.js";import"./axios.19d3e859.js";import"./vue-router.32a64423.js";import"./pinia.30c42674.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./naive-ui.2edb364b.js";import"./date-fns.3ef01b04.js";import"./seemly.5d1c4af6.js";import"./vueuc.ebfd6ddc.js";import"./evtd.79485e8d.js";import"./@css-render.7ab96087.js";import"./vooks.ee7b0837.js";import"./vdirs.8ff5d312.js";import"./@juggle.37ed2144.js";import"./css-render.d5050412.js";import"./@emotion.6322e2ae.js";import"./treemate.80cdf2c2.js";import"./async-validator.fb49d0f5.js";import"./lodash-es.5f1bdab1.js";import"./dexie.78e6a997.js";import"./nprogress.5f640c6a.js";import"./@icon-park.f4b03c54.js";const gt=w({props:{componentId:null,propValue:null},setup(I){const l=I;k("mydark",A);const g=_(),f=B(null);let r=null,o=0,m,y,i=0;C(()=>{M(),clearInterval(m),b(),m=setInterval(v,l.propValue.interval),setTimeout(S,1e3)});function M(){x.get({url:l.propValue.history}).then(e=>{o=e.data||0}).catch(e=>{console.log(e),o=Math.round(Math.random()*100)}).finally(()=>{v()})}const D=e=>{const s=e[0],{width:a,height:n}=s.contentRect;r==null||r.resize({width:a,height:n})},j=(e,s,a,n)=>{let t=e+a*Math.cos(n*Math.PI/180),c=s+a*Math.sin(n*Math.PI/180);return{x:t,y:c}},h=()=>{let e=l.propValue.fontSize,s=l.propValue.lineLength;return{title:{text:"{a|"+o+"%}",x:"center",y:"center",textStyle:{rich:{a:{fontSize:e,color:"#29EEF3"},c:{fontSize:20,color:"#29EEF3"}}}},series:[{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:function(n,t){return{type:"arc",shape:{cx:t.getWidth()/2,cy:t.getHeight()/2,r:Math.min(t.getWidth(),t.getHeight())/2*.6,startAngle:(0+i)*Math.PI/180,endAngle:(90+i)*Math.PI/180},style:{stroke:"#0CD3DB",fill:"transparent",lineWidth:1.5},silent:!0}},data:[0]},{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:function(n,t){return{type:"arc",shape:{cx:t.getWidth()/2,cy:t.getHeight()/2,r:Math.min(t.getWidth(),t.getHeight())/2*.6,startAngle:(180+i)*Math.PI/180,endAngle:(270+i)*Math.PI/180},style:{stroke:"#0CD3DB",fill:"transparent",lineWidth:1.5},silent:!0}},data:[0]},{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:function(n,t){return{type:"arc",shape:{cx:t.getWidth()/2,cy:t.getHeight()/2,r:Math.min(t.getWidth(),t.getHeight())/2*.65,startAngle:(270+-i)*Math.PI/180,endAngle:(40+-i)*Math.PI/180},style:{stroke:"#0CD3DB",fill:"transparent",lineWidth:1.5},silent:!0}},data:[0]},{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:function(n,t){return{type:"arc",shape:{cx:t.getWidth()/2,cy:t.getHeight()/2,r:Math.min(t.getWidth(),t.getHeight())/2*.65,startAngle:(90+-i)*Math.PI/180,endAngle:(220+-i)*Math.PI/180},style:{stroke:"#0CD3DB",fill:"transparent",lineWidth:1.5},silent:!0}},data:[0]},{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:function(n,t){let c=t.getWidth()/2,p=t.getHeight()/2,u=Math.min(t.getWidth(),t.getHeight())/2*.65,d=j(c,p,u,90+-i);return{type:"circle",shape:{cx:d.x,cy:d.y,r:4},style:{stroke:"#0CD3DB",fill:"#0CD3DB"},silent:!0}},data:[0]},{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:function(n,t){let c=t.getWidth()/2,p=t.getHeight()/2,u=Math.min(t.getWidth(),t.getHeight())/2*.65,d=j(c,p,u,270+-i);return{type:"circle",shape:{cx:d.x,cy:d.y,r:4},style:{stroke:"#0CD3DB",fill:"#0CD3DB"},silent:!0}},data:[0]},{name:"invent",type:"pie",radius:["58%","45%"],silent:!0,clockwise:!0,startAngle:90,z:0,zlevel:0,label:{position:"center"},data:[{value:o,name:"",itemStyle:{color:{colorStops:[{offset:0,color:"#4FADFD"},{offset:1,color:"#28E8FA"}]}}},{value:100-o,name:"",label:{show:!1},itemStyle:{color:"#173164"}}]},{name:"",type:"gauge",radius:"58%",center:["50%","50%"],startAngle:0,endAngle:359.9,splitNumber:8,emphasis:{scale:!0},axisTick:{show:!1},splitLine:{length:s,lineStyle:{width:5,color:"#061740"}},axisLabel:{show:!1},pointer:{show:!1},axisLine:{lineStyle:{opacity:0}},detail:{show:!1},data:[{value:0,name:""}]}]}},v=()=>{x.get({url:l.propValue.history}).then(e=>{o=e.data||0}).catch(e=>{g.isEditMode&&(o=Math.round(Math.random()*100))}).finally(()=>{let e=o.toFixed(2).split(".")[0],s=o.toFixed(2).split(".")[1];const a="{a|"+e+"}{a|."+s+"%}";r&&r.setOption({title:{text:a}})})},b=()=>{r=H(f.value,"mydark"),r.clear(),r.setOption(h())};g.isEditMode&&P(()=>l.propValue,(e,s)=>{console.log(e),r&&(r.clear(),r.setOption(h()))},{deep:!0});const W=()=>{const e=h();r&&(i=i+3,r.setOption(e,!0))},S=()=>{y=setInterval(W,100)};return z(()=>{clearInterval(m),clearInterval(y),r&&(r.clear(),r.dispose())}),(e,s)=>{const a=E("resize");return F((V(),O("div",{ref:(n,t)=>{t.chartEl=n,f.value=n}},null,512)),[[a,D]])}}});export{gt as default};
