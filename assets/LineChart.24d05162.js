import{h as j}from"./index.59b178ec.js";import{u,E as l,d as S,b as p}from"./index.2fc0df38.js";import{r as w,h as v}from"./echarts.4f9736bc.js";import{t as A}from"./mydark.8efe4250.js";import{b as E}from"./@vueuse.fe63d129.js";import{q as x,o as z,p as C,r as h,y as L,x as k}from"./@vue.7df1a0ef.js";import"./axios.19d3e859.js";import"./vue-router.e129948e.js";import"./pinia.685e9614.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./element-plus.54ccd689.js";import"./lodash.8679a684.js";import"./nprogress.5f640c6a.js";import"./async-validator.5d25c98b.js";import"./@popperjs.a8a4a6a0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./lodash-es.4775bb8f.js";import"./dexie.c25c286a.js";import"./@icon-park.87123711.js";import"./zrender.706c9170.js";import"./tslib.34a40861.js";const T=t=>{const n=o=>o?o.length===1?o[0]:o:0;return[{name:t.name||"",type:"pie",radius:n(t.radius),label:{show:t.labelShow,position:t.labelPosition||"outside",formatter:t.labelFormatter||"{b} {d}%"},emphasis:{scale:t.emphasisScale,label:{show:t.emphasisLabelShow,fontSize:t.emphasisFontSize,fontWeight:t.emphasisFontWeight||"bold"}},roseType:t.roseType||void 0,labelLine:{show:!0}}]};w("mydark",A);const O=(t,n,o,d)=>{const f=u();let s=null;const i={};E(n,a=>{const g=a[0],{width:b,height:y}=g.contentRect;s==null||s.resize({width:b,height:y})});const r=()=>{if(i.color=t.color,t.axis.length===2&&(o===l.LINE||o===l.BAR)&&(i.xAxis={type:t.axis[0].type,show:t.axis[0].show,name:t.axis[0].name,nameLocation:t.axis[0].nameLocation,position:t.axis[0].position,scale:t.axis[0].scale},i.yAxis={type:t.axis[1].type,show:t.axis[1].show,name:t.axis[1].name,nameLocation:t.axis[1].nameLocation,position:t.axis[1].position,scale:t.axis[1].scale}),t.title.length>0&&(i.title={show:t.title[0].show,text:t.title[0].text||"",subtext:t.title[0].subtext||"",left:t.title[0].left||"center",top:t.title[0].top||"top",textStyle:{color:t.title[0].textColor,fontSize:t.title[0].textSize},subtextStyle:{color:t.title[0].subtextColor,fontSize:t.title[0].subtextSize}}),t.legend.length>0&&(i.legend={show:t.legend[0].show,type:t.legend[0].type,top:t.legend[0].top||"10%",left:t.legend[0].left||"10%",orient:t.legend[0].orient||"vertical",textStyle:{color:t.legend[0].textColor||"#fff",fontSize:t.legend[0].textSize||12}}),t.tooltip.length>0&&(i.tooltip={show:t.tooltip[0].show,trigger:t.tooltip[0].trigger||"item",formatter:t.tooltip[0].formatter||"{a} <br/>{b} : {c} ({d}%)"}),t.series.length>0){const a=t.series[0];switch(o){case l.PIE:i.series=T(a);break;case l.LINE:i.series=S(a);break;default:i.series=[]}}return i},e=()=>{s=v(n.value,"mydark"),s.setOption(r())},c=a=>{s==null||s.setOption(a)};x(()=>{e()}),z(()=>{s&&(s.clear(),s.dispose())});const m=()=>{s==null||s.setOption(r())};return f.isEditMode&&p(d,m),{updateChart:c,getOptions:r}},tt=C({props:{propValue:null,element:null},setup(t){const n=t,o=h(null),d=h([]),{updateChart:f,getOptions:s}=O(n.propValue,o,l.LINE,n.element.component+n.element.id),i=()=>{j.post({url:n.propValue.history,data:[n.propValue.dataTag]}).then(e=>{e.ErrorCode===200&&(d.value=e.Results.map(c=>Number(c.TagValue)))}).catch(e=>{console.log(e)}).finally(()=>{r()})},r=()=>{const e=s();e.xAxis&&e.xAxis.type==="category"?e.xAxis.data=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]:e.xAxis&&(e.xAxis.data=[]),e.yAxis&&e.yAxis.type==="category"?e.yAxis.data=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]:e.yAxis&&(e.yAxis.data=[]),e.series[0].data=[820,932,901,934,1290,1330,1320],f(e)};return x(()=>{i()}),(e,c)=>(k(),L("div",{ref:(m,a)=>{a.chartEl=m,o.value=m}},null,512))}});export{tt as default};
