var v=(h,m,c)=>new Promise((p,a)=>{var r=e=>{try{n(c.next(e))}catch(l){a(l)}},d=e=>{try{n(c.throw(e))}catch(l){a(l)}},n=e=>e.done?p(e.value):Promise.resolve(e.value).then(r,d);n((c=c.apply(h,m)).next())});import{d as N,v as $,r as u,a as C,x as T,w as B,o as _,c as f,q as M,b as o,F as V,e as z,t as k,f as D,_ as S}from"./index.b2f7e009.js";import{u as E}from"./index.f9a5bc2d.js";import{u as F}from"./useEventBus.c205bfc7.js";const G={class:"dv-decoration-9"},I=["stroke"],R=["dur"],q=["stroke"],A=["dur"],H=["stroke"],L=["xlink:href","stroke","fill"],O=["dur","begin"],P=["stroke"],W=N({__name:"Gauge",props:{component:null},setup(h){const m=h,c=$(),p=(t,s,i)=>{t==="attr"&&s==="color1"&&(r.value[0]=i),t==="attr"&&s==="color2"&&(r.value[1]=i),t==="attr"&&s==="unit"&&(g.value=i)},{propValue:a}=E(m.component,p),r=u([a.attr.color1,a.attr.color2]),d="decoration-9-polygon",n=u(3),e=u(0),l=u([1,1]),g=u(a.attr.unit||""),x=t=>{const s=t.contentRect,i=Math.min(s.width/100,s.height/100);l.value=[i,i]},w=t=>{const s=t;a.data.datatag&&s.TagName===a.data.datatag&&(e.value=Number(s.TagValue))};C(()=>v(this,null,function*(){yield b()}));const b=()=>v(this,null,function*(){if(a.data.history)try{const t=yield T.post({url:a.data.history,data:[a.data.datatag]});t.status===200&&(e.value=Number(t.data.TagValue))}catch(t){console.log(t.message||t)}c.isEditMode&&(e.value=Number((Math.random()*100).toFixed(2)))});return F("actual",w),(t,s)=>{const i=D("resize");return B((_(),f("div",G,[(_(),f("svg",{width:"100",height:"100",style:M(`transform: scale(${l.value[0]}, ${l.value[1]})`)},[o("defs",null,[o("polygon",{id:d,points:"15, 46.5, 21, 47.5, 21, 52.5, 15, 53.5"})]),o("circle",{cx:"50",cy:"50",r:"45",fill:"transparent",stroke:r.value[1],"stroke-width":"10","stroke-dasharray":"80, 100, 30, 100"},[o("animateTransform",{attributeName:"transform",type:"rotate",values:"0 50 50;360 50 50",dur:`${n.value}s`,repeatCount:"indefinite"},null,8,R)],8,I),o("circle",{cx:"50",cy:"50",r:"45",fill:"transparent",stroke:r.value[0],"stroke-width":"6","stroke-dasharray":"50, 66, 100, 66"},[o("animateTransform",{attributeName:"transform",type:"rotate",values:"0 50 50;-360 50 50",dur:`${n.value}s`,repeatCount:"indefinite"},null,8,A)],8,q),o("circle",{cx:"50",cy:"50",r:"38",fill:"transparent",stroke:r.value[1],"stroke-width":"1","stroke-dasharray":"5, 1"},null,8,H),(_(!0),f(V,null,z(new Array(20).fill(0),(j,y)=>(_(),f("use",{key:y,"xlink:href":`#${d}`,stroke:r.value[1],fill:Math.random()>.4?"transparent":r.value[0]},[o("animateTransform",{attributeName:"transform",type:"rotate",values:"0 50 50;360 50 50",dur:`${n.value}s`,begin:`${y*n.value/20}s`,repeatCount:"indefinite"},null,8,O)],8,L))),128)),o("circle",{cx:"50",cy:"50",r:"26",fill:"transparent",stroke:r.value[1],"stroke-width":"1","stroke-dasharray":"5, 1"},null,8,P)],4)),o("div",null,k(e.value)+k(g.value),1)])),[[i,x]])}}});const X=S(W,[["__scopeId","data-v-677d8471"]]);export{X as default};
