import{r as w,h as V}from"./echarts.dba42fd9.js";import{h as x}from"./index.44c3d648.js";import{u as y,b}from"./index.512f7100.js";import{t as v}from"./mydark.e6801489.js";import{d as S}from"./lodash-es.5f1bdab1.js";import{d as _,r as k,e as z,w as E,y as L,a5 as O,u as T,O as B,X as D}from"./@vue.a2815691.js";import"./zrender.0cec7a92.js";import"./tslib.60310f1a.js";import"./axios.744bc20e.js";import"./vue-router.c997c3e8.js";import"./pinia.6e1173f7.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./naive-ui.3474528c.js";import"./date-fns.3c009aaa.js";import"./seemly.50a99b79.js";import"./vueuc.e50d3fb2.js";import"./evtd.9eee5233.js";import"./@css-render.8efa119b.js";import"./vooks.5c35c0ee.js";import"./vdirs.9c42edfb.js";import"./@juggle.37ed2144.js";import"./css-render.d5050412.js";import"./@emotion.6322e2ae.js";import"./treemate.80cdf2c2.js";import"./date-fns-tz.851ed5df.js";import"./async-validator.fb49d0f5.js";import"./dexie.78e6a997.js";import"./lodash.f91bfcd2.js";import"./nprogress.5b68415b.js";import"./@icon-park.b1426ebe.js";const ut=_({__name:"Gauge1",props:{componentId:null,propValue:null},setup(m){const o=m;w("mydark",v);const l=k(null);let e=null,r=0;const u=y(),c=t=>{const a=t;o.propValue.datatag&&a.TagName===o.propValue.datatag&&(r=Number(a.TagValue),p())};z(()=>{d(),f()}),b("actual",c);function d(){x.post({url:o.propValue.history,data:[o.propValue.datatag]}).then(t=>{t.ErrorCode===200&&(r=Number(t.Results[0].TagValue))}).catch(t=>{console.log(t);const a=o.propValue.maxValue;r=Math.round(Math.random()*a)}).finally(()=>{p()})}const h=t=>{const a=t[0],{width:i,height:n}=a.contentRect;e==null||e.resize({width:i,height:n})},s=()=>{const t="#03b7c9",a=o.propValue.maxValue,i=o.propValue.name,n=o.propValue.unit,g=o.propValue.value;return{series:[{type:"gauge",radius:"80%",splitNumber:10,min:0,max:a,startAngle:225,endAngle:-45,axisLine:{show:!0,lineStyle:{width:2,shadowBlur:0,color:[[1,t]]}},axisTick:{show:!0,lineStyle:{color:t,width:1},length:-5,splitNumber:10},splitLine:{show:!0,length:-14,lineStyle:{color:t}},axisLabel:{distance:-20,color:t,fontSize:"14",fontWeight:"bold"},pointer:{show:!1},detail:{show:!1}},{name:i,type:"gauge",radius:"80%",startAngle:225,endAngle:-45,min:0,max:a,axisLine:{show:!0,lineStyle:{width:16,color:[[1,"rgba(255,255,255,.1)"]]}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},pointer:{show:!0,length:"105%"},detail:{show:!0,offsetCenter:[0,"100%"],fontSize:20,color:"#fff",formatter:["{value} "+(n||""),"{name|"+i+"}"].join(`
`),rich:{name:{fontSize:14,lineHeight:30,color:"#ddd"}}},itemStyle:{color:t},data:[{value:g}]}]}},p=S(()=>{const t=s();t.series[1].data[0]=r,e&&e.setOption({series:t.series})},300),f=()=>{e=V(l.value,"mydark"),e.clear(),e.setOption(s())};return u.isEditMode&&E(()=>o.propValue,()=>{e&&(e.clear(),e.setOption(s()))},{deep:!0}),L(()=>{e&&(e.clear(),e.dispose())}),(t,a)=>{const i=O("resize");return T((B(),D("div",{ref_key:"chartEl",ref:l},null,512)),[[i,h]])}}});export{ut as default};
