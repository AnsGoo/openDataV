import{r as j,h as x}from"./echarts.4f9736bc.js";import{h as N}from"./index.1f44d164.js";import{u as w,b as C}from"./index.ef2789db.js";import{t as S}from"./mydark.e6801489.js";import{d as k}from"./lodash-es.5f1bdab1.js";import{f as L,r as d,q as z,w as y,d as A,o as T,a4 as O,G as E,N as W,W as D}from"./@vue.f8650cf9.js";import"./zrender.706c9170.js";import"./tslib.34a40861.js";import"./axios.19d3e859.js";import"./vue-router.32a64423.js";import"./pinia.30c42674.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./naive-ui.2edb364b.js";import"./date-fns.3ef01b04.js";import"./seemly.5d1c4af6.js";import"./vueuc.ebfd6ddc.js";import"./evtd.79485e8d.js";import"./@css-render.7ab96087.js";import"./vooks.ee7b0837.js";import"./vdirs.8ff5d312.js";import"./@juggle.37ed2144.js";import"./css-render.d5050412.js";import"./@emotion.6322e2ae.js";import"./treemate.80cdf2c2.js";import"./async-validator.fb49d0f5.js";import"./dexie.78e6a997.js";import"./nprogress.5f640c6a.js";import"./@icon-park.f4b03c54.js";const ce=L({props:{componentId:null,propValue:null},setup(m){const e=m;j("mydark",S);const p=w(),u=d(null);let i=null;const r=d(0);z(()=>{v(),V()});const f=o=>{const a=o[0],{width:n,height:l}=a.contentRect;i==null||i.resize({width:n,height:l})},s=()=>{const o={series:[{type:"gauge",min:e.propValue.minValue,max:e.propValue.maxValue,splitNumber:t.value.splitNumber,axisLine:{lineStyle:{width:t.value.axisLine.width,color:t.value.axisLine.color}},pointer:{icon:t.value.pointer.icon,showAbove:!1,length:t.value.pointer.length,width:t.value.pointer.width,offsetCenter:t.value.pointer.offsetCenter,itemStyle:{color:t.value.pointer.color||"inherit"}},axisTick:{length:t.value.axisTick.length,lineStyle:{color:t.value.axisTick.color||"inherit",width:t.value.axisTick.width}},splitLine:{length:t.value.splitLine.length,lineStyle:{color:t.value.splitLine.color||"inherit",width:t.value.splitLine.width}},axisLabel:{show:t.value.axisLabel.show,color:t.value.axisLabel.color||"inherit",fontSize:t.value.axisLabel.fontSize,distance:t.value.axisLabel.distance},title:{offsetCenter:t.value.title.offsetCenter,fontSize:t.value.title.fontSize,color:t.value.title.color},detail:{fontSize:t.value.detail.fontSize,offsetCenter:t.value.detail.offsetCenter,valueAnimation:!0,formatter:function(a){return a+t.value.detail.unit},color:t.value.detail.color||"auto"},data:[{value:r.value,name:e.propValue.title}]}]};return t.value.startAngle!==t.value.endAngle&&(o.series[0].startAngle=t.value.startAngle,o.series[0].endAngle=t.value.endAngle),o},h=o=>{const a=o;e.propValue.datatag===a.TagName&&(r.value=Number(a.TagValue),c())},c=k(()=>{const o=s();o.series[0].data[0].value=r.value,i&&i.setOption({series:o.series})},300),v=()=>{N.post({url:e.propValue.history,data:[e.propValue.datatag]}).then(o=>{o.ErrorCode===200&&(r.value=Number(o.Results[0].TagValue))}).catch(o=>{console.log(o);const a=e.propValue.maxValue;p.isEditMode&&(r.value=Math.round(Math.random()*a))}).finally(()=>{c()})},V=()=>{i=x(u.value,"mydark"),i.clear(),i.setOption(s())};p.isEditMode&&y(()=>e.propValue,()=>{i&&(i.clear(),i.setOption(s()))},{deep:!0});const t=A(()=>({startAngle:Number(e.propValue.startAngle),endAngle:Number(e.propValue.endAngle),minValue:Number(e.propValue.minValue),maxValue:Number(e.propValue.maxValue),splitNumber:Number(e.propValue.splitNumber),axisLine:{width:Number(e.propValue.axisWidth),color:b()},pointer:{width:Number(e.propValue.pointerWidth),color:e.propValue.pointerColor,length:e.propValue.pointerLength,offsetCenter:e.propValue.pointerOffset.split(","),icon:e.propValue.pointStyle},axisLabel:{show:e.propValue.tickShow,color:e.propValue.tickFontColor,fontSize:Number(e.propValue.tickFontSize),distance:Number(e.propValue.tickDistance)},title:{offsetCenter:e.propValue.titleOffset.split(","),fontSize:Number(e.propValue.titleFontSize),color:e.propValue.titleColor},detail:{fontSize:Number(e.propValue.detailFontSize),offsetCenter:e.propValue.detailOffset.split(","),color:e.propValue.detailFontColor,unit:e.propValue.unit},splitLine:{length:Number(e.propValue.splitLength),color:e.propValue.splitColor,width:Number(e.propValue.splitWidth)},axisTick:{length:Number(e.propValue.tickLength),color:e.propValue.tickColor,width:Number(e.propValue.tickWidth)}})),b=()=>e.propValue.axisColor.split(";").map(o=>{const a=o.split(",");return[Number(a[0]),a[1]]});return C("actual",h),T(()=>{i&&(i.clear(),i.dispose())}),(o,a)=>{const n=O("resize");return E((W(),D("div",{ref:(l,g)=>{g.chartEl=l,u.value=l}},null,512)),[[n,f]])}}});export{ce as default};
