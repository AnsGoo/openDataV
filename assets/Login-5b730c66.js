import{aX as w,d as y,cn as x,ax as N,aW as b,e as I,P as u,o as L,c as S,a as m,b as o,z as i,u as r,bG as p,N as f,bD as R,aD as k,O as U,c2 as V,bI as B,W as D,ah as c,L as F,p as q,m as C,_ as K}from"./index-dfdef63a.js";const O=""+new URL("../favicon.ico",import.meta.url).href,P=""+new URL("../home.png",import.meta.url).href,W=async s=>w.post({url:"/user/login",data:s}),A=s=>(q("data-v-c27f5f89"),s=s(),C(),s),T={class:"login"},z=D('<div class="left" data-v-c27f5f89><div class="name" data-v-c27f5f89><span data-v-c27f5f89><img class="logo" src="'+O+'" alt="" data-v-c27f5f89></span><span data-v-c27f5f89> OPenDataV</span></div><img class="home" src="'+P+'" alt="" data-v-c27f5f89><div class="desc" data-v-c27f5f89><span data-v-c27f5f89>最具智能化数据可视化平台</span></div></div>',1),E={class:"right"},G=A(()=>m("div",{class:"tip"},"登录",-1)),H=y({__name:"Login",setup(s){const _=x(),v=N(),h=b(),d=I(),a=u({username:"",password:""}),g=u({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),l=async()=>{try{await d.value?.validate();const n={...a};try{const e=await W(n);if(e.status===200){await _.setToken(e.data),c.success("登录成功");const t=h.query.redirect;await v.push({path:t||"Pages"})}else c.error("登录失败")}catch{c.error("登录失败,请输入正确的账号密码")}}catch(n){F.log(n)}};return(n,e)=>(L(),S("div",T,[z,m("div",E,[o(r(B),{ref_key:"ruleFormRef",ref:d,rules:g,model:a,"show-message":!0,onSubmit:e[2]||(e[2]=V(()=>{},["prevent"]))},{default:i(()=>[G,o(r(p),{path:"username"},{default:i(()=>[o(r(f),{value:a.username,"onUpdate:value":e[0]||(e[0]=t=>a.username=t),placeholder:"请输入用户名",style:{width:"100%","min-width":"360px"}},null,8,["value"])]),_:1}),o(r(p),{path:"password"},{default:i(()=>[o(r(f),{value:a.password,"onUpdate:value":e[1]||(e[1]=t=>a.password=t),placeholder:"请输入密码",style:{width:"100%","min-width":"360px"},type:"password",onKeydown:R(l,["enter"])},null,8,["value","onKeydown"])]),_:1}),o(r(k),{type:"primary",style:{"min-width":"360px",width:"100%"},onClick:l},{default:i(()=>[U("登录")]),_:1})]),_:1},8,["rules","model"])])]))}});const X=K(H,[["__scopeId","data-v-c27f5f89"]]);export{X as default};
