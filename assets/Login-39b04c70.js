import{d as a,a$ as s,Q as e,a9 as t,r,a0 as d,o,v as l,f as i,a as n,w as c,u as p,a3 as f,aE as m,g as u,a4 as v,b0 as h,aZ as w,aa as g,ag as y,ah as _,ab as x}from"./index-40170f2c.js";import{a as b}from"./index-63f72026.js";import{N as j}from"./FormItem-a19e55a6.js";import{N as U}from"./Input-a9564eda.js";import{N as k}from"./Form-4fc3c7ac.js";const q=""+new URL("../favicon.ico",import.meta.url).href,F=""+new URL("../home.png",import.meta.url).href,I=a=>(y("data-v-c27f5f89"),a=a(),_(),a),L={class:"login"},N=h('<div class="left" data-v-c27f5f89><div class="name" data-v-c27f5f89><span data-v-c27f5f89><img class="logo" src="'+q+'" alt="" data-v-c27f5f89></span><span data-v-c27f5f89> OPenDataV</span></div><img class="home" src="'+F+'" alt="" data-v-c27f5f89><div class="desc" data-v-c27f5f89><span data-v-c27f5f89>最具智能化数据可视化平台</span></div></div>',1),R={class:"right"},K=I((()=>i("div",{class:"tip"},"登录",-1))),P=x(a({__name:"Login",setup(a){const h=s(),y=e(),_=t(),x=r(),q=d({username:"",password:""}),F=d({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),I=async()=>{try{await(x.value?.validate());const s={...q};try{const a=await(async a=>b.post({url:"/user/login",data:a}))(s);if(200===a.status){await h.setToken(a.data),w.success("登录成功");const s=_.query.redirect;await y.push({path:s||"Pages"})}else w.error("登录失败")}catch(a){w.error("登录失败,请输入正确的账号密码")}}catch(a){g.log(a)}};return(a,s)=>(o(),l("div",L,[N,i("div",R,[n(p(k),{ref_key:"ruleFormRef",ref:x,rules:F,model:q,"show-message":!0,onSubmit:s[2]||(s[2]=v((()=>{}),["prevent"]))},{default:c((()=>[K,n(p(j),{path:"username"},{default:c((()=>[n(p(U),{value:q.username,"onUpdate:value":s[0]||(s[0]=a=>q.username=a),placeholder:"请输入用户名",style:{width:"100%","min-width":"360px"}},null,8,["value"])])),_:1}),n(p(j),{path:"password"},{default:c((()=>[n(p(U),{value:q.password,"onUpdate:value":s[1]||(s[1]=a=>q.password=a),placeholder:"请输入密码",style:{width:"100%","min-width":"360px"},type:"password",onKeydown:f(I,["enter"])},null,8,["value"])])),_:1}),n(p(m),{type:"primary",style:{"min-width":"360px",width:"100%"},onClick:I},{default:c((()=>[u("登录")])),_:1})])),_:1},8,["rules","model"])])]))}}),[["__scopeId","data-v-c27f5f89"]]);export{P as default};
