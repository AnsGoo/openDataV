import{d as f,bD as y,a6 as N,a7 as x,v as b,W as u,o as I,c as L,a as _,b as o,w as n,u as r,aF as p,N as m,bE as S,Z as R,E as V,aV as k,aI as F,aN as U,H as i,L as B,bm as q,bn as C,_ as D}from"./index-70139cdd.js";import{a as E}from"./index-c2b5f845.js";const K=""+new URL("../favicon.ico",import.meta.url).href,A=""+new URL("../home.png",import.meta.url).href,H=async a=>E.post({url:"/user/login",data:a}),O=a=>(q("data-v-e6ce6d58"),a=a(),C(),a),P={class:"login"},T=U('<div class="left" data-v-e6ce6d58><div class="name" data-v-e6ce6d58><span data-v-e6ce6d58><img class="logo" src="'+K+'" alt="" data-v-e6ce6d58></span><span data-v-e6ce6d58> OPenDataV</span></div><img class="home" src="'+A+'" alt="" data-v-e6ce6d58><div class="desc" data-v-e6ce6d58><span data-v-e6ce6d58>最具智能化数据可视化平台</span></div></div>',1),W={class:"right"},M=O(()=>_("div",{class:"tip"},"登录",-1)),Z=f({__name:"Login",setup(a){const v=y(),w=N(),g=x(),c=b(),s=u({username:"",password:""}),h=u({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),l=async()=>{try{await c.value?.validate();const d={...s};try{const e=await H(d);if(e.status===200){await v.setToken(e.data),i.success("登录成功");const t=g.query.redirect;await w.push({path:t||"Pages"})}else i.error("登录失败")}catch{i.error("登录失败,请输入正确的账号密码")}}catch(d){B.log(d)}};return(d,e)=>(I(),L("div",P,[T,_("div",W,[o(r(F),{ref_key:"ruleFormRef",ref:c,rules:h,model:s,"show-message":!0,onSubmit:e[2]||(e[2]=k(()=>{},["prevent"]))},{default:n(()=>[M,o(r(p),{path:"username"},{default:n(()=>[o(r(m),{value:s.username,"onUpdate:value":e[0]||(e[0]=t=>s.username=t),placeholder:"请输入用户名",style:{width:"100%","min-width":"360px"}},null,8,["value"])]),_:1}),o(r(p),{path:"password"},{default:n(()=>[o(r(m),{value:s.password,"onUpdate:value":e[1]||(e[1]=t=>s.password=t),placeholder:"请输入密码",style:{width:"100%","min-width":"360px"},type:"password",onKeydown:S(l,["enter"])},null,8,["value","onKeydown"])]),_:1}),o(r(R),{type:"primary",style:{"min-width":"360px",width:"100%"},onClick:l},{default:n(()=>[V("登录")]),_:1})]),_:1},8,["rules","model"])])]))}});const G=D(Z,[["__scopeId","data-v-e6ce6d58"]]);export{G as default};
