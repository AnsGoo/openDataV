var k=(e,i,s)=>new Promise((l,d)=>{var h=r=>{try{f(s.next(r))}catch(g){d(g)}},_=r=>{try{f(s.throw(r))}catch(g){d(g)}},f=r=>r.done?l(r.value):Promise.resolve(r.value).then(h,_);f((s=s.apply(e,i)).next())});import{a as H,d as U}from"./pages.13f04018.js";import{a9 as q,a$ as z,aw as E,d as V,ac as K,az as j,b_ as Y,B as w,c as N,a4 as S,bx as M,bb as G,_ as J,E as Q,x as L,o as T,b as R,N as m,w as u,a as p,aP as O,b$ as $,F as W,r as X,e as Z,Y as A,L as ee,K as I,bw as B,c0 as ae,a1 as te,T as ne,U as se}from"./index.e04c72e0.js";import"./index.bba27490.js";var ie=q("ellipsis",{overflow:"hidden"},[z("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),E("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),E("cursor-pointer",`
 cursor: pointer;
 `)]);function D(e){return`${e}-ellipsis--line-clamp`}function F(e,i){return`${e}-ellipsis--cursor-${i}`}const le=Object.assign(Object.assign({},j.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}});var re=V({name:"Ellipsis",inheritAttrs:!1,props:le,setup(e,{slots:i,attrs:s}){const{mergedClsPrefixRef:l}=K(e),d=j("Ellipsis","-ellipsis",ie,Y,e,l),h=w(null),_=w(null),f=w(null),r=w(!1),g=N(()=>{const{lineClamp:a}=e,{value:n}=r;return a!==void 0?{textOverflow:"","-webkit-line-clamp":n?"":a}:{textOverflow:n?"":"ellipsis","-webkit-line-clamp":""}});function y(){let a=!1;const{value:n}=r;if(n)return!0;const{value:c}=h;if(c){const{lineClamp:b}=e;if(C(c),b!==void 0)a=c.scrollHeight<=c.offsetHeight;else{const{value:P}=_;P&&(a=P.getBoundingClientRect().width<=c.getBoundingClientRect().width)}o(c,a)}return a}const x=N(()=>e.expandTrigger==="click"?()=>{var a;const{value:n}=r;n&&((a=f.value)===null||a===void 0||a.setShow(!1)),r.value=!n}:void 0),t=()=>S("span",Object.assign({},G(s,{class:[`${l.value}-ellipsis`,e.lineClamp!==void 0?D(l.value):void 0,e.expandTrigger==="click"?F(l.value,"pointer"):void 0],style:g.value}),{ref:"triggerRef",onClick:x.value,onMouseenter:e.expandTrigger==="click"?y:void 0}),e.lineClamp?i:S("span",{ref:"triggerInnerRef"},i));function C(a){if(!a)return;const n=g.value,c=D(l.value);e.lineClamp!==void 0?v(a,c,"add"):v(a,c,"remove");for(const b in n)a.style[b]!==n[b]&&(a.style[b]=n[b])}function o(a,n){const c=F(l.value,"pointer");e.expandTrigger==="click"&&!n?v(a,c,"add"):v(a,c,"remove")}function v(a,n,c){c==="add"?a.classList.contains(n)||a.classList.add(n):a.classList.contains(n)&&a.classList.remove(n)}return{mergedTheme:d,triggerRef:h,triggerInnerRef:_,tooltipRef:f,handleClick:x,renderTrigger:t,getTooltipDisabled:y}},render(){var e;const{tooltip:i,renderTrigger:s,$slots:l}=this;if(i){const{mergedTheme:d}=this;return S(M,Object.assign({ref:"tooltipRef",placement:"top"},i,{getDisabled:this.getTooltipDisabled,theme:d.peers.Tooltip,themeOverrides:d.peerOverrides.Tooltip}),{trigger:s,default:(e=l.tooltip)!==null&&e!==void 0?e:l.default})}else return s()}}),oe="./assets/default.5fefac84.png";const ce=e=>(ne("data-v-90bfecaa"),e=e(),se(),e),ue={class:"page-list"},de=A(" \u65B0\u5EFA "),pe=["src","onClick"],fe={class:"options"},ge=ce(()=>I("span",null,"\u7F16\u8F91",-1)),ve=V({__name:"Pages",setup(e){const i=te(),s=w(!1),l=w([]),d=[{key:"preview",label:"\u9884\u89C8",icon:h("preview-open")},{key:"delete",label:"\u5220\u9664",icon:h("delete-one")}];Q(()=>k(this,null,function*(){yield _()}));function h(t){return()=>S(B,{name:t})}const _=()=>k(this,null,function*(){try{const t=yield H();t.data&&(l.value=t.data)}catch(t){L.error("\u9875\u9762\u6570\u636E\u8BF7\u6C42\u5F02\u5E38")}}),f=(t,C)=>k(this,null,function*(){if(t==="preview")i.push({name:"PageView",params:{index:C.id}});else if(t==="delete")try{yield U(C.id),yield _()}catch(o){console.log((o==null?void 0:o.message)||o),L.error("\u5220\u9664\u5931\u8D25")}}),r=()=>{if(s.value)return!1;s.value=!0,i.push({name:"Create"})},g=t=>{if(s.value)return!1;s.value=!0,i.push({name:"Editor",params:{index:t.id}})},y=t=>{i.push({name:"PageView",params:{index:t.id}})},x=t=>t||oe;return(t,C)=>(T(),R("div",ue,[m(p($),null,{default:u(()=>[m(p(O),{type:"primary",loading:s.value,onClick:r},{default:u(()=>[de]),_:1},8,["loading"])]),_:1}),(T(!0),R(W,null,X(l.value,o=>(T(),R("div",{class:"card",key:o.id},[(T(),Z(p($),{key:o.id,hoverable:""},{header:u(()=>[m(p(re),{style:{"max-width":"8rem"}},{default:u(()=>[A(ee(o.name),1)]),_:2},1024)]),action:u(()=>[I("div",fe,[m(p(M),{trigger:"hover"},{trigger:u(()=>[m(p(O),{quaternary:"",onClick:v=>g(o)},{icon:u(()=>[m(p(B),{name:"editor"})]),_:2},1032,["onClick"])]),default:u(()=>[ge]),_:2},1024),m(p(ae),{trigger:"hover",onSelect:v=>f(v,o),options:d},{default:u(()=>[m(p(B),{name:"setting"})]),_:2},1032,["onSelect"])])]),default:u(()=>[I("img",{src:x(o.thumbnail),class:"image",onClick:v=>y(o),alt:""},null,8,pe)]),_:2},1024))]))),128))]))}});var we=J(ve,[["__scopeId","data-v-90bfecaa"]]);export{we as default};
