var k=(e,i,s)=>new Promise((l,d)=>{var h=o=>{try{f(s.next(o))}catch(g){d(g)}},_=o=>{try{f(s.throw(o))}catch(g){d(g)}},f=o=>o.done?l(o.value):Promise.resolve(o.value).then(h,_);f((s=s.apply(e,i)).next())});import{a as A,d as H}from"./pages.608008bc.js";import{a9 as q,a$ as z,aw as N,d as V,ac as K,az as j,bZ as Y,B as w,c as L,a4 as I,bw as M,bb as Z,_ as G,E as J,x as P,o as T,b as S,N as m,w as u,a as p,aP as O,b_ as $,F as Q,r as W,e as X,Y as U,L as ee,K as B,bv as R,b$ as te,a1 as ae,T as ne,U as se}from"./index.530c5dc4.js";import"./index.52c73ba8.js";var ie=q("ellipsis",{overflow:"hidden"},[z("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),N("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),N("cursor-pointer",`
 cursor: pointer;
 `)]);function D(e){return`${e}-ellipsis--line-clamp`}function F(e,i){return`${e}-ellipsis--cursor-${i}`}const le=Object.assign(Object.assign({},j.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}});var oe=V({name:"Ellipsis",inheritAttrs:!1,props:le,setup(e,{slots:i,attrs:s}){const{mergedClsPrefixRef:l}=K(e),d=j("Ellipsis","-ellipsis",ie,Y,e,l),h=w(null),_=w(null),f=w(null),o=w(!1),g=L(()=>{const{lineClamp:t}=e,{value:n}=o;return t!==void 0?{textOverflow:"","-webkit-line-clamp":n?"":t}:{textOverflow:n?"":"ellipsis","-webkit-line-clamp":""}});function y(){let t=!1;const{value:n}=o;if(n)return!0;const{value:c}=h;if(c){const{lineClamp:C}=e;if(b(c),C!==void 0)t=c.scrollHeight<=c.offsetHeight;else{const{value:E}=_;E&&(t=E.getBoundingClientRect().width<=c.getBoundingClientRect().width)}r(c,t)}return t}const x=L(()=>e.expandTrigger==="click"?()=>{var t;const{value:n}=o;n&&((t=f.value)===null||t===void 0||t.setShow(!1)),o.value=!n}:void 0),a=()=>I("span",Object.assign({},Z(s,{class:[`${l.value}-ellipsis`,e.lineClamp!==void 0?D(l.value):void 0,e.expandTrigger==="click"?F(l.value,"pointer"):void 0],style:g.value}),{ref:"triggerRef",onClick:x.value,onMouseenter:e.expandTrigger==="click"?y:void 0}),e.lineClamp?i:I("span",{ref:"triggerInnerRef"},i));function b(t){if(!t)return;const n=g.value,c=D(l.value);e.lineClamp!==void 0?v(t,c,"add"):v(t,c,"remove");for(const C in n)t.style[C]!==n[C]&&(t.style[C]=n[C])}function r(t,n){const c=F(l.value,"pointer");e.expandTrigger==="click"&&!n?v(t,c,"add"):v(t,c,"remove")}function v(t,n,c){c==="add"?t.classList.contains(n)||t.classList.add(n):t.classList.contains(n)&&t.classList.remove(n)}return{mergedTheme:d,triggerRef:h,triggerInnerRef:_,tooltipRef:f,handleClick:x,renderTrigger:a,getTooltipDisabled:y}},render(){var e;const{tooltip:i,renderTrigger:s,$slots:l}=this;if(i){const{mergedTheme:d}=this;return I(M,Object.assign({ref:"tooltipRef",placement:"top"},i,{getDisabled:this.getTooltipDisabled,theme:d.peers.Tooltip,themeOverrides:d.peerOverrides.Tooltip}),{trigger:s,default:(e=l.tooltip)!==null&&e!==void 0?e:l.default})}else return s()}}),re="./assets/default.5fefac84.png";const ce=e=>(ne("data-v-c511aa46"),e=e(),se(),e),ue={class:"page-list"},de=U(" \u65B0\u5EFA "),pe=["src","onClick"],fe={class:"options"},ge=ce(()=>B("span",null,"\u7F16\u8F91",-1)),ve=V({__name:"Pages",setup(e){const i=ae(),s=w(!1),l=w([]),d=[{key:"preview",label:"\u9884\u89C8",icon:h("preview-open")},{key:"delete",label:"\u5220\u9664",icon:h("delete-one")}];J(()=>k(this,null,function*(){yield _()}));function h(a){return()=>I(R,{name:a})}const _=()=>k(this,null,function*(){try{const a=yield A();a&&(l.value=a)}catch(a){P.error("\u9875\u9762\u6570\u636E\u8BF7\u6C42\u5F02\u5E38")}}),f=(a,b)=>k(this,null,function*(){if(a==="preview")i.push({name:"PageView",params:{index:b.id}});else if(a==="delete")try{yield H(b.id),yield _()}catch(r){console.log((r==null?void 0:r.message)||r),P.error("\u5220\u9664\u5931\u8D25")}}),o=()=>{if(s.value)return!1;s.value=!0,i.push({name:"Create"})},g=a=>{if(s.value)return!1;s.value=!0,i.push({name:"Editor",params:{index:a.id}})},y=a=>{i.push({name:"PageView",params:{index:a.id}})},x=a=>a||re;return(a,b)=>(T(),S("div",ue,[m(p($),null,{default:u(()=>[m(p(O),{type:"primary",loading:s.value,onClick:o},{default:u(()=>[de]),_:1},8,["loading"])]),_:1}),(T(!0),S(Q,null,W(l.value,r=>(T(),S("div",{class:"card",key:r.id},[(T(),X(p($),{key:r.id,hoverable:""},{header:u(()=>[m(p(oe),{style:{"max-width":"8rem"}},{default:u(()=>[U(ee(r.name),1)]),_:2},1024)]),action:u(()=>[B("div",fe,[m(p(M),{trigger:"hover"},{trigger:u(()=>[m(p(O),{quaternary:"",onClick:v=>g(r)},{icon:u(()=>[m(p(R),{name:"editor"})]),_:2},1032,["onClick"])]),default:u(()=>[ge]),_:2},1024),m(p(te),{trigger:"hover",onSelect:v=>f(v,r),options:d},{default:u(()=>[m(p(R),{name:"setting"})]),_:2},1032,["onSelect"])])]),default:u(()=>[B("img",{src:x(r.thumbnail),class:"image",onClick:v=>y(r),alt:""},null,8,pe)]),_:2},1024))]))),128))]))}});var we=G(ve,[["__scopeId","data-v-c511aa46"]]);export{we as default};
