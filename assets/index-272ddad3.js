import{a as t}from"./index-63f72026.js";import{g as a,N as e,S as s,D as i,X as n,i as o,m as l}from"./DynamicExtendContent-0f0b8eac.js";import{N as d}from"./FormItem-a19e55a6.js";import{d as r,r as c,a0 as u,D as p,p as h,am as m,o as f,v as y,a as g,w as C,u as v,aE as N,g as w,e as O,aF as S,F as _,a6 as b,c as k,af as D}from"./index-40170f2c.js";import{N as E}from"./Input-a9564eda.js";const I="QUICK";const T=class{id;title;constructor(t){const{id:a}=t||{};this.id=a}toJSON(){return{options:{id:this.id||"",title:this.title},type:"STATIC"}}static dumps(t,a=!1){return a?JSON.stringify(t,null,"\t"):JSON.stringify(t)}static loads(t){return JSON.parse(t)}async connect(t,a){t(await this.getRespData(a))}async getRespData(t){const e={status:"SUCCESS",data:"",id:"",title:""};if(!this.id)return e;try{const t=await a(this.id);if(t.status<400){const a=t.data;this.title=a.name,e.data=a.data}}catch(s){e.status="FAILED",e.data=s.stack||s.message}return e.id=this.id,e.title=this.title||"",e}async debug(t){this.connect(t)}close(){}},x={type:I,name:"快速数据",component:b(r({__name:"Pane",props:{slotter:{},handler:{}},setup(t){const a=t,i=c(!1),n=u({id:"",title:"",data:""}),o=p((()=>a.slotter.dataConfig.dataInstance));h((async()=>{await l()}));const l=async()=>{const t=a.slotter.dataConfig;if(t&&t.type===I){const t=a.slotter.dataConfig?.dataInstance,{options:e}=t.toJSON();n.id=e.id,n.title=e.title;const s=t=>{n.id=t.id,n.title=t.title,n.data=t.data};t.debug(s)}else r()},r=()=>{if(!a.handler)return;const t={type:I,dataInstance:new a.handler({id:n.id})};a.slotter.changeDataConfig(t)},b=(t,a)=>{n.id=t,n.title=a,r()};return m((()=>a.slotter),(async()=>{a.slotter&&await l()}),{immediate:!0}),(t,a)=>(f(),y(_,null,[g(v(d),{key:"title",label:"快速数据"},{default:C((()=>[g(v(e),null,{default:C((()=>[g(v(E),{value:n.title,"onUpdate:value":a[0]||(a[0]=t=>n.title=t),readonly:!0,placeholder:"编辑请点击",onClick:a[1]||(a[1]=t=>i.value=!0)},null,8,["value"]),g(v(N),{type:"primary",onClick:a[2]||(a[2]=t=>i.value=!0)},{default:C((()=>[w(" 编辑 ")])),_:1})])),_:1})])),_:1}),g(v(S),{show:i.value,"onUpdate:show":a[5]||(a[5]=t=>i.value=t),"display-directive":"show"},{default:C((()=>[g(v(O),{style:{width:"800px"},title:"快速数据",bordered:!1,size:"small",role:"dialog","aria-modal":"true",closable:"",onClose:a[4]||(a[4]=t=>i.value=!1)},{default:C((()=>[g(s,{options:n,"onUpdate:options":a[3]||(a[3]=t=>n=t),mode:"use","data-instance":o.value,onDataChange:b},null,8,["options","data-instance"])])),_:1})])),_:1},8,["show"])],64))}})),handler:T,useTo:"COMPONENT"},R=r({__name:"Pane",props:{slotter:{},handler:{}},setup:t=>(t,a)=>(f(),k(v(n),{slotter:t.slotter,handler:t.handler},{default:C((()=>[g(i)])),_:1},8,["slotter","handler"]))});const j={type:"REST",name:"动态数据",component:b(R),handler:class extends l{constructor(a){super(a,t)}},useTo:["COMPONENT","GLOBAL"],getdefaultOption:()=>({method:o.GET,url:"/getRiskArea",headers:[{key:"",value:"",disable:!1,id:D()}],params:[{key:"",value:"",disable:!1,id:D()}],data:[{key:"",value:"",disable:!1,id:D()}],otherConfig:{isRepeat:!1,interval:1e3}})};export{x as Q,j as R};
