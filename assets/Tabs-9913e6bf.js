import{d as A,e as y,V as F,aw as L,bR as p,v as w,o as m,c as f,a as U,F as W,f as j,g as v,n as b,C as H,b as k,u as S,m as K,l as O,w as X,q as Y,s as J,bS as D,bT as Q,j as Z,t as x,bU as ee,_ as te}from"./index-70139cdd.js";import{u as oe}from"./index-76257893.js";import{S as ne}from"./clipBoard-b544987d.js";const ae=["onClick"],le=A({__name:"Tabs",props:{component:{}},setup(z){const i=z,V=D.config,_=Q(D.component),u=Z(),N=y(()=>u.isEditMode),{propValue:a}=oe(i.component),T=y(()=>a.label.items||[]);F(()=>a.label.mode,()=>{const e=(a.label.items||[]).length,g=a.label.mode||"horizontal",t=a.style.height,{top:l,left:c,width:h,height:r}=i.component.style;for(let s=0;s<e;s++)if(i.component.subComponents[s]){const o=i.component.subComponents[s];g==="horizontal"?(o.changeStyle(["position","top"],l+t),o.changeStyle(["position","left"],c)):(o.changeStyle(["position","top"],l),o.changeStyle(["position","left"],c+t)),o.groupStyle={gleft:p((o.positionStyle.left-c)/h),gtop:p((o.positionStyle.top-l)/r),gwidth:p(o.positionStyle.width/h),gheight:p(o.positionStyle.height/r),grotate:o.groupStyle.grotate||0}}else{const o=new V(L());g==="horizontal"?o.changeStyle(["position"],{top:l+t,left:c,width:h,height:r-t}):o.changeStyle(["position"],{top:l,left:c+t,width:h-t,height:r}),o.parent=i.component,o.groupStyle={gleft:0,gtop:p((o.positionStyle.top-l)/r),gwidth:100,gheight:p(o.positionStyle.height/r),grotate:i.component.positionStyle.rotate||0},i.component.updateChild(s,o)}},{immediate:!0});const B=e=>e.groupStyle?.gheight?x(e.groupStyle,["gtop","gleft","gwidth","gheight","grotate"]):x(e.style,["top","left","width","height","rotate"]),E=y(()=>u.curComponent),d=w(0),M=e=>!(u.isEditMode&&!e),R=e=>{d.value=e},$=e=>d.value===e,C=y(()=>a.label.mode?a.label.mode:"horizontal"),I=w(null),n=y(()=>i.component.subComponents[d.value]),G=y(()=>({[a.label.mode==="horizontal"?"height":"width"]:`${a.style.height}px`,color:a.style.color,fontSize:`${a.style.fontSize}px`,weight:`${a.style.fontWeight}px`,family:`${a.style.fontWeight}px`})),P=e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},q=async e=>{e.preventDefault(),e.stopPropagation();const g=e.dataTransfer.getData("componentName");if(g){const t=new u.components[g];t.dataMode===ee.UNIVERSAL&&t.loadDemoData();const{top:l,left:c}=document.querySelector("#editor").getBoundingClientRect(),h=(e.pageY-l)/u.scale,r=(e.pageX-c)/u.scale,s=i.component.subComponents[d.value].style;t.changeStyle(["position","top"],h),t.changeStyle(["position","left"],r),t.groupStyle={gleft:p((t.positionStyle.left-s.left)/s.width),gtop:p((t.positionStyle.top-s.top)/s.height),gwidth:p(t.positionStyle.width/s.width),gheight:p(t.positionStyle.height/s.height),grotate:t.positionStyle.rotate||0},t.parent=i.component,i.component.subComponents[d.value].appendChild(t)}};return(e,g)=>(m(),f("div",{class:v(["dv-tabs",C.value])},[U("div",{class:v(["tabs-nav",C.value])},[(m(!0),f(W,null,j(T.value,(t,l)=>(m(),f("div",{key:l,class:v(["tabs-tab",{active:$(l),[C.value]:!0}]),style:b(G.value),onClick:c=>R(l)},H(t),15,ae))),128))],2),N.value?(m(),f("div",{key:1,ref_key:"contentRef",ref:I,class:"tabs-content",onDrop:q,onDragover:P},[M(n.value.display||!1)?(m(),O(S(ne),{key:0,id:"shape"+n.value.id,defaultStyle:n.value.style,style:b(B(n.value)),active:n.value.id===(E.value||{}).id,info:n.value,class:v({lock:n.value.locked}),isInner:!0,index:d.value},{default:X(()=>[k(S(_),{id:"component"+n.value.id,class:"component",style:b(S(Y)(n.value)),component:n.value},null,8,["id","style","component"])]),_:1},8,["id","defaultStyle","style","active","info","class","index"])):J("",!0)],544)):(m(),f("div",{key:0,ref_key:"content",ref:n,class:"tabs-content"},[k(S(_),{id:"component"+n.value.id,class:"component",style:b(S(K)(n.value)),component:n.value},null,8,["id","style","component"])],512))],2))}});const ce=te(le,[["__scopeId","data-v-075f8765"]]);export{ce as default};
