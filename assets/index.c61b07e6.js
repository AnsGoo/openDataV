var p=Object.defineProperty,l=Object.defineProperties;var m=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var u=(s,e,t)=>e in s?p(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,r=(s,e)=>{for(var t in e||(e={}))f.call(e,t)&&u(s,t,e[t]);if(c)for(var t of c(e))k.call(e,t)&&u(s,t,e[t]);return s},n=(s,e)=>l(s,m(e));var h=(s,e,t)=>(u(s,typeof e!="symbol"?e+"":e,t),t);import{bo as q}from"./.pnpm.ec28eaac.js";import{C as x,k as H,u as P}from"./index.3aefe4c7.js";const a={baseURL:"",timeout:1e4,headers:{"Content-Type":x.JSON}};function T(s){if(!s)return a;const{headers:e}=s;return e&&typeof e=="object"&&(a.headers=r(r({},a.headers),e)),r(r({},S(s,"headers")),a)}function S(s,e){return Object.keys(s).filter(t=>!e.includes(t)).reduce((t,o)=>(t[o]=s[o],t),{})}class d{constructor(e=!1){h(this,"axiosInstance");h(this,"isBlock",!1);this.axiosInstance=q.create(T()),this.httpHookRequest(),this.httpHookResponse(),this.isBlock=e}httpHookRequest(){this.axiosInstance.interceptors.request.use(e=>{const o=H().userToken;o&&e.headers&&(e.headers.authorization=o);const i=P();return this.isBlock&&i.isEditMode?Promise.reject("http is disable where the mode is edit"):e},e=>Promise.reject(e))}httpHookResponse(){this.axiosInstance.interceptors.response.use(e=>e.data,e=>{const{response:t}=e;return t&&this.errorHandler(t.status,t.data.message),Promise.reject(e)})}errorHandler(e,t){console.log(e,t)}get(e){return this.request(n(r({},e),{method:"GET"}))}post(e){return this.request(n(r({},e),{method:"POST"}))}put(e){return this.request(n(r({},e),{method:"PUT"}))}patch(e){return this.request(n(r({},e),{method:"PATCH"}))}delete(e){return this.request(n(r({},e),{method:"DELETE"}))}request(e){return new Promise((t,o)=>{this.axiosInstance.request(e).then(i=>{t(i)}).catch(i=>{o(i)})})}}const j=new d(!0),I=new d(!1);export{I as a,j as h};
