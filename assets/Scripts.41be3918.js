var y=(h,d,e)=>new Promise((p,u)=>{var v=i=>{try{l(e.next(i))}catch(f){u(f)}},c=i=>{try{l(e.throw(i))}catch(f){u(f)}},l=i=>i.done?p(i.value):Promise.resolve(i.value).then(v,c);l((e=e.apply(h,d)).next())});import{N as M,T as V}from"./Toolbar.ccad5f6c.js";import{j as U,p as Y,d as q,a as $,b as z,v as L,c as Z,u as Q,N as X,g as ee}from"./View.6aed127a.js";import{d as F,b0 as D,K as te,r as _,B as R,i as k,l as ae,O as j,o as b,G as w,H as s,b as g,I as a,n as se,t as T,u as t,aN as ne,_ as B,aO as W,a_ as H,A as C,N as I,aZ as oe,b3 as le,M as N,a as ue,c as ce,F as ie,e as re,f as de,aR as pe,aS as P,w as _e,aU as fe,q as ve,aT as me}from"./index.b2f7e009.js";import{e as ye,a as K,N as O}from"./Editor.c50a59a0.js";import{S as G}from"./enums.27e2d34b.js";import{u as ge,e as he}from"./useEventBus.c205bfc7.js";import{N as be}from"./li.2a328606.js";import{N as Se}from"./Scrollbar.0a45a6f0.js";import"./LogoView.d46e0d19.js";const Ne={class:"buttons"},we={class:"footer"},De=F({__name:"Editor",props:{data:{default:()=>({code:"",type:D.Javascript})},config:{default:()=>({height:"600px",tabSize:4,indentWithTab:!0,autofocus:!0,disabled:!1})},mode:{default:"use"}},emits:["update:data","change"],setup(h,{emit:d}){const e=h,p=te(),u=_(!0),v=_(!1),c={Javascript:U,Python:Y},l=R(e.data),i=()=>{d("update:data",l),d("change",l)},f=k(()=>Object.keys(D).map(r=>({label:r,value:r}))),A=_(D.Javascript),E=k(()=>c[A.value]||U),o=_(null),n=()=>{const r=o.value.handleRedo;r&&r()},m=()=>{const r=o.value.handleUndo;r&&r()};return ae(()=>e.data,()=>{e.data&&(l.code=e.data.code,l.type=e.data.type)}),(r,S)=>{const J=j("icon-park");return b(),w(t(ye),{ref_key:"cm",ref:o,code:l.code,"onUpdate:code":[S[2]||(S[2]=x=>l.code=x),i],language:t(E),config:h.config,theme:t(p).darkTheme?"dark":"light"},{"tool-bar":s(()=>[g("div",null,[g("div",Ne,[a(J,{class:"item button",name:"back",onClick:m}),a(J,{class:"item button",name:"next",onClick:n})])])]),footer:s(()=>[g("div",we,[g("div",{class:se(["saved-status",u.value?"save":"unsave"])},T(u.value?"\u5DF2\u4FDD\u5B58":"\u672A\u4FDD\u5B58"),3),g("div",{class:"lang",onClick:S[1]||(S[1]=x=>v.value=!0)},[a(t(ne),{value:l.type,"onUpdate:value":[S[0]||(S[0]=x=>l.type=x),i],options:t(f),class:"item language",size:"tiny",style:{width:"110px"}},null,8,["value","options"])])])]),_:1},8,["code","language","config","theme"])}}});const Ce=B(De,[["__scopeId","data-v-50023eb2"]]),xe={class:"static-data"},ke=F({__name:"Conetent",setup(h){const d=_({height:"300px",tabSize:4,indentWithTab:!0,autofocus:!0,disabled:!1}),e=R({id:"",title:"",code:"",type:D.Javascript}),p=_(JSON.stringify({},null,"	")),u=o=>{p.value=o},v=o=>y(this,null,function*(){e.code=o.code,e.type=o.type});ge(G.SRCIPT_KEY,o=>y(this,null,function*(){yield f(o)}));const c=_(""),l=k(()=>({code:e.code,type:e.type})),i=()=>{const o=e.code?le(e.type,e.code,["resp","options"],!1):void 0;if(o&&o.handler)try{c.value=JSON.stringify(o.handler(JSON.parse(p.value),{}),null,"	")}catch(n){c.value=n.message||n}else c.value=JSON.stringify(e.code,null,"	")},f=o=>y(this,null,function*(){try{const n=yield q(o);if(n.status===200){const m=n.data;e.id=m.id,e.title=m.name,e.code=m.code,e.type=m.type}}catch(n){console.log(n||n.message)}}),A=()=>y(this,null,function*(){try{const o=yield Z({code:e.code,name:e.title||"\u672A\u547D\u540D",type:e.type});if(o.status===201){const n=o.data;e.id=n.id,e.title=n.name,e.code=n.code,e.type=n.type,N.success("\u6570\u636E\u4FDD\u5B58\u6210\u529F")}else N.warning("\u6570\u636E\u4FDD\u5B58\u5931\u8D25")}catch(o){N.warning("\u6570\u636E\u4FDD\u5B58\u5931\u8D25")}}),E=()=>y(this,null,function*(){try{(yield Q(e.id,{code:e.code,name:e.title||"\u672A\u547D\u540D",type:e.type})).status===200?N.success("\u6570\u636E\u66F4\u65B0\u6210\u529F"):N.warning("\u6570\u636E\u66F4\u65B0\u5931\u8D25")}catch(o){N.warning("\u6570\u636E\u66F4\u65B0\u5931\u8D25")}});return(o,n)=>{const m=j("IconPark");return b(),w(t(I),null,{default:s(()=>[g("div",xe,[a(t(W),{value:e.title,"onUpdate:value":n[0]||(n[0]=r=>e.title=r),class:"title"},{prefix:s(()=>[a(m,{name:"code"})]),_:1},8,["value"]),a(t($),null,{default:s(()=>[a(t(z),{class:"save"},{default:s(()=>[a(t(H),{type:"success",onClick:i},{default:s(()=>[C("\u8FD0\u884C")]),_:1})]),_:1})]),_:1}),a(t($),null,{default:s(()=>[a(t(z),{class:"save"},{default:s(()=>[a(t(H),{onClick:n[1]||(n[1]=r=>e.id?E():A())},{default:s(()=>[C("\u4FDD\u5B58")]),_:1})]),_:1})]),_:1})]),a(t(I),null,{default:s(()=>[a(t(K),null,{default:s(()=>[a(t(O),{name:"\u811A\u672C"},{default:s(()=>[a(Ce,{data:t(l),class:"content",config:d.value,"onUpdate:data":v},null,8,["data","config"])]),_:1}),a(t(O),{name:"\u5165\u53C2"},{default:s(()=>[a(t(L),{content:p.value,"onUpdate:content":[n[2]||(n[2]=r=>p.value=r),u],class:"content",config:d.value},null,8,["content","config"])]),_:1})]),_:1}),a(t(oe),{"title-placement":"left"},{default:s(()=>[C(" \u8F93\u51FA ")]),_:1}),a(t(L),{content:c.value,"onUpdate:content":n[3]||(n[3]=r=>c.value=r),class:"content",disable:!0,config:d.value},null,8,["content","config"])]),_:1})]),_:1})}}});const Fe=B(ke,[["__scopeId","data-v-3a468a2b"]]),Be={class:"rest-detail"},Ae=F({__name:"History",setup(h){const d=_([]),e=()=>y(this,null,function*(){try{const u=yield ee();u.status===200&&(d.value=u.data)}catch(u){console.log(u||u.message)}}),p=u=>{he.emit(G.SRCIPT_KEY,u)};return ue(()=>y(this,null,function*(){yield e()})),(u,v)=>(b(),w(t(I),{title:"\u811A\u672C",size:"small"},{default:s(()=>[a(t(W),{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u6761\u4EF6"}),a(t(K),null,{default:s(()=>[a(t(O),{name:"\u811A\u672C\u5217\u8868"},{default:s(()=>[a(t(M),{"align-text":""},{default:s(()=>[(b(!0),ce(ie,null,re(d.value,c=>(b(),w(t(be),{key:c.id,class:"data-item",onClick:l=>p(c.id)},{default:s(()=>[g("div",Be,[g("div",null,[a(t(X),{type:"success",style:{"font-weight":"800"}},{default:s(()=>[C(T(c.type===t(D).Javascript?"JS":"Py"),1)]),_:2},1024),C(" "+T(c.name),1)])])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}});const Ee=B(Ae,[["__scopeId","data-v-bdd377bb"]]),Te=F({__name:"Scripts",setup(h){const d=_(!1),e=_(0),p=_(0),u=k(()=>({width:e.value+"px",height:p.value+"px"})),v=c=>{const{width:l,height:i}=c.contentRect;e.value=l,p.value=i};return(c,l)=>{const i=de("resize");return b(),w(t(P),{class:"home"},{default:s(()=>[a(t(pe),{class:"header"},{default:s(()=>[a(t(V))]),_:1}),a(t(P),{"has-sider":"","sider-placement":"right",class:"main"},{default:s(()=>[_e((b(),w(t(fe),{class:"content"},{default:s(()=>[a(t(Se),{"x-scrollable":"",style:ve(t(u))},{default:s(()=>[a(Fe)]),_:1},8,["style"])]),_:1})),[[i,v]]),a(t(me),{class:"right",width:"240",collapsed:d.value,"native-scrollbar":!1,bordered:"","collapsed-width":35,"collapse-mode":"width","show-trigger":"arrow-circle",onCollapse:l[0]||(l[0]=f=>d.value=!0),onExpand:l[1]||(l[1]=f=>d.value=!1)},{default:s(()=>[a(Ee)]),_:1},8,["collapsed"])]),_:1})]),_:1})}}});const je=B(Te,[["__scopeId","data-v-fa45ebe4"]]);export{je as default};
