import{aR as h,d as y,co as x,aw as N,aV as b,e as L,P as u,o as R,c as S,a as m,b as o,z as i,u as r,bz as p,N as f,bv as I,aF as V,O as k,c8 as B,bB as F,W as U,ag as c,L as q,p as C,m as K,_ as O}from"./index-3ca9a95a.js";const P=""+new URL("../favicon.ico",import.meta.url).href,z=""+new URL("../home.png",import.meta.url).href,A=async s=>h.post({url:"/user/login",data:s}),D=s=>(C("data-v-c27f5f89"),s=s(),K(),s),T={class:"login"},W=U('<div class="left" data-v-c27f5f89><div class="name" data-v-c27f5f89><span data-v-c27f5f89><img class="logo" src="'+P+'" alt="" data-v-c27f5f89></span><span data-v-c27f5f89> OPenDataV</span></div><img class="home" src="'+z+'" alt="" data-v-c27f5f89><div class="desc" data-v-c27f5f89><span data-v-c27f5f89>最具智能化数据可视化平台</span></div></div>',1),E={class:"right"},H=D(()=>m("div",{class:"tip"},"登录",-1)),M=y({__name:"Login",setup(s){const _=x(),v=N(),g=b(),d=L(),a=u({username:"",password:""}),w=u({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),l=async()=>{try{await d.value?.validate();const n={...a};try{const e=await A(n);if(e.status===200){await _.setToken(e.data),c.success("登录成功");const t=g.query.redirect;await v.push({path:t||"Pages"})}else c.error("登录失败")}catch{c.error("登录失败,请输入正确的账号密码")}}catch(n){q.log(n)}};return(n,e)=>(R(),S("div",T,[W,m("div",E,[o(r(F),{ref_key:"ruleFormRef",ref:d,rules:w,model:a,"show-message":!0,onSubmit:e[2]||(e[2]=B(()=>{},["prevent"]))},{default:i(()=>[H,o(r(p),{path:"username"},{default:i(()=>[o(r(f),{value:a.username,"onUpdate:value":e[0]||(e[0]=t=>a.username=t),placeholder:"请输入用户名",style:{width:"100%","min-width":"360px"}},null,8,["value"])]),_:1}),o(r(p),{path:"password"},{default:i(()=>[o(r(f),{value:a.password,"onUpdate:value":e[1]||(e[1]=t=>a.password=t),placeholder:"请输入密码",style:{width:"100%","min-width":"360px"},type:"password",onKeydown:I(l,["enter"])},null,8,["value","onKeydown"])]),_:1}),o(r(V),{type:"primary",style:{"min-width":"360px",width:"100%"},onClick:l},{default:i(()=>[k("登录")]),_:1})]),_:1},8,["rules","model"])])]))}});const G=O(M,[["__scopeId","data-v-c27f5f89"]]);export{G as default};
