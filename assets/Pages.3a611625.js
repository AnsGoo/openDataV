var x=(e,i,s)=>new Promise((l,p)=>{var h=o=>{try{g(s.next(o))}catch(m){p(m)}},_=o=>{try{g(s.throw(o))}catch(m){p(m)}},g=o=>o.done?l(o.value):Promise.resolve(o.value).then(h,_);g((s=s.apply(e,i)).next())});import{a as H,d as q}from"./pages.96ba66a2.js";import{a4 as z,a8 as U,a5 as E,d as A,a9 as G,aa as V,cz as K,r as w,i as L,C as R,b7 as M,Z as W,aW as Z,a as J,M as O,o as T,c as S,I as f,H as u,u as d,a_ as I,A as D,N as F,F as Q,e as X,G as Y,t as ee,b as N,aK as B,cA as ae,p as te,j as ne,_ as se}from"./index.b2f7e009.js";const ie=z("ellipsis",{overflow:"hidden"},[U("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),E("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),E("cursor-pointer",`
 cursor: pointer;
 `)]);function $(e){return`${e}-ellipsis--line-clamp`}function j(e,i){return`${e}-ellipsis--cursor-${i}`}const le=Object.assign(Object.assign({},V.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),oe=A({name:"Ellipsis",inheritAttrs:!1,props:le,setup(e,{slots:i,attrs:s}){const{mergedClsPrefixRef:l}=G(e),p=V("Ellipsis","-ellipsis",ie,K,e,l),h=w(null),_=w(null),g=w(null),o=w(!1),m=L(()=>{const{lineClamp:a}=e,{value:n}=o;return a!==void 0?{textOverflow:"","-webkit-line-clamp":n?"":a}:{textOverflow:n?"":"ellipsis","-webkit-line-clamp":""}});function b(){let a=!1;const{value:n}=o;if(n)return!0;const{value:c}=h;if(c){const{lineClamp:C}=e;if(y(c),C!==void 0)a=c.scrollHeight<=c.offsetHeight;else{const{value:P}=_;P&&(a=P.getBoundingClientRect().width<=c.getBoundingClientRect().width)}r(c,a)}return a}const k=L(()=>e.expandTrigger==="click"?()=>{var a;const{value:n}=o;n&&((a=g.value)===null||a===void 0||a.setShow(!1)),o.value=!n}:void 0),t=()=>R("span",Object.assign({},W(s,{class:[`${l.value}-ellipsis`,e.lineClamp!==void 0?$(l.value):void 0,e.expandTrigger==="click"?j(l.value,"pointer"):void 0],style:m.value}),{ref:"triggerRef",onClick:k.value,onMouseenter:e.expandTrigger==="click"?b:void 0}),e.lineClamp?i:R("span",{ref:"triggerInnerRef"},i));function y(a){if(!a)return;const n=m.value,c=$(l.value);e.lineClamp!==void 0?v(a,c,"add"):v(a,c,"remove");for(const C in n)a.style[C]!==n[C]&&(a.style[C]=n[C])}function r(a,n){const c=j(l.value,"pointer");e.expandTrigger==="click"&&!n?v(a,c,"add"):v(a,c,"remove")}function v(a,n,c){c==="add"?a.classList.contains(n)||a.classList.add(n):a.classList.contains(n)&&a.classList.remove(n)}return{mergedTheme:p,triggerRef:h,triggerInnerRef:_,tooltipRef:g,handleClick:k,renderTrigger:t,getTooltipDisabled:b}},render(){var e;const{tooltip:i,renderTrigger:s,$slots:l}=this;if(i){const{mergedTheme:p}=this;return R(M,Object.assign({ref:"tooltipRef",placement:"top"},i,{getDisabled:this.getTooltipDisabled,theme:p.peers.Tooltip,themeOverrides:p.peerOverrides.Tooltip}),{trigger:s,default:(e=l.tooltip)!==null&&e!==void 0?e:l.default})}else return s()}}),re=""+new URL("default.5fefac84.png",import.meta.url).href,ce=e=>(te("data-v-a9af6cab"),e=e(),ne(),e),ue={class:"page-list"},de=["src","onClick"],pe={class:"options"},fe=ce(()=>N("span",null,"\u7F16\u8F91",-1)),ge=A({__name:"Pages",setup(e){const i=Z(),s=w(!1),l=w([]),p=[{key:"preview",label:"\u9884\u89C8",icon:h("preview-open")},{key:"delete",label:"\u5220\u9664",icon:h("delete-one")}];J(()=>x(this,null,function*(){yield _()}));function h(t){return()=>R(B,{name:t})}const _=()=>x(this,null,function*(){try{const t=yield H();t.data&&(l.value=t.data)}catch(t){O.error("\u9875\u9762\u6570\u636E\u8BF7\u6C42\u5F02\u5E38")}}),g=(t,y)=>x(this,null,function*(){if(t==="preview")i.push({name:"PageView",params:{index:y.id}});else if(t==="delete")try{yield q(y.id),yield _()}catch(r){console.log((r==null?void 0:r.message)||r),O.error("\u5220\u9664\u5931\u8D25")}}),o=()=>{if(s.value)return!1;s.value=!0,i.push({name:"Create"})},m=t=>{if(s.value)return!1;s.value=!0,i.push({name:"Editor",params:{index:t.id}})},b=t=>{i.push({name:"PageView",params:{index:t.id}})},k=t=>t||re;return(t,y)=>(T(),S("div",ue,[f(d(F),null,{default:u(()=>[f(d(I),{type:"primary",loading:s.value,onClick:o},{default:u(()=>[D(" \u65B0\u5EFA ")]),_:1},8,["loading"])]),_:1}),(T(!0),S(Q,null,X(l.value,r=>(T(),S("div",{key:r.id,class:"card"},[(T(),Y(d(F),{key:r.id,hoverable:""},{header:u(()=>[f(d(oe),{style:{"max-width":"8rem","font-size":"1rem"}},{default:u(()=>[D(ee(r.name),1)]),_:2},1024)]),cover:u(()=>[N("img",{src:k(r.thumbnail),class:"thumbnail-image",alt:"",onClick:v=>b(r)},null,8,de)]),action:u(()=>[N("div",pe,[f(d(M),{trigger:"hover"},{trigger:u(()=>[f(d(I),{quaternary:"",onClick:v=>m(r)},{icon:u(()=>[f(d(B),{name:"editor"})]),_:2},1032,["onClick"])]),default:u(()=>[fe]),_:2},1024),f(d(ae),{trigger:"hover",options:p,"show-arrow":!0,onSelect:v=>g(v,r)},{default:u(()=>[f(d(I),{quaternary:""},{icon:u(()=>[f(d(B),{name:"setting"})]),_:1})]),_:2},1032,["onSelect"])])]),_:2},1024))]))),128))]))}});const _e=se(ge,[["__scopeId","data-v-a9af6cab"]]);export{_e as default};
