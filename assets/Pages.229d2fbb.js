var g=(i,l,t)=>new Promise((d,p)=>{var _=n=>{try{u(t.next(n))}catch(c){p(c)}},f=n=>{try{u(t.throw(n))}catch(c){p(c)}},u=n=>n.done?d(n.value):Promise.resolve(n.value).then(_,f);u((t=t.apply(i,l)).next())});import{a as P,d as S}from"./pages.ca5f4eb5.js";import{g as V,r as I,aE as F,o as m,v as w,j as r,w as s,u as o,bt as k,bK as x,aP as L,aN as D,i as U,aV as E,aM as q,bL as K,aI as C,aK as M,aZ as T,q as $,aG as j,aW as A,aX as G}from"./.pnpm.52e5ead5.js";import{_ as R,m as N,I as y}from"./index.3086cced.js";import"./index.d05ecc76.js";var W="./assets/default.5fefac84.png";const X=i=>(A("data-v-c511aa46"),i=i(),G(),i),Z={class:"page-list"},z=E(" \u65B0\u5EFA "),H=["src","onClick"],J={class:"options"},O=X(()=>C("span",null,"\u7F16\u8F91",-1)),Q=V({__name:"Pages",setup(i){const l=$(),t=I(!1),d=I([]),p=[{key:"preview",label:"\u9884\u89C8",icon:_("preview-open")},{key:"delete",label:"\u5220\u9664",icon:_("delete-one")}];F(()=>g(this,null,function*(){yield f()}));function _(e){return()=>j(y,{name:e})}const f=()=>g(this,null,function*(){try{const e=yield P();e&&(d.value=e)}catch(e){N.error("\u9875\u9762\u6570\u636E\u8BF7\u6C42\u5F02\u5E38")}}),u=(e,v)=>g(this,null,function*(){if(e==="preview")l.push({name:"PageView",params:{index:v.id}});else if(e==="delete")try{yield S(v.id),yield f()}catch(a){console.log((a==null?void 0:a.message)||a),N.error("\u5220\u9664\u5931\u8D25")}}),n=()=>{if(t.value)return!1;t.value=!0,l.push({name:"Create"})},c=e=>{if(t.value)return!1;t.value=!0,l.push({name:"Editor",params:{index:e.id}})},b=e=>{l.push({name:"PageView",params:{index:e.id}})},B=e=>e||W;return(e,v)=>(m(),w("div",Z,[r(o(x),null,{default:s(()=>[r(o(k),{type:"primary",loading:t.value,onClick:n},{default:s(()=>[z]),_:1},8,["loading"])]),_:1}),(m(!0),w(L,null,D(d.value,a=>(m(),w("div",{class:"card",key:a.id},[(m(),U(o(x),{key:a.id,hoverable:""},{header:s(()=>[r(o(K),{style:{"max-width":"8rem"}},{default:s(()=>[E(q(a.name),1)]),_:2},1024)]),action:s(()=>[C("div",J,[r(o(M),{trigger:"hover"},{trigger:s(()=>[r(o(k),{quaternary:"",onClick:h=>c(a)},{icon:s(()=>[r(o(y),{name:"editor"})]),_:2},1032,["onClick"])]),default:s(()=>[O]),_:2},1024),r(o(T),{trigger:"hover",onSelect:h=>u(h,a),options:p},{default:s(()=>[r(o(y),{name:"setting"})]),_:2},1032,["onSelect"])])]),default:s(()=>[C("img",{src:B(a.thumbnail),class:"image",onClick:h=>b(a),alt:""},null,8,H)]),_:2},1024))]))),128))]))}});var ne=R(Q,[["__scopeId","data-v-c511aa46"]]);export{ne as default};
