import{c as de,S as Z,C as X,b as ie,i as he,d as ce,f as fe,g as ge,h as me,e as pe,j as ye,k as V,G as J,l as we,R as K,Z as Q,m as Pe,p as Se,n as ee,B as be,o as te,q as Ie,u as Me}from"./hooks-6609f26b.js";import{u as Ce}from"./index-425499df.js";import{u as De}from"./index-c01320d9.js";import{d as Le,e as ae,f as Te,h as Ee,w as xe,u as _e,o as ke,c as Ae}from"./index-dfdef63a.js";function Re(e,t){return t=t||{},de(e,null,null,t.state!=="normal")}function We(e){var t=Z.extend(e);return Z.registerClass(t),t}function ze(e){var t=X.extend(e);return X.registerClass(t),t}ie([he,ce]);ie(fe);We({type:"series.liquidFill",optionUpdated:function(){var e=this.option;e.gridSize=Math.max(Math.floor(e.gridSize),4)},getInitialData:function(e,t){var u=ge(e.data,{coordDimensions:["value"]}),d=new me(u,this);return d.initData(e.data),d},defaultOption:{color:["#294D99","#156ACF","#1598ED","#45BDFF"],center:["50%","50%"],radius:"50%",amplitude:"8%",waveLength:"80%",phase:"auto",period:"auto",direction:"right",shape:"circle",waveAnimation:!0,animationEasing:"linear",animationEasingUpdate:"linear",animationDuration:2e3,animationDurationUpdate:1e3,outline:{show:!0,borderDistance:8,itemStyle:{color:"none",borderColor:"#294D99",borderWidth:8,shadowBlur:20,shadowColor:"rgba(0, 0, 0, 0.25)"}},backgroundStyle:{color:"#E3F7FF"},itemStyle:{opacity:.95,shadowBlur:50,shadowColor:"rgba(0, 0, 0, 0.4)"},label:{show:!0,color:"#294D99",insideColor:"#fff",fontSize:50,fontWeight:"bold",align:"center",baseline:"middle",position:"inside"},emphasis:{itemStyle:{opacity:.8}}}});const Be=pe({type:"ec-liquid-fill",shape:{waveLength:0,radius:0,radiusY:0,cx:0,cy:0,waterLevel:0,amplitude:0,phase:0,inverse:!1},buildPath:function(e,t){t.radiusY==null&&(t.radiusY=t.radius);for(var u=Math.max(Math.ceil(2*t.radius/t.waveLength*4)*2,8);t.phase<-Math.PI*2;)t.phase+=Math.PI*2;for(;t.phase>0;)t.phase-=Math.PI*2;var d=t.phase/Math.PI/2*t.waveLength,h=t.cx-t.radius+d-t.radius*2;e.moveTo(h,t.waterLevel);for(var c=0,w=0;w<u;++w){var m=w%4,n=Oe(w*t.waveLength/4,m,t.waveLength,t.amplitude);e.bezierCurveTo(n[0][0]+h,-n[0][1]+t.waterLevel,n[1][0]+h,-n[1][1]+t.waterLevel,n[2][0]+h,-n[2][1]+t.waterLevel),w===u-1&&(c=n[2][0])}t.inverse?(e.lineTo(c+h,t.cy-t.radiusY),e.lineTo(h,t.cy-t.radiusY),e.lineTo(h,t.waterLevel)):(e.lineTo(c+h,t.cy+t.radiusY),e.lineTo(h,t.cy+t.radiusY),e.lineTo(h,t.waterLevel)),e.closePath()}});function Oe(e,t,u,d){return t===0?[[e+1/2*u/Math.PI/2,d/2],[e+1/2*u/Math.PI,d],[e+u/4,d]]:t===1?[[e+1/2*u/Math.PI/2*(Math.PI-2),d],[e+1/2*u/Math.PI/2*(Math.PI-1),d/2],[e+u/4,0]]:t===2?[[e+1/2*u/Math.PI/2,-d/2],[e+1/2*u/Math.PI,-d],[e+u/4,-d]]:[[e+1/2*u/Math.PI/2*(Math.PI-2),-d],[e+1/2*u/Math.PI/2*(Math.PI-1),-d/2],[e+u/4,0]]}var D=Se;function re(e){return e&&e.indexOf("path://")===0}ze({type:"liquidFill",render:function(e,t,u){var d=this,h=this.group;h.removeAll();var c=e.getData(),w=c.getItemModel(0),m=w.get("center"),n=w.get("radius"),M=u.getWidth(),C=u.getHeight(),x=Math.min(M,C),O=0,_=0,F=e.get("outline.show");F&&(O=e.get("outline.borderDistance"),_=D(e.get("outline.itemStyle.borderWidth"),x));var L=D(m[0],M),T=D(m[1],C),E,k,A,S=!1,P=e.get("shape");if(P==="container"?(S=!0,E=[M/2,C/2],k=[E[0]-_/2,E[1]-_/2],A=[D(O,M),D(O,C)],n=[Math.max(k[0]-A[0],0),Math.max(k[1]-A[1],0)]):(E=D(n,x)/2,k=E-_/2,A=D(O,x),n=Math.max(k-A,0)),F){var ne=U();ne.style.lineWidth=_,h.add(U())}var le=S?0:L-n,oe=S?0:T-n,R=null;h.add(se());var q=this._data,G=[];c.diff(q).add(function(a){var r=H(a,!1),i=r.shape.waterLevel;r.shape.waterLevel=S?C/2:n,ye(r,{shape:{waterLevel:i}},e),r.z2=2,N(a,r,null),h.add(r),c.setItemGraphicEl(a,r),G.push(r)}).update(function(a,r){for(var i=q.getItemGraphicEl(r),s=H(a,!1,i),o={},l=["amplitude","cx","cy","phase","radius","radiusY","waterLevel","waveLength"],f=0;f<l.length;++f){var v=l[f];s.shape.hasOwnProperty(v)&&(o[v]=s.shape[v])}for(var p={},g=["fill","opacity","shadowBlur","shadowColor"],f=0;f<g.length;++f){var v=g[f];s.style.hasOwnProperty(v)&&(p[v]=s.style[v])}S&&(o.radiusY=C/2),V(i,{shape:o,x:s.x,y:s.y},e),e.isUniversalTransitionEnabled&&e.isUniversalTransitionEnabled()?V(i,{style:p},e):i.useStyle(p);var y=i.getClipPath(),b=s.getClipPath();i.setClipPath(s.getClipPath()),i.shape.inverse=s.inverse,y&&b&&d._shape===P&&!re(P)&&V(b,{shape:y.shape},e,{isFrom:!0}),N(a,i,i),h.add(i),c.setItemGraphicEl(a,i),G.push(i)}).remove(function(a){var r=q.getItemGraphicEl(a);h.remove(r)}).execute(),w.get("label.show")&&h.add(ue(G)),this._shape=P,this._data=c;function W(a,r){if(P)if(re(P)){var i=ee(P.slice(7),{}),s=i.getBoundingRect(),o=s.width,l=s.height;o>l?(l=a*2/o*l,o=a*2):(o=a*2/l*o,l=a*2);var f=r?0:L-o/2,v=r?0:T-l/2;return i=ee(P.slice(7),{},new be(f,v,o,l)),r&&(i.x=-o/2,i.y=-l/2),i}else if(S){var p=r?-a[0]:L-a[0],g=r?-a[1]:T-a[1];return te("rect",p,g,a[0]*2,a[1]*2)}else{var p=r?-a:L-a,g=r?-a:T-a;return P==="pin"?g+=a:P==="arrow"&&(g-=a),te(P,p,g,a*2,a*2)}return new Ie({shape:{cx:r?0:L,cy:r?0:T,r:a}})}function U(){var a=W(E);return a.style.fill=null,a.setStyle(e.getModel("outline.itemStyle").getItemStyle()),a}function se(){var a=W(n);a.setStyle(e.getModel("backgroundStyle").getItemStyle()),a.style.fill=null,a.z2=5;var r=W(n);r.setStyle(e.getModel("backgroundStyle").getItemStyle()),r.style.stroke=null;var i=new J;return i.add(a),i.add(r),i}function H(a,r,i){var s=S?n[0]:n,o=S?C/2:n,l=c.getItemModel(a),f=l.getModel("itemStyle"),v=l.get("phase"),p=D(l.get("amplitude"),o*2),g=D(l.get("waveLength"),s*2),y=c.get("value",a),b=o-y*o*2;v=i?i.shape.phase:v==="auto"?a*Math.PI/4:v;var I=f.getItemStyle();if(!I.fill){var z=e.get("color"),Y=a%z.length;I.fill=z[Y]}var ve=s*2,B=new Be({shape:{waveLength:g,radius:s,radiusY:o,cx:ve,cy:0,waterLevel:b,amplitude:p,phase:v,inverse:r},style:I,x:L,y:T});B.shape._waterLevel=b;var $=l.getModel("emphasis.itemStyle").getItemStyle();$.lineWidth=0,B.ensureState("emphasis").style=$,we(B);var j=W(n,!0);return j.setStyle({fill:"white"}),B.setClipPath(j),B}function N(a,r,i){var s=c.getItemModel(a),o=s.get("period"),l=s.get("direction"),f=c.get("value",a),v=s.get("phase");v=i?i.shape.phase:v==="auto"?a*Math.PI/4:v;var p=function(b){var I=c.count();return I===0?b:b*(.2+(I-a)/I*.8)},g=0;o==="auto"?g=p(5e3):g=typeof o=="function"?o(f,a):o;var y=0;l==="right"||l==null?y=Math.PI:l==="left"?y=-Math.PI:l==="none"?y=0:console.error("Illegal direction value for liquid fill."),l!=="none"&&s.get("waveAnimation")&&r.animate("shape",!0).when(0,{phase:v}).when(g/2,{phase:y+v}).when(g,{phase:y*2+v}).during(function(){R&&R.dirty(!0)}).start()}function ue(a){var r=w.getModel("label");function i(){var I=e.getFormattedLabel(0,"normal"),z=c.get("value",0)*100,Y=c.getName(0)||e.name;return isNaN(z)||(Y=z.toFixed(0)+"%"),I??Y}var s={z2:10,shape:{x:le,y:oe,width:(S?n[0]:n)*2,height:(S?n[1]:n)*2},style:{fill:"transparent"},textConfig:{position:r.get("position")||"inside"},silent:!0},o={style:{text:i(),textAlign:r.get("align"),textVerticalAlign:r.get("baseline")}};Object.assign(o.style,Re(r));var l=new K(s),f=new K(s);f.disableLabelAnimation=!0,l.disableLabelAnimation=!0;var v=new Q(o),p=new Q(o);l.setTextContent(v),f.setTextContent(p);var g=r.get("insideColor");p.style.fill=g;var y=new J;y.add(l),y.add(f);var b=W(n,!0);return R=new Pe({shape:{paths:a},x:L,y:T}),R.setClipPath(b),f.setClipPath(R),y}},dispose:function(){}});const Fe=Le({__name:"WaveChart",props:{component:{}},setup(e){const t=e,u=ae(null),{updateEchart:d,resizeHandler:h}=Me(u),c=ae(0),w=(M,C)=>{M.status>=0&&(c.value=M.afterData),d(n())};Ce(t.component,w);const{propValue:m}=De(t.component,async()=>{d(n())}),n=()=>({series:[{type:"liquidFill",amplitude:m.options.amplitude,data:[c.value],outline:{show:m.options.outlineShow,itemStyle:{borderColor:m.options.outlineColor}},shape:m.options.shape,radius:m.options.radius,direction:m.options.direction,waveAnimation:m.options.waveAnimation,label:{show:m.options.labelShow},backgroundStyle:{color:m.options.backgroundColor},color:[m.options.color]}]});return Te(async()=>{d(n())}),(M,C)=>{const x=Ee("resize");return xe((ke(),Ae("div",{ref_key:"chartEl",ref:u},null,512)),[[x,_e(h)]])}}});export{Fe as default};
