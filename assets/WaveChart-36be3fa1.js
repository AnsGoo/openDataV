import{c as e,S as t,C as a,u as i,d as n,f as r,g as s,h as o,j as l,e as h,k as d,l as u,G as p,m as v,R as c,Z as g,n as m,p as y,o as f,B as w,q as M,s as I}from"./index-8e2f4a84.js";import{d as x,r as S,p as b,a7 as P,a8 as C,u as L,o as D,v as E}from"./index-40170f2c.js";import{f as F}from"./index.esm-9bbe18d8.js";import{s as T}from"./index.esm-01328638.js";import{u as A}from"./hooks-d0759a9a.js";var Y,k;i([n,r]),i(s),Y={type:"series.liquidFill",optionUpdated:function(){var e=this.option;e.gridSize=Math.max(Math.floor(e.gridSize),4)},getInitialData:function(e,t){var a=o(e.data,{coordDimensions:["value"]}),i=new l(a,this);return i.initData(e.data),i},defaultOption:{color:["#294D99","#156ACF","#1598ED","#45BDFF"],center:["50%","50%"],radius:"50%",amplitude:"8%",waveLength:"80%",phase:"auto",period:"auto",direction:"right",shape:"circle",waveAnimation:!0,animationEasing:"linear",animationEasingUpdate:"linear",animationDuration:2e3,animationDurationUpdate:1e3,outline:{show:!0,borderDistance:8,itemStyle:{color:"none",borderColor:"#294D99",borderWidth:8,shadowBlur:20,shadowColor:"rgba(0, 0, 0, 0.25)"}},backgroundStyle:{color:"#E3F7FF"},itemStyle:{opacity:.95,shadowBlur:50,shadowColor:"rgba(0, 0, 0, 0.4)"},label:{show:!0,color:"#294D99",insideColor:"#fff",fontSize:50,fontWeight:"bold",align:"center",baseline:"middle",position:"inside"},emphasis:{itemStyle:{opacity:.8}}}},k=t.extend(Y),t.registerClass(k);const z=h({type:"ec-liquid-fill",shape:{waveLength:0,radius:0,radiusY:0,cx:0,cy:0,waterLevel:0,amplitude:0,phase:0,inverse:!1},buildPath:function(e,t){null==t.radiusY&&(t.radiusY=t.radius);for(var a=Math.max(2*Math.ceil(2*t.radius/t.waveLength*4),8);t.phase<2*-Math.PI;)t.phase+=2*Math.PI;for(;t.phase>0;)t.phase-=2*Math.PI;var i=t.phase/Math.PI/2*t.waveLength,n=t.cx-t.radius+i-2*t.radius;e.moveTo(n,t.waterLevel);for(var r=0,s=0;s<a;++s){var o=s%4,l=_(s*t.waveLength/4,o,t.waveLength,t.amplitude);e.bezierCurveTo(l[0][0]+n,-l[0][1]+t.waterLevel,l[1][0]+n,-l[1][1]+t.waterLevel,l[2][0]+n,-l[2][1]+t.waterLevel),s===a-1&&(r=l[2][0])}t.inverse?(e.lineTo(r+n,t.cy-t.radiusY),e.lineTo(n,t.cy-t.radiusY),e.lineTo(n,t.waterLevel)):(e.lineTo(r+n,t.cy+t.radiusY),e.lineTo(n,t.cy+t.radiusY),e.lineTo(n,t.waterLevel)),e.closePath()}});function _(e,t,a,i){return 0===t?[[e+.5*a/Math.PI/2,i/2],[e+.5*a/Math.PI,i],[e+a/4,i]]:1===t?[[e+.5*a/Math.PI/2*(Math.PI-2),i],[e+.5*a/Math.PI/2*(Math.PI-1),i/2],[e+a/4,0]]:2===t?[[e+.5*a/Math.PI/2,-i/2],[e+.5*a/Math.PI,-i],[e+a/4,-i]]:[[e+.5*a/Math.PI/2*(Math.PI-2),-i],[e+.5*a/Math.PI/2*(Math.PI-1),-i/2],[e+a/4,0]]}var j=y;function W(e){return e&&0===e.indexOf("path://")}!function(e){var t=a.extend(e);a.registerClass(t)}({type:"liquidFill",render:function(t,a,i){var n=this,r=this.group;r.removeAll();var s=t.getData(),o=s.getItemModel(0),l=o.get("center"),h=o.get("radius"),y=i.getWidth(),x=i.getHeight(),S=Math.min(y,x),b=0,P=0,C=t.get("outline.show");C&&(b=t.get("outline.borderDistance"),P=j(t.get("outline.itemStyle.borderWidth"),S));var L,D,E,F=j(l[0],y),T=j(l[1],x),A=!1,Y=t.get("shape");("container"===Y?(A=!0,D=[(L=[y/2,x/2])[0]-P/2,L[1]-P/2],E=[j(b,y),j(b,x)],h=[Math.max(D[0]-E[0],0),Math.max(D[1]-E[1],0)]):(D=(L=j(h,S)/2)-P/2,E=j(b,S),h=Math.max(D-E,0)),C)&&(G().style.lineWidth=P,r.add(G()));var k=A?0:F-h,_=A?0:T-h,B=null;r.add(function(){var e=q(h);e.setStyle(t.getModel("backgroundStyle").getItemStyle()),e.style.fill=null,e.z2=5;var a=q(h);a.setStyle(t.getModel("backgroundStyle").getItemStyle()),a.style.stroke=null;var i=new p;return i.add(e),i.add(a),i}());var O=this._data,U=[];function q(e,t){if(Y){if(W(Y)){var a=f(Y.slice(7),{}),i=a.getBoundingRect(),n=i.width,r=i.height;n>r?(r*=2*e/n,n=2*e):(n*=2*e/r,r=2*e);var s=t?0:F-n/2,o=t?0:T-r/2;return a=f(Y.slice(7),{},new w(s,o,n,r)),t&&(a.x=-n/2,a.y=-r/2),a}if(A){var l=t?-e[0]:F-e[0],h=t?-e[1]:T-e[1];return M("rect",l,h,2*e[0],2*e[1])}h=t?-e:T-e;return"pin"===Y?h+=e:"arrow"===Y&&(h-=e),M(Y,l=t?-e:F-e,h,2*e,2*e)}return new I({shape:{cx:t?0:F,cy:t?0:T,r:e}})}function G(){var e=q(L);return e.style.fill=null,e.setStyle(t.getModel("outline.itemStyle").getItemStyle()),e}function N(e,a,i){var n=A?h[0]:h,r=A?x/2:h,o=s.getItemModel(e),l=o.getModel("itemStyle"),d=o.get("phase"),u=j(o.get("amplitude"),2*r),p=j(o.get("waveLength"),2*n),c=r-s.get("value",e)*r*2;d=i?i.shape.phase:"auto"===d?e*Math.PI/4:d;var g=l.getItemStyle();if(!g.fill){var m=t.get("color"),y=e%m.length;g.fill=m[y]}var f=new z({shape:{waveLength:p,radius:n,radiusY:r,cx:2*n,cy:0,waterLevel:c,amplitude:u,phase:d,inverse:a},style:g,x:F,y:T});f.shape._waterLevel=c;var w=o.getModel("emphasis.itemStyle").getItemStyle();w.lineWidth=0,f.ensureState("emphasis").style=w,v(f);var M=q(h,!0);return M.setStyle({fill:"white"}),f.setClipPath(M),f}function H(e,t,a){var i=s.getItemModel(e),n=i.get("period"),r=i.get("direction"),o=s.get("value",e),l=i.get("phase");l=a?a.shape.phase:"auto"===l?e*Math.PI/4:l;var h,d,u=0;"auto"===n?(h=5e3,u=0===(d=s.count())?h:h*(.2+(d-e)/d*.8)):u="function"==typeof n?n(o,e):n;var p=0;"right"===r||null==r?p=Math.PI:"left"===r?p=-Math.PI:"none"===r&&(p=0),"none"!==r&&i.get("waveAnimation")&&t.animate("shape",!0).when(0,{phase:l}).when(u/2,{phase:p+l}).when(u,{phase:2*p+l}).during((function(){B&&B.dirty(!0)})).start()}s.diff(O).add((function(e){var a=N(e,!1),i=a.shape.waterLevel;a.shape.waterLevel=A?x/2:h,d(a,{shape:{waterLevel:i}},t),a.z2=2,H(e,a,null),r.add(a),s.setItemGraphicEl(e,a),U.push(a)})).update((function(e,a){for(var i=O.getItemGraphicEl(a),o=N(e,!1,i),l={},h=["amplitude","cx","cy","phase","radius","radiusY","waterLevel","waveLength"],d=0;d<h.length;++d){var p=h[d];o.shape.hasOwnProperty(p)&&(l[p]=o.shape[p])}var v={},c=["fill","opacity","shadowBlur","shadowColor"];for(d=0;d<c.length;++d){p=c[d];o.style.hasOwnProperty(p)&&(v[p]=o.style[p])}A&&(l.radiusY=x/2),u(i,{shape:l,x:o.x,y:o.y},t),t.isUniversalTransitionEnabled&&t.isUniversalTransitionEnabled()?u(i,{style:v},t):i.useStyle(v);var g=i.getClipPath(),m=o.getClipPath();i.setClipPath(o.getClipPath()),i.shape.inverse=o.inverse,g&&m&&n._shape===Y&&!W(Y)&&u(m,{shape:g.shape},t,{isFrom:!0}),H(e,i,i),r.add(i),s.setItemGraphicEl(e,i),U.push(i)})).remove((function(e){var t=O.getItemGraphicEl(e);r.remove(t)})).execute(),o.get("label.show")&&r.add(function(a){var i=o.getModel("label");function n(){var e=t.getFormattedLabel(0,"normal"),a=100*s.get("value",0),i=s.getName(0)||t.name;return isNaN(a)||(i=a.toFixed(0)+"%"),null==e?i:e}var r={z2:10,shape:{x:k,y:_,width:2*(A?h[0]:h),height:2*(A?h[1]:h)},style:{fill:"transparent"},textConfig:{position:i.get("position")||"inside"},silent:!0},l={style:{text:n(),textAlign:i.get("align"),textVerticalAlign:i.get("baseline")}};Object.assign(l.style,(d=i,e(d,null,null,"normal"!==(u=u||{}).state)));var d,u;var v=new c(r),y=new c(r);y.disableLabelAnimation=!0,v.disableLabelAnimation=!0;var f=new g(l),w=new g(l);v.setTextContent(f),y.setTextContent(w);var M=i.get("insideColor");w.style.fill=M;var I=new p;I.add(v),I.add(y);var x=q(h,!0);return(B=new m({shape:{paths:a},x:F,y:T})).setClipPath(x),y.setClipPath(B),I}(U)),this._shape=Y,this._data=s},dispose:function(){}});const B=x({__name:"WaveChart",props:{component:{}},setup(e){const t=e,a=S(null),{updateEchart:i,resizeHandler:n}=A(a),r=S(0);F(t.component,((e,t)=>{"SUCCESS"===e.status&&(r.value=e.afterData),i(o())}));const{propValue:s}=T(t.component,(async()=>{i(o())})),o=()=>({series:[{type:"liquidFill",amplitude:s.options.amplitude,data:[r.value],outline:{show:s.options.outlineShow,itemStyle:{borderColor:s.options.outlineColor}},shape:s.options.shape,radius:s.options.radius,direction:s.options.direction,waveAnimation:s.options.waveAnimation,label:{show:s.options.labelShow},backgroundStyle:{color:s.options.backgroundColor},color:[s.options.color]}]});return b((async()=>{i(o())})),(e,t)=>{const i=P("resize");return C((D(),E("div",{ref_key:"chartEl",ref:a},null,512)),[[i,L(n)]])}}});export{B as default};
