var h=(c,p,o)=>new Promise((r,n)=>{var u=e=>{try{i(o.next(e))}catch(s){n(s)}},d=e=>{try{i(o.throw(e))}catch(s){n(s)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(u,d);i((o=o.apply(c,p)).next())});import{h as v}from"./index.69486b6c.js";import{d as _,r as E,q as L,a as S,w as y,u as C,o as D,c as B,f as M}from"./index.efbb82d5.js";import{u as z}from"./useProp.afe31ed3.js";import{c as O}from"./utils.fc532f69.js";import{u as W}from"./hooks.b8c00718.js";import"./theme.31b3b9c9.js";const q=_({__name:"BasicPieChart",props:{component:null},setup(c){const p=c,o=E(null);let r;const n=L(),{updateEchart:u,resizeHandler:d}=W(o),i=()=>{s()},{propValue:e}=z(p.component,i);S(()=>h(this,null,function*(){r=b(),w(),yield s()}));const s=()=>h(this,null,function*(){try{const t=yield v.get({url:e.data.url});if(t.status===200){const a=e.data.upperLimit,l=e.data.lowerLimit,m=t.data.map(g=>({value:O(Number(g.value),a,l),label:g.label}));f(m)}}catch(t){if(console.log((t==null?void 0:t.message)||t),n.isEditMode){const l=["\u79E6","\u9F50","\u695A","\u8D75","\u71D5","\u97E9","\u9B4F"].map(m=>({label:m,value:Math.round(Math.random()*(e.data.upperLimit||100))}));f(l)}}}),b=()=>{const t={grid:{top:"10%",left:"3%",right:"4%",bottom:"0%",containLabel:!0},tooltip:{trigger:"item"},legend:{show:e.legend.isShow,top:"5%",left:"center"},series:[]};let a=[{type:"pie",radius:[`${e.series.radiusMin||0}%`,`${e.series.radiusMax||100}%`],avoidLabelOverlap:!0,itemStyle:{borderRadius:e.series.borderRadius,borderColor:"transparent",borderWidth:100},label:{show:!1,position:"center",color:e.label.labelColor},emphasis:{label:{show:e.label.isShow,fontSize:e.label.labelSize,fontWeight:e.label.labelWeight},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},labelLine:{show:!1},data:[]}];return t.series=a,t},f=t=>{r=b(),r.series[0].data=t.map(a=>({value:a.value,name:a.label})),u(r)},w=()=>{u(r)};return(t,a)=>{const l=M("resize");return y((D(),B("div",{ref_key:"chartEl",ref:o},null,512)),[[l,C(d)]])}}});export{q as default};
