var y=(h,d,e)=>new Promise((p,l)=>{var v=i=>{try{u(e.next(i))}catch(f){l(f)}},c=i=>{try{u(e.throw(i))}catch(f){l(f)}},u=i=>i.done?p(i.value):Promise.resolve(i.value).then(v,c);u((e=e.apply(h,d)).next())});import{N as G,T as M}from"./Toolbar.2eebd856.js";import{j as U,p as Q,d as Y,a as L,b as O,v as I,c as q,u as X,N as Z,g as ee}from"./View.1c92d3a9.js";import{d as B,b2 as C,a7 as te,r as _,a2 as P,i as F,q as ae,a8 as W,o as b,y as D,z as s,b as g,v as a,n as se,t as T,u as t,b3 as ne,_ as k,aQ as j,b0 as H,V as N,a4 as $,a$ as oe,b6 as ue,Q as w,a as le,c as ce,F as ie,f as re,e as de,aT as pe,aU as R,w as _e,aW as fe,s as ve,aV as me}from"./index.b10b5c98.js";import{e as ye,a as V,N as z}from"./Editor.f3efaff1.js";import{S as K}from"./enums.27e2d34b.js";import{u as ge,e as he}from"./useEventBus.fa077285.js";import{N as be}from"./li.62100073.js";import{N as Se}from"./Scrollbar.bc1ce2a5.js";import"./LogoView.494db07f.js";const we={class:"buttons"},De={class:"footer"},Ce=B({__name:"Editor",props:{data:{default:()=>({code:"",type:C.Javascript})},config:{default:()=>({height:"600px",tabSize:4,indentWithTab:!0,autofocus:!0,disabled:!1})},mode:{default:"use"}},emits:["update:data","change"],setup(h,{emit:d}){const e=h,p=te(),l=_(!0),v=_(!1),c={Javascript:U,Python:Q},u=P(e.data),i=()=>{d("update:data",u),d("change",u)},f=F(()=>Object.keys(C).map(r=>({label:r,value:r}))),A=_(C.Javascript),E=F(()=>c[A.value]||U),o=_(null),n=()=>{const r=o.value.handleRedo;r&&r()},m=()=>{const r=o.value.handleUndo;r&&r()};return ae(()=>e.data,()=>{e.data&&(u.code=e.data.code,u.type=e.data.type)}),(r,S)=>{const J=W("x-icon");return b(),D(t(ye),{ref_key:"cm",ref:o,code:u.code,"onUpdate:code":[S[2]||(S[2]=x=>u.code=x),i],language:t(E),config:h.config,theme:t(p).darkTheme?"dark":"light"},{"tool-bar":s(()=>[g("div",null,[g("div",we,[a(J,{class:"item button",name:"back",onClick:m}),a(J,{class:"item button",name:"next",onClick:n})])])]),footer:s(()=>[g("div",De,[g("div",{class:se(["saved-status",l.value?"save":"unsave"])},T(l.value?"\u5DF2\u4FDD\u5B58":"\u672A\u4FDD\u5B58"),3),g("div",{class:"lang",onClick:S[1]||(S[1]=x=>v.value=!0)},[a(t(ne),{value:u.type,"onUpdate:value":[S[0]||(S[0]=x=>u.type=x),i],options:t(f),class:"item language",size:"tiny",style:{width:"110px"}},null,8,["value","options"])])])]),_:1},8,["code","language","config","theme"])}}});const Ne=k(Ce,[["__scopeId","data-v-8b2ea64c"]]),xe={class:"static-data"},Fe=B({__name:"Conetent",setup(h){const d=_({height:"300px",tabSize:4,indentWithTab:!0,autofocus:!0,disabled:!1}),e=P({id:"",title:"",code:"",type:C.Javascript}),p=_(JSON.stringify({},null,"	")),l=o=>{p.value=o},v=o=>y(this,null,function*(){e.code=o.code,e.type=o.type});ge(K.SRCIPT_KEY,o=>y(this,null,function*(){yield f(o)}));const c=_(""),u=F(()=>({code:e.code,type:e.type})),i=()=>{const o=e.code?ue(e.type,e.code,["resp","options"],!1):void 0;if(o&&o.handler)try{c.value=JSON.stringify(o.handler(JSON.parse(p.value),{}),null,"	")}catch(n){c.value=n.message||n}else c.value=JSON.stringify(e.code,null,"	")},f=o=>y(this,null,function*(){try{const n=yield Y(o);if(n.status===200){const m=n.data;e.id=m.id,e.title=m.name,e.code=m.code,e.type=m.type}}catch(n){console.log(n||n.message)}}),A=()=>y(this,null,function*(){try{const o=yield q({code:e.code,name:e.title||"\u672A\u547D\u540D",type:e.type});if(o.status===201){const n=o.data;e.id=n.id,e.title=n.name,e.code=n.code,e.type=n.type,w.success("\u6570\u636E\u4FDD\u5B58\u6210\u529F")}else w.warning("\u6570\u636E\u4FDD\u5B58\u5931\u8D25")}catch(o){w.warning("\u6570\u636E\u4FDD\u5B58\u5931\u8D25")}}),E=()=>y(this,null,function*(){try{(yield X(e.id,{code:e.code,name:e.title||"\u672A\u547D\u540D",type:e.type})).status===200?w.success("\u6570\u636E\u66F4\u65B0\u6210\u529F"):w.warning("\u6570\u636E\u66F4\u65B0\u5931\u8D25")}catch(o){w.warning("\u6570\u636E\u66F4\u65B0\u5931\u8D25")}});return(o,n)=>{const m=W("x-icon");return b(),D(t($),null,{default:s(()=>[g("div",xe,[a(t(j),{value:e.title,"onUpdate:value":n[0]||(n[0]=r=>e.title=r),class:"title"},{prefix:s(()=>[a(m,{name:"code"})]),_:1},8,["value"]),a(t(L),null,{default:s(()=>[a(t(O),{class:"save"},{default:s(()=>[a(t(H),{type:"success",onClick:i},{default:s(()=>[N("\u8FD0\u884C")]),_:1})]),_:1})]),_:1}),a(t(L),null,{default:s(()=>[a(t(O),{class:"save"},{default:s(()=>[a(t(H),{onClick:n[1]||(n[1]=r=>e.id?E():A())},{default:s(()=>[N("\u4FDD\u5B58")]),_:1})]),_:1})]),_:1})]),a(t($),null,{default:s(()=>[a(t(V),null,{default:s(()=>[a(t(z),{name:"\u811A\u672C"},{default:s(()=>[a(Ne,{data:t(u),class:"content",config:d.value,"onUpdate:data":v},null,8,["data","config"])]),_:1}),a(t(z),{name:"\u5165\u53C2"},{default:s(()=>[a(t(I),{content:p.value,"onUpdate:content":[n[2]||(n[2]=r=>p.value=r),l],class:"content",config:d.value},null,8,["content","config"])]),_:1})]),_:1}),a(t(oe),{"title-placement":"left"},{default:s(()=>[N(" \u8F93\u51FA ")]),_:1}),a(t(I),{content:c.value,"onUpdate:content":n[3]||(n[3]=r=>c.value=r),class:"content",disable:!0,config:d.value},null,8,["content","config"])]),_:1})]),_:1})}}});const Be=k(Fe,[["__scopeId","data-v-a5b6a125"]]),ke={class:"rest-detail"},Ae=B({__name:"History",setup(h){const d=_([]),e=()=>y(this,null,function*(){try{const l=yield ee();l.status===200&&(d.value=l.data)}catch(l){console.log(l||l.message)}}),p=l=>{he.emit(K.SRCIPT_KEY,l)};return le(()=>y(this,null,function*(){yield e()})),(l,v)=>(b(),D(t($),{title:"\u811A\u672C",size:"small"},{default:s(()=>[a(t(j),{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u6761\u4EF6"}),a(t(V),null,{default:s(()=>[a(t(z),{name:"\u811A\u672C\u5217\u8868"},{default:s(()=>[a(t(G),{"align-text":""},{default:s(()=>[(b(!0),ce(ie,null,re(d.value,c=>(b(),D(t(be),{key:c.id,class:"data-item",onClick:u=>p(c.id)},{default:s(()=>[g("div",ke,[g("div",null,[a(t(Z),{type:"success",style:{"font-weight":"800"}},{default:s(()=>[N(T(c.type===t(C).Javascript?"JS":"Py"),1)]),_:2},1024),N(" "+T(c.name),1)])])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}});const Ee=k(Ae,[["__scopeId","data-v-bdd377bb"]]),Te=B({__name:"Scripts",setup(h){const d=_(!1),e=_(0),p=_(0),l=F(()=>({width:e.value+"px",height:p.value+"px"})),v=c=>{const{width:u,height:i}=c.contentRect;e.value=u,p.value=i};return(c,u)=>{const i=de("resize");return b(),D(t(R),{class:"home"},{default:s(()=>[a(t(pe),{class:"header"},{default:s(()=>[a(t(M))]),_:1}),a(t(R),{"has-sider":"","sider-placement":"right",class:"main"},{default:s(()=>[_e((b(),D(t(fe),{class:"content"},{default:s(()=>[a(t(Se),{"x-scrollable":"",style:ve(t(l))},{default:s(()=>[a(Be)]),_:1},8,["style"])]),_:1})),[[i,v]]),a(t(me),{class:"right",width:"240",collapsed:d.value,"native-scrollbar":!1,bordered:"","collapsed-width":35,"collapse-mode":"width","show-trigger":"arrow-circle",onCollapse:u[0]||(u[0]=f=>d.value=!0),onExpand:u[1]||(u[1]=f=>d.value=!1)},{default:s(()=>[a(Ee)]),_:1},8,["collapsed"])]),_:1})]),_:1})}}});const We=k(Te,[["__scopeId","data-v-fa45ebe4"]]);export{We as default};
