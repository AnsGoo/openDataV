import{d as A,e as y,R as F,ao as L,cc as c,v as w,o as m,c as f,a as W,F as j,f as H,g as v,n as b,C as K,b as k,u as S,m as O,l as U,w as X,q as Y,s as J,cd as D,ce as Q,j as Z,t as x,cf as ee,_ as te}from"./index-10d63009.js";import{u as oe}from"./index-76257893.js";import{S as ne}from"./clipBoard-184df16a.js";const ae=["onClick"],le=A({__name:"Tabs",props:{component:{}},setup(z){const i=z,N=D.config,_=Q(D.component),u=Z(),V=y(()=>u.isEditMode),{propValue:a}=oe(i.component),B=y(()=>a.label.items||[]);F(()=>a.label.mode,()=>{const e=(a.label.items||[]).length,g=a.label.mode||"horizontal",t=a.style.height,{top:l,left:p,width:h,height:r}=i.component.style;for(let s=0;s<e;s++)if(i.component.subComponents[s]){const o=i.component.subComponents[s];g==="horizontal"?(o.changeStyle(["position","top"],l+t),o.changeStyle(["position","left"],p)):(o.changeStyle(["position","top"],l),o.changeStyle(["position","left"],p+t)),o.groupStyle={gleft:c((o.positionStyle.left-p)/h),gtop:c((o.positionStyle.top-l)/r),gwidth:c(o.positionStyle.width/h),gheight:c(o.positionStyle.height/r),grotate:o.groupStyle.grotate||0}}else{const o=new N(L());g==="horizontal"?o.changeStyle(["position"],{top:l+t,left:p,width:h,height:r-t}):o.changeStyle(["position"],{top:l,left:p+t,width:h-t,height:r}),o.parent=i.component,o.groupStyle={gleft:0,gtop:c((o.positionStyle.top-l)/r),gwidth:100,gheight:c(o.positionStyle.height/r),grotate:i.component.positionStyle.rotate||0},i.component.updateChild(s,o)}},{immediate:!0});const E=e=>e.groupStyle?.gheight?x(e.groupStyle,["gtop","gleft","gwidth","gheight","grotate"]):x(e.style,["top","left","width","height","rotate"]),M=y(()=>u.curComponent),d=w(0),R=e=>!(u.isEditMode&&!e),T=e=>{d.value=e},$=e=>d.value===e,C=y(()=>a.label.mode?a.label.mode:"horizontal"),I=w(null),n=y(()=>i.component.subComponents[d.value]),G=y(()=>({[a.label.mode==="horizontal"?"height":"width"]:`${a.style.height}px`,color:a.style.color,fontSize:`${a.style.fontSize}px`,weight:`${a.style.fontWeight}px`,family:`${a.style.fontWeight}px`})),P=e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},q=async e=>{e.preventDefault(),e.stopPropagation();const g=e.dataTransfer.getData("componentName");if(g){const t=new u.components[g];t.dataMode===ee.UNIVERSAL&&t.loadDemoData();const{top:l,left:p}=document.querySelector("#editor").getBoundingClientRect(),h=(e.pageY-l)/u.scale,r=(e.pageX-p)/u.scale,s=i.component.subComponents[d.value].style;t.changeStyle(["position","top"],h),t.changeStyle(["position","left"],r),t.groupStyle={gleft:c((t.positionStyle.left-s.left)/s.width),gtop:c((t.positionStyle.top-s.top)/s.height),gwidth:c(t.positionStyle.width/s.width),gheight:c(t.positionStyle.height/s.height),grotate:t.positionStyle.rotate||0},t.parent=i.component,i.component.subComponents[d.value].appendChild(t)}};return(e,g)=>(m(),f("div",{class:v(["dv-tabs",C.value])},[W("div",{class:v(["tabs-nav",C.value])},[(m(!0),f(j,null,H(B.value,(t,l)=>(m(),f("div",{key:l,class:v(["tabs-tab",{active:$(l),[C.value]:!0}]),style:b(G.value),onClick:p=>T(l)},K(t),15,ae))),128))],2),V.value?(m(),f("div",{key:1,ref_key:"contentRef",ref:I,class:"tabs-content",onDrop:q,onDragover:P},[R(n.value.display||!1)?(m(),U(S(ne),{key:0,id:"shape"+n.value.id,defaultStyle:n.value.style,style:b(E(n.value)),active:n.value.id===(M.value||{}).id,info:n.value,class:v({lock:n.value.locked}),isInner:!0,index:d.value},{default:X(()=>[k(S(_),{id:"component"+n.value.id,class:"component",style:b(S(Y)(n.value)),component:n.value},null,8,["id","style","component"])]),_:1},8,["id","defaultStyle","style","active","info","class","index"])):J("",!0)],544)):(m(),f("div",{key:0,ref_key:"content",ref:n,class:"tabs-content"},[k(S(_),{id:"component"+n.value.id,class:"component",style:b(S(O)(n.value)),component:n.value},null,8,["id","style","component"])],512))],2))}});const pe=te(le,[["__scopeId","data-v-fa897eac"]]);export{pe as default};
