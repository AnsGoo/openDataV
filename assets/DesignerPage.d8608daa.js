var rt=Object.defineProperty,dt=Object.defineProperties;var mt=Object.getOwnPropertyDescriptors;var Ve=Object.getOwnPropertySymbols;var pt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable;var Pe=(t,e,n)=>e in t?rt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ce=(t,e)=>{for(var n in e||(e={}))pt.call(e,n)&&Pe(t,n,e[n]);if(Ve)for(var n of Ve(e))vt.call(e,n)&&Pe(t,n,e[n]);return t},Se=(t,e)=>dt(t,mt(e));var Z=(t,e,n)=>new Promise((l,r)=>{var u=p=>{try{s(n.next(p))}catch(v){r(v)}},c=p=>{try{s(n.throw(p))}catch(v){r(v)}},s=p=>p.done?l(p.value):Promise.resolve(p.value).then(u,c);s((n=n.apply(t,e)).next())});import{d as R,r as B,e as De,k as U,u as H,v as ae,O as _,X as A,Y as z,Z as fe,R as de,G as a,B as q,w as pe,c as i,F as K,_ as oe,P as x,a2 as Ie,a5 as be,a8 as ft,y as ze,Q as m,W as _t,$ as xe,a3 as Fe,a as ke,U as Ee,a0 as ht,a1 as gt,m as le}from"./@vue.a2815691.js";import{_ as W,n as re,u as ue,b as we,o as Ae,E as Me,f as je,q as yt,l as Ke,m as ie,t as bt,v as Ct,w as St,x as ne,y as Je,I as te,i as xt,z as wt,A as Dt,B as Qe}from"./index.395efaf1.js";import{u as Ze,a as et,S as Ft}from"./Shape.30ccea4b.js";import{u as kt,a as tt}from"./vue-router.c997c3e8.js";import{u as Et,s as Bt,g as $t}from"./pages.dfa3b019.js";import{A as nt,B as at,C as G,h as ee,g as Lt,D as Be,E as O,F as me,f as Re,G as It,H as Nt,I as At,J as ve,K as $e,k as _e,L as ye,M as lt,O as Te,P as Tt,Q as zt,i as ot,R as Le,S as Ue,v as Rt,t as Xe,y as Ne,w as Ut}from"./naive-ui.6ffd8c7f.js";import{d as ut,c as st}from"./lodash-es.5f1bdab1.js";import"./pinia.6e1173f7.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./dexie.78e6a997.js";import"./nprogress.5b68415b.js";import"./axios.744bc20e.js";import"./@icon-park.b1426ebe.js";import"./date-fns.3c009aaa.js";import"./seemly.50a99b79.js";import"./vueuc.e50d3fb2.js";import"./evtd.9eee5233.js";import"./@css-render.8efa119b.js";import"./vooks.5c35c0ee.js";import"./vdirs.9c42edfb.js";import"./@juggle.37ed2144.js";import"./css-render.d5050412.js";import"./@emotion.6322e2ae.js";import"./treemate.80cdf2c2.js";import"./date-fns-tz.851ed5df.js";import"./async-validator.fb49d0f5.js";import"./index.a867692c.js";const Vt={class:"value"},Pt=R({__name:"RulerLine",props:{scale:null,thick:null,palette:null,index:null,start:null,vertical:{type:Boolean},value:null,isShowReferLine:{type:Boolean}},emits:["onMouseDown","onRelease","onRemove"],setup(t,{emit:e}){const n=t,l=B(0),r=B(!0);De(()=>{l.value=n.value});const u=o=>{r.value=o>=0},c=U(()=>{const o=(l.value-n.start)*n.scale;u(o);const d=o+"px";return n.vertical?{top:d}:{left:d}}),s=U(()=>{var h;const o=`1px solid ${(h=n.palette)==null?void 0:h.lineColor}`,d=n.vertical?{borderTop:o}:{borderLeft:o},b=n.isShowReferLine?n.vertical?"ns-resize":"ew-resize":"none";return ce({cursor:b},d)}),p=U(()=>n.vertical?{left:n.thick+"px"}:{top:n.thick+"px"}),v=o=>{const d=n.vertical?o.clientY:o.clientX,b=l.value;e("onMouseDown");const h=C=>{const F=n.vertical?C.clientY:C.clientX,$=Math.round(b+(F-d)/n.scale);l.value=$},N=()=>{e("onRelease",l.value,n.index),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",N)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",N)},f=()=>{e("onRemove",n.index)};return(o,d)=>H((_(),A("div",{class:"line",style:de([a(c),a(s)]),onMousedown:v},[z("div",{class:"action",style:de(a(p))},[z("span",{class:"del",onClick:f},"\xD7"),z("span",Vt,fe(l.value),1)],4)],36)),[[ae,r.value]])}});var Mt=W(Pt,[["__scopeId","data-v-4ebfe015"]]);const jt=t=>t<=.25?40:t<=.5?20:t<=1?10:t<=2?5:t<=4?2:1,Oe=.83,Xt=(t,e,n,l,r,u)=>{const{scale:c,width:s,height:p,ratio:v,palette:f}=r,{bgColor:o,fontColor:d,shadowColor:b,longfgColor:h,shortfgColor:N}=f;if(t.scale(v,v),t.clearRect(0,0,s,p),t.fillStyle=o,t.fillRect(0,0,s,p),l){const k=(n-e)*c,D=l*c;t.fillStyle=b,u?t.fillRect(k,0,D,p*3/8):t.fillRect(0,k,s*3/8,D)}const C=jt(c),F=C*c,$=C*10,P=$*c,M=Math.floor(e/C)*C,g=Math.floor(e/$)*$,S=(M-e)/C*F,w=(g-e)/$*P,L=e+Math.ceil((u?s:p)/c);t.beginPath(),t.fillStyle=d,t.strokeStyle=h;for(let k=g,D=0;k<L;k+=$,D++){const T=w+D*P+.5;u?t.moveTo(T,0):t.moveTo(0,T),t.save(),u?t.translate(T,p*.4):t.translate(s*.4,T),u||t.rotate(-Math.PI/2),t.scale(Oe/v,Oe/v),t.fillText(k.toString(),4*v,7*v),t.restore(),u?t.lineTo(T,p*9/16):t.lineTo(s*9/16,T)}t.stroke(),t.closePath(),t.beginPath(),t.strokeStyle=N;for(let k=M,D=0;k<L;k+=C,D++){const T=S+D*F+.5;u?t.moveTo(T,0):t.moveTo(0,T),k%$!==0&&(u?t.lineTo(T,p*1/4):t.lineTo(s*1/4,T))}t.stroke(),t.closePath(),t.setTransform(1,0,0,1,0,0)},Ot=R({__name:"index",props:{showIndicator:{type:Boolean},valueNum:null,scale:null,ratio:null,palette:null,vertical:{type:Boolean},start:null,width:null,height:null,selectStart:null,selectLength:null},emits:["onAddLine","update:showIndicator","update:valueNum"],setup(t,{emit:e}){const n=t,l=q({canvasContext:null});let r=1;const u=B(null);De(()=>{r=n.ratio||window.devicePixelRatio||1,c(),s(r),p(r)});const c=()=>{l.canvasContext=u.value&&u.value.getContext("2d")},s=f=>{if(u.value){u.value.width=n.width*f,u.value.height=n.height*f;const o=l.canvasContext;o&&(o.font=`${12*f}px -apple-system,
                "Helvetica Neue", ".SFNSText-Regular",
                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",
                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif`,o.lineWidth=1,o.textBaseline="middle")}},p=f=>{const o={scale:n.scale,width:n.width,height:n.height,palette:n.palette,ratio:f};l.canvasContext&&Xt(l.canvasContext,n.start,n.selectStart,n.selectLength,o,!n.vertical)};pe(()=>n.start,()=>p(r)),pe([()=>n.width,()=>n.height],()=>{s(r),p(r)});const v=(f,o)=>{const d=(N,C,F)=>Math.round(C+N/F),b=n.vertical?f.offsetY:f.offsetX,h=d(b,n.start,n.scale);switch(o){case"click":e("onAddLine",h);break;case"enter":e("update:valueNum",h),e("update:showIndicator",!0);break;default:e("update:valueNum",h);break}};return(f,o)=>(_(),A("canvas",{ref_key:"canvas",ref:u,class:"ruler",onClick:o[0]||(o[0]=d=>v(d,"click")),onMouseenter:o[1]||(o[1]=d=>v(d,"enter")),onMousemove:o[2]||(o[2]=d=>v(d,"move")),onMouseleave:o[3]||(o[3]=d=>f.$emit("update:showIndicator",!1))},null,544))}});const Ht={class:"lines"},Wt={class:"value"},Yt=R({__name:"RulerWrapper",props:{scale:null,ratio:null,thick:null,selectStart:null,selectLength:null,isShowReferLine:{type:Boolean},palette:null,vertical:{type:Boolean,default:!0},width:{default:200},height:{default:200},start:{default:0},lines:null},setup(t){const e=t,n=B(!1),l=B(0),r=U(()=>e.vertical?"v-container":"h-container"),u=U(()=>{const f={width:`calc(100% - ${e.thick}px)`,height:`${e.thick+1}px`,left:`${e.thick}px`},o={width:`${e.thick&&e.thick+1}px`,height:`calc(100% - ${e.thick}px)`,top:`${e.thick}px`};return e.vertical?o:f}),c=U(()=>{var b;const f=(l.value-(e.start||0))*e.scale;let o="top",d="borderLeft";return o=e.vertical?"top":"left",d=e.vertical?"borderBottom":"borderLeft",{[o]:f+"px",[d]:`1px solid ${(b=e.palette)==null?void 0:b.lineColor}`}}),s=f=>{(e.lines||[]).push(f)},p=(f,o)=>{const d=f-(e.start||0),b=(e.vertical?e.height||200:e.width||200)/e.scale;d<0||d>b?v(o):(e.lines||[])[o]=f},v=f=>{(e.lines||[]).splice(f,1)};return(f,o)=>(_(),A("div",{class:Ie(a(r)),style:de(a(u))},[i(Ot,{vertical:t.vertical,scale:t.scale,width:t.width,height:t.height,start:t.start,ratio:t.ratio,"select-start":t.selectStart,"select-length":t.selectLength,palette:t.palette,valueNum:l.value,"onUpdate:valueNum":o[0]||(o[0]=d=>l.value=d),showIndicator:n.value,"onUpdate:showIndicator":o[1]||(o[1]=d=>n.value=d),onOnAddLine:s},null,8,["vertical","scale","width","height","start","ratio","select-start","select-length","palette","valueNum","showIndicator"]),H(z("div",Ht,[(_(!0),A(K,null,oe(t.lines,(d,b)=>(_(),x(Mt,{key:d+b,index:b,value:d>>0,scale:t.scale,start:t.start,thick:t.thick,palette:t.palette,vertical:t.vertical,"is-show-refer-line":t.isShowReferLine,onOnRemove:v,onOnRelease:p},null,8,["index","value","scale","start","thick","palette","vertical","is-show-refer-line"]))),128))],512),[[ae,t.isShowReferLine]]),H(z("div",{class:"indicator",style:de(a(c))},[z("div",Wt,fe(l.value),1)],4),[[ae,n.value]])],6))}});var He=W(Yt,[["__scopeId","data-v-78311feb"]]);const Gt={id:"mb-ruler",class:"style-ruler mb-ruler"},qt=R({__name:"Index",props:{scale:{default:1},ratio:{default:0},thick:{default:16},palette:null,startX:null,startY:null,width:{default:200},height:{default:200},shadow:null,lines:null,isShowReferLine:{type:Boolean,default:!0}},setup(t){const e=t,n=U(()=>{function l(r,u){return Object.keys(r).forEach(c=>{c&&r.hasOwnProperty(c)&&(typeof u.key=="object"?r[c]=l(r[c],u[c]):u.hasOwnProperty(c)&&(r[c]=u[c]))}),r}return l({bgColor:"rgba(225,225,225, 0)",longfgColor:"#BABBBC",shortfgColor:"#C8CDD0",fontColor:"#7D8694",shadowColor:"#E8E8E8",lineColor:"#EB5648",borderColor:"#DADADC",cornerActiveColor:"rgb(235, 86, 72, 0.6)",menu:{bgColor:"#fff",dividerColor:"#DBDBDB",listItem:{textColor:"#415058",hoverTextColor:"#298DF8",disabledTextColor:"rgba(65, 80, 88, 0.4)",bgColor:"#fff",hoverBgColor:"#F2F2F2"}}},e.palette||{})});return(l,r)=>{var u,c,s,p,v,f;return _(),A("div",Gt,[i(He,{vertical:!1,width:t.width,height:t.thick,"is-show-refer-line":t.isShowReferLine,thick:t.thick,ratio:t.ratio,start:t.startX,lines:((u=t.lines)==null?void 0:u.h)||[],"select-start":((c=t.shadow)==null?void 0:c.x)||0,"select-length":((s=t.shadow)==null?void 0:s.width)||0,scale:t.scale,palette:a(n)},null,8,["width","height","is-show-refer-line","thick","ratio","start","lines","select-start","select-length","scale","palette"]),i(He,{vertical:!0,width:t.thick,height:t.height,"is-show-refer-line":t.isShowReferLine,thick:t.thick,ratio:t.ratio,start:t.startY,lines:((p=t.lines)==null?void 0:p.v)||[],"select-start":((v=t.shadow)==null?void 0:v.y)||0,"select-length":((f=t.shadow)==null?void 0:f.height)||0,scale:t.scale,palette:a(n)},null,8,["width","height","is-show-refer-line","thick","ratio","start","lines","select-start","select-length","scale","palette"])])}}});const Kt=R({__name:"Ruler",props:{width:null,height:null,isShowReferLine:{type:Boolean}},setup(t){const r={h:[],v:[]},u=20;return(c,s)=>(_(),x(a(qt),{thick:u,scale:1,width:t.width,height:t.height,startX:0,startY:0,lines:r,isShowReferLine:t.isShowReferLine},null,8,["width","height","isShowReferLine"]))}});var Jt=W(Kt,[["__scopeId","data-v-4d6ebb97"]]);const Qt=R({__name:"Area",props:{start:null,width:null,height:null},setup(t){const e=Ze(),n=()=>{e.compose(),re.emit("hideArea")},l=()=>{e.flushLeft(),re.emit("hideArea")},r=()=>{e.flushRight(),re.emit("hideArea")},u=()=>{e.flushTop(),re.emit("hideArea")},c=()=>{e.flushBottom(),re.emit("hideArea")},s=()=>{e.flushRow(),re.emit("hideArea")},p=()=>{e.flushColumn(),re.emit("hideArea")},v=()=>[{text:"\u7EC4\u5408",subText:"",disable:!e.canCompose,handler:n},{divider:!0},{text:"\u5DE6\u5BF9\u9F50",subText:"",handler:l},{text:"\u53F3\u5BF9\u9F50",subText:"",handler:r},{text:"\u9876\u5BF9\u9F50",subText:"",handler:u},{text:"\u5E95\u5BF9\u9F50",subText:"",handler:c},{divider:!0},{text:"\u6C34\u5E73\u5BF9\u9F50",subText:"",handler:s},{text:"\u5782\u76F4\u5BF9\u9F50",subText:"",handler:p}];return(f,o)=>{const d=be("contextmenu");return H((_(),A("div",{style:de({left:t.start.x+"px",top:t.start.y+"px",width:t.width+"px",height:t.height+"px"}),class:"area"},null,4)),[[d,v]])}}});var We=W(Qt,[["__scopeId","data-v-a9838500"]]);const Zt={},en={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},tn=ft('<defs data-v-c1eb8d14><pattern id="smallGrid" width="7.236328125" height="7.236328125" patternUnits="userSpaceOnUse" data-v-c1eb8d14><path d="M 7.236328125 0 L 0 0 0 7.236328125" fill="none" stroke="rgba(207, 207, 207, 0.3)" stroke-width="1" data-v-c1eb8d14></path></pattern><pattern id="grid" width="36.181640625" height="36.181640625" patternUnits="userSpaceOnUse" data-v-c1eb8d14><rect width="36.181640625" height="36.181640625" fill="url(#smallGrid)" data-v-c1eb8d14></rect><path d="M 36.181640625 0 L 0 0 0 36.181640625" fill="none" stroke="rgba(186, 186, 186, 0.5)" stroke-width="1" data-v-c1eb8d14></path></pattern></defs><rect width="100%" height="100%" fill="url(#grid)" data-v-c1eb8d14></rect>',2),nn=[tn];function an(t,e){return _(),A("svg",en,nn)}var ln=W(Zt,[["render",an],["__scopeId","data-v-c1eb8d14"]]);const on={class:"mark-line"},un=R({__name:"MarkLine",setup(t){const e=ue(),n=B([]),l=q(["xt","xc","xb","yl","yc","yr"]),r=B(3),u=q({xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}),c=d=>{n.value.push(d)},s=()=>{Object.keys(u).forEach(d=>{u[d]=!1})};we("move",d=>{p(d.isDownward,d.isRightward)}),we("unmove",()=>{s()});const p=(d,b)=>{const h=e.componentData;if(e.curComponent){const{top:N,left:C,right:F,bottom:$}=Ae(e.curComponent.style),P=(F-C)/2,M=($-N)/2;s(),h.forEach(g=>{if(g==e.curComponent)return;const S=Ae(g.style),{top:w,left:L,bottom:k,right:D}=S,T=(D-L)/2,I=(k-w)/2,y={top:[{isNearly:v(N,w),lineNode:n.value[0],line:"xt",dragShift:w,lineShift:w},{isNearly:v($,w),lineNode:n.value[0],line:"xt",dragShift:w-($-N||0),lineShift:w},{isNearly:v((N||0)+M,w+I),lineNode:n.value[1],line:"xc",dragShift:w+I-M,lineShift:w+I},{isNearly:v(N,k),lineNode:n.value[2],line:"xb",dragShift:k,lineShift:k},{isNearly:v($,k),lineNode:n.value[2],line:"xb",dragShift:k-($-N||0),lineShift:k}],left:[{isNearly:v(C,L),lineNode:n.value[3],line:"yl",dragShift:L,lineShift:L},{isNearly:v(F,L),lineNode:n.value[3],line:"yl",dragShift:L-(F-C||0),lineShift:L},{isNearly:v((C||0)+P,L+T),lineNode:n.value[4],line:"yc",dragShift:L+T-P,lineShift:L+T},{isNearly:v(C,D),lineNode:n.value[5],line:"yr",dragShift:D,lineShift:D},{isNearly:v(F,D),lineNode:n.value[5],line:"yr",dragShift:D-(F-C||0),lineShift:D}]},V=[],{rotate:j}=e.curComponent.style;Object.keys(y).forEach(E=>{y[E].forEach(X=>{if(!X.isNearly)return;const he=j!=0?f(E,X,{width:F-C,height:$-N}):X.dragShift;e.setComponentSingleStyle({key:E,value:he}),X.lineNode.style[E]=`${X.lineShift}px`,V.push(X.line)})}),V.length&&o(V,d,b)})}},v=(d,b)=>Math.abs(d-b)<=r.value,f=(d,b,h)=>{const{width:N,height:C}=e.curComponent.style;return d=="top"?Math.round(b.dragShift-(C-h.height)/2):Math.round(b.dragShift-(N-h.width)/2)},o=(d,b,h)=>{h?d.includes("yr")?u.yr=!0:d.includes("yc")?u.yc=!0:d.includes("yl")&&(u.yl=!0):d.includes("yl")?u.yl=!0:d.includes("yc")?u.yc=!0:d.includes("yr")&&(u.yr=!0),b?d.includes("xb")?u.xb=!0:d.includes("xc")?u.xc=!0:d.includes("xt")&&(u.xt=!0):d.includes("xt")?u.xt=!0:d.includes("xc")?u.xc=!0:d.includes("xb")&&(u.xb=!0)};return(d,b)=>(_(),A("div",on,[(_(!0),A(K,null,oe(l,h=>H((_(),A("div",{key:h,class:Ie(["line",h.includes("x")?"xline":"yline"]),ref_for:!0,ref:c},null,2)),[[ae,u[h]||!1]])),128))]))}});var sn=W(un,[["__scopeId","data-v-b4937e88"]]);const cn=R({__name:"Index",setup(t){const e=ue(),n=Ze(),l=et(),r=y=>je(y,["top","left","width","height","rotate"]),u=U(()=>n.style.width>0&&!w.value),c=U(()=>({x:n.style.left,y:n.style.top})),s=U(()=>n.style.width),p=U(()=>n.style.height),v=()=>{w.value=!1,g.value=0,S.value=0,n.setAreaData({left:0,top:0,width:0,height:0,rotate:0},[])},f=()=>{e.clearCanvas()},o=()=>{l.paste(!1)},d=()=>[{text:"\u7C98\u8D34",subText:"Ctrl + V",handler:o},{text:"\u6E05\u7A7A\u753B\u5E03",subText:"",handler:f},{text:"\u663E\u793A\u8F85\u52A9\u7EBF",subText:"",disable:k.value,handler:()=>k.value=!0},{text:"\u9690\u85CF\u8F85\u52A9\u7EBF",subText:"",disable:!k.value,handler:()=>k.value=!1}];we("hideArea",v),De(()=>{console.log("\u8FDB\u5165\u7F16\u8F91\u6A21\u5F0F"),e.setEditMode(Me.EDIT),document.addEventListener("keydown",I),document.addEventListener("paste",F)}),ze(()=>{console.log("\u8FDB\u5165\u9884\u89C8\u6A21\u5F0F"),e.setEditMode(Me.PREVIEW),document.removeEventListener("keydown",I),document.removeEventListener("paste",F),e.clearCanvas()});const b=U(()=>e.componentData),h=U(()=>e.canvasStyleData),N=U(()=>e.curComponent),C=U(()=>{const y=Se(ce({},h.value),{backgroundImage:h.value.image,backgroundSize:"cover"});return je(y,["width","height","backgroundImage","backgroundSize"])}),F=y=>{if(y.clipboardData){const V=y.clipboardData.getData("text");try{const j=JSON.parse(V);"component"in j&&(y.preventDefault(),e.appendComponent(j))}catch(j){console.log(j)}}},$=B(0),P=B(0),M=q({x:0,y:0}),g=B(0),S=B(0),w=B(!1),L=B(null),k=B(!0),D=y=>{var V;if(y.button===0){e.setCurComponent(void 0),y.preventDefault(),y.stopPropagation(),v();const j=(V=L.value)==null?void 0:V.getBoundingClientRect();$.value=j.x,P.value=j.y;const E=y.clientX,X=y.clientY;M.x=E-$.value,M.y=X-P.value,w.value=!0;const he=Y=>{Y.preventDefault(),Y.stopPropagation(),g.value=Math.abs(Y.clientX-E),S.value=Math.abs(Y.clientY-X),Y.clientX<E&&(M.x=Y.clientX-$.value),Y.clientY<X&&(M.y=Y.clientY-P.value)},ge=Y=>{if(document.removeEventListener("mousemove",he),document.removeEventListener("mouseup",ge),Y.clientX==E&&Y.clientY==X){v();return}const J={left:M.x,top:M.y,right:g.value+M.x,bottom:M.y+S.value},Ce=T(J);if(Ce){const Q=Ce.rect;n.setAreaData({top:Q.top,left:Q.left,width:Q.right-Q.left,height:Q.bottom-Q.top,rotate:0},Ce.components),M.x=Q.left,M.y=Q.top,g.value=Q.right-Q.left,S.value=Q.bottom-Q.top}};document.addEventListener("mousemove",he),document.addEventListener("mouseup",ge)}},T=y=>{const V=[],j=new Set,E=new Set,X=new Set,he=new Set;if(e.componentData.forEach(ge=>{const Y=ge.style,J=Ae(Y);J.left>=y.left&&J.right<=y.right&&J.top>=y.top&&J.bottom<=y.bottom&&(V.push(ge),j.add(J.left),E.add(J.top),X.add(J.right),he.add(J.bottom))}),V.length>0){const ge=Math.min(...j),Y=Math.max(...X),J=Math.min(...E),Ce=Math.max(...he);return{components:V,rect:{left:ge,right:Y,top:J,bottom:Ce}}}},I=y=>{if(N.value&&y.ctrlKey)switch(y.key){case"ArrowLeft":y.preventDefault(),e.syncComponentLoction({left:N.value.style.left-1});break;case"ArrowUp":y.preventDefault(),e.syncComponentLoction({top:N.value.style.top-1});break;case"ArrowRight":y.preventDefault(),e.syncComponentLoction({left:N.value.style.left+1});break;case"ArrowDown":y.preventDefault(),e.syncComponentLoction({top:N.value.style.top+1});break;default:y.stopPropagation()}else y.stopPropagation()};return(y,V)=>{const j=be("contextmenu");return H((_(),A("div",{class:"editor edit",ref_key:"editor",ref:L,id:"editor",style:de(a(C)),onMousedown:D},[i(ln),i(Jt,{width:a(h).width,height:a(h).height,isShowReferLine:k.value},null,8,["width","height","isShowReferLine"]),(_(!0),A(K,null,oe(a(b),(E,X)=>(_(),A(K,{key:E.id},[a(e).isEditMode&&E.display?(_(),x(Ft,{key:0,id:"shape"+E.id,defaultStyle:E.style,style:de(r(E.style)),active:E.id===(a(N)||{}).id,info:E,index:X.toString(),class:Ie({lock:E.isLock})},{default:m(()=>[(_(),x(_t(E.component),{class:"component",style:de(a(yt)(E)),propValue:E.propValue,componentId:E.id,id:"component"+E.id,index:X.toString(),subComponents:E.subComponents},null,8,["style","propValue","componentId","id","index","subComponents"]))]),_:2},1032,["id","defaultStyle","style","active","info","index","class"])):xe("",!0)],64))),128)),i(sn),w.value?(_(),x(We,{key:0,start:M,width:g.value,height:S.value},null,8,["start","width","height"])):a(u)?(_(),x(We,{key:1,start:a(c),width:a(s),height:a(p)},null,8,["start","width","height"])):xe("",!0)],36)),[[j,d]])}}});var rn=W(cn,[["__scopeId","data-v-5f04ee5c"]]);const dn="2946854",mn="\u65B9\u5411",pn="iconfont",vn="icon-",fn="",_n=[{icon_id:"11291350",name:"\u7EC4",font_class:"zu",unicode:"e854",unicode_decimal:59476},{icon_id:"1817751",name:"\u67F1\u5F62\u56FE",font_class:"zhuxingtu",unicode:"e626",unicode_decimal:58918},{icon_id:"3868284",name:"\u4EEA\u8868\u76D8",font_class:"yibiaopan",unicode:"eb67",unicode_decimal:60263},{icon_id:"4354243",name:"\u56FE\u8868-\u997C\u56FE",font_class:"tubiao-bingtu",unicode:"eb95",unicode_decimal:60309},{icon_id:"4354246",name:"\u56FE\u8868-\u5361\u7247",font_class:"tubiao-qiapian",unicode:"eb96",unicode_decimal:60310},{icon_id:"4354248",name:"\u56FE\u8868-\u6298\u7EBF\u56FE",font_class:"tubiao-zhexiantu",unicode:"eb97",unicode_decimal:60311},{icon_id:"4906240",name:"\u6309\u94AE\u7EC4",font_class:"anniuzu",unicode:"e782",unicode_decimal:59266},{icon_id:"5383645",name:"\u5BFC\u822A",font_class:"daohang",unicode:"e77d",unicode_decimal:59261},{icon_id:"5961366",name:"\u5217\u8868",font_class:"liebiao",unicode:"ec6b",unicode_decimal:60523},{icon_id:"5971297",name:"\u91C7\u7164\u673A",font_class:"caimeiji",unicode:"e603",unicode_decimal:58883},{icon_id:"7040619",name:"\u5176\u4ED6",font_class:"qita",unicode:"e63b",unicode_decimal:58939},{icon_id:"7556180",name:"\u5B9A\u5236",font_class:"dingzhi",unicode:"e609",unicode_decimal:58889},{icon_id:"9752796",name:"\u57FA\u7840",font_class:"jichu",unicode:"e60f",unicode_decimal:58895},{icon_id:"9921108",name:"chart",font_class:"chartt",unicode:"e60a",unicode_decimal:58890},{icon_id:"14475731",name:"\u88C5\u9970\u88C5\u4FEE",font_class:"zhuangshizhuangxiu",unicode:"e6a6",unicode_decimal:59046},{icon_id:"16562592",name:"\u6E29\u5EA6\u8BA1",font_class:"wenduji",unicode:"e6de",unicode_decimal:59102},{icon_id:"22712019",name:"\u6761\u5F62\u8FDB\u5EA6\u56FE",font_class:"tiaoxingjindutu",unicode:"e66b",unicode_decimal:58987},{icon_id:"22761375",name:"\u8FB9\u6846",font_class:"biankuang",unicode:"e6b7",unicode_decimal:59063},{icon_id:"22885432",name:"\u8FDB\u5EA6\u56FE",font_class:"jindutu",unicode:"f24b",unicode_decimal:62027},{icon_id:"124495",name:"\u8B66\u544A",font_class:"jinggao1",unicode:"e601",unicode_decimal:58881},{icon_id:"1846445",name:"\u9884\u8B66\u706F",font_class:"yujingdeng",unicode:"e67f",unicode_decimal:59007},{icon_id:"2239579",name:"\u81EA\u52A8\u7CFB\u7EDF\u8B66\u544A\u706F",font_class:"zidongxitongjinggaodeng1",unicode:"e605",unicode_decimal:58885},{icon_id:"4988542",name:"\u9884\u8B66",font_class:"yujing1",unicode:"e644",unicode_decimal:58948},{icon_id:"9974390",name:"\u9884\u8B66",font_class:"yujing3",unicode:"e6fe",unicode_decimal:59134},{icon_id:"10817515",name:"\u8B66\u544A\u706F",font_class:"jinggaodeng",unicode:"e64b",unicode_decimal:58955},{icon_id:"14151833",name:"\u62A5\u8B66",font_class:"baojing1",unicode:"e630",unicode_decimal:58928},{icon_id:"16965399",name:"\u8B66\u544A\u706F",font_class:"hong",unicode:"e60d",unicode_decimal:58893},{icon_id:"20379044",name:"\u9884\u8B66\u706F",font_class:"yujingdeng1",unicode:"e623",unicode_decimal:58915},{icon_id:"23819336",name:"\u62A5\u8B66 \u8B66\u544A \u9884\u8B66 \u8B66\u544A\u706F",font_class:"a-baojingjinggaoyujingjinggaodeng",unicode:"e628",unicode_decimal:58920},{icon_id:"24312218",name:"light",font_class:"light",unicode:"e63a",unicode_decimal:58938},{icon_id:"24614518",name:"\u544A\u8B66\u706F",font_class:"gaojingdeng9",unicode:"e664",unicode_decimal:58980},{icon_id:"25567211",name:"\u8B66\u544A\u706F",font_class:"jinggaodeng1",unicode:"e613",unicode_decimal:58899},{icon_id:"12041083",name:"\u9884\u8B66",font_class:"yujing5",unicode:"e671",unicode_decimal:58993},{icon_id:"577357",name:"\u5220\u9664",font_class:"shanchu",unicode:"e74b",unicode_decimal:59211},{icon_id:"1986988",name:"\u5220\u9664",font_class:"shanchu1",unicode:"e625",unicode_decimal:58917},{icon_id:"12795401",name:"\u9996\u9875",font_class:"shouye",unicode:"e62d",unicode_decimal:58925},{icon_id:"201556",name:"\u67E5\u770B",font_class:"chakan",unicode:"e600",unicode_decimal:58880},{icon_id:"201638",name:"\u7F16\u8F91",font_class:"bianji",unicode:"e602",unicode_decimal:58882},{icon_id:"11729723",name:"\u590D\u5236",font_class:"fuzhi",unicode:"e608",unicode_decimal:58888},{icon_id:"7269302",name:"\u9996\u9875-\u9ED8\u8BA4",font_class:"shouye-moren",unicode:"e619",unicode_decimal:58905},{icon_id:"658044",name:"\u89E3\u9501",font_class:"jiesuo",unicode:"e669",unicode_decimal:58985},{icon_id:"10097949",name:"\u65CB\u8F6C",font_class:"xuanzhuan",unicode:"e680",unicode_decimal:59008},{icon_id:"374774",name:"\u5F00\u5173",font_class:"kaiguan",unicode:"e61f",unicode_decimal:58911},{icon_id:"122162",name:"\u65F6\u949F",font_class:"clock",unicode:"e63e",unicode_decimal:58942},{icon_id:"1242185",name:"\u53CD\u9988\u4FE1\u606F",font_class:"fankuixinxi",unicode:"e660",unicode_decimal:58976},{icon_id:"2468505",name:"37\u7C7B\u5EFA\u7B51\u4FEE\u7406x16",font_class:"leijianzhuxiulix",unicode:"e695",unicode_decimal:59029},{icon_id:"11747267",name:"\u65F6\u95F4",font_class:"weibiaoti-",unicode:"e618",unicode_decimal:58904},{icon_id:"14794143",name:"sds_\u7B2C37\u7C7B \u5EFA\u7B51\u4FEE\u7406",font_class:"sds_di37leijianzhuxiuli",unicode:"e61e",unicode_decimal:58910},{icon_id:"17762035",name:"\u8054\u52A8\u63A7\u5236",font_class:"liandongkongzhi",unicode:"e624",unicode_decimal:58916},{icon_id:"18165278",name:"\u9501,\u5BC6\u7801,\u5F00\u9501,\u89E3\u9501",font_class:"unlock-full",unicode:"e882",unicode_decimal:59522},{icon_id:"288554",name:"ascend",font_class:"ascend",unicode:"e6b4",unicode_decimal:59060},{icon_id:"288556",name:"falling",font_class:"falling",unicode:"e6b6",unicode_decimal:59062},{icon_id:"815867",name:"\u6309\u94AE-\u5173",font_class:"buttonoff",unicode:"e614",unicode_decimal:58900},{icon_id:"815872",name:"\u6309\u94AE-\u5F00",font_class:"buttonon",unicode:"e615",unicode_decimal:58901},{icon_id:"2674878",name:"\u7BAD\u5934 \u4E0A",font_class:"jiantoushang",unicode:"e62c",unicode_decimal:58924},{icon_id:"2674928",name:"\u7BAD\u5934 \u53F3",font_class:"jiantouyou",unicode:"e632",unicode_decimal:58930},{icon_id:"2674929",name:"\u7BAD\u5934 \u4E0B",font_class:"jiantouxia",unicode:"e633",unicode_decimal:58931},{icon_id:"7594038",name:"24gl-next",font_class:"24gl-next",unicode:"ea6b",unicode_decimal:60011},{icon_id:"7594046",name:"24gl-pauseCircle",font_class:"24gl-pauseCircle",unicode:"ea6f",unicode_decimal:60015},{icon_id:"7594068",name:"24gl-previous",font_class:"24gl-previous",unicode:"ea73",unicode_decimal:60019},{icon_id:"7594086",name:"24gl-stopCircle",font_class:"24gl-stopCircle",unicode:"ea79",unicode_decimal:60025},{icon_id:"10268256",name:"\u6309\u94AE_\u5F00\u542F",font_class:"anniu_kaiqi",unicode:"e659",unicode_decimal:58969},{icon_id:"10268257",name:"\u6309\u94AE_\u5173\u95ED",font_class:"anniu_guanbi",unicode:"e65b",unicode_decimal:58971},{icon_id:"25807963",name:"\u7BAD\u5934 \u4E0A",font_class:"jiantoushangzuo-copy",unicode:"ec63",unicode_decimal:60515},{icon_id:"25808146",name:"\u5411\u53F32",font_class:"xiangzuo2-copy",unicode:"ec64",unicode_decimal:60516},{icon_id:"166602",name:"\u5173\u95ED\u64AD\u653E",font_class:"guanbibofang",unicode:"e61d",unicode_decimal:58909},{icon_id:"577396",name:"\u5411\u4E0A3",font_class:"xiangshang3",unicode:"e76f",unicode_decimal:59247},{icon_id:"577401",name:"\u5411\u4E0B5",font_class:"xiangxia5",unicode:"e774",unicode_decimal:59252},{icon_id:"577403",name:"\u5411\u53F32",font_class:"xiangyou2",unicode:"e776",unicode_decimal:59254},{icon_id:"1159910",name:"\u53F3\u64AD\u653E",font_class:"youbofang",unicode:"e62e",unicode_decimal:58926},{icon_id:"1159911",name:"\u5DE6\u64AD\u653E",font_class:"zuobofang",unicode:"e62f",unicode_decimal:58927},{icon_id:"1185945",name:"\u64AD\u653E",font_class:"bofang2",unicode:"e606",unicode_decimal:58886},{icon_id:"1488892",name:"\u64AD\u653E",font_class:"bofang5",unicode:"e607",unicode_decimal:58887},{icon_id:"1727559",name:"323\u5411\u5DE6\u4EA4\u6362",font_class:"xiangzuojiaohuan",unicode:"e8f8",unicode_decimal:59640},{icon_id:"1727561",name:"324\u5411\u53F3\u4EA4\u6362",font_class:"xiangyoujiaohuan",unicode:"e8f9",unicode_decimal:59641},{icon_id:"2076218",name:"\u64AD\u653E2",font_class:"bofang6",unicode:"e87c",unicode_decimal:59516},{icon_id:"7594051",name:"24gl-playCircle",font_class:"24gl-playCircle",unicode:"ea6e",unicode_decimal:60014},{icon_id:"11121478",name:"\u5411\u4E0A",font_class:"xiangshang7",unicode:"e63c",unicode_decimal:58940},{icon_id:"16388177",name:"\u64AD\u653E",font_class:"bofang26",unicode:"e60e",unicode_decimal:58894},{icon_id:"18176557",name:"\u64AD\u653E",font_class:"play1",unicode:"ea8d",unicode_decimal:60045},{icon_id:"24267227",name:"\u64AD\u653E-\u5FEB\u9000",font_class:"bofang-kuaitui",unicode:"e68a",unicode_decimal:59018},{icon_id:"24267260",name:"\u64AD\u653E09",font_class:"bofang09",unicode:"e690",unicode_decimal:59024},{icon_id:"24268374",name:"\u64AD\u653E-\u5FEB\u8FDB",font_class:"bofang-kuaijin",unicode:"e6d8",unicode_decimal:59096},{icon_id:"25807740",name:"\u5411\u4E0A",font_class:"xiangxia7",unicode:"ec62",unicode_decimal:60514}];var hn={id:dn,name:mn,font_family:pn,css_prefix_text:vn,description:fn,glyphs:_n};const gn={class:"icon_lists"},yn=["onClick"],bn=R({__name:"IconFont",props:{visible:{type:Boolean}},emits:["update:visible"],setup(t,{emit:e}){const n=U(()=>hn.glyphs.map(u=>`icon-${u.font_class}`)),l=()=>{e("update:visible",!1)},r=u=>{Ke(u),ie.success(`\u590D\u5236\u56FE\u6807: ${u}`)};return(u,c)=>{const s=be("click-outside");return _(),A("div",null,[i(a(at),{show:t.visible},{default:m(()=>[H((_(),x(a(nt),{title:`\u56FE\u6807\u6570\u91CF${a(n).length}`,class:"tab-container"},{default:m(()=>[z("ul",gn,[(_(!0),A(K,null,oe(a(n),p=>(_(),A("li",{key:p,class:"dib",onClick:v=>r(p)},[z("span",{class:Ie(`icon iconfont ${p}`)},null,2)],8,yn))),128))])]),_:1},8,["title"])),[[s,l]])]),_:1},8,["show"])])}}});var Cn=W(bn,[["__scopeId","data-v-c07295dc"]]);const se=t=>(ht("data-v-28993e7d"),t=t(),gt(),t),Sn={class:"tool-bar"},xn={class:"tool-bar-item"},wn=se(()=>z("span",null,"\u9996\u9875",-1)),Dn=se(()=>z("span",null,"\u4FDD\u5B58",-1)),Fn=se(()=>z("span",null,"\u9884\u89C8",-1)),kn=se(()=>z("span",null,"\u64A4\u9500",-1)),En=se(()=>z("span",null,"\u6062\u590D",-1)),Bn=se(()=>z("span",null,"\u5BFC\u51FA",-1)),$n=se(()=>z("span",null,"\u5BFC\u5165",-1)),Ln=se(()=>z("span",null,"\u5168\u5C4F",-1)),In=se(()=>z("span",null,"\u5750\u6807",-1)),Nn={class:"tool-bar-item"},An=se(()=>z("span",null,"\u56FE\u6807",-1)),Tn=se(()=>z("span",null,"\u56FE\u7247",-1)),zn={class:"dialog-footer"},Rn=ke("\u53D6\u6D88"),Un=ke("\u65B0\u589E"),Vn=ke("\u66F4\u65B0"),Pn=R({__name:"Toolbar",setup(t){const e=ue(),n=bt(),l=kt(),r=tt(),u=U(()=>e.componentData),c=U(()=>e.canvasStyleData),s=U(()=>r.name==="Create");let p="";const v=B(!1),f=B(!1),o=B(!1),d=q({name:"",thumbnail:""}),b=q({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0",trigger:"blur"}]});let h=0;De(()=>{setTimeout(()=>{d.name=e.name,d.thumbnail=e.thumbnail},500)});const N=()=>Z(this,null,function*(){let I;h<=0?I=yield n.undo():I=yield n.undo(h-1),I?(h=I.id,e.setLayoutData({canvasData:I.canvasData,canvasStyle:I.canvasStyle})):ie.warning("\u6CA1\u6709\u5FEB\u7167\u4E86")}),C=()=>{const{href:I}=l.resolve("/preview");window.open(I,"_blank")},F=()=>{l.push({name:"Pages"})},$=()=>{v.value=!0},P=()=>Z(this,null,function*(){let I;h<=0?I=yield n.undo():I=yield n.undo(h+1),I?(h=I.id,e.setLayoutData({canvasData:I.canvasData,canvasStyle:I.canvasStyle})):ie.warning("\u6CA1\u6709\u5FEB\u7167\u4E86")}),M=()=>{e.toggleShowEm()},g=()=>{f.value=!f.value},S=()=>{const I=document.querySelector(".center.scrollbar");document.fullscreenEnabled&&I&&I.requestFullscreen()},w=I=>Z(this,null,function*(){const{name:y,thumbnail:V}=d;if(!y){ie.error("\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0");return}const j={name:y,thumbnail:V,canvasData:u.value,canvasStyle:c.value};if(e.setName(y),e.setThumbnail(V),I==="update")try{yield Et(p,j),ie.success("\u4FEE\u6539\u6210\u529F")}catch(E){ie.error("\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u5BFC\u51FA\u5230\u672C\u5730\uFF0C\u5E76\u91CD\u65B0\u8FDB\u5165\u6B64\u9875\u9762")}finally{v.value=!1}else try{const E=yield Bt(j);ie.success("\u4FDD\u5B58\u6210\u529F"),l.push({name:"Editor",params:{index:E.id}})}catch(E){ie.error(`\u4FDD\u5B58\u5931\u8D25\uFF0C\u5931\u8D25\u4FE1\u606F:${(E==null?void 0:E.message)||E}`)}finally{v.value=!1}}),L=()=>{const I=`${e.name}`||"layout";Ct(`${I}.json`,JSON.stringify({canvasData:u.value,canvasStyle:c.value}))},k=()=>{St(D,".json")},D=I=>{if(I.target&&I.target.result){const y=JSON.parse(I.target.result);y&&(e.setComponentData(y.canvasData),e.setCanvasStyle(y.canvasStyle))}},T=pe(()=>r.params.index,(I,y)=>{p=I},{immediate:!0});return ze(()=>{T()}),(I,y)=>{const V=Ee("icon-park"),j=be("action");return _(),A(K,null,[z("div",Sn,[z("div",xn,[i(a(ee),null,{trigger:m(()=>[i(a(G),{quaternary:"",size:"small",onClick:F,title:"\u9996\u9875"},{default:m(()=>[i(V,{name:"home",size:"24"})]),_:1})]),default:m(()=>[wn]),_:1}),i(a(Lt),{vertical:""}),i(a(ee),null,{trigger:m(()=>[H((_(),x(a(G),{quaternary:"",size:"small",onClick:$,title:"\u4FDD\u5B58"},{default:m(()=>[i(V,{name:"save-one",size:"22"})]),_:1})),[[j,"add"]])]),default:m(()=>[Dn]),_:1}),i(a(ee),null,{trigger:m(()=>[i(a(G),{quaternary:"",size:"small",onClick:C,title:"\u9884\u89C8"},{default:m(()=>[i(V,{name:"computer",size:"22"})]),_:1})]),default:m(()=>[Fn]),_:1}),i(a(ee),null,{trigger:m(()=>[i(a(G),{quaternary:"",size:"small",onClick:N,title:"\u64A4\u9500"},{default:m(()=>[i(V,{name:"back",size:"22"})]),_:1})]),default:m(()=>[kn]),_:1}),i(a(ee),null,{trigger:m(()=>[i(a(G),{quaternary:"",size:"small",onClick:P,title:"\u6062\u590D"},{default:m(()=>[i(V,{name:"next",size:"22"})]),_:1})]),default:m(()=>[En]),_:1}),i(a(ee),null,{trigger:m(()=>[i(a(G),{quaternary:"",size:"small",onClick:L,title:"\u5BFC\u51FA"},{default:m(()=>[i(V,{name:"download-one",size:"22"})]),_:1})]),default:m(()=>[Bn]),_:1}),i(a(ee),null,{trigger:m(()=>[i(a(G),{quaternary:"",size:"small",onClick:k,title:"\u5BFC\u5165"},{default:m(()=>[i(V,{name:"upload-one",size:"22"})]),_:1})]),default:m(()=>[$n]),_:1}),i(a(ee),null,{trigger:m(()=>[i(a(G),{quaternary:"",size:"small",onClick:S,title:"\u5168\u5C4F"},{default:m(()=>[i(V,{name:"full-screen",size:"22"})]),_:1})]),default:m(()=>[Ln]),_:1}),i(a(ee),null,{trigger:m(()=>[i(a(G),{quaternary:"",size:"small",onClick:M,title:"\u5750\u6807"},{default:m(()=>[i(V,{name:"cones",size:"22"})]),_:1})]),default:m(()=>[In]),_:1})]),z("div",Nn,[i(a(ee),null,{trigger:m(()=>[i(a(G),{quaternary:"",class:"resource",size:"small",onClick:g,title:"\u56FE\u6807"},{default:m(()=>[i(V,{name:"game-ps",size:"22"})]),_:1})]),default:m(()=>[An]),_:1}),i(a(ee),null,{trigger:m(()=>[i(a(G),{quaternary:"",class:"resource",size:"small",onClick:y[0]||(y[0]=()=>o.value=!0),title:"\u56FE\u7247"},{default:m(()=>[i(V,{name:"picture",size:"22"})]),_:1})]),default:m(()=>[Tn]),_:1})])]),i(a(at),{show:v.value,"onUpdate:show":y[6]||(y[6]=E=>v.value=E),center:""},{default:m(()=>[i(a(nt),{title:"\u4FDD\u5B58\u5F53\u524D\u5E03\u5C40",style:{width:"30%"},size:"medium"},{footer:m(()=>[z("span",zn,[i(a(G),{onClick:y[3]||(y[3]=E=>v.value=!1)},{default:m(()=>[Rn]),_:1}),a(s)?(_(),x(a(G),{key:0,type:"primary",onClick:y[4]||(y[4]=E=>w("new"))},{default:m(()=>[Un]),_:1})):(_(),x(a(G),{key:1,type:"primary",onClick:y[5]||(y[5]=E=>w("update"))},{default:m(()=>[Vn]),_:1}))])]),default:m(()=>[i(a(Be),{model:d,rules:b,onSubmit:y[2]||(y[2]=Fe(()=>{},["prevent"]))},{default:m(()=>[i(a(O),{label:"\u9875\u9762\u540D\u79F0",prop:"name"},{default:m(()=>[i(a(me),{modelValue:d.name,"onUpdate:modelValue":y[1]||(y[1]=E=>d.name=E),placeholder:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["show"]),i(Cn,{visible:f.value,"onUpdate:visible":y[7]||(y[7]=E=>f.value=E)},null,8,["visible"])],64)}}});var Mn=W(Pn,[["__scopeId","data-v-28993e7d"]]);const jn=["data-component"],Xn=R({__name:"ComponentItem",props:{component:null,name:null},setup(t){return(e,n)=>(_(),A("div",{draggable:"true","data-component":t.component},[z("div",null,fe(t.name),1)],8,jn))}}),On={class:"components"},Ye=R({__name:"ComponentList",setup(t){const e=U(()=>{const l={};Object.keys(ne).filter(u=>{if(ne[u].component.show!==!1)return ne[u]}).forEach(u=>{const c=ne[u].component.group;!c||(l[c]||(l[c]=[]),l[c].push(ne[u].component))});const r=[];return Je.forEach(u=>{var c;r.push({label:()=>u.name,key:u.key,icon:()=>le(te,{name:`${u.icon}`}),children:(c=l[u.key])==null?void 0:c.map(s=>({label:()=>le(Xn,{component:s.component,name:s.label,ondragstart:n}),key:s.component}))})}),r}),n=l=>{l.dataTransfer.setData("componentName",l.target.dataset.component)};return(l,r)=>(_(),A("div",On,[i(a(Re),{options:a(e),accordion:!1},null,8,["options"])]))}});const Hn={key:0},Wn={key:1},Yn=R({__name:"LayerItem",props:{component:null,index:null,activeKey:null,mode:{default:"expand"}},emits:["select"],setup(t,{emit:e}){const n=t,l=ue(),r=et(),u=g=>{const S=g.split("-").map(L=>Number(L)),w=l.getComponentByIndex(S);w&&(w.groupStyle=void 0,Ke(JSON.stringify(w)),r.copy())},c=g=>Z(this,null,function*(){e("select",g),l.removeComponent(g)}),s=g=>Z(this,null,function*(){e("select",g),l.upComponent(g)}),p=g=>Z(this,null,function*(){e("select",g),l.downComponent(g)}),v=g=>Z(this,null,function*(){e("select",g),l.topComponent(g)}),f=g=>Z(this,null,function*(){e("select",g),l.bottomComponent(g)}),o=g=>{e("select",g),l.hiddenComponent(g)},d=g=>{e("select",g),l.showComponent(g)},b=(g,S)=>{const w=S.split("-").map(L=>parseInt(L));return[{text:"\u590D\u5236",subText:"Ctrl + C",handler:()=>u(S)},{text:"\u5220\u9664",subText:"",handler:()=>c(S)},{divider:!0},{text:"\u7F6E\u4E8E\u9876\u5C42",handler:()=>v(S),children:[{text:"\u7F6E\u4E8E\u9876\u5C42",handler:()=>v(S)},{text:"\u4E0A\u79FB\u4E00\u5C42",handler:()=>s(S)}]},{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:()=>f(S),children:[{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:()=>f(S)},{text:"\u4E0B\u79FB\u4E00\u5C42",handler:()=>p(S)}]},{divider:!0},{text:"\u663E\u793A",disable:l.getComponentByIndex(w).display,subText:"",handler:()=>d(S)},{text:"\u9690\u85CF",disable:!l.getComponentByIndex(w).display,subText:"",handler:()=>o(S)}]},h=(g,S)=>{var w;(w=g.dataTransfer)==null||w.setData("compomentIndex",S),g.stopPropagation()},N=(g,S,w=!1)=>{g.preventDefault(),g.stopPropagation(),w&&S!==n.activeKey&&re.emit("ActiveMenu",S)},C=(g,S)=>{var T;g.preventDefault(),g.stopPropagation();const w=(T=g.dataTransfer)==null?void 0:T.getData("compomentIndex"),L=$(w,S),k=P(w,S),D=F(w,k);console.log(D),D&&L&&M(L,D,k)},F=(g,S)=>{const w=g.split("-").map(D=>Number(D)),L=w.pop(),k=l.getComponentByIndex(w);if(k&&k.subComponents){const T=k.subComponents.splice(L,1)[0];if(console.log(T),console.log(k),S||k.component==="Root")return T;if(k.component==="Group"){const I=k.style;return xt(T,I),T}}},$=(g,S)=>{const w=g.split("-").map(D=>parseInt(D)),L=S.split("-").map(D=>parseInt(D)),k=w.length;for(let D=0;D<k;D++)if(w[D]!==L[D]){if(w[D]>L[D])return S;if(w[D]<L[D])return D+1==k?(L[D]=L[D]-1,L.join("-")):S}return S},P=(g,S)=>{const w=g.split("-").map(T=>parseInt(T)),L=S.split("-").map(T=>parseInt(T));w.pop(),L.pop();const k=w.join("-"),D=L.join("-");return k===D},M=(g,S,w)=>{const L=g.split("-").map(T=>Number(T)),k=L.pop(),D=l.getComponentByIndex(L);if(D&&D.subComponents){if(D.component==="Root"||w)D.subComponents.splice(k,0,S);else if(D.component==="Group"){const T=D.style,I=ce({},S.style);S.groupStyle={gtop:1.1,gleft:1.1,grotate:S.style.rotate,gheight:parseFloat((I.height*100/T.height).toFixed(4)),gwidth:parseFloat((I.width*100/T.width).toFixed(4))},D.subComponents.splice(k,0,S),e("select",g)}}};return(g,S)=>{const w=Ee("icon-park"),L=be("contextmenu");return H((_(),A("div",{draggable:"true",onDragstart:S[0]||(S[0]=k=>h(k,t.index)),onDrop:S[1]||(S[1]=k=>C(k,t.index)),onDragover:S[2]||(S[2]=k=>N(k,t.index,!0))},[t.component.component==="Group"?(_(),A("div",Hn,[H(z("span",null,fe(t.component.label||"\u5206\u7EC4"),513),[[ae,t.mode==="expand"]]),t.component.display?(_(),x(w,{key:0,name:"preview-open",size:"24"})):(_(),x(w,{key:1,name:"preview-close-one",size:"24"}))])):(_(),A("div",Wn,[H(z("span",null,fe(t.component.label),513),[[ae,t.mode==="expand"]]),t.component.display?(_(),x(w,{key:0,size:"24",name:"preview-open"})):(_(),x(w,{key:1,size:"24",name:"preview-close-one"}))]))],32)),[[L,()=>b(g.$el,t.index)]])}}});var Ge=W(Yn,[["__scopeId","data-v-7ec22128"]]);const qe=R({__name:"Layer",setup(t){const e=ue(),n={};Je.map(o=>{n[o.key]=o.icon});const l=U(()=>e.componentData),r=B(null),u=B("");we("ActiveMenu",o=>{const d=o;u.value=d,r.value&&r.value.open&&r.value.open(d)});const s=o=>{console.log(o),u.value=o;const d=o.split("-").map(h=>Number(h)),b=e.getComponentByIndex(d);e.setCurComponent(b)},p=B([]),v=(o,d,b)=>{for(let h=0;h<d.length;h++){const N=d[h];if(N.component==="Group"){const C=[];b.push({label:()=>le(Ge,{component:N,index:f(h,o),onclick:()=>s(f(h,o))}),key:f(h,o),icon:()=>le(te,{name:"branch-one"}),children:v(f(h,o),N.subComponents||[],C)})}else b.push({label:()=>le(Ge,{component:N,index:f(h,o)}),key:f(h,o),icon:()=>le(te,{name:`${n[N.group]}`})})}return b},f=(o,d)=>d?`${d}-${o}`:o.toString();return pe(()=>e.componentData,()=>{const o=e.componentData;p.value=[],p.value=v("",o,[])},{deep:!0,immediate:!0}),(o,d)=>(_(),A("div",null,[a(l).length>0?(_(),x(a(Re),{key:0,options:p.value,"onUpdate:value":s},null,8,["options"])):(_(),x(a(At),{key:1,class:"placeholder"},{default:m(()=>[i(a(Nt),null,{default:m(()=>[i(a(It),{description:"\u753B\u5E03\u4E3A\u7A7A"})]),_:1})]),_:1}))]))}}),Gn=z("span",null,"\u7EC4\u4EF6",-1),qn=z("span",null,"\u56FE\u5C42",-1),Kn=R({__name:"SideBar",props:{iscollapsed:{type:Boolean,default:!1}},emits:["update:iscollapsed"],setup(t,{emit:e}){const n=B("components"),l=u=>{e("update:iscollapsed",!1),n.value=u},r=u=>{n.value=u};return(u,c)=>{const s=Ee("IconPark");return t.iscollapsed?(_(),x(a($e),{key:1,type:"line",animated:"","bar-width":48,"justify-content":"center","onUpdate:value":[l,c[4]||(c[4]=p=>n.value=p)],value:n.value},{default:m(()=>[n.value==="components"?(_(),x(a(ve),{key:0,name:"components","display-directive":"show:lazy"},{tab:m(()=>[i(s,{name:"components",onClick:c[2]||(c[2]=p=>r("layer"))})]),default:m(()=>[i(Ye)]),_:1})):n.value==="layer"?(_(),x(a(ve),{key:1,name:"layer","display-directive":"show:lazy"},{tab:m(()=>[i(s,{name:"layers",onClick:c[3]||(c[3]=p=>r("components"))})]),default:m(()=>[i(qe)]),_:1})):xe("",!0)]),_:1},8,["value"])):(_(),x(a($e),{key:0,type:"line",animated:"","bar-width":100,"justify-content":"center",value:n.value,"onUpdate:value":[c[0]||(c[0]=p=>n.value=p),c[1]||(c[1]=p=>n.value=p)]},{default:m(()=>[i(a(ve),{name:"components","display-directive":"show:lazy"},{tab:m(()=>[i(s,{name:"components"}),Gn]),default:m(()=>[i(Ye)]),_:1}),i(a(ve),{name:"layer","display-directive":"show:lazy"},{tab:m(()=>[i(s,{name:"layers"}),qn]),default:m(()=>[i(qe)]),_:1})]),_:1},8,["value"]))}}}),Jn=[{label:"4K",value:"3840X2160"},{label:"2k",value:"2048X1080"},{label:"1080P",value:"1920X1080"},{label:"720P",value:"1366X768"},{label:"iPhoneXR",value:"414X896"},{label:"iPhoneSE",value:"375X667"},{label:"iPhone12Pro",value:"390X884"},{label:"GalaxyS8+",value:"360X740"},{label:"GalaxyS20Ultra+",value:"412X915"},{label:"iPadAir",value:"820X1180"},{label:"iPadMini",value:"768X1024"},{label:"SurfacePro7",value:"912X1368"},{label:"NestHub",value:"1024X600"},{label:"NestMax",value:"1028X800"}];const Qn={class:"attr-list"},Zn=R({__name:"Canvas",setup(t){const e=U(()=>[{label:"\u672C\u8BBE\u5907",value:`${window.innerWidth}X${window.innerHeight}`},...Jn]),n=ue(),l=U(()=>n.canvasStyleData),r=B("\u672C\u8BBE\u5907"),u=[{key:"width",label:"\u5BBD\u5EA6",type:"number"},{key:"height",label:"\u9AD8\u5EA6",type:"number"},{key:"scale",label:"\u6BD4\u4F8B",type:"number"},{key:"dataWs",label:"\u5B9E\u65F6\u6570\u636E",type:"text"},{key:"image",label:"\u80CC\u666F\u56FE",type:"text"}],c=q(["top","left","width","height","fontSize","borderWidth"]),s=B(l.value.scale),p=d=>d*s.value/100,v=d=>d/(l.value.scale/100),f=ut(()=>{s.value=~~s.value||1;const d=st(n.componentData);d.forEach(b=>{Object.keys(b.style).forEach(h=>{c.includes(h)&&(b.style[h]=Math.ceil(p(v(b.style[h]))))})}),n.setComponentData(d),n.setCanvasStyle(Se(ce({},l.value),{scale:s.value}))},1e3),o=d=>{const b=d.split("X"),h=parseInt(b[0]),N=parseInt(b[1]);n.setCanvasStyle(Se(ce({},l.value),{width:h,height:N}))};return(d,b)=>(_(),A("div",Qn,[i(a(lt),null,{default:m(()=>[i(a(Be),{size:"small",onSubmit:b[2]||(b[2]=Fe(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:m(()=>[i(a(O),{label:"\u5206\u8FA8\u7387"},{default:m(()=>[i(a(_e),{value:r.value,"onUpdate:value":[b[0]||(b[0]=h=>r.value=h),o],placeholder:"\u9009\u62E9\u5206\u8FA8\u7387",options:a(e)},null,8,["value","options"])]),_:1}),(_(),A(K,null,oe(u,({key:h,label:N,type:C},F)=>i(a(O),{key:F,label:N},{default:m(()=>[h==="scale"?(_(),x(a(ye),{key:0,modelValue:s.value,"onUpdate:modelValue":b[1]||(b[1]=$=>s.value=$),onInput:a(f)},null,8,["modelValue","onInput"])):C==="number"?(_(),x(a(ye),{key:1,value:a(l)[h],"onUpdate:value":$=>a(l)[h]=$},null,8,["value","onUpdate:value"])):(_(),x(a(me),{key:2,value:a(l)[h],"onUpdate:value":$=>a(l)[h]=$},null,8,["value","onUpdate:value"]))]),_:2},1032,["label"])),64))]),_:1})]),_:1})]))}});var ea=W(Zn,[["__scopeId","data-v-179057f0"]]);const ta=[{label:"Arial",value:"Arial"},{label:"\u5FAE\u8F6F\u96C5\u9ED1",value:"Microsoft Yahei"},{label:"\u5B8B\u4F53",value:"SimSun"},{label:"\u9ED1\u4F53",value:"SimHei"},{label:"\u6977\u4F53",value:"KaiTi"},{label:"\u65B0\u5B8B\u4F53",value:"NSimSun"},{label:"\u4EFF\u5B8B",value:"FangSong"},{label:"\u82F9\u65B9",value:"PingFang SC"},{label:"\u534E\u6587\u9ED1\u4F53",value:"STHeiti"},{label:"\u534E\u6587\u6977\u4F53",value:"STKaiti"},{label:"\u534E\u6587\u5B8B\u4F53",value:"STSong"},{label:"\u534E\u6587\u4EFF\u5B8B",value:"STFangSong"},{label:"\u534E\u6587\u4E2D\u5B8B",value:"STZhongSong"},{label:"\u534E\u6587\u7425\u73C0",value:"STHupo"},{label:"\u534E\u6587\u65B0\u9B4F",value:"STXinwei"},{label:"\u534E\u6587\u96B6\u4E66",value:"STLiti"},{label:"\u534E\u6587\u884C\u6977",value:"STXingkai"},{label:"\u51AC\u9752\u9ED1\u4F53",value:"Hiragino Sans GB"},{label:"\u5170\u4EAD\u9ED1",value:"Lantinghei SC"},{label:"\u504F\u504F\u4F53",value:"Hanzipen SC"},{label:"\u624B\u672D\u4F53",value:"Hannotate SC"},{label:"\u5B8B\u4F53",value:"Songti SC"},{label:"\u5A03\u5A03\u4F53",value:"Wawati SC"},{label:"\u884C\u6977",value:"Xingkai SC"},{label:"\u5706\u4F53",value:"Yuanti SC"},{label:"\u534E\u6587\u7EC6\u9ED1",value:"STXihei"},{label:"\u5E7C\u5706",value:"YouYuan"},{label:"\u96B6\u4E66",value:"LiSu"},{label:"LED",value:"LED"},{label:"LCD",value:"LCD"}],na=[{label:"100 Thin",value:100},{label:"200 ExtraThin",value:200},{label:"300 Light",value:300},{label:"400 Normal",value:400},{label:"500 Medium",value:500},{label:"600 Semi Bold",value:600},{label:"700 Bold",value:700},{label:"Extra Bold",value:800},{label:"Black",value:900}],aa=R({__name:"FontStyle",props:{value:{default:""}},emits:["update:value","change"],setup(t,{emit:e}){const n=B(""),l=q(ta),r=u=>{n.value=u,e("update:value",n.value),e("change",n.value)};return(u,c)=>(_(),x(a(_e),{clearable:"",modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=s=>n.value=s),placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53","onUpdate:value":r,options:l},null,8,["modelValue","options"]))}}),la=R({__name:"FontWeight",props:{value:{default:""}},emits:["update:value","change"],setup(t,{emit:e}){const n=B(""),l=q(na),r=u=>{n.value=u,e("update:value",n.value),e("change",n.value)};return(u,c)=>(_(),x(a(_e),{clearable:"",modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=s=>n.value=s),placeholder:"\u8BF7\u9009\u62E9\u5B57\u91CD","onUpdate:value":r,options:l},null,8,["modelValue","options"]))}}),oa={class:"linear-gradient"},ua=R({__name:"LinearGradient",props:{value:{default:{angle:0,color1:"",color2:""}}},emits:["update:value","change"],setup(t,{emit:e}){const n=t,l=B({angle:n.value.angle||0,color1:n.value.color1||"",color2:n.value.color2||""}),r=(u,c)=>{l.value[u]=c,e("update:value",l.value),e("change",l.value)};return(u,c)=>(_(),A("div",oa,[i(a(ye),{modelValue:t.value.angle,"onUpdate:value":c[0]||(c[0]=s=>r("angle",s)),controls:!0,min:0,max:360,step:1},null,8,["modelValue"]),i(a(Te),{value:t.value.color1,"onUpdate:value":c[1]||(c[1]=s=>r("color1",s))},null,8,["value"]),i(a(Te),{value:t.value.color2,"onUpdate:value":c[2]||(c[2]=s=>r("color2",s))},null,8,["value"])]))}});var sa=R({props:{args:{type:Object,default:()=>{}},component:{type:Object,default:()=>{}},value:{type:Object}},emits:["update:value","change"],setup(t,{emit:e}){const n=l=>{e("update:value",l),e("change",l)};return()=>[le(t.component,Se(ce({},t.args),{value:t.value,onChange:n}))]}});const it=R({__name:"FormItem",props:{data:null,children:null,ukey:null},emits:["change"],setup(t,{emit:e}){const n=t,l=q(n.data),r=(u,c)=>{e("change",u,c)};return pe(()=>n.data,u=>{Object.assign(l,u)},{deep:!0}),(u,c)=>(_(!0),A(K,null,oe(t.children,({key:s,label:p,type:v,componentOptions:f})=>(_(),x(a(O),{key:`${t.ukey}${s}`,label:p},{default:m(()=>[v==="color"?(_(),x(a(Te),{key:0,value:l[s],"onUpdate:value":[o=>l[s]=o,o=>r(o,s)],modes:["hex","rgb","hsl"]},null,8,["value","onUpdate:value"])):v==="select"?(_(),x(a(_e),{key:1,modelValue:l[s],"onUpdate:modelValue":o=>l[s]=o,placeholder:p,"onUpdate:value":o=>r(o,s),options:(f==null?void 0:f.options)||[]},null,8,["modelValue","onUpdate:modelValue","placeholder","onUpdate:value","options"])):v==="radio"?(_(),x(a(Tt),{key:2,value:l[s],"onUpdate:value":[o=>l[s]=o,o=>r(o,s)],placeholder:p},{default:m(()=>[(_(!0),A(K,null,oe((f==null?void 0:f.options)||[],o=>(_(),x(a(zt),{label:o.value,key:o.value},{default:m(()=>[ke(fe(o.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["value","onUpdate:value","placeholder"])):v==="number"?(_(),x(a(ye),{key:3,value:l[s],"onUpdate:value":[o=>l[s]=o,o=>r(o,s)]},null,8,["value","onUpdate:value"])):v==="switch"?(_(),x(a(ot),{key:4,value:l[s],"onUpdate:value":[o=>l[s]=o,o=>r(o,s)]},null,8,["value","onUpdate:value"])):v==="fontStyle"?(_(),x(aa,{key:5,modelValue:l[s],"onUpdate:modelValue":o=>l[s]=o,onChange:o=>r(o,s)},null,8,["modelValue","onUpdate:modelValue","onChange"])):v==="fontWeight"?(_(),x(la,{key:6,modelValue:l[s],"onUpdate:modelValue":o=>l[s]=o,onChange:o=>r(o,s)},null,8,["modelValue","onUpdate:modelValue","onChange"])):v==="linearGradient"?(_(),x(ua,{key:7,value:l[s],"onUpdate:value":o=>l[s]=o,onChange:o=>r(o,s)},null,8,["value","onUpdate:value","onChange"])):v==="custom"?(_(),x(a(sa),{key:8,value:l[s],"onUpdate:value":o=>l[s]=o,onChange:o=>r(o,s),component:f.componentType,args:f.args},null,8,["value","onUpdate:value","onChange","component","args"])):(_(),x(a(me),{key:9,clearable:"",value:l[s],"onUpdate:value":[o=>l[s]=o,o=>r(o,s)]},null,8,["value","onUpdate:value"]))]),_:2},1032,["label"]))),128))}}),ct=R({__name:"FormAttr",props:{data:null,children:null,name:null,uid:null,ukey:null},emits:["change"],setup(t,{emit:e}){const l=q(t.data),r=(u,c)=>{e("change",c,u)};return(u,c)=>(_(),x(a(Be),{size:"small",onSubmit:c[0]||(c[0]=Fe(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:m(()=>[i(it,{children:t.children,data:l,ukey:t.ukey,onChange:r},null,8,["children","data","ukey"])]),_:1}))}});const ia={class:"attr-list"},ca=R({__name:"StyleList",props:{curComponent:null},setup(t){const e=t,n=ue(),l=q({}),r=U(()=>{if(e.curComponent&&e.curComponent.component in ne){const v=ne[e.curComponent.component].style;return e.curComponent.groupStyle&&(v[0]=wt),ne[e.curComponent.component].style}return[]}),u=(v,f)=>{e.curComponent&&n.setCurComponentStyle(v,f)};we("changeStyle",v=>{const f=v;e.curComponent&&e.curComponent.id===f.id&&s(f.style)});const s=ut(v=>{const f=Dt(v,l);f&&Object.keys(f).forEach(o=>{l[o]=f[o]})},200),p=()=>{if(e.curComponent){Qe(l);const v=ce(ce({},e.curComponent.style),e.curComponent.groupStyle||{});s(v)}};return pe([()=>e.curComponent.id,()=>e.curComponent.style],()=>{e.curComponent&&e.curComponent.id&&p()},{immediate:!0,deep:!0}),(v,f)=>(_(),A("div",ia,[i(a(Ue),{accordion:""},{default:m(()=>[(_(!0),A(K,null,oe(a(r),({name:o,uid:d,children:b})=>(_(),x(a(Le),{key:`${t.curComponent.id}${d}`,title:o,name:d},{default:m(()=>[i(ct,{children:b,data:l,onChange:u,name:o,uid:d,ukey:t.curComponent.id},null,8,["children","data","name","uid","ukey"])]),_:2},1032,["title","name"]))),128))]),_:1})]))}});var ra=W(ca,[["__scopeId","data-v-7d9ac4ca"]]);const da=R({__name:"CompAttr",props:{curComponent:null},setup(t){const e=t,n=B(""),l=ue(),r=u=>{l.setCurComponentProps("label",u)};return pe(()=>e.curComponent,()=>{n.value=e.curComponent.label||""},{immediate:!0}),(u,c)=>(_(),x(a(Be),{size:"small",onSubmit:c[2]||(c[2]=Fe(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:m(()=>[i(a(O),{label:"\u7C7B\u578B"},{default:m(()=>[i(a(me),{value:t.curComponent.component,readonly:!0},null,8,["value"])]),_:1}),i(a(O),{label:"ID"},{default:m(()=>[i(a(me),{value:t.curComponent.id,readonly:!0},null,8,["value"])]),_:1}),i(a(O),{label:"\u540D\u79F0"},{default:m(()=>[i(a(me),{value:n.value,"onUpdate:value":c[0]||(c[0]=s=>n.value=s),onChange:c[1]||(c[1]=s=>r(s))},null,8,["value"])]),_:1})]),_:1}))}});const ma={class:"title"},pa=ke("+"),va=R({__name:"DynamicAttr",props:{data:null,children:null,name:null,uid:null,max:null,ukey:null},emits:["change"],setup(t,{emit:e}){const n=t,l=B(n.data),r=()=>{e("change",l.value,n.uid)},u=U(()=>l.value.length<n.max),c=p=>{l.value.splice(p,1),e("change",l.value,n.uid)},s=()=>{const p=l.value.length,v={};n.children.map(f=>{p>0?v[f.key]=l.value[p-1][f.key]:v[f.key]=void 0}),l.value.push(v),e("change",l.value,n.uid)};return(p,v)=>{const f=Ee("icon-park");return _(),A(K,null,[i(a(Ue),{accordion:""},{default:m(()=>[(_(!0),A(K,null,oe(l.value,(o,d)=>(_(),x(a(Le),{key:`${t.ukey}${d}`,name:t.max>1?`${t.uid}${d}`:t.uid},{header:m(()=>[z("div",ma,fe(t.name)+fe(d+1),1)]),"header-extra":m(()=>[i(f,{name:"delete-one",size:"14",onClick:b=>c(d)},null,8,["onClick"])]),default:m(()=>[i(it,{children:t.children,data:o,ukey:t.ukey,onChange:r},null,8,["children","data","ukey"])]),_:2},1032,["name"]))),128))]),_:1}),H(i(a(G),{class:"add",onClick:s},{default:m(()=>[pa]),_:1},512),[[ae,a(u)]])],64)}}});var fa=W(va,[["__scopeId","data-v-62b141de"]]);const _a={class:"attr-list"},ha=R({__name:"AttrList",props:{curComponent:null},setup(t){const e=t,n=ue(),l=q({}),r=U(()=>e.curComponent&&e.curComponent.component in ne?ne[e.curComponent.component].attrs:[]),u=(s,p)=>{n.setCurComponentPropValue(s,p)},c=()=>{if(Qe(l),e.curComponent&&e.curComponent.propValue){const s=e.curComponent.propValue;Object.keys(s).forEach(p=>{l[p]=s[p]})}};return pe(()=>e.curComponent.id,()=>{c()},{immediate:!0}),(s,p)=>(_(),A("div",_a,[i(a(Ue),{accordion:""},{default:m(()=>[i(a(Le),{title:"\u516C\u5171\u5C5E\u6027"},{default:m(()=>[i(da,{curComponent:t.curComponent},null,8,["curComponent"])]),_:1}),(_(!0),A(K,null,oe(a(r),({name:v,uid:f,children:o,max:d})=>(_(),x(a(Le),{key:`${t.curComponent.id}${f}`,title:v,name:f},{default:m(()=>[!d||d<1?(_(),x(ct,{key:0,children:o,data:l,onChange:u,name:v,uid:f,ukey:t.curComponent.id},null,8,["children","data","name","uid","ukey"])):(_(),x(fa,{key:1,children:o,data:l[f]||[],onChange:u,name:v,uid:f,max:d,ukey:t.curComponent.id},null,8,["children","data","name","uid","max","ukey"]))]),_:2},1032,["title","name"]))),128))]),_:1})]))}});var ga=W(ha,[["__scopeId","data-v-cd08404e"]]);const ya=R({__name:"StaticData",setup(t){const e=B([]),n=B(null),l=r=>{console.log(r)};return(r,u)=>(_(),x(a(O),{key:"staticData",label:"\u9759\u6001\u6570\u636E"},{default:m(()=>[i(a(_e),{value:n.value,"onUpdate:value":[u[0]||(u[0]=c=>n.value=c),u[1]||(u[1]=c=>l(c))],placeholder:"\u8BF7\u9009\u62E9\u9759\u6001\u6570\u636E",options:e.value},null,8,["value","options"])]),_:1}))}});const ba=R({__name:"DynamicData",setup(t){const e=B([]),n=B([]),l=q({data:void 0,timeout:1e3,isInterval:!1,intervalTime:1e3,params:{}}),r=B(),u=s=>{console.log(s)},c=()=>{r.value?n.value.includes(r.value)?ie.warning("\u53C2\u6570\u91CD\u590D"):n.value.push(r.value):ie.warning("\u8BF7\u586B\u5199\u53C2\u6570")};return(s,p)=>{const v=Ee("icon-park");return _(),A(K,null,[i(a(O),{key:"dynamicData",label:"\u52A8\u6001\u6570\u636E"},{default:m(()=>[i(a(_e),{value:l.data,"onUpdate:value":[p[0]||(p[0]=f=>l.data=f),u],placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u63A5\u53E3",options:e.value},null,8,["value","options"])]),_:1}),i(a(O),{key:"timeout",label:"\u8D85\u65F6\u65F6\u95F4"},{default:m(()=>[i(a(ye),{value:l.timeout,"onUpdate:value":[p[1]||(p[1]=f=>l.timeout=f),u],placeholder:"\u8D85\u65F6\u65F6\u95F4"},null,8,["value"])]),_:1}),i(a(O),{key:"isInterval",label:"\u662F\u5426\u5B9A\u65F6\u83B7\u53D6\u65F6\u95F4"},{default:m(()=>[i(a(ot),{modelValue:l.isInterval,"onUpdate:modelValue":p[2]||(p[2]=f=>l.isInterval=f)},null,8,["modelValue"])]),_:1}),l.isInterval?(_(),x(a(O),{key:"intervalTime",label:"\u95F4\u9694\u65F6\u95F4"},{default:m(()=>[i(a(ye),{value:l.intervalTime,"onUpdate:value":p[3]||(p[3]=f=>l.intervalTime=f),placeholder:"\u95F4\u9694\u65F6\u95F4"},null,8,["value"])]),_:1})):xe("",!0),(_(!0),A(K,null,oe(n.value,f=>(_(),x(a(O),{label:`\u53C2\u6570:${f}`,key:f},{default:m(()=>[i(a(me),{value:l.params[f],"onUpdate:value":o=>l.params[f]=o},null,8,["value","onUpdate:value"])]),_:2},1032,["label"]))),128)),i(a(O),{key:"addParams",label:"\u8BF7\u6C42\u53C2\u6570"},{default:m(()=>[i(a(me),{placeholder:"\u53C2\u6570",value:r.value,"onUpdate:value":p[4]||(p[4]=f=>r.value=f)},{suffix:m(()=>[i(v,{name:"add-three",onClick:c})]),_:1},8,["value"])]),_:1})],64)}}});var Ca=W(ba,[["__scopeId","data-v-4b9262b5"]]);const Sa=R({__name:"RealTimeData",setup(t){const e=B(null),n=l=>{console.log(l)};return(l,r)=>(_(),x(a(O),{key:"realTimeData",label:"\u5B9E\u65F6\u6570\u636E"},{default:m(()=>[i(a(me),{value:e.value,"onUpdate:value":[r[0]||(r[0]=u=>e.value=u),r[1]||(r[1]=u=>n(u))],placeholder:"\u5B9E\u65F6\u6570\u636E"},null,8,["value"])]),_:1}))}});const xa={class:"data-list"},wa=R({__name:"DataAttr",setup(t){const e=B("Static"),n=B(),l=q([{label:"\u9759\u6001\u6570\u636E",value:"Static"},{label:"\u5B9E\u65F6\u6570\u636E",value:"RealTime"},{label:"\u52A8\u6001\u6570\u636E",value:"Dynamic"}]),r=B([]),u=s=>{console.log(s)},c=s=>{console.log(s)};return(s,p)=>(_(),A("div",xa,[i(a(Be),{size:"small",onSubmit:p[4]||(p[4]=Fe(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:m(()=>[i(a(O),{key:"dataType",label:"\u6570\u636E\u7C7B\u578B"},{default:m(()=>[i(a(_e),{value:e.value,"onUpdate:value":[p[0]||(p[0]=v=>e.value=v),p[1]||(p[1]=v=>c(v))],placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5904\u7406\u7B97\u6CD5",options:l},null,8,["value","options"])]),_:1}),e.value==="Static"?(_(),x(ya,{key:0})):e.value==="RealTime"?(_(),x(Sa,{key:1})):e.value==="Dynamic"?(_(),x(Ca,{key:2})):xe("",!0),i(a(O),{key:"algorithm",label:"\u7B97\u6CD5"},{default:m(()=>[i(a(_e),{value:n.value,"onUpdate:value":[p[2]||(p[2]=v=>n.value=v),p[3]||(p[3]=v=>u(v))],placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5904\u7406\u7B97\u6CD5",options:r.value},null,8,["value","options"])]),_:1})]),_:1})]))}}),Da={key:0},Fa={key:1},ka=R({__name:"SideBar",props:{iscollapsed:{type:Boolean,default:!1}},emits:["update:iscollapsed"],setup(t,{emit:e}){const n=B("attr"),l=ue(),r=U(()=>l.curComponent),u=U(()=>l.curComponent?[{label:"\u6837\u5F0F",key:"4",icon:()=>le(te,{name:"text-style",onClick:()=>c("style")})},{label:"\u5C5E\u6027",key:"2",icon:()=>le(te,{name:"internal-data",onClick:()=>c("attr")})},{label:"\u6570\u636E",key:"3",icon:()=>le(te,{name:"data",onClick:()=>c("data")})}]:[{label:"\u753B\u5E03",key:"1",icon:()=>le(te,{name:"page"})}]),c=s=>{e("update:iscollapsed",!1),n.value=s};return(s,p)=>t.iscollapsed?(_(),A("div",Fa,[i(a(Re),{options:a(u)},null,8,["options"])])):(_(),A("div",Da,[a(r)?(_(),x(a($e),{key:0,type:"line",animated:"","justify-content":"center",value:n.value,"onUpdate:value":[p[0]||(p[0]=v=>n.value=v),p[1]||(p[1]=v=>n.value=v)]},{default:m(()=>[i(a(ve),{name:"style","display-directive":"show:lazy"},{tab:m(()=>[i(a(te),{name:"text-style"}),H(z("span",null,"\u6837\u5F0F",512),[[ae,!t.iscollapsed]])]),default:m(()=>[i(a(ra),{curComponent:a(r)},null,8,["curComponent"])]),_:1}),i(a(ve),{name:"attr","display-directive":"show:lazy"},{tab:m(()=>[i(a(te),{name:"internal-data"}),H(z("span",null,"\u5C5E\u6027",512),[[ae,!t.iscollapsed]])]),default:m(()=>[i(a(ga),{curComponent:a(r)},null,8,["curComponent"])]),_:1}),i(a(ve),{name:"data","display-directive":"show:lazy"},{tab:m(()=>[i(a(te),{name:"data"}),H(z("span",null,"\u6570\u636E",512),[[ae,!t.iscollapsed]])]),default:m(()=>[i(a(wa))]),_:1})]),_:1},8,["value"])):(_(),x(a($e),{key:1,type:"line",animated:"","justify-content":"center"},{default:m(()=>[i(a(ve),{name:"canvas","display-directive":"show:lazy"},{tab:m(()=>[i(a(te),{name:"page"}),H(z("span",null,"\u753B\u5E03",512),[[ae,!t.iscollapsed]])]),default:m(()=>[i(ea)]),_:1})]),_:1}))]))}});const Ea=R({__name:"DesignerPage",setup(t){const e=ue(),n=B(null),l=B(!1),r=B(!1),u=tt();De(()=>Z(this,null,function*(){const C=u.params.index;C&&(yield c(C))}));const c=C=>Z(this,null,function*(){const F=yield $t(C);!F||e.setLayoutData(F)}),s=B(0),p=B(0),v=U(()=>({width:s.value+"px",height:p.value+"px"})),f=C=>{const F=C[0],{width:$,height:P}=F.contentRect;s.value=$,p.value=P},o=C=>Z(this,null,function*(){C.preventDefault(),C.stopPropagation();const F=C.dataTransfer.getData("componentName");if(F){const $=st(ne[F].component);$.style.top=C.offsetY,$.style.left=C.offsetX,e.appendComponent($)}}),d=C=>{C.preventDefault(),C.dataTransfer.dropEffect="copy"},b=()=>{e.setClickComponentStatus(!1)},h=()=>{e.isClickComponent||e.setCurComponent(void 0)};pe(()=>e.canvasStyleData.dataWs,C=>{var F;(F=n.value)==null||F.close(),C&&(n.value=N("actual",C))});const N=(C,F)=>{const $=new WebSocket(F);return $.onopen=()=>{console.log("websocket\u8FDE\u63A5\u6210\u529F")},$.onclose=()=>{console.log("websocket\u8FDE\u63A5\u88AB\u5173\u95ED")},$.onmessage=P=>{const M=JSON.parse(P.data);re.emit(C,M)},$};return ze(()=>{var C;(C=n.value)==null||C.close(),e.clearCanvas()}),(C,F)=>{const $=be("resize");return _(),x(a(Ne),{class:"home"},{default:m(()=>[i(a(Rt),{class:"header"},{default:m(()=>[i(a(Mn))]),_:1}),i(a(Ne),{"has-sider":"",class:"main"},{default:m(()=>[i(a(Xe),{class:"left",width:"200",collapsed:l.value,"native-scrollbar":!1,bordered:"","collapse-mode":"width","show-trigger":"",onCollapse:F[2]||(F[2]=()=>l.value=!0),onExpand:F[3]||(F[3]=()=>l.value=!1)},{default:m(()=>[i(a(Kn),{iscollapsed:l.value,"onUpdate:iscollapsed":[F[0]||(F[0]=P=>l.value=P),F[1]||(F[1]=P=>l.value=P)]},null,8,["iscollapsed"])]),_:1},8,["collapsed"]),i(a(Ne),{"has-sider":"","sider-placement":"right"},{default:m(()=>[H((_(),x(a(Ut),{class:"content"},{default:m(()=>[i(a(lt),{"x-scrollable":"",style:de(a(v))},{default:m(()=>[i(rn,{onDrop:o,onDragover:d,onMousedown:b,onMouseup:h})]),_:1},8,["style"])]),_:1})),[[$,f]]),i(a(Xe),{class:"right",width:"240",collapsed:r.value,"native-scrollbar":!1,bordered:"","collapsed-width":35,"collapse-mode":"width","show-trigger":"arrow-circle",onCollapse:F[6]||(F[6]=()=>r.value=!0),onExpand:F[7]||(F[7]=()=>r.value=!1)},{default:m(()=>[i(a(ka),{iscollapsed:r.value,"onUpdate:iscollapsed":[F[4]||(F[4]=P=>r.value=P),F[5]||(F[5]=P=>r.value=P)]},null,8,["iscollapsed"])]),_:1},8,["collapsed"])]),_:1})]),_:1})]),_:1})}}});var ll=W(Ea,[["__scopeId","data-v-897d4bbc"]]);export{ll as default};
