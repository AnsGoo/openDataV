import{d as t,C as e,D as o,am as a,av as n,aw as l,r as i,o as s,v as p,f as c,F as h,E as d,I as g,a as r,y,u,K as m,c as f,w as v,H as S,J as b,ax as w,ay as C,W as k,A as x,az as z,ab as D}from"./index-40170f2c.js";import{s as _}from"./index.esm-01328638.js";import{Y as E}from"./Shape.esm-d754d2c7.js";const I=["onClick"],$=D(t({__name:"Tabs",props:{component:{}},setup(t){const D=w.config,$=C(w.component),j=t,M=e(),R=o((()=>M.isEditMode)),{propValue:T}=_(j.component),H=o((()=>T.label.items||[]));a((()=>T.label.mode),(()=>{const t=(T.label.items||[]).length,e=T.label.mode||"horizontal",o=T.style.height,{top:a,left:i,width:s,height:p}=j.component.style;for(let c=0;c<t;c++)if(j.component.subComponents[c]){const t=j.component.subComponents[c];"horizontal"===e?(t.changeStyle(["position","top"],a+o),t.changeStyle(["position","left"],i)):(t.changeStyle(["position","top"],a),t.changeStyle(["position","left"],i+o)),t.groupStyle={gleft:l((t.positionStyle.left-i)/s),gtop:l((t.positionStyle.top-a)/p),gwidth:l(t.positionStyle.width/s),gheight:l(t.positionStyle.height/p),grotate:t.groupStyle.grotate||0}}else{const t=new D(n());"horizontal"===e?t.changeStyle(["position"],{top:a+o,left:i,width:s,height:p-o}):t.changeStyle(["position"],{top:a,left:i+o,width:s-o,height:p}),t.parent=j.component,t.groupStyle={gleft:0,gtop:l((t.positionStyle.top-a)/p),gwidth:100,gheight:l(t.positionStyle.height/p),grotate:j.component.positionStyle.rotate||0},j.component.updateChild(c,t)}}),{immediate:!0});const N=o((()=>M.curComponent)),V=i(0),W=t=>V.value===t,Y=o((()=>T.label.mode?T.label.mode:"horizontal")),q=i(null),A=o((()=>j.component.subComponents[V.value])),B=o((()=>({["horizontal"===T.label.mode?"height":"width"]:`${T.style.height}px`,color:T.style.color,fontSize:`${T.style.fontSize}px`,weight:`${T.style.fontWeight}px`,family:`${T.style.fontWeight}px`}))),F=t=>{t.preventDefault(),t.dataTransfer.dropEffect="copy"},J=async t=>{t.preventDefault(),t.stopPropagation();const e=t.dataTransfer.getData("componentName");if(e){const o=new M.components[e];o.dataMode===x.UNIVERSAL&&o.loadDemoData();const{top:a,left:n}=document.querySelector("#editor").getBoundingClientRect(),i=(t.pageY-a)/M.scale,s=(t.pageX-n)/M.scale,p=j.component.subComponents[V.value].style;o.changeStyle(["position","top"],i),o.changeStyle(["position","left"],s),o.groupStyle={gleft:l((o.positionStyle.left-p.left)/p.width),gtop:l((o.positionStyle.top-p.top)/p.height),gwidth:l(o.positionStyle.width/p.width),gheight:l(o.positionStyle.height/p.height),grotate:o.positionStyle.rotate||0},o.parent=j.component,j.component.subComponents[V.value].appendChild(o)}};return(t,e)=>{return s(),p("div",{class:g(["dv-tabs",Y.value])},[c("div",{class:g(["tabs-nav",Y.value])},[(s(!0),p(h,null,d(H.value,((t,e)=>(s(),p("div",{key:e,class:g(["tabs-tab",{active:W(e),[Y.value]:!0}]),style:y(B.value),onClick:t=>(t=>{V.value=t})(e)},z(t),15,I)))),128))],2),R.value?(s(),p("div",{key:1,ref_key:"contentRef",ref:q,class:"tabs-content",onDrop:J,onDragover:F},[(a=A.value.display||!1,!M.isEditMode||a?(s(),f(u(E),{key:0,id:"shape"+A.value.id,defaultStyle:A.value.style,style:y((o=A.value,o.groupStyle?.gheight?k(o.groupStyle,["gtop","gleft","gwidth","gheight","grotate"]):k(o.style,["top","left","width","height","rotate"]))),active:A.value.id===(N.value||{}).id,info:A.value,class:g({lock:A.value.locked}),isInner:!0,index:V.value},{default:v((()=>[r(u($),{id:"component"+A.value.id,class:"component",style:y(u(S)(A.value)),component:A.value},null,8,["id","style","component"])])),_:1},8,["id","defaultStyle","style","active","info","class","index"])):b("",!0))],544)):(s(),p("div",{key:0,ref_key:"content",ref:A,class:"tabs-content"},[r(u($),{id:"component"+A.value.id,class:"component",style:y(u(m)(A.value)),component:A.value},null,8,["id","style","component"])],512))],2);var o,a}}}),[["__scopeId","data-v-84022ba4"]]);export{$ as default};
