var E=Object.defineProperty,D=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var h=(a,t,e)=>t in a?E(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,f=(a,t)=>{for(var e in t||(t={}))W.call(t,e)&&h(a,e,t[e]);if(_)for(var e of _(t))A.call(t,e)&&h(a,e,t[e]);return a},w=(a,t)=>D(a,F(t));var d=(a,t,e)=>new Promise((s,u)=>{var m=n=>{try{i(e.next(n))}catch(p){u(p)}},l=n=>{try{i(e.throw(n))}catch(p){u(p)}},i=n=>n.done?s(n.value):Promise.resolve(n.value).then(m,l);i((e=e.apply(a,t)).next())});import{C}from"./ComponentWrapper.8e9b4adf.js";import{g as x}from"./pages.b0177fe4.js";import{a as z,u as B}from"./vue-router.c997c3e8.js";import{_ as P,f as I,p as V,n as L}from"./index.2ad55fca.js";import{d as R,r as y,k as j,e as G,y as O,O as v,X as k,F as U,_ as q,P as H,R as J,G as M}from"./@vue.a2815691.js";import"./index.44682809.js";import"./axios.744bc20e.js";import"./lodash-es.5f1bdab1.js";import"./pinia.6e1173f7.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./naive-ui.3474528c.js";import"./date-fns.3c009aaa.js";import"./seemly.50a99b79.js";import"./vueuc.e50d3fb2.js";import"./evtd.9eee5233.js";import"./@css-render.8efa119b.js";import"./vooks.5c35c0ee.js";import"./vdirs.9c42edfb.js";import"./@juggle.37ed2144.js";import"./css-render.d5050412.js";import"./@emotion.6322e2ae.js";import"./treemate.80cdf2c2.js";import"./date-fns-tz.851ed5df.js";import"./async-validator.fb49d0f5.js";import"./dexie.78e6a997.js";import"./lodash.f91bfcd2.js";import"./nprogress.5b68415b.js";import"./@icon-park.b1426ebe.js";const N=R({__name:"PageView",setup(a){const t=[],e=y([]),s=y({width:0,height:0,scale:0,dataWs:"",image:"https://cdn.jsdelivr.net/gh/AnsGoo/openDataV@gh-pages/images/bg.jpg"}),u=j(()=>{const o=w(f({},s.value),{backgroundImage:s.value.image,backgroundSize:"cover"});return I(o,["width","height","backgroundImage","backgroundSize"])}),m=z(),l=B(),i=o=>d(this,null,function*(){console.log("\u52A0\u8F7D\u901A\u7528\u7EC4\u4EF6");try{const c=yield x(o);n(c)}catch(c){l.push({name:"Error"})}}),n=o=>{o.canvasStyle&&(s.value=o.canvasStyle),o.canvasData&&(e.value=o.canvasData),s.value.dataWs&&t.push(p("actual",s.value.dataWs)),g()};G(()=>d(this,null,function*(){yield i(m.params.index),window.addEventListener("resize",g)}));const p=(o,c)=>{const r=new WebSocket(c);return r.onopen=()=>{console.log("websocket\u8FDE\u63A5\u6210\u529F")},r.onclose=()=>{console.log("websocket\u8FDE\u63A5\u88AB\u5173\u95ED")},r.onmessage=b=>{const S=JSON.parse(b.data);L.emit(o,S)},r};O(()=>{t.forEach(o=>{console.log("\u5173\u95EDwebsocket"),o.close()}),window.removeEventListener("resize",g)});const g=()=>{const o=document.querySelector(".screen");if(o){const c=s.value.width,r=s.value.height;V(o,c,r)}};return(o,c)=>(v(),k("div",{class:"bg",style:J(M(u))},[(v(!0),k(U,null,q(e.value,r=>(v(),H(C,{key:r.id,component:r},null,8,["component"]))),128))],4))}});var Se=P(N,[["__scopeId","data-v-d6760cc8"]]);export{Se as default};
