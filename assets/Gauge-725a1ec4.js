import{d as w,v as o,x as b,X as C,y as N,B as $,o as l,c,n as T,a,F as B,f as V,C as h,_ as z}from"./index-70139cdd.js";import{u as D}from"./index-76257893.js";import{h as G}from"./index-c2b5f845.js";const M={class:"dv-decoration-9"},E=["stroke"],F=["dur"],I=["stroke"],R=["dur"],S=["stroke"],A=["xlink:href","stroke","fill"],H=["dur","begin"],L=["stroke"],m="decoration-9-polygon",P=w({__name:"Gauge",props:{component:{}},setup(v){const p=v,g=(t,e)=>{t.length===2&&(t[0]==="attr"&&t[1]==="color1"&&(s.value[0]=e),t[0]==="attr"&&t[1]==="color2"&&(s.value[1]=e),t[0]==="attr"&&t[1]==="unit"&&(_.value=e))},{propValue:r}=D(p.component,g),s=o([r.attr.color1,r.attr.color2]),n=o(3),u=o(0),d=o([1,1]),_=o(r.attr.unit||""),k=t=>{const e=t.contentRect,i=Math.min(e.width/100,e.height/100);d.value=[i,i]},y=t=>{const e=t;r.data.datatag&&e.TagName===r.data.datatag&&(u.value=Number(e.TagValue))};b(async()=>{await x()});const x=async()=>{if(r.data.history)try{const t=await G.post({url:r.data.history,data:[r.data.datatag]});t.status===200&&(u.value=Number(t.data.TagValue))}catch(t){console.log(t.message||t)}};return C("actual",y),(t,e)=>{const i=N("resize");return $((l(),c("div",M,[(l(),c("svg",{width:"100",height:"100",style:T(`transform: scale(${d.value[0]}, ${d.value[1]})`)},[a("defs",null,[a("polygon",{id:m,points:"15, 46.5, 21, 47.5, 21, 52.5, 15, 53.5"})]),a("circle",{cx:"50",cy:"50",r:"45",fill:"transparent",stroke:s.value[1],"stroke-width":"10","stroke-dasharray":"80, 100, 30, 100"},[a("animateTransform",{attributeName:"transform",type:"rotate",values:"0 50 50;360 50 50",dur:`${n.value}s`,repeatCount:"indefinite"},null,8,F)],8,E),a("circle",{cx:"50",cy:"50",r:"45",fill:"transparent",stroke:s.value[0],"stroke-width":"6","stroke-dasharray":"50, 66, 100, 66"},[a("animateTransform",{attributeName:"transform",type:"rotate",values:"0 50 50;-360 50 50",dur:`${n.value}s`,repeatCount:"indefinite"},null,8,R)],8,I),a("circle",{cx:"50",cy:"50",r:"38",fill:"transparent",stroke:s.value[1],"stroke-width":"1","stroke-dasharray":"5, 1"},null,8,S),(l(!0),c(B,null,V(new Array(20).fill(0),(X,f)=>(l(),c("use",{key:f,"xlink:href":`#${m}`,stroke:s.value[1],fill:Math.random()>.4?"transparent":s.value[0]},[a("animateTransform",{attributeName:"transform",type:"rotate",values:"0 50 50;360 50 50",dur:`${n.value}s`,begin:`${f*n.value/20}s`,repeatCount:"indefinite"},null,8,H)],8,A))),128)),a("circle",{cx:"50",cy:"50",r:"26",fill:"transparent",stroke:s.value[1],"stroke-width":"1","stroke-dasharray":"5, 1"},null,8,L)],4)),a("div",null,h(u.value)+h(_.value),1)])),[[i,k]])}}});const O=z(P,[["__scopeId","data-v-05f3a5e5"]]);export{O as default};
