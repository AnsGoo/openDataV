var Bt=Object.defineProperty,Lt=Object.defineProperties;var zt=Object.getOwnPropertyDescriptors;var ot=Object.getOwnPropertySymbols;var $t=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable;var at=(a,e,n)=>e in a?Bt(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,ie=(a,e)=>{for(var n in e||(e={}))$t.call(e,n)&&at(a,n,e[n]);if(ot)for(var n of ot(e))It.call(e,n)&&at(a,n,e[n]);return a},Xe=(a,e)=>Lt(a,zt(e));var ve=(a,e,n)=>new Promise((o,l)=>{var s=r=>{try{u(n.next(r))}catch(i){l(i)}},m=r=>{try{u(n.throw(r))}catch(i){l(i)}},u=r=>r.done?o(r.value):Promise.resolve(r.value).then(s,m);u((n=n.apply(a,e)).next())});import{d as lt}from"./pinia.30c42674.js";import{u as ue,d as st,c as jt,h as At,i as ut,j as $e,s as it,_ as ce,e as xe,b as Te,k as Je,m as ye,r as G,l as ct,n as Oe,E as rt,f as dt,o as Nt,q as Tt,t as Ut,v as Mt,w as ge,x as pt,I as be,y as Pt,z as Rt,A as mt}from"./index.ef2789db.js";import{c as Ue,d as ft}from"./lodash-es.5f1bdab1.js";import{f as H,a4 as ze,G as X,N as v,W as U,Q as he,a6 as Vt,r as x,a as ne,F as le,Z as me,E as J,u as t,a1 as fe,a5 as Xt,d as O,t as Ot,a7 as Ht,q as Me,X as z,Y as _e,M as vt,a2 as Ee,o as He,K as d,O as L,P as h,V as Yt,_ as Ie,w as we,S as Pe,$ as Wt,a0 as Gt,j as Re,h as Se}from"./@vue.f8650cf9.js";import{u as Kt,a as ht}from"./vue-router.32a64423.js";import{u as qt,s as Jt,g as Qt}from"./pages.7ae502e8.js";import{y as _t,A as yt,B as de,C as Ve,D as se,E as Fe,e as Qe,F as Ye,G as Zt,H as en,I as tn,J as ke,K as We,j as Be,L as je,M as Ze,O as nn,P as on,h as gt,Q as Ge,R as Ke,t as an,s as bt,v as ln,x as et}from"./naive-ui.2edb364b.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./dexie.78e6a997.js";import"./nprogress.5f640c6a.js";import"./@icon-park.f4b03c54.js";import"./date-fns.3ef01b04.js";import"./seemly.5d1c4af6.js";import"./vueuc.ebfd6ddc.js";import"./evtd.79485e8d.js";import"./@css-render.7ab96087.js";import"./vooks.ee7b0837.js";import"./vdirs.8ff5d312.js";import"./@juggle.37ed2144.js";import"./css-render.d5050412.js";import"./@emotion.6322e2ae.js";import"./treemate.80cdf2c2.js";import"./async-validator.fb49d0f5.js";import"./index.1f44d164.js";import"./axios.19d3e859.js";const Q=ue(),sn=lt({id:"compose",state:()=>({style:{top:0,left:0,width:0,height:0,rotate:0},components:[]}),getters:{canCompose(){return this.components.length>1},canDecompose(){return!(Q.curComponent&&!Q.curComponent.isLock&&Q.curComponent.component==="Group")}},actions:{isActived(a){return this.components.findIndex(e=>e.id===a.id)!==-1},setAreaData(a,e){this.style=a||{},this.components=e||[]},appendComponent(a){this.components.findIndex(e=>e.id===a.id)===-1&&(this.components.push(a),this.components.length>1&&(this.style=ie(ie({},this.style),st(this.components))))},compose(){this.style.width===0&&(this.style=ie(ie({},this.style),st(this.components)));const a={component:"Group",id:jt(),display:!0,icon:"",style:this.style,subComponents:Ue(this.components),label:""};At(a),this.batchDeleteComponent(this.components),Q.appendComponent(a);const e=Q.componentData.length-1;Q.setCurComponent(Q.componentData[e]),this.components=[]},batchDeleteComponent(a){a.forEach(e=>{for(let n=0,o=Q.componentData.length;n<o;n++)if(e.id===Q.componentData[n].id){Q.componentData.splice(n,1);break}})},decompose(){var n;const a=Q.curComponent.style,e=((n=Q.curComponent)==null?void 0:n.subComponents)||[];if(e.length>0){const o=Q.getComponentIndexById(Q.curComponent.id);Q.removeComponent(o.toString()),e.forEach(l=>{ut(l,a),Q.appendComponent(l)})}},flushRight(){const{right:a,items:e}=$e(this.components);e.forEach(n=>{const o=a-n.right;n.component.style.left=n.component.style.left+o}),Q.saveComponentData()},flushLeft(){const{left:a,items:e}=$e(this.components);e.forEach(n=>{const o=n.left-a;n.component.style.left=n.component.style.left-o}),Q.saveComponentData()},flushTop(){const{top:a,items:e}=$e(this.components);e.forEach(n=>{const o=n.top-a;n.component.style.top=n.component.style.top-o}),Q.saveComponentData()},flushBottom(){const{bottom:a,items:e}=$e(this.components);e.forEach(n=>{const o=a-n.bottom;n.component.style.top=n.component.style.top+o}),Q.saveComponentData()},flushRow(){const{top:a,bottom:e,items:n}=$e(this.components);n.forEach(o=>{const l=(e+a)/2-o.center.y;o.component.style.top=o.component.style.top+l}),Q.saveComponentData()},flushColumn(){const{left:a,right:e,items:n}=$e(this.components);n.forEach(o=>{const l=(a+e)/2-o.center.x;o.component.style.left=o.component.style.left+l}),Q.saveComponentData()}}}),tt=()=>sn(it);const un=H({props:{start:null,width:null,height:null},setup(a){const e=tt(),n=()=>{e.compose(),xe.emit("hideArea")},o=()=>{e.flushLeft(),xe.emit("hideArea")},l=()=>{e.flushRight(),xe.emit("hideArea")},s=()=>{e.flushTop(),xe.emit("hideArea")},m=()=>{e.flushBottom(),xe.emit("hideArea")},u=()=>{e.flushRow(),xe.emit("hideArea")},r=()=>{e.flushColumn(),xe.emit("hideArea")},i=()=>[{text:"\u7EC4\u5408",subText:"",disable:!e.canCompose,handler:n},{divider:!0},{text:"\u5DE6\u5BF9\u9F50",subText:"",handler:o},{text:"\u53F3\u5BF9\u9F50",subText:"",handler:l},{text:"\u9876\u5BF9\u9F50",subText:"",handler:s},{text:"\u5E95\u5BF9\u9F50",subText:"",handler:m},{divider:!0},{text:"\u6C34\u5E73\u5BF9\u9F50",subText:"",handler:u},{text:"\u5782\u76F4\u5BF9\u9F50",subText:"",handler:r}];return(p,c)=>{const f=ze("contextmenu");return X((v(),U("div",{style:he({left:a.start.x+"px",top:a.start.y+"px",width:a.width+"px",height:a.height+"px"}),class:"area"},null,4)),[[f,i]])}}});var Ct=ce(un,[["__scopeId","data-v-a9838500"]]);const cn={},rn={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},dn=Vt('<defs data-v-c1eb8d14><pattern id="smallGrid" width="7.236328125" height="7.236328125" patternUnits="userSpaceOnUse" data-v-c1eb8d14><path d="M 7.236328125 0 L 0 0 0 7.236328125" fill="none" stroke="rgba(207, 207, 207, 0.3)" stroke-width="1" data-v-c1eb8d14></path></pattern><pattern id="grid" width="36.181640625" height="36.181640625" patternUnits="userSpaceOnUse" data-v-c1eb8d14><rect width="36.181640625" height="36.181640625" fill="url(#smallGrid)" data-v-c1eb8d14></rect><path d="M 36.181640625 0 L 0 0 0 36.181640625" fill="none" stroke="rgba(186, 186, 186, 0.5)" stroke-width="1" data-v-c1eb8d14></path></pattern></defs><rect width="100%" height="100%" fill="url(#grid)" data-v-c1eb8d14></rect>',2),pn=[dn];function mn(a,e){return v(),U("svg",rn,pn)}var fn=ce(cn,[["render",mn],["__scopeId","data-v-c1eb8d14"]]);const vn={class:"mark-line"},hn=H({setup(a){const e=ue(),n=x([]),o=ne(["xt","xc","xb","yl","yc","yr"]),l=x(3),s=ne({xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}),m=f=>{n.value.push(f)},u=()=>{Object.keys(s).forEach(f=>{s[f]=!1})};Te("move",f=>{r(f.isDownward,f.isRightward)}),Te("unmove",()=>{u()});const r=(f,S)=>{const C=e.componentData;if(e.curComponent){const{top:N,left:V,right:Z,bottom:P}=Je(e.curComponent.style),M=(Z-V)/2,k=(P-N)/2;u(),C.forEach(y=>{if(y==e.curComponent)return;const _=Je(y.style),{top:D,left:j,bottom:A,right:E}=_,w=(E-j)/2,b=(A-D)/2,R={top:[{isNearly:i(N,D),lineNode:n.value[0],line:"xt",dragShift:D,lineShift:D},{isNearly:i(P,D),lineNode:n.value[0],line:"xt",dragShift:D-(P-N||0),lineShift:D},{isNearly:i((N||0)+k,D+b),lineNode:n.value[1],line:"xc",dragShift:D+b-k,lineShift:D+b},{isNearly:i(N,A),lineNode:n.value[2],line:"xb",dragShift:A,lineShift:A},{isNearly:i(P,A),lineNode:n.value[2],line:"xb",dragShift:A-(P-N||0),lineShift:A}],left:[{isNearly:i(V,j),lineNode:n.value[3],line:"yl",dragShift:j,lineShift:j},{isNearly:i(Z,j),lineNode:n.value[3],line:"yl",dragShift:j-(Z-V||0),lineShift:j},{isNearly:i((V||0)+M,j+w),lineNode:n.value[4],line:"yc",dragShift:j+w-M,lineShift:j+w},{isNearly:i(V,E),lineNode:n.value[5],line:"yr",dragShift:E,lineShift:E},{isNearly:i(Z,E),lineNode:n.value[5],line:"yr",dragShift:E-(Z-V||0),lineShift:E}]},Y=[],{rotate:F}=e.curComponent.style;Object.keys(R).forEach(ee=>{R[ee].forEach(oe=>{if(!oe.isNearly)return;const te=F!=0?p(ee,oe,{width:Z-V,height:P-N}):oe.dragShift;e.setComponentSingleStyle({key:ee,value:te}),oe.lineNode.style[ee]=`${oe.lineShift}px`,Y.push(oe.line)})}),Y.length&&c(Y,f,S)})}},i=(f,S)=>Math.abs(f-S)<=l.value,p=(f,S,C)=>{const{width:N,height:V}=e.curComponent.style;return f=="top"?Math.round(S.dragShift-(V-C.height)/2):Math.round(S.dragShift-(N-C.width)/2)},c=(f,S,C)=>{C?f.includes("yr")?s.yr=!0:f.includes("yc")?s.yc=!0:f.includes("yl")&&(s.yl=!0):f.includes("yl")?s.yl=!0:f.includes("yc")?s.yc=!0:f.includes("yr")&&(s.yr=!0),S?f.includes("xb")?s.xb=!0:f.includes("xc")?s.xc=!0:f.includes("xt")&&(s.xt=!0):f.includes("xt")?s.xt=!0:f.includes("xc")?s.xc=!0:f.includes("xb")&&(s.xb=!0)};return(f,S)=>(v(),U("div",vn,[(v(!0),U(le,null,me(t(o),C=>X((v(),U("div",{key:C,class:fe(["line",C.includes("x")?"xline":"yline"]),ref:m},null,2)),[[J,t(s)[C]||!1]])),128))]))}});var _n=ce(hn,[["__scopeId","data-v-b4937e88"]]);const yn=lt({id:"copy",state:()=>({copyData:void 0,isCut:!1}),actions:{copy(){const a=ue(),e=a.curComponent||a.layerComponent;!e||(this.copyData=Ue(e))},paste(a,e,n){if(!this.copyData){ye.info("\u8BF7\u9009\u62E9\u7EC4\u4EF6");return}const o=ue();a?(this.copyData.style.top=n,this.copyData.style.left=e):(this.copyData.style.top=this.copyData.style.top+10,this.copyData.style.left=this.copyData.style.left+10),o.appendComponent(Ue(this.copyData))}}});function nt(){return yn(it)}const gn={lt:bn,t:Dn,rt:En,r:Fn,rb:wn,b:Sn,lb:xn,l:Cn};function Le(a){const{top:e,left:n,height:o,width:l}=a;return{y:e+o/2,x:n+l/2}}function xt(a,e,n){return a*(n-e.x)+e.y}function St(a,e,n){return e.x-(e.y-n)/a}function bn(a,e){const{top:n,left:o,rotate:l,width:s,height:m}=a,u=Le(a),r={x:o+s,y:n+m},i=G(r,u,l),p={x:(i.x+e.x)/2,y:(i.y+e.y)/2},c=G(e,p,-l),f=G(i,p,-l),S=f.y-c.y,C=f.x-c.x;return{top:c.y,left:c.x,width:C,height:S}}function Cn(a,e){const{left:n,rotate:o,width:l,height:s,top:m}=a,u=Le(a),r={x:n+l,y:m+s/2},i=G(r,u,o);if(o%180!=90){const C=(u.y-i.y)/(u.x-i.x),N=xt(C,u,e.x);e.y=N}else e.x=u.x;const p={x:(i.x+e.x)/2,y:(i.y+e.y)/2},c=G(e,p,-o),S=G(i,p,-o).x-c.x;return{top:p.y-s/2,left:c.x,width:S,height:s}}function xn(a,e){const{top:n,left:o,rotate:l,width:s}=a,m=Le(a),u={x:o+s,y:n},r=G(u,m,l),i={x:(r.x+e.x)/2,y:(r.y+e.y)/2},p=G(e,i,-l),c=G(r,i,-l),f=p.y-c.y,S=c.x-p.x;return{top:p.y-f,left:p.x,width:S,height:f}}function Sn(a,e){const{top:n,left:o,rotate:l,width:s}=a,m=Le(a),u={x:o+s/2,y:n},r=G(u,m,l);if(l%180!=90){const S=(m.y-r.y)/(m.x-r.x),C=St(S,m,e.y);e.x=C}else e.y=m.y;const i={x:(r.x+e.x)/2,y:(r.y+e.y)/2},p=G(e,i,-l),c=G(r,i,-l),f=p.y-c.y;return{top:p.y-f,left:i.x-s/2,width:s,height:f}}function Dn(a,e){const{top:n,left:o,rotate:l,width:s,height:m}=a,u=Le(a),r={x:o+s/2,y:n+m},i=G(r,u,l);if(l%180!=90){const C=(u.y-i.y)/(u.x-i.x),N=St(C,u,e.y);e.x=N}else e.y=u.y;const p={x:(i.x+e.x)/2,y:(i.y+e.y)/2},c=G(e,p,-l),S=G(i,p,-l).y-c.y;return{top:c.y,left:p.x-s/2,width:s,height:S}}function En(a,e){const{top:n,left:o,rotate:l,height:s}=a,m=Le(a),u={x:o,y:n+s},r=G(u,m,l),i={x:(r.x+e.x)/2,y:(r.y+e.y)/2},p=G(e,i,-l),c=G(r,i,-l),f=c.y-p.y,S=p.x-c.x;return{top:p.y,left:c.x,width:S,height:f}}function wn(a,e){const{top:n,left:o,rotate:l}=a,s=Le(a),u=G({x:o,y:n},s,l),r={x:(u.x+e.x)/2,y:(u.y+e.y)/2},i=G(e,r,-l),p=G(u,r,-l),c=i.y-p.y,f=i.x-p.x;return{top:p.y,left:p.x,width:f,height:c}}function Fn(a,e){const{top:n,left:o,rotate:l,height:s}=a,m=Le(a),u={x:o,y:n+s/2},r=G(u,m,l);if(l%180!=90){const S=(m.y-r.y)/(m.x-r.x),C=xt(S,m,e.x);e.y=C}else e.x=m.x;const i={x:(r.x+e.x)/2,y:(r.y+e.y)/2},p=G(e,i,-l),c=G(r,i,-l),f=p.x-c.x;return{top:c.y-s/2,left:c.x,width:f,height:s}}function kn(a,e,n){const{top:o,left:l,width:s,height:m}=gn[a](e,n);return{top:Math.round(o),left:Math.round(l),width:Math.round(s),height:Math.round(m)}}const Bn=["onClick"],Ln={class:"iconfont icon-jiesuo"},zn=H({props:{active:{default:!1},info:null,defaultStyle:null,index:null},setup(a){const e=a;Xt(B=>({"9c913a60":y.value,"9ebf3726":_.value,"9cf75a8a":D.value}));const n=ue(),o=tt(),l=nt(),s=()=>{l.copy(),Oe(JSON.stringify(n.curComponent))},m=()=>{e.index&&n.removeComponent(e.index)},u=()=>{e.index&&n.upComponent(e.index)},r=()=>{e.index&&n.downComponent(e.index)},i=()=>{e.index&&n.topComponent(e.index)},p=()=>{if(e.index){let B=n.curComponent.id;Oe(B)}},c=()=>{e.index&&n.bottomComponent(e.index)},f=()=>{o.decompose()},S=()=>(n.setCurComponent(e.info),[{text:"\u62C6\u5206",subText:"",disable:o.canDecompose,handler:f},{divider:!0},{text:"\u590D\u5236",subText:"Ctrl + C",handler:s},{text:"\u590D\u5236ID",subText:"",handler:p},{text:"\u5220\u9664",subText:"",handler:m},{divider:!0},{text:"\u7F6E\u4E8E\u9876\u5C42",handler:i,children:[{text:"\u7F6E\u4E8E\u9876\u5C42",handler:i},{text:"\u4E0A\u79FB\u4E00\u5C42",handler:u}]},{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:c,children:[{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:c},{text:"\u4E0B\u79FB\u4E00\u5C42",handler:r}]}]),C=O(()=>n.isShowEm),N=x(null),{info:V}=ie({},Ot(e)),Z=ne(["lt","t","rt","r","rb","b","lb","l"]),P=ne({lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315}),M=ne([{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}]),k=x({}),y=x("0px"),_=x("#fff0"),D=x("none"),j=x(!1),A=x("");Ht((B,g,K)=>{if(console.log(B),K==="render function"){if(n.isEditMode){if(g){const{id:$,label:ae}=g.info||{};A.value=`\u7EC4\u4EF6[${ae}][${$}]\u6E32\u67D3\u5F02\u5E38`}else A.value="\u7EC4\u4EF6\u6E32\u67D3\u5F02\u5E38";y.value="5px",_.value="red",D.value="dashed",j.value=!0}return!1}else return!0});const E=O(()=>e.active&&!e.info.isLock||o.isActived(e.info)),w=O(()=>n.layerComponent?n.layerComponent.id===e.info.id:!1),b=()=>{o.appendComponent(e.info)},R=B=>{if(B.button===0){if(n.setClickComponentStatus(!0),B.preventDefault(),B.stopPropagation(),n.setCurComponent(e.info),e.info.isLock)return;k.value=oe();let{top:g,left:K}=e.defaultStyle;const $=B.clientY,ae=B.clientX,pe=g,re=K,Ce=q=>{const T=q.clientX;g=q.clientY-$+pe,K=T-ae+re,n.syncComponentLoction({top:g,left:K})},I=()=>{xe.emit("unmove"),document.removeEventListener("mousemove",Ce),document.removeEventListener("mouseup",I)};document.addEventListener("mousemove",Ce),document.addEventListener("mouseup",I)}},Y=B=>{B.stopPropagation(),B.preventDefault(),n.setCurComponent(e.info)},F=(B,g)=>{if(g.button===0){n.setClickComponentStatus(!0),g.stopPropagation(),g.preventDefault();const K={top:e.defaultStyle.top,left:e.defaultStyle.left,height:e.defaultStyle.height,width:e.defaultStyle.width,rotate:e.defaultStyle.rotate},$=document.querySelector("#editor").getBoundingClientRect(),ae=re=>{const Ce={x:re.clientX-$.left,y:re.clientY-$.top},{top:I,left:q,width:T,height:W}=kn(B,K,Ce);n.syncComponentLoction({top:I,left:q,width:T,height:W})},pe=()=>{document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",pe)};document.addEventListener("mousemove",ae),document.addEventListener("mouseup",pe)}},ee=B=>{if(n.setCurComponent(e.info),B.button===0){if(!N.value)return;n.setClickComponentStatus(!0),B.preventDefault(),B.stopPropagation();let{rotate:g}=ie({},e.defaultStyle);const K=B.clientY,$=B.clientX,ae=g,pe=N.value.getBoundingClientRect(),re=pe.left+pe.width/2,Ce=pe.top+pe.height/2,I=Math.atan2(K-Ce,$-re)/(Math.PI/180),q=W=>{const qe=W.clientX,Ae=W.clientY,Ne=Math.atan2(Ae-Ce,qe-re)/(Math.PI/180);g=ae+Ne-I,n.syncComponentLoction({rotate:g})},T=()=>{document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",T)};document.addEventListener("mousemove",q),document.addEventListener("mouseup",T)}},oe=()=>{if(!n.curComponent)return{};const B=ct(n.curComponent.style.rotate),g={};let K=-1;return Z.forEach($=>{const ae=ct(P[$]+B),pe=M.length;for(;;){K=(K+1)%pe;const re=M[K];if(ae<23||ae>=338){g[$]="nw-resize";return}if(re.start<=ae&&ae<re.end){g[$]=re.cursor+"-resize";return}}}),g},te=O(()=>{const B="rotate-",g=e.defaultStyle.rotate;return g>-22.5&&g<=22.5?B+0:g>22.5&&g<=67.5?B+45:g>67.5&&g<=112.5?B+90:g>112.5&&g<=157.5?B+135:g>157.5||g<=-157.5?B+0:g>-157.5&&g<=-112.5?B+45:g>-112.5&&g<=-67.5?B+90:g>-67.5&&g<=-22.5?B+135:B+0});return Me(()=>{k.value=oe()}),(B,g)=>{const K=ze("contextmenu");return X((v(),U("div",{ref:($,ae)=>{ae.shape=$,N.value=$},class:fe(["shape",{active:t(E)||a.active,layerActive:t(w)}]),onClick:[Ee(b,["ctrl","exact"]),Ee(Y,["exact"])],onMousedown:R},[X(z("span",{class:"error-info"},_e(A.value),513),[[J,j.value]]),X(z("span",{class:"iconfont icon-xuanzhuan",onMousedown:ee},null,544),[[J,t(E)]]),X(z("span",Ln,null,512),[[J,t(V).isLock]]),X(z("em",null,"("+_e(a.defaultStyle.left)+","+_e(a.defaultStyle.top)+")",513),[[J,t(C)]]),X(z("div",{class:fe(["shape-point","lt",t(te)]),style:{top:"0%",left:"0%"},onMousedown:g[0]||(g[0]=$=>F("lt",$))},null,34),[[J,t(E)]]),X(z("div",{class:fe(["shape-point","t",t(te)]),style:{top:"0%",left:"50%"},onMousedown:g[1]||(g[1]=$=>F("t",$))},null,34),[[J,t(E)]]),X(z("div",{class:fe(["shape-point","rt",t(te)]),style:{top:"0%",left:"100%"},onMousedown:g[2]||(g[2]=$=>F("rt",$))},null,34),[[J,t(E)]]),X(z("div",{class:fe(["shape-point","r",t(te)]),style:{top:"50%",left:"100%"},onMousedown:g[3]||(g[3]=$=>F("r",$))},null,34),[[J,t(E)]]),X(z("div",{class:fe(["shape-point","rb",t(te)]),style:{top:"100%",left:"100%"},onMousedown:g[4]||(g[4]=$=>F("rb",$))},null,34),[[J,t(E)]]),X(z("div",{class:fe(["shape-point","b",t(te)]),style:{top:"100%",left:"50%"},onMousedown:g[5]||(g[5]=$=>F("b",$))},null,34),[[J,t(E)]]),X(z("div",{class:fe(["shape-point",["shape-point","lb",t(te)]]),style:{top:"100%",left:"0%"},onMousedown:g[6]||(g[6]=$=>F("lb",$))},null,34),[[J,t(E)]]),X(z("div",{class:fe(["shape-point","l",t(te)]),style:{top:"50%",left:"0%"},onMousedown:g[7]||(g[7]=$=>F("l",$))},null,34),[[J,t(E)]]),vt(B.$slots,"default",{},void 0,!0)],42,Bn)),[[K,S]])}}});var $n=ce(zn,[["__scopeId","data-v-2c8bf2f3"]]);const In=H({setup(a){const e=ue(),n=tt(),o=nt(),l=b=>dt(b,["top","left","width","height","rotate"]),s=O(()=>n.style.width>0&&!D.value),m=O(()=>({x:n.style.left,y:n.style.top})),u=O(()=>n.style.width),r=O(()=>n.style.height),i=()=>{D.value=!1,y.value=0,_.value=0,n.setAreaData({left:0,top:0,width:0,height:0,rotate:0},[])},p=()=>{e.clearCanvas()},c=()=>{o.paste(!1)},f=()=>[{text:"\u7C98\u8D34",subText:"Ctrl + V",handler:c},{text:"\u6E05\u7A7A\u753B\u5E03",subText:"",handler:p}];Te("hideArea",i),Me(()=>{console.log("\u8FDB\u5165\u7F16\u8F91\u6A21\u5F0F"),e.setEditMode(rt.EDIT),document.addEventListener("keydown",w),document.addEventListener("paste",Z)}),He(()=>{console.log("\u8FDB\u5165\u9884\u89C8\u6A21\u5F0F"),e.setEditMode(rt.PREVIEW),document.removeEventListener("keydown",w),document.removeEventListener("paste",Z),e.clearCanvas()});const S=O(()=>e.componentData),C=O(()=>e.canvasStyleData),N=O(()=>e.curComponent),V=O(()=>{const b=Xe(ie({},C.value),{backgroundImage:C.value.image,backgroundSize:"cover"});return dt(b,["width","height","backgroundImage","backgroundSize"])}),Z=b=>{if(b.clipboardData){const R=b.clipboardData.getData("text");try{const Y=JSON.parse(R);"component"in Y&&(b.preventDefault(),e.appendComponent(Y))}catch(Y){console.log(Y)}}},P=x(0),M=x(0),k=ne({x:0,y:0}),y=x(0),_=x(0),D=x(!1),j=x(null),A=b=>{var R;if(b.button===0){e.setCurComponent(void 0),b.preventDefault(),b.stopPropagation(),i();const Y=(R=j.value)==null?void 0:R.getBoundingClientRect();P.value=Y.x,M.value=Y.y;const F=b.clientX,ee=b.clientY;k.x=F-P.value,k.y=ee-M.value,D.value=!0;const oe=B=>{B.preventDefault(),B.stopPropagation(),y.value=Math.abs(B.clientX-F),_.value=Math.abs(B.clientY-ee),B.clientX<F&&(k.x=B.clientX-P.value),B.clientY<ee&&(k.y=B.clientY-M.value)},te=B=>{if(document.removeEventListener("mousemove",oe),document.removeEventListener("mouseup",te),B.clientX==F&&B.clientY==ee){i();return}const g={left:k.x,top:k.y,right:y.value+k.x,bottom:k.y+_.value},K=E(g);if(K){const $=K.rect;n.setAreaData({top:$.top,left:$.left,width:$.right-$.left,height:$.bottom-$.top,rotate:0},K.components),k.x=$.left,k.y=$.top,y.value=$.right-$.left,_.value=$.bottom-$.top}};document.addEventListener("mousemove",oe),document.addEventListener("mouseup",te)}},E=b=>{const R=[],Y=new Set,F=new Set,ee=new Set,oe=new Set;if(e.componentData.forEach(te=>{const B=te.style,g=Je(B);g.left>=b.left&&g.right<=b.right&&g.top>=b.top&&g.bottom<=b.bottom&&(R.push(te),Y.add(g.left),F.add(g.top),ee.add(g.right),oe.add(g.bottom))}),R.length>0){const te=Math.min(...Y),B=Math.max(...ee),g=Math.min(...F),K=Math.max(...oe);return{components:R,rect:{left:te,right:B,top:g,bottom:K}}}},w=b=>{if(N.value&&b.ctrlKey)switch(b.key){case"ArrowLeft":b.preventDefault(),e.syncComponentLoction({left:N.value.style.left-1});break;case"ArrowUp":b.preventDefault(),e.syncComponentLoction({top:N.value.style.top-1});break;case"ArrowRight":b.preventDefault(),e.syncComponentLoction({left:N.value.style.left+1});break;case"ArrowDown":b.preventDefault(),e.syncComponentLoction({top:N.value.style.top+1});break;default:b.stopPropagation()}else b.stopPropagation()};return(b,R)=>{const Y=ze("contextmenu");return X((v(),U("div",{class:"editor edit",ref:(F,ee)=>{ee.editor=F,j.value=F},id:"editor",style:he(t(V)),onMousedown:A},[d(fn),(v(!0),U(le,null,me(t(S),(F,ee)=>(v(),U(le,{key:F.id},[t(e).isEditMode&&F.display?(v(),L($n,{key:0,id:"shape"+F.id,defaultStyle:F.style,style:he(l(F.style)),active:F.id===(t(N)||{}).id,info:F,index:ee.toString(),class:fe({lock:F.isLock})},{default:h(()=>[(v(),L(Yt(F.component),{class:"component",style:he(t(Nt)(F)),propValue:F.propValue,componentId:F.id,id:"component"+F.id,subComponents:F.subComponents},null,8,["style","propValue","componentId","id","subComponents"]))]),_:2},1032,["id","defaultStyle","style","active","info","index","class"])):Ie("",!0)],64))),128)),d(_n),D.value?(v(),L(Ct,{key:0,start:t(k),width:y.value,height:_.value},null,8,["start","width","height"])):t(s)?(v(),L(Ct,{key:1,start:t(m),width:t(u),height:t(r)},null,8,["start","width","height"])):Ie("",!0)],36)),[[Y,f]])}}});var jn=ce(In,[["__scopeId","data-v-0fcaaaf6"]]);const An="2946854",Nn="\u65B9\u5411",Tn="iconfont",Un="icon-",Mn="",Pn=[{icon_id:"11291350",name:"\u7EC4",font_class:"zu",unicode:"e854",unicode_decimal:59476},{icon_id:"1817751",name:"\u67F1\u5F62\u56FE",font_class:"zhuxingtu",unicode:"e626",unicode_decimal:58918},{icon_id:"3868284",name:"\u4EEA\u8868\u76D8",font_class:"yibiaopan",unicode:"eb67",unicode_decimal:60263},{icon_id:"4354243",name:"\u56FE\u8868-\u997C\u56FE",font_class:"tubiao-bingtu",unicode:"eb95",unicode_decimal:60309},{icon_id:"4354246",name:"\u56FE\u8868-\u5361\u7247",font_class:"tubiao-qiapian",unicode:"eb96",unicode_decimal:60310},{icon_id:"4354248",name:"\u56FE\u8868-\u6298\u7EBF\u56FE",font_class:"tubiao-zhexiantu",unicode:"eb97",unicode_decimal:60311},{icon_id:"4906240",name:"\u6309\u94AE\u7EC4",font_class:"anniuzu",unicode:"e782",unicode_decimal:59266},{icon_id:"5383645",name:"\u5BFC\u822A",font_class:"daohang",unicode:"e77d",unicode_decimal:59261},{icon_id:"5961366",name:"\u5217\u8868",font_class:"liebiao",unicode:"ec6b",unicode_decimal:60523},{icon_id:"5971297",name:"\u91C7\u7164\u673A",font_class:"caimeiji",unicode:"e603",unicode_decimal:58883},{icon_id:"7040619",name:"\u5176\u4ED6",font_class:"qita",unicode:"e63b",unicode_decimal:58939},{icon_id:"7556180",name:"\u5B9A\u5236",font_class:"dingzhi",unicode:"e609",unicode_decimal:58889},{icon_id:"9752796",name:"\u57FA\u7840",font_class:"jichu",unicode:"e60f",unicode_decimal:58895},{icon_id:"9921108",name:"chart",font_class:"chartt",unicode:"e60a",unicode_decimal:58890},{icon_id:"14475731",name:"\u88C5\u9970\u88C5\u4FEE",font_class:"zhuangshizhuangxiu",unicode:"e6a6",unicode_decimal:59046},{icon_id:"16562592",name:"\u6E29\u5EA6\u8BA1",font_class:"wenduji",unicode:"e6de",unicode_decimal:59102},{icon_id:"22712019",name:"\u6761\u5F62\u8FDB\u5EA6\u56FE",font_class:"tiaoxingjindutu",unicode:"e66b",unicode_decimal:58987},{icon_id:"22761375",name:"\u8FB9\u6846",font_class:"biankuang",unicode:"e6b7",unicode_decimal:59063},{icon_id:"22885432",name:"\u8FDB\u5EA6\u56FE",font_class:"jindutu",unicode:"f24b",unicode_decimal:62027},{icon_id:"124495",name:"\u8B66\u544A",font_class:"jinggao1",unicode:"e601",unicode_decimal:58881},{icon_id:"1846445",name:"\u9884\u8B66\u706F",font_class:"yujingdeng",unicode:"e67f",unicode_decimal:59007},{icon_id:"2239579",name:"\u81EA\u52A8\u7CFB\u7EDF\u8B66\u544A\u706F",font_class:"zidongxitongjinggaodeng1",unicode:"e605",unicode_decimal:58885},{icon_id:"4988542",name:"\u9884\u8B66",font_class:"yujing1",unicode:"e644",unicode_decimal:58948},{icon_id:"9974390",name:"\u9884\u8B66",font_class:"yujing3",unicode:"e6fe",unicode_decimal:59134},{icon_id:"10817515",name:"\u8B66\u544A\u706F",font_class:"jinggaodeng",unicode:"e64b",unicode_decimal:58955},{icon_id:"14151833",name:"\u62A5\u8B66",font_class:"baojing1",unicode:"e630",unicode_decimal:58928},{icon_id:"16965399",name:"\u8B66\u544A\u706F",font_class:"hong",unicode:"e60d",unicode_decimal:58893},{icon_id:"20379044",name:"\u9884\u8B66\u706F",font_class:"yujingdeng1",unicode:"e623",unicode_decimal:58915},{icon_id:"23819336",name:"\u62A5\u8B66 \u8B66\u544A \u9884\u8B66 \u8B66\u544A\u706F",font_class:"a-baojingjinggaoyujingjinggaodeng",unicode:"e628",unicode_decimal:58920},{icon_id:"24312218",name:"light",font_class:"light",unicode:"e63a",unicode_decimal:58938},{icon_id:"24614518",name:"\u544A\u8B66\u706F",font_class:"gaojingdeng9",unicode:"e664",unicode_decimal:58980},{icon_id:"25567211",name:"\u8B66\u544A\u706F",font_class:"jinggaodeng1",unicode:"e613",unicode_decimal:58899},{icon_id:"12041083",name:"\u9884\u8B66",font_class:"yujing5",unicode:"e671",unicode_decimal:58993},{icon_id:"577357",name:"\u5220\u9664",font_class:"shanchu",unicode:"e74b",unicode_decimal:59211},{icon_id:"1986988",name:"\u5220\u9664",font_class:"shanchu1",unicode:"e625",unicode_decimal:58917},{icon_id:"12795401",name:"\u9996\u9875",font_class:"shouye",unicode:"e62d",unicode_decimal:58925},{icon_id:"201556",name:"\u67E5\u770B",font_class:"chakan",unicode:"e600",unicode_decimal:58880},{icon_id:"201638",name:"\u7F16\u8F91",font_class:"bianji",unicode:"e602",unicode_decimal:58882},{icon_id:"11729723",name:"\u590D\u5236",font_class:"fuzhi",unicode:"e608",unicode_decimal:58888},{icon_id:"7269302",name:"\u9996\u9875-\u9ED8\u8BA4",font_class:"shouye-moren",unicode:"e619",unicode_decimal:58905},{icon_id:"658044",name:"\u89E3\u9501",font_class:"jiesuo",unicode:"e669",unicode_decimal:58985},{icon_id:"10097949",name:"\u65CB\u8F6C",font_class:"xuanzhuan",unicode:"e680",unicode_decimal:59008},{icon_id:"374774",name:"\u5F00\u5173",font_class:"kaiguan",unicode:"e61f",unicode_decimal:58911},{icon_id:"122162",name:"\u65F6\u949F",font_class:"clock",unicode:"e63e",unicode_decimal:58942},{icon_id:"1242185",name:"\u53CD\u9988\u4FE1\u606F",font_class:"fankuixinxi",unicode:"e660",unicode_decimal:58976},{icon_id:"2468505",name:"37\u7C7B\u5EFA\u7B51\u4FEE\u7406x16",font_class:"leijianzhuxiulix",unicode:"e695",unicode_decimal:59029},{icon_id:"11747267",name:"\u65F6\u95F4",font_class:"weibiaoti-",unicode:"e618",unicode_decimal:58904},{icon_id:"14794143",name:"sds_\u7B2C37\u7C7B \u5EFA\u7B51\u4FEE\u7406",font_class:"sds_di37leijianzhuxiuli",unicode:"e61e",unicode_decimal:58910},{icon_id:"17762035",name:"\u8054\u52A8\u63A7\u5236",font_class:"liandongkongzhi",unicode:"e624",unicode_decimal:58916},{icon_id:"18165278",name:"\u9501,\u5BC6\u7801,\u5F00\u9501,\u89E3\u9501",font_class:"unlock-full",unicode:"e882",unicode_decimal:59522},{icon_id:"288554",name:"ascend",font_class:"ascend",unicode:"e6b4",unicode_decimal:59060},{icon_id:"288556",name:"falling",font_class:"falling",unicode:"e6b6",unicode_decimal:59062},{icon_id:"815867",name:"\u6309\u94AE-\u5173",font_class:"buttonoff",unicode:"e614",unicode_decimal:58900},{icon_id:"815872",name:"\u6309\u94AE-\u5F00",font_class:"buttonon",unicode:"e615",unicode_decimal:58901},{icon_id:"2674878",name:"\u7BAD\u5934 \u4E0A",font_class:"jiantoushang",unicode:"e62c",unicode_decimal:58924},{icon_id:"2674928",name:"\u7BAD\u5934 \u53F3",font_class:"jiantouyou",unicode:"e632",unicode_decimal:58930},{icon_id:"2674929",name:"\u7BAD\u5934 \u4E0B",font_class:"jiantouxia",unicode:"e633",unicode_decimal:58931},{icon_id:"7594038",name:"24gl-next",font_class:"24gl-next",unicode:"ea6b",unicode_decimal:60011},{icon_id:"7594046",name:"24gl-pauseCircle",font_class:"24gl-pauseCircle",unicode:"ea6f",unicode_decimal:60015},{icon_id:"7594068",name:"24gl-previous",font_class:"24gl-previous",unicode:"ea73",unicode_decimal:60019},{icon_id:"7594086",name:"24gl-stopCircle",font_class:"24gl-stopCircle",unicode:"ea79",unicode_decimal:60025},{icon_id:"10268256",name:"\u6309\u94AE_\u5F00\u542F",font_class:"anniu_kaiqi",unicode:"e659",unicode_decimal:58969},{icon_id:"10268257",name:"\u6309\u94AE_\u5173\u95ED",font_class:"anniu_guanbi",unicode:"e65b",unicode_decimal:58971},{icon_id:"25807963",name:"\u7BAD\u5934 \u4E0A",font_class:"jiantoushangzuo-copy",unicode:"ec63",unicode_decimal:60515},{icon_id:"25808146",name:"\u5411\u53F32",font_class:"xiangzuo2-copy",unicode:"ec64",unicode_decimal:60516},{icon_id:"166602",name:"\u5173\u95ED\u64AD\u653E",font_class:"guanbibofang",unicode:"e61d",unicode_decimal:58909},{icon_id:"577396",name:"\u5411\u4E0A3",font_class:"xiangshang3",unicode:"e76f",unicode_decimal:59247},{icon_id:"577401",name:"\u5411\u4E0B5",font_class:"xiangxia5",unicode:"e774",unicode_decimal:59252},{icon_id:"577403",name:"\u5411\u53F32",font_class:"xiangyou2",unicode:"e776",unicode_decimal:59254},{icon_id:"1159910",name:"\u53F3\u64AD\u653E",font_class:"youbofang",unicode:"e62e",unicode_decimal:58926},{icon_id:"1159911",name:"\u5DE6\u64AD\u653E",font_class:"zuobofang",unicode:"e62f",unicode_decimal:58927},{icon_id:"1185945",name:"\u64AD\u653E",font_class:"bofang2",unicode:"e606",unicode_decimal:58886},{icon_id:"1488892",name:"\u64AD\u653E",font_class:"bofang5",unicode:"e607",unicode_decimal:58887},{icon_id:"1727559",name:"323\u5411\u5DE6\u4EA4\u6362",font_class:"xiangzuojiaohuan",unicode:"e8f8",unicode_decimal:59640},{icon_id:"1727561",name:"324\u5411\u53F3\u4EA4\u6362",font_class:"xiangyoujiaohuan",unicode:"e8f9",unicode_decimal:59641},{icon_id:"2076218",name:"\u64AD\u653E2",font_class:"bofang6",unicode:"e87c",unicode_decimal:59516},{icon_id:"7594051",name:"24gl-playCircle",font_class:"24gl-playCircle",unicode:"ea6e",unicode_decimal:60014},{icon_id:"11121478",name:"\u5411\u4E0A",font_class:"xiangshang7",unicode:"e63c",unicode_decimal:58940},{icon_id:"16388177",name:"\u64AD\u653E",font_class:"bofang26",unicode:"e60e",unicode_decimal:58894},{icon_id:"18176557",name:"\u64AD\u653E",font_class:"play1",unicode:"ea8d",unicode_decimal:60045},{icon_id:"24267227",name:"\u64AD\u653E-\u5FEB\u9000",font_class:"bofang-kuaitui",unicode:"e68a",unicode_decimal:59018},{icon_id:"24267260",name:"\u64AD\u653E09",font_class:"bofang09",unicode:"e690",unicode_decimal:59024},{icon_id:"24268374",name:"\u64AD\u653E-\u5FEB\u8FDB",font_class:"bofang-kuaijin",unicode:"e6d8",unicode_decimal:59096},{icon_id:"25807740",name:"\u5411\u4E0A",font_class:"xiangxia7",unicode:"ec62",unicode_decimal:60514}];var Rn={id:An,name:Nn,font_family:Tn,css_prefix_text:Un,description:Mn,glyphs:Pn};const Vn={class:"icon_lists"},Xn=["onClick"],On=H({props:{visible:null},emits:["update:visible"],setup(a,{emit:e}){const n=O(()=>Rn.glyphs.map(s=>`icon-${s.font_class}`)),o=()=>{e("update:visible",!1)},l=s=>{Oe(s),ye.success(`\u590D\u5236\u56FE\u6807: ${s}`)};return(s,m)=>{const u=ze("click-outside");return v(),U("div",null,[d(t(yt),{show:a.visible},{default:h(()=>[X(d(t(_t),{title:`\u56FE\u6807\u6570\u91CF${t(n).length}`,class:"tab-container"},{default:h(()=>[z("ul",Vn,[(v(!0),U(le,null,me(t(n),r=>(v(),U("li",{key:r,class:"dib",onClick:i=>l(r)},[z("span",{class:fe(`icon iconfont ${r}`)},null,2)],8,Xn))),128))])]),_:1},8,["title"]),[[u,o]])]),_:1},8,["show"])])}}});var Hn=ce(On,[["__scopeId","data-v-c07295dc"]]);const De=a=>(Wt("data-v-41e25ab8"),a=a(),Gt(),a),Yn={class:"tool-bar"},Wn={class:"tool-bar-item"},Gn=De(()=>z("span",null,"\u4FDD\u5B58",-1)),Kn=De(()=>z("span",null,"\u9884\u89C8",-1)),qn=De(()=>z("span",null,"\u64A4\u9500",-1)),Jn=De(()=>z("span",null,"\u6062\u590D",-1)),Qn=De(()=>z("span",null,"\u5BFC\u51FA",-1)),Zn=De(()=>z("span",null,"\u5BFC\u5165",-1)),eo=De(()=>z("span",null,"\u5168\u5C4F",-1)),to=De(()=>z("span",null,"\u5750\u6807",-1)),no=De(()=>z("span",null,"\u56FE\u6807",-1)),oo=De(()=>z("span",null,"\u56FE\u7247",-1)),ao={class:"dialog-footer"},lo=Re("\u53D6\u6D88"),so=Re("\u65B0\u589E"),uo=Re("\u66F4\u65B0"),io=H({setup(a){const e=ue(),n=Tt(),o=Kt(),l=ht(),s=O(()=>e.componentData),m=O(()=>e.canvasStyleData),u=O(()=>l.name==="Create");let r="";const i=x(!1),p=x(!1),c=x(!1),f=ne({name:"",thumbnail:""}),S=ne({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0",trigger:"blur"}]});let C=0;Me(()=>{setTimeout(()=>{f.name=e.name,f.thumbnail=e.thumbnail},500)});const N=()=>ve(this,null,function*(){let w;C<=0?w=yield n.undo():w=yield n.undo(C-1),w?(C=w.id,e.setLayoutData({canvasData:w.canvasData,canvasStyle:w.canvasStyle})):ye.warning("\u6CA1\u6709\u5FEB\u7167\u4E86")}),V=()=>{const{href:w}=o.resolve("/preview");window.open(w,"_blank")},Z=()=>{i.value=!0},P=()=>ve(this,null,function*(){let w;C<=0?w=yield n.undo():w=yield n.undo(C+1),w?(C=w.id,e.setLayoutData({canvasData:w.canvasData,canvasStyle:w.canvasStyle})):ye.warning("\u6CA1\u6709\u5FEB\u7167\u4E86")}),M=()=>{e.toggleShowEm()},k=()=>{p.value=!p.value},y=()=>{const w=document.querySelector(".center.scrollbar");document.fullscreenEnabled&&w&&w.requestFullscreen()},_=w=>ve(this,null,function*(){const{name:b,thumbnail:R}=f;if(!b){ye.error("\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0");return}const Y={name:b,thumbnail:R,canvasData:s.value,canvasStyle:m.value};if(e.setName(b),e.setThumbnail(R),w==="update")try{yield qt(r,Y),ye.success("\u4FEE\u6539\u6210\u529F")}catch(F){ye.error("\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u5BFC\u51FA\u5230\u672C\u5730\uFF0C\u5E76\u91CD\u65B0\u8FDB\u5165\u6B64\u9875\u9762")}finally{i.value=!1}else try{const F=yield Jt(Y);ye.success("\u4FDD\u5B58\u6210\u529F"),o.push({name:"Editor",params:{index:F.id}})}catch(F){ye.error(`\u4FDD\u5B58\u5931\u8D25\uFF0C\u5931\u8D25\u4FE1\u606F:${(F==null?void 0:F.message)||F}`)}finally{i.value=!1}}),D=()=>{const w=`${e.name}`||"layout";Ut(`${w}.json`,JSON.stringify({canvasData:s.value,canvasStyle:m.value}))},j=()=>{Mt(A,".json")},A=w=>{if(w.target&&w.target.result){const b=JSON.parse(w.target.result);b&&(e.setComponentData(b.canvasData),e.setCanvasStyle(b.canvasStyle))}},E=we(()=>l.params.index,(w,b)=>{r=w},{immediate:!0});return He(()=>{E()}),(w,b)=>{const R=Pe("icon-park"),Y=ze("action");return v(),U(le,null,[z("div",Yn,[z("div",Wn,[z("div",null,[X(d(t(de),{size:"small",onClick:Z,title:"\u4FDD\u5B58"},{default:h(()=>[d(R,{name:"save-one",size:"22"}),Gn]),_:1},512),[[Y,"add"]]),d(t(de),{size:"small",onClick:V,title:"\u9884\u89C8"},{default:h(()=>[d(R,{name:"computer",size:"22"}),Kn]),_:1}),d(t(de),{size:"small",onClick:N,title:"\u64A4\u9500"},{default:h(()=>[d(R,{name:"back",size:"22"}),qn]),_:1}),d(t(de),{size:"small",onClick:P,title:"\u6062\u590D"},{default:h(()=>[d(R,{name:"next",size:"22"}),Jn]),_:1}),d(t(de),{size:"small",onClick:D,title:"\u5BFC\u51FA"},{default:h(()=>[d(R,{name:"download-one",size:"22"}),Qn]),_:1}),d(t(de),{size:"small",onClick:j,title:"\u5BFC\u5165"},{default:h(()=>[d(R,{name:"upload-one",size:"22"}),Zn]),_:1}),d(t(de),{size:"small",onClick:y,title:"\u5168\u5C4F"},{default:h(()=>[d(R,{name:"full-screen",size:"22"}),eo]),_:1}),d(t(de),{size:"small",onClick:M,title:"\u5750\u6807"},{default:h(()=>[d(R,{name:"cones",size:"22"}),to]),_:1})]),z("div",null,[d(t(de),{class:"resource",size:"small",onClick:k,title:"\u56FE\u6807"},{default:h(()=>[d(R,{name:"game-ps",size:"22"}),no]),_:1}),d(t(de),{class:"resource",size:"small",onClick:b[0]||(b[0]=()=>c.value=!0),title:"\u56FE\u7247"},{default:h(()=>[d(R,{name:"picture",size:"22"}),oo]),_:1})])])]),d(t(yt),{show:i.value,"onUpdate:show":b[6]||(b[6]=F=>i.value=F),center:""},{default:h(()=>[d(t(_t),{title:"\u4FDD\u5B58\u5F53\u524D\u5E03\u5C40",style:{width:"30%"},size:"medium"},{footer:h(()=>[z("span",ao,[d(t(de),{onClick:b[3]||(b[3]=F=>i.value=!1)},{default:h(()=>[lo]),_:1}),t(u)?(v(),L(t(de),{key:0,type:"primary",onClick:b[4]||(b[4]=F=>_("new"))},{default:h(()=>[so]),_:1})):(v(),L(t(de),{key:1,type:"primary",onClick:b[5]||(b[5]=F=>_("update"))},{default:h(()=>[uo]),_:1}))])]),default:h(()=>[d(t(Ve),{model:t(f),rules:t(S),onSubmit:b[2]||(b[2]=Ee(()=>{},["prevent"]))},{default:h(()=>[d(t(se),{label:"\u9875\u9762\u540D\u79F0",prop:"name"},{default:h(()=>[d(t(Fe),{modelValue:t(f).name,"onUpdate:modelValue":b[1]||(b[1]=F=>t(f).name=F),placeholder:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["show"]),d(Hn,{visible:p.value,"onUpdate:visible":b[7]||(b[7]=F=>p.value=F)},null,8,["visible"])],64)}}});var co=ce(io,[["__scopeId","data-v-41e25ab8"]]);const ro=["onMousedown"],po=["onMousedown"],mo=["title","onMousedown"],fo={class:"vue-ruler-content-mask"},vo=H({props:{isHotKey:{default:!0},isScaleRevise:{default:!1},contentLayout:{default:{top:0,left:0}},visible:{default:!0},stepLength:{default:50},borderStyle:{default:{color:"#red",type:"dashed",width:1}},canvas:{default:!0}},emits:["update:visible"],setup(a,{emit:e}){const n=a,o=ne([]),l=x(17),s=x(18);let m=x([]),u=x([]);const r=x(0),i=x(0),p=x(!1),c=x(""),f=x(-999),S=x(-999),C=x(0),N=x(0),V=x(""),Z=ne({r:82}),P=x(!0),M=x(null),k=x(null),y=x(null),_=ue(),D=O(()=>{const I=_.canvasData.height;return{width:_.canvasData.width+18+"px",height:I+18+"px"}}),j=O(()=>({left:n.contentLayout.left+"px",top:n.contentLayout.top+"px",padding:s.value+"px 0px 0px "+s.value+"px"})),A=O(()=>{let I=0,q=0;return o.map(T=>{const W=T.type==="h";return{id:`${T.type}_${W?I++:q++}`,type:T.type,title:T.site.toFixed(2)+"px",[W?"top":"left"]:T.site/(n.stepLength/50)+l.value}})});we(()=>n.visible,I=>{P.value=I},{immediate:!0}),we(()=>_.canvasData,I=>{F()},{deep:!0}),Me(()=>{document.addEventListener("mousemove",te),document.addEventListener("mouseup",B),document.addEventListener("keyup",Ce),E()}),He(()=>{document.removeEventListener("mousemove",te),document.removeEventListener("mouseup",B),document.removeEventListener("keyup",Ce)});const E=()=>{R(),F()},w=({type:I,top:q,left:T})=>{const W={borderWidth:n.borderStyle.width+"px",borderLeftStyle:n.borderStyle.type,borderTopStyle:n.borderStyle.type,borderRightStyle:"none",borderBottomStyle:"none",borderColor:n.borderStyle.color};return ie(I==="h"?{top:`${q}px`}:{left:T+"px"},W)},b=({type:I,id:q})=>I==="h"?ae(q):pe(q),R=()=>{C.value=k.value.clientWidth,N.value=y.value.clientHeight,Y()},Y=()=>{r.value=y.value.getBoundingClientRect().y,i.value=k.value.getBoundingClientRect().x},F=()=>{m.value=[],u.value=[];const I=_.canvasData.height,q=_.canvasData.width;ee(m.value,q+18),ee(u.value,I+18)},ee=(I,q)=>{for(let T=0;T<q*n.stepLength/50;T+=n.stepLength)T%n.stepLength==0&&I.push({id:T})},oe=I=>{p.value=!0,c.value=I},te=I=>{switch(Y(),c.value){case"h":case"x":p.value&&(S.value=I.pageY-r.value);break;case"v":case"y":p.value&&(f.value=I.pageX-i.value);break}},B=I=>{if(Y(),p.value){switch(c.value){case"x":re({type:"h",site:(I.pageY-r.value-l.value)*(n.stepLength/50)});break;case"y":re({type:"v",site:(I.pageX-i.value-l.value)*(n.stepLength/50)});break;case"h":g(o,I.pageY,r.value,N.value,"h");break;case"v":g(o,I.pageX,i.value,C.value,"v");break}S.value=f.value=-50,p.value=!1,V.value=""}},g=(I,q,T,W,qe)=>{q-T<W?A.value.forEach((Ae,Ne)=>{Ae.id===V.value&&I.splice(Ne,1)}):A.value.forEach((Ae,Ne)=>{Ae.id===V.value&&I.splice(Ne,1,{type:qe,site:(q-T-l.value)*(n.stepLength/50)})})},K=()=>{oe("x")},$=()=>{oe("y")},ae=I=>{p.value=!0,c.value="h",V.value=I},pe=I=>{p.value=!0,c.value="v",V.value=I},re=I=>{I.site>l.value&&o.push(I)},Ce=I=>{n.isHotKey&&I.keyCode===Z.r&&(P.value=!P.value,e("update:visible",P.value),P.value?s.value=18:s.value=0)};return(I,q)=>(v(),U("div",{style:he(t(D)),class:"vue-ruler-wrapper",onselectstart:"return false;"},[X(z("section",null,[z("div",{ref:(T,W)=>{W.horizontalRuler=T,y.value=T},class:"vue-ruler-h",onMousedown:Ee(K,["stop"])},[(v(!0),U(le,null,me(t(m),(T,W)=>(v(),U("span",{key:W,style:he({left:W*50+2+"px"}),class:"n"},_e(T.id),5))),128))],40,ro),z("div",{ref:(T,W)=>{W.verticalRuler=T,k.value=T},class:"vue-ruler-v",onMousedown:Ee($,["stop"])},[(v(!0),U(le,null,me(t(u),(T,W)=>(v(),U("span",{key:W,style:he({top:W*50+2+"px"}),class:"n"},_e(T.id),5))),128))],40,po),z("div",{style:he({top:S.value+"px"}),class:"vue-ruler-ref-dot-h"},null,4),z("div",{style:he({left:f.value+"px"}),class:"vue-ruler-ref-dot-v"},null,4),(v(!0),U(le,null,me(t(A),T=>(v(),U("div",{title:T.title,style:he(w(T)),key:T.id,class:fe(`vue-ruler-ref-line-${T.type}`),onMousedown:W=>b(T)},[z("span",null,_e(T.title),1)],46,mo))),128))],512),[[J,P.value]]),z("div",{ref:(T,W)=>{W.contentEl=T,M.value=T},class:"vue-ruler-content",style:he(t(j))},[vt(I.$slots,"default",{},void 0,!0)],4),X(z("div",fo,null,512),[[J,p.value]])],4))}});var ho=ce(vo,[["__scopeId","data-v-2afd9900"]]);const _o=["data-component"],yo=H({props:{component:null,name:null},setup(a){return(e,n)=>(v(),U("div",{draggable:"true","data-component":a.component},[z("div",null,_e(a.name),1)],8,_o))}}),go={class:"components"},Dt=H({setup(a){const e=O(()=>{const o={};Object.keys(ge).filter(s=>{if(ge[s].component.show!==!1)return ge[s]}).forEach(s=>{const m=ge[s].component.group;!m||(o[m]||(o[m]=[]),o[m].push(ge[s].component))});const l=[];return pt.forEach(s=>{var m;l.push({label:()=>s.name,key:s.key,icon:()=>Se(be,{name:`${s.icon}`}),children:(m=o[s.key])==null?void 0:m.map(u=>({label:()=>Se(yo,{component:u.component,name:u.label}),key:u.component}))})}),l}),n=o=>{o.dataTransfer.setData("componentName",o.target.dataset.component)};return(o,l)=>(v(),U("div",{onDragstart:n,style:{height:"calc(100vh - 100px)"}},[z("div",go,[d(t(Ye),null,{default:h(()=>[d(t(Qe),{options:t(e),accordion:!1},null,8,["options"])]),_:1})])],32))}});const bo={key:0},Co={key:1},xo=H({props:{component:null,index:null,activeKey:null,mode:{default:"expand"}},emits:["select"],setup(a,{emit:e}){const n=a,o=ue(),l=nt(),s=y=>{const _=y.split("-").map(j=>Number(j)),D=o.getComponentByIndex(_);D&&(D.groupStyle=void 0,Oe(JSON.stringify(D)),l.copy())},m=y=>ve(this,null,function*(){e("select",y),o.removeComponent(y)}),u=y=>ve(this,null,function*(){e("select",y),o.upComponent(y)}),r=y=>ve(this,null,function*(){e("select",y),o.downComponent(y)}),i=y=>ve(this,null,function*(){e("select",y),o.topComponent(y)}),p=y=>ve(this,null,function*(){e("select",y),o.bottomComponent(y)}),c=y=>{e("select",y),o.hiddenComponent(y)},f=y=>{e("select",y),o.showComponent(y)},S=(y,_)=>{const D=_.split("-").map(j=>parseInt(j));return[{text:"\u590D\u5236",subText:"Ctrl + C",handler:()=>s(_)},{text:"\u5220\u9664",subText:"",handler:()=>m(_)},{divider:!0},{text:"\u7F6E\u4E8E\u9876\u5C42",handler:()=>i(_),children:[{text:"\u7F6E\u4E8E\u9876\u5C42",handler:()=>i(_)},{text:"\u4E0A\u79FB\u4E00\u5C42",handler:()=>u(_)}]},{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:()=>p(_),children:[{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:()=>p(_)},{text:"\u4E0B\u79FB\u4E00\u5C42",handler:()=>r(_)}]},{divider:!0},{text:"\u663E\u793A",disable:o.getComponentByIndex(D).display,subText:"",handler:()=>f(_)},{text:"\u9690\u85CF",disable:!o.getComponentByIndex(D).display,subText:"",handler:()=>c(_)}]},C=(y,_)=>{var D;(D=y.dataTransfer)==null||D.setData("compomentIndex",_),y.stopPropagation()},N=(y,_,D=!1)=>{y.preventDefault(),y.stopPropagation(),D&&_!==n.activeKey&&xe.emit("ActiveMenu",_)},V=(y,_)=>{var w;y.preventDefault(),y.stopPropagation();const D=(w=y.dataTransfer)==null?void 0:w.getData("compomentIndex"),j=P(D,_),A=M(D,_),E=Z(D,A);console.log(E),E&&j&&k(j,E,A)},Z=(y,_)=>{const D=y.split("-").map(E=>Number(E)),j=D.pop(),A=o.getComponentByIndex(D);if(A&&A.subComponents){const w=A.subComponents.splice(j,1)[0];if(console.log(w),console.log(A),_||A.component==="Root")return w;if(A.component==="Group"){const b=A.style;return ut(w,b),w}}},P=(y,_)=>{const D=y.split("-").map(E=>parseInt(E)),j=_.split("-").map(E=>parseInt(E)),A=D.length;for(let E=0;E<A;E++)if(D[E]!==j[E]){if(D[E]>j[E])return _;if(D[E]<j[E])return E+1==A?(j[E]=j[E]-1,j.join("-")):_}return _},M=(y,_)=>{const D=y.split("-").map(w=>parseInt(w)),j=_.split("-").map(w=>parseInt(w));D.pop(),j.pop();const A=D.join("-"),E=j.join("-");return A===E},k=(y,_,D)=>{const j=y.split("-").map(w=>Number(w)),A=j.pop(),E=o.getComponentByIndex(j);if(E&&E.subComponents){if(E.component==="Root"||D)E.subComponents.splice(A,0,_);else if(E.component==="Group"){const w=E.style,b=ie({},_.style);_.groupStyle={gtop:1.1,gleft:1.1,grotate:_.style.rotate,gheight:parseFloat((b.height*100/w.height).toFixed(4)),gwidth:parseFloat((b.width*100/w.width).toFixed(4))},E.subComponents.splice(A,0,_),e("select",y)}}};return(y,_)=>{const D=Pe("icon-park"),j=ze("contextmenu");return X((v(),U("div",{draggable:"true",onDragstart:_[0]||(_[0]=A=>C(A,a.index)),onDrop:_[1]||(_[1]=A=>V(A,a.index)),onDragover:_[2]||(_[2]=A=>N(A,a.index,!0))},[a.component.component==="Group"?(v(),U("div",bo,[X(z("span",null,_e(a.component.label||"\u5206\u7EC4"),513),[[J,a.mode==="expand"]]),a.component.display?(v(),L(D,{key:0,name:"preview-open",size:"24"})):(v(),L(D,{key:1,name:"preview-close-one",size:"24"}))])):(v(),U("div",Co,[X(z("span",null,_e(a.component.label),513),[[J,a.mode==="expand"]]),a.component.display?(v(),L(D,{key:0,size:"24",name:"preview-open"})):(v(),L(D,{key:1,size:"24",name:"preview-close-one"}))]))],544)),[[j,()=>S(y.$el,a.index)]])}}});var Et=ce(xo,[["__scopeId","data-v-7ec22128"]]);const So={style:{height:"calc(100vh - 100px)"}},wt=H({setup(a){const e=ue(),n={};pt.map(c=>{n[c.key]=c.icon});const o=O(()=>e.componentData),l=x(null),s=x("");Te("ActiveMenu",c=>{const f=c;s.value=f,l.value&&l.value.open&&l.value.open(f)});const u=c=>{s.value=c;const f=c.split("-").map(C=>Number(C)),S=e.getComponentByIndex(f);e.setActiveComponent(S)},r=x([]),i=(c,f,S)=>{for(let C=0;C<f.length;C++){const N=f[C];if(N.component==="Group"){const V=[];S.push({label:()=>Se(Et,{component:N,index:p(C,c)}),key:p(C,c),icon:()=>Se(be,{name:"icon-branch-one"}),children:i(p(C,c),N.subComponents||[],V)})}else S.push({label:()=>Se(Et,{component:N,index:p(C,c)}),key:p(C,c),icon:()=>Se(be,{name:`${n[N.group]}`})})}return S},p=(c,f)=>f?`${f}-${c}`:c.toString();return we(()=>e.componentData,()=>{const c=e.componentData;r.value=[],r.value=i("",c,[])},{deep:!0,immediate:!0}),(c,f)=>(v(),U("div",So,[t(o).length>0?(v(),L(t(Ye),{key:0},{default:h(()=>[d(t(Qe),{options:r.value,"onUpdate:value":u},null,8,["options"])]),_:1})):(v(),L(t(tn),{key:1,class:"placeholder"},{default:h(()=>[d(t(en),null,{default:h(()=>[d(t(Zt),{description:"\u753B\u5E03\u4E3A\u7A7A"})]),_:1})]),_:1}))]))}}),Do=z("span",null,"\u7EC4\u4EF6",-1),Eo=z("span",null,"\u56FE\u5C42",-1),wo=H({props:{iscollapsed:{default:!1}},emits:["update:iscollapsed"],setup(a,{emit:e}){const n=x("expand"),o=x("components"),l=s=>{e("update:iscollapsed",!1),o.value=s};return(s,m)=>{const u=Pe("IconPark");return a.iscollapsed?(v(),L(t(We),{key:1,type:"line",animated:"","bar-width":48,"justify-content":"center","onUpdate:value":l},{default:h(()=>[o.value==="components"?(v(),L(t(ke),{key:0,name:"components"},{tab:h(()=>[d(u,{name:"components"})]),default:h(()=>[d(Dt)]),_:1})):o.value==="layer"?(v(),L(t(ke),{key:1,name:"layer"},{tab:h(()=>[d(u,{name:"layers"})]),default:h(()=>[d(wt)]),_:1})):Ie("",!0)]),_:1})):(v(),L(t(We),{key:0,type:"line",animated:"","bar-width":100,"justify-content":"center",value:o.value,"onUpdate:value":[m[0]||(m[0]=r=>o.value=r),m[1]||(m[1]=r=>o.value=r)]},{default:h(()=>[d(t(ke),{name:"components"},{tab:h(()=>[d(u,{name:"components"}),Do]),default:h(()=>[d(Dt,{mode:n.value},null,8,["mode"])]),_:1}),d(t(ke),{name:"layer"},{tab:h(()=>[d(u,{name:"layers"}),Eo]),default:h(()=>[d(wt,{mode:n.value},null,8,["mode"])]),_:1})]),_:1},8,["value"]))}}}),Fo=[{label:"4K",value:"3840X2160"},{label:"2k",value:"2048X1080"},{label:"1080P",value:"1920X1080"},{label:"720P",value:"1366X768"},{label:"iPhoneXR",value:"414X896"},{label:"iPhoneSE",value:"375X667"},{label:"iPhone12Pro",value:"390X884"},{label:"GalaxyS8+",value:"360X740"},{label:"GalaxyS20Ultra+",value:"412X915"},{label:"iPadAir",value:"820X1180"},{label:"iPadMini",value:"768X1024"},{label:"SurfacePro7",value:"912X1368"},{label:"NestHub",value:"1024X600"},{label:"NestMax",value:"1028X800"}];const ko={class:"attr-list",style:{height:"calc(100vh - 100px)"}},Bo=H({setup(a){const e=O(()=>[{label:"\u672C\u8BBE\u5907",value:`${window.innerWidth}X${window.innerHeight}`},...Fo]),n=ue(),o=O(()=>n.canvasStyleData),l=x("\u672C\u8BBE\u5907"),s=[{key:"width",label:"\u5BBD\u5EA6",type:"number"},{key:"height",label:"\u9AD8\u5EA6",type:"number"},{key:"scale",label:"\u6BD4\u4F8B",type:"number"},{key:"dataWs",label:"\u5B9E\u65F6\u6570\u636E",type:"text"},{key:"image",label:"\u80CC\u666F\u56FE",type:"text"}],m=ne(["top","left","width","height","fontSize","borderWidth"]),u=x(o.value.scale),r=f=>f*u.value/100,i=f=>f/(o.value.scale/100),p=ft(()=>{u.value=~~u.value||1;const f=Ue(n.componentData);f.forEach(S=>{Object.keys(S.style).forEach(C=>{m.includes(C)&&(S.style[C]=Math.ceil(r(i(S.style[C]))))})}),n.setComponentData(f),n.setCanvasStyle(Xe(ie({},o.value),{scale:u.value}))},1e3),c=f=>{const S=f.split("X"),C=parseInt(S[0]),N=parseInt(S[1]);n.setCanvasStyle(Xe(ie({},o.value),{width:C,height:N}))};return(f,S)=>(v(),U("div",ko,[d(t(Ve),{size:"small",onSubmit:S[2]||(S[2]=Ee(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:h(()=>[d(t(se),{label:"\u5206\u8FA8\u7387"},{default:h(()=>[d(t(Be),{value:l.value,"onUpdate:value":[S[0]||(S[0]=C=>l.value=C),c],placeholder:"\u9009\u62E9\u5206\u8FA8\u7387",options:t(e)},null,8,["value","options"])]),_:1}),(v(),U(le,null,me(s,({key:C,label:N,type:V},Z)=>d(t(se),{key:Z,label:N},{default:h(()=>[C==="scale"?(v(),L(t(je),{key:0,modelValue:u.value,"onUpdate:modelValue":S[1]||(S[1]=P=>u.value=P),onInput:t(p)},null,8,["modelValue","onInput"])):V==="number"?(v(),L(t(je),{key:1,value:t(o)[C],"onUpdate:value":P=>t(o)[C]=P},null,8,["value","onUpdate:value"])):(v(),L(t(Fe),{key:2,value:t(o)[C],"onUpdate:value":P=>t(o)[C]=P},null,8,["value","onUpdate:value"]))]),_:2},1032,["label"])),64))]),_:1})]))}});var Lo=ce(Bo,[["__scopeId","data-v-7441a5d7"]]);const zo=[{label:"Arial",value:"Arial"},{label:"\u5FAE\u8F6F\u96C5\u9ED1",value:"Microsoft Yahei"},{label:"\u5B8B\u4F53",value:"SimSun"},{label:"\u9ED1\u4F53",value:"SimHei"},{label:"\u6977\u4F53",value:"KaiTi"},{label:"\u65B0\u5B8B\u4F53",value:"NSimSun"},{label:"\u4EFF\u5B8B",value:"FangSong"},{label:"\u82F9\u65B9",value:"PingFang SC"},{label:"\u534E\u6587\u9ED1\u4F53",value:"STHeiti"},{label:"\u534E\u6587\u6977\u4F53",value:"STKaiti"},{label:"\u534E\u6587\u5B8B\u4F53",value:"STSong"},{label:"\u534E\u6587\u4EFF\u5B8B",value:"STFangSong"},{label:"\u534E\u6587\u4E2D\u5B8B",value:"STZhongSong"},{label:"\u534E\u6587\u7425\u73C0",value:"STHupo"},{label:"\u534E\u6587\u65B0\u9B4F",value:"STXinwei"},{label:"\u534E\u6587\u96B6\u4E66",value:"STLiti"},{label:"\u534E\u6587\u884C\u6977",value:"STXingkai"},{label:"\u51AC\u9752\u9ED1\u4F53",value:"Hiragino Sans GB"},{label:"\u5170\u4EAD\u9ED1",value:"Lantinghei SC"},{label:"\u504F\u504F\u4F53",value:"Hanzipen SC"},{label:"\u624B\u672D\u4F53",value:"Hannotate SC"},{label:"\u5B8B\u4F53",value:"Songti SC"},{label:"\u5A03\u5A03\u4F53",value:"Wawati SC"},{label:"\u884C\u6977",value:"Xingkai SC"},{label:"\u5706\u4F53",value:"Yuanti SC"},{label:"\u534E\u6587\u7EC6\u9ED1",value:"STXihei"},{label:"\u5E7C\u5706",value:"YouYuan"},{label:"\u96B6\u4E66",value:"LiSu"},{label:"LED",value:"LED"},{label:"LCD",value:"LCD"}],$o=[{label:"100 Thin",value:100},{label:"200 ExtraThin",value:200},{label:"300 Light",value:300},{label:"400 Normal",value:400},{label:"500 Medium",value:500},{label:"600 Semi Bold",value:600},{label:"700 Bold",value:700},{label:"Extra Bold",value:800},{label:"Black",value:900}],Io=H({props:{value:{default:""}},emits:["update:value","change"],setup(a,{emit:e}){const n=x(""),o=ne(zo),l=s=>{n.value=s,e("update:value",n.value),e("change",n.value)};return(s,m)=>(v(),L(t(Be),{clearable:"",modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=u=>n.value=u),placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53","onUpdate:value":l,options:t(o)},null,8,["modelValue","options"]))}}),jo=H({props:{value:{default:""}},emits:["update:value","change"],setup(a,{emit:e}){const n=x(""),o=ne($o),l=s=>{n.value=s,e("update:value",n.value),e("change",n.value)};return(s,m)=>(v(),L(t(Be),{clearable:"",modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=u=>n.value=u),placeholder:"\u8BF7\u9009\u62E9\u5B57\u91CD","onUpdate:value":l,options:t(o)},null,8,["modelValue","options"]))}}),Ao={class:"linear-gradient"},No=H({props:{value:{default:{angle:0,color1:"",color2:""}}},emits:["update:value","change"],setup(a,{emit:e}){const n=a,o=x({angle:n.value.angle||0,color1:n.value.color1||"",color2:n.value.color2||""}),l=(s,m)=>{o.value[s]=m,e("update:value",o.value),e("change",o.value)};return(s,m)=>(v(),U("div",Ao,[d(t(je),{modelValue:a.value.angle,"onUpdate:value":m[0]||(m[0]=u=>l("angle",u)),controls:!0,min:0,max:360,step:1},null,8,["modelValue"]),d(t(Ze),{value:a.value.color1,"onUpdate:value":m[1]||(m[1]=u=>l("color1",u))},null,8,["value"]),d(t(Ze),{value:a.value.color2,"onUpdate:value":m[2]||(m[2]=u=>l("color2",u))},null,8,["value"])]))}}),Ft=H({props:{data:null,children:null,ukey:null},emits:["change"],setup(a,{emit:e}){const n=a,o=ne(n.data),l=(s,m)=>{e("change",s,m)};return we(()=>n.data,s=>{Object.assign(o,s)},{deep:!0}),(s,m)=>(v(!0),U(le,null,me(a.children,({key:u,label:r,type:i,selectOptions:p})=>(v(),L(t(se),{key:`${a.ukey}${u}`,label:r},{default:h(()=>[i==="color"?(v(),L(t(Ze),{key:0,value:t(o)[u],"onUpdate:value":[c=>t(o)[u]=c,c=>l(c,u)],modes:["hex","rgb","hsl"]},null,8,["value","onUpdate:value"])):i==="select"?(v(),L(t(Be),{key:1,modelValue:t(o)[u],"onUpdate:modelValue":c=>t(o)[u]=c,placeholder:r,"onUpdate:value":c=>l(c,u),options:p},null,8,["modelValue","onUpdate:modelValue","placeholder","onUpdate:value","options"])):i==="radio"?(v(),L(t(nn),{key:2,value:t(o)[u],"onUpdate:value":[c=>t(o)[u]=c,c=>l(c,u)],placeholder:r},{default:h(()=>[(v(!0),U(le,null,me(p,c=>(v(),L(t(on),{label:c.value,key:c.value},{default:h(()=>[Re(_e(c.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["value","onUpdate:value","placeholder"])):i==="number"?(v(),L(t(je),{key:3,value:t(o)[u],"onUpdate:value":[c=>t(o)[u]=c,c=>l(c,u)]},null,8,["value","onUpdate:value"])):i==="switch"?(v(),L(t(gt),{key:4,value:t(o)[u],"onUpdate:value":[c=>t(o)[u]=c,c=>l(c,u)]},null,8,["value","onUpdate:value"])):i==="fontStyle"?(v(),L(Io,{key:5,modelValue:t(o)[u],"onUpdate:modelValue":c=>t(o)[u]=c,onChange:c=>l(c,u)},null,8,["modelValue","onUpdate:modelValue","onChange"])):i==="fontWeight"?(v(),L(jo,{key:6,modelValue:t(o)[u],"onUpdate:modelValue":c=>t(o)[u]=c,onChange:c=>l(c,u)},null,8,["modelValue","onUpdate:modelValue","onChange"])):i==="linearGradient"?(v(),L(No,{key:7,value:t(o)[u],"onUpdate:value":c=>t(o)[u]=c,onChange:c=>l(c,u)},null,8,["value","onUpdate:value","onChange"])):(v(),L(t(Fe),{key:8,clearable:"",value:t(o)[u],"onUpdate:value":[c=>t(o)[u]=c,c=>l(c,u)]},null,8,["value","onUpdate:value"]))]),_:2},1032,["label"]))),128))}}),kt=H({props:{data:null,children:null,name:null,uid:null,ukey:null},emits:["change"],setup(a,{emit:e}){const o=ne(a.data),l=(s,m)=>{e("change",m,s)};return(s,m)=>(v(),L(Ft,{children:a.children,data:t(o),ukey:a.ukey,onChange:l},null,8,["children","data","ukey"]))}});const To={class:"attr-list",style:{height:"calc(100vh - 100px)"}},Uo=H({props:{curComponent:null},setup(a){const e=a,n=ue(),o=ne({}),l=O(()=>{if(e.curComponent&&e.curComponent.component in ge){const i=ge[e.curComponent.component].style;return e.curComponent.groupStyle&&(i[0]=Pt),ge[e.curComponent.component].style}return[]}),s=(i,p)=>{e.curComponent&&n.setCurComponentStyle(i,p)};Te("changeStyle",i=>{const p=i;e.curComponent&&e.curComponent.id===p.id&&u(p.style)});const u=ft(i=>{const p=Rt(i,o);p&&Object.keys(p).forEach(c=>{o[c]=p[c]})},200),r=()=>{if(e.curComponent){mt(o);const i=ie(ie({},e.curComponent.style),e.curComponent.groupStyle||{});u(i)}};return we([()=>e.curComponent.id,()=>e.curComponent.style],()=>{e.curComponent&&e.curComponent.id&&r()},{immediate:!0,deep:!0}),(i,p)=>(v(),U("div",To,[d(t(Ye),null,{default:h(()=>[d(t(Ve),{size:"small",onSubmit:p[0]||(p[0]=Ee(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:h(()=>[d(t(Ge),{accordion:""},{default:h(()=>[(v(!0),U(le,null,me(t(l),({name:c,uid:f,children:S})=>(v(),L(t(Ke),{key:`${a.curComponent.id}${f}`,title:c,name:f},{default:h(()=>[d(kt,{children:S,data:t(o),onChange:s,name:c,uid:f,ukey:a.curComponent.id},null,8,["children","data","name","uid","ukey"])]),_:2},1032,["title","name"]))),128))]),_:1})]),_:1})]),_:1})]))}});var Mo=ce(Uo,[["__scopeId","data-v-24b7085f"]]);const Po=H({props:{curComponent:null},setup(a){const e=a,n=x(""),o=ue(),l=s=>{o.setCurComponentProps("label",s)};return we(()=>e.curComponent,()=>{n.value=e.curComponent.label||""},{immediate:!0}),(s,m)=>(v(),L(t(Ge),null,{default:h(()=>[d(t(Ke),{title:"\u516C\u5171\u5C5E\u6027",name:"commonAttr"},{default:h(()=>[d(t(se),{label:"\u7C7B\u578B"},{default:h(()=>[d(t(Fe),{value:a.curComponent.component,readonly:!0},null,8,["value"])]),_:1}),d(t(se),{label:"ID"},{default:h(()=>[d(t(Fe),{value:a.curComponent.id,readonly:!0},null,8,["value"])]),_:1}),d(t(se),{label:"\u540D\u79F0"},{default:h(()=>[d(t(Fe),{value:n.value,"onUpdate:value":m[0]||(m[0]=u=>n.value=u),onChange:m[1]||(m[1]=u=>l(u))},null,8,["value"])]),_:1})]),_:1})]),_:1}))}});const Ro={class:"title"},Vo=Re("+"),Xo=H({props:{data:null,children:null,name:null,uid:null,max:null,ukey:null},emits:["change"],setup(a,{emit:e}){const n=a,o=x(n.data),l=()=>{e("change",o.value,n.uid)},s=O(()=>o.value.length<n.max),m=r=>{o.value.splice(r,1),e("change",o.value,n.uid)},u=()=>{const r=o.value.length,i={};n.children.map(p=>{r>0?i[p.key]=o.value[r-1][p.key]:i[p.key]=void 0}),o.value.push(i),e("change",o.value,n.uid)};return(r,i)=>{const p=Pe("icon-park");return v(),U(le,null,[d(t(Ge),{accordion:""},{default:h(()=>[(v(!0),U(le,null,me(o.value,(c,f)=>(v(),L(t(Ke),{key:`${a.ukey}${f}`,name:a.max>1?`${a.uid}${f}`:a.uid},{header:h(()=>[z("div",Ro,_e(a.name)+_e(f+1),1)]),"header-extra":h(()=>[d(p,{name:"delete-one",size:"24",onClick:S=>m(f)},null,8,["onClick"])]),default:h(()=>[d(Ft,{children:a.children,data:c,ukey:a.ukey,onChange:l},null,8,["children","data","ukey"])]),_:2},1032,["name"]))),128))]),_:1}),X(d(t(de),{class:"add",onClick:u},{default:h(()=>[Vo]),_:1},512),[[J,t(s)]])],64)}}});var Oo=ce(Xo,[["__scopeId","data-v-a2bb7722"]]);const Ho={class:"attr-list",style:{height:"calc(100vh - 120px)"}},Yo=H({props:{curComponent:null},setup(a){const e=a,n=ue(),o=ne({}),l=O(()=>e.curComponent&&e.curComponent.component in ge?ge[e.curComponent.component].attrs:[]),s=(u,r)=>{n.setCurComponentPropValue(u,r)},m=()=>{if(mt(o),e.curComponent&&e.curComponent.propValue){const u=e.curComponent.propValue;Object.keys(u).forEach(r=>{o[r]=u[r]})}};return we(()=>e.curComponent.id,()=>{m()},{immediate:!0}),(u,r)=>(v(),U("div",Ho,[a.curComponent?(v(),L(t(Ye),{key:0},{default:h(()=>[d(t(Ve),{size:"small",onSubmit:r[0]||(r[0]=Ee(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:h(()=>[d(t(Ge),{accordion:""},{default:h(()=>[d(Po,{curComponent:a.curComponent},null,8,["curComponent"]),(v(!0),U(le,null,me(t(l),({name:i,uid:p,children:c,max:f})=>(v(),L(t(Ke),{key:`${a.curComponent.id}${p}`,title:i,name:p},{default:h(()=>[!f||f<1?(v(),L(kt,{key:0,children:c,data:t(o),onChange:s,name:i,uid:p,ukey:a.curComponent.id},null,8,["children","data","name","uid","ukey"])):(v(),L(Oo,{key:1,children:c,data:t(o)[p]||[],onChange:s,name:i,uid:p,max:f,ukey:a.curComponent.id},null,8,["children","data","name","uid","max","ukey"]))]),_:2},1032,["title","name"]))),128))]),_:1})]),_:1})]),_:1})):Ie("",!0)]))}});var Wo=ce(Yo,[["__scopeId","data-v-6a0b2c5e"]]);const Go=H({setup(a){const e=x([]),n=x(null),o=l=>{console.log(l)};return(l,s)=>(v(),L(t(se),{key:"staticData",label:"\u9759\u6001\u6570\u636E"},{default:h(()=>[d(t(Be),{value:n.value,"onUpdate:value":[s[0]||(s[0]=m=>n.value=m),s[1]||(s[1]=m=>o(m))],placeholder:"\u8BF7\u9009\u62E9\u9759\u6001\u6570\u636E",options:e.value},null,8,["value","options"])]),_:1}))}});const Ko=H({setup(a){const e=x([]),n=x([]),o=ne({data:void 0,timeout:1e3,isInterval:!1,intervalTime:1e3,params:{}}),l=x(),s=u=>{console.log(u)},m=()=>{l.value?n.value.includes(l.value)?ye.warning("\u53C2\u6570\u91CD\u590D"):n.value.push(l.value):ye.warning("\u8BF7\u586B\u5199\u53C2\u6570")};return(u,r)=>{const i=Pe("icon-park");return v(),U(le,null,[d(t(se),{key:"dynamicData",label:"\u52A8\u6001\u6570\u636E"},{default:h(()=>[d(t(Be),{value:t(o).data,"onUpdate:value":[r[0]||(r[0]=p=>t(o).data=p),s],placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u63A5\u53E3",options:e.value},null,8,["value","options"])]),_:1}),d(t(se),{key:"timeout",label:"\u8D85\u65F6\u65F6\u95F4"},{default:h(()=>[d(t(je),{value:t(o).timeout,"onUpdate:value":[r[1]||(r[1]=p=>t(o).timeout=p),s],placeholder:"\u8D85\u65F6\u65F6\u95F4"},null,8,["value"])]),_:1}),d(t(se),{key:"isInterval",label:"\u662F\u5426\u5B9A\u65F6\u83B7\u53D6\u65F6\u95F4"},{default:h(()=>[d(t(gt),{modelValue:t(o).isInterval,"onUpdate:modelValue":r[2]||(r[2]=p=>t(o).isInterval=p)},null,8,["modelValue"])]),_:1}),t(o).isInterval?(v(),L(t(se),{key:"intervalTime",label:"\u95F4\u9694\u65F6\u95F4"},{default:h(()=>[d(t(je),{value:t(o).intervalTime,"onUpdate:value":r[3]||(r[3]=p=>t(o).intervalTime=p),placeholder:"\u95F4\u9694\u65F6\u95F4"},null,8,["value"])]),_:1})):Ie("",!0),(v(!0),U(le,null,me(n.value,p=>(v(),L(t(se),{label:`\u53C2\u6570:${p}`,key:p},{default:h(()=>[d(t(Fe),{value:t(o).params[p],"onUpdate:value":c=>t(o).params[p]=c},null,8,["value","onUpdate:value"])]),_:2},1032,["label"]))),128)),d(t(se),{key:"addParams",label:"\u8BF7\u6C42\u53C2\u6570"},{default:h(()=>[d(t(Fe),{placeholder:"\u53C2\u6570",value:l.value,"onUpdate:value":r[4]||(r[4]=p=>l.value=p)},{suffix:h(()=>[d(i,{name:"add-three",onClick:m})]),_:1},8,["value"])]),_:1})],64)}}});var qo=ce(Ko,[["__scopeId","data-v-05ff2bf5"]]);const Jo=H({setup(a){const e=x(null),n=o=>{console.log(o)};return(o,l)=>(v(),L(t(se),{key:"realTimeData",label:"\u5B9E\u65F6\u6570\u636E"},{default:h(()=>[d(t(Fe),{value:e.value,"onUpdate:value":[l[0]||(l[0]=s=>e.value=s),l[1]||(l[1]=s=>n(s))],placeholder:"\u5B9E\u65F6\u6570\u636E"},null,8,["value"])]),_:1}))}});const Qo={class:"data-list",style:{height:"calc(100vh - 120px)"}},Zo=H({setup(a){const e=x("Static"),n=x(),o=ne([{label:"\u9759\u6001\u6570\u636E",value:"Static"},{label:"\u5B9E\u65F6\u6570\u636E",value:"RealTime"},{label:"\u52A8\u6001\u6570\u636E",value:"Dynamic"}]),l=x([]),s=u=>{console.log(u)},m=u=>{console.log(u)};return(u,r)=>(v(),U("div",Qo,[d(t(Ve),{size:"small",onSubmit:r[4]||(r[4]=Ee(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:h(()=>[d(t(se),{key:"dataType",label:"\u6570\u636E\u7C7B\u578B"},{default:h(()=>[d(t(Be),{value:e.value,"onUpdate:value":[r[0]||(r[0]=i=>e.value=i),r[1]||(r[1]=i=>m(i))],placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5904\u7406\u7B97\u6CD5",options:t(o)},null,8,["value","options"])]),_:1}),e.value==="Static"?(v(),L(Go,{key:0})):e.value==="RealTime"?(v(),L(Jo,{key:1})):e.value==="Dynamic"?(v(),L(qo,{key:2})):Ie("",!0),d(t(se),{key:"algorithm",label:"\u7B97\u6CD5"},{default:h(()=>[d(t(Be),{value:n.value,"onUpdate:value":[r[2]||(r[2]=i=>n.value=i),r[3]||(r[3]=i=>s(i))],placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5904\u7406\u7B97\u6CD5",options:l.value},null,8,["value","options"])]),_:1})]),_:1})]))}}),ea={key:0},ta={key:1},na=H({props:{iscollapsed:{default:!1}},emits:["update:iscollapsed"],setup(a,{emit:e}){const n=x("attr"),o=ue(),l=O(()=>o.curComponent||o.layerComponent),s=O(()=>o.curComponent||o.layerComponent?[{label:"\u6837\u5F0F",key:"4",icon:()=>Se(be,{name:"text-style",onClick:()=>m("style")})},{label:"\u5C5E\u6027",key:"2",icon:()=>Se(be,{name:"internal-data",onClick:()=>m("attr")})},{label:"\u6570\u636E",key:"3",icon:()=>Se(be,{name:"data",onClick:()=>m("data")})}]:[{label:"\u753B\u5E03",key:"1",icon:()=>Se(be,{name:"page"})}]),m=u=>{e("update:iscollapsed",!1),n.value=u};return(u,r)=>a.iscollapsed?(v(),U("div",ta,[d(t(Qe),{options:t(s)},null,8,["options"])])):(v(),U("div",ea,[t(l)?(v(),L(t(We),{key:0,type:"line",animated:"","justify-content":"center",value:n.value,"onUpdate:value":[r[0]||(r[0]=i=>n.value=i),r[1]||(r[1]=i=>n.value=i)]},{default:h(()=>[d(t(ke),{name:"style"},{tab:h(()=>[d(t(be),{name:"text-style"}),X(z("span",null,"\u6837\u5F0F",512),[[J,!a.iscollapsed]])]),default:h(()=>[d(t(Mo),{curComponent:t(l)},null,8,["curComponent"])]),_:1}),d(t(ke),{name:"attr"},{tab:h(()=>[d(t(be),{name:"internal-data"}),X(z("span",null,"\u5C5E\u6027",512),[[J,!a.iscollapsed]])]),default:h(()=>[d(t(Wo),{curComponent:t(l)},null,8,["curComponent"])]),_:1}),d(t(ke),{name:"data"},{tab:h(()=>[d(t(be),{name:"data"}),X(z("span",null,"\u6570\u636E",512),[[J,!a.iscollapsed]])]),default:h(()=>[d(t(Zo))]),_:1})]),_:1},8,["value"])):(v(),L(t(We),{key:1,type:"line",animated:"","justify-content":"center"},{default:h(()=>[d(t(ke),{name:"canvas"},{tab:h(()=>[d(t(be),{name:"page"}),X(z("span",null,"\u753B\u5E03",512),[[J,!a.iscollapsed]])]),default:h(()=>[d(Lo)]),_:1})]),_:1}))]))}});const oa=H({setup(a){const e=ue(),n=x(null),o=x(null),l=x(!1),s=x(!1),m=ne({type:"dashed",width:1,color:"red"}),u=ht(),r={width:"30px",height:"30px",fontSize:"30px"};Me(()=>ve(this,null,function*(){const M=u.params.index;M&&(yield i(M))}));const i=M=>ve(this,null,function*(){const k=yield Qt(M);!k||e.setLayoutData(k)}),p=x(0),c=x(0),f=O(()=>({width:p.value+"px",height:c.value+"px"})),S=M=>{const k=M[0],{width:y,height:_}=k.contentRect;p.value=y,c.value=_},C=M=>ve(this,null,function*(){M.preventDefault(),M.stopPropagation();const k=M.dataTransfer.getData("componentName");if(k){const y=Ue(ge[k].component);y.style.top=M.offsetY,y.style.left=M.offsetX,e.appendComponent(y)}}),N=M=>{M.preventDefault(),M.dataTransfer.dropEffect="copy"},V=()=>{e.setClickComponentStatus(!1)},Z=()=>{e.isClickComponent||e.setCurComponent(void 0)};we(()=>e.canvasStyleData.dataWs,M=>{var k;(k=n.value)==null||k.close(),M&&(n.value=P("actual",M))});const P=(M,k)=>{const y=new WebSocket(k);return y.onopen=()=>{console.log("websocket\u8FDE\u63A5\u6210\u529F")},y.onclose=()=>{console.log("websocket\u8FDE\u63A5\u88AB\u5173\u95ED")},y.onmessage=_=>{const D=JSON.parse(_.data);xe.emit(M,D)},y};return He(()=>{var M;(M=n.value)==null||M.close(),e.clearCanvas()}),(M,k)=>{const y=ze("resize");return v(),L(t(et),{class:"home"},{default:h(()=>[d(t(an),{class:"tool-bar"},{default:h(()=>[d(t(co))]),_:1}),d(t(et),{"has-sider":""},{default:h(()=>[d(t(bt),{class:"left",width:"200",collapsed:l.value,bordered:"","collapse-mode":"width","show-trigger":"","trigger-style":r,onCollapse:k[2]||(k[2]=()=>l.value=!0),onExpand:k[3]||(k[3]=()=>l.value=!1)},{default:h(()=>[d(t(wo),{iscollapsed:l.value,"onUpdate:iscollapsed":[k[0]||(k[0]=_=>l.value=_),k[1]||(k[1]=_=>l.value=_)]},null,8,["iscollapsed"])]),_:1},8,["collapsed"]),X(d(t(ln),{class:"content"},{default:h(()=>[z("div",{class:"scrollbar-content",style:he(t(f)),ref:(_,D)=>{D.editor=_,o.value=_}},[d(ho,{borderStyle:t(m),class:"ruler"},{default:h(()=>[d(jn,{onDrop:C,onDragover:N,onMousedown:V,onMouseup:Z})]),_:1},8,["borderStyle"])],4)]),_:1},512),[[y,S]]),d(t(et),{"has-sider":"","sider-placement":"right"},{default:h(()=>[d(t(bt),{class:"right",width:"240",collapsed:s.value,"native-scrollbar":!1,bordered:"","collapsed-width":38,"trigger-style":r,"collapse-mode":"width","show-trigger":"arrow-circle",onCollapse:k[6]||(k[6]=()=>s.value=!0),onExpand:k[7]||(k[7]=()=>s.value=!1)},{default:h(()=>[d(t(na),{iscollapsed:s.value,"onUpdate:iscollapsed":[k[4]||(k[4]=_=>s.value=_),k[5]||(k[5]=_=>s.value=_)]},null,8,["iscollapsed"])]),_:1},8,["collapsed"])]),_:1})]),_:1})]),_:1})}}});var za=ce(oa,[["__scopeId","data-v-62b8965e"]]);export{za as default};
