var Tt=Object.defineProperty,Rt=Object.defineProperties;var Nt=Object.getOwnPropertyDescriptors;var dt=Object.getOwnPropertySymbols;var Pt=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable;var pt=(o,e,t)=>e in o?Tt(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,me=(o,e)=>{for(var t in e||(e={}))Pt.call(e,t)&&pt(o,t,e[t]);if(dt)for(var t of dt(e))Ut.call(e,t)&&pt(o,t,e[t]);return o},Xe=(o,e)=>Rt(o,Nt(e));var ce=(o,e,t)=>new Promise((a,s)=>{var i=r=>{try{l(t.next(r))}catch(u){s(u)}},m=r=>{try{l(t.throw(r))}catch(u){s(u)}},l=r=>r.done?a(r.value):Promise.resolve(r.value).then(i,m);l((t=t.apply(o,e)).next())});import{d as mt}from"./pinia.685e9614.js";import{u as de,h as vt,c as Xt,i as Ot,j as ht,k as ze,s as ft,_ as le,e as xe,b as Ae,l as Je,M as Ht,r as J,m as yt,n as je,o as _t,f as gt,q as Wt,t as Me,a as Yt,w as Ze,v as Gt,x as Qe,y as qt,z as Kt,A as ve,B as Ce,D as Jt,F as Zt,G as Ct}from"./index.2fc0df38.js";import{c as Te,d as bt}from"./lodash-es.4775bb8f.js";import{p as Y,a7 as Re,P as U,x as d,y as k,I as ge,aq as Qt,r as D,_ as ue,F as q,a6 as oe,Q as W,u as n,E as pe,ap as et,c as X,a1 as en,ar as tn,q as Fe,B as g,H as _e,A as Ne,G as Ee,o as Oe,U as p,M as F,O as h,S as nn,z as De,Z as xt,a0 as Le,w as we,R as te,al as He,am as We,as as St,X as on,at as an}from"./@vue.7df1a0ef.js";import{u as ln,d as Et}from"./vue-router.e129948e.js";import{u as sn,s as un,g as cn}from"./pages.6b805928.js";import{o as Dt}from"./@vueuse.fe63d129.js";import{a as rn}from"./index.59b178ec.js";import{b as wt,c as dn,d as re,e as Pe,f as fe,g as Ye,h as Be,i as $e,j as pn,k as kt,l as Ft,m as Bt,n as tt,o as nt,p as ot,q as Ge,r as qe,s as at,t as mn,u as vn,v as hn,w as fn,x as lt,y as st}from"./element-plus.54ccd689.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./dexie.c25c286a.js";import"./nprogress.5f640c6a.js";import"./@icon-park.87123711.js";import"./lodash.8679a684.js";import"./async-validator.5d25c98b.js";import"./@popperjs.a8a4a6a0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./axios.19d3e859.js";const ae=de(),yn=mt({id:"compose",state:()=>({style:{top:0,left:0,width:0,height:0,rotate:0},components:[]}),getters:{canCompose(){return this.components.length>1},canDecompose(){return!(ae.curComponent&&!ae.curComponent.isLock&&ae.curComponent.component==="Group")}},actions:{isActived(o){return this.components.findIndex(e=>e.id===o.id)!==-1},setAreaData(o,e){this.style=o||{},this.components=e||[]},appendComponent(o){this.components.findIndex(e=>e.id===o.id)===-1&&(this.components.push(o),this.components.length>1&&(this.style=me(me({},this.style),vt(this.components))))},compose(){this.style.width===0&&(this.style=me(me({},this.style),vt(this.components)));const o={component:"Group",id:Xt(),display:!0,icon:"",style:this.style,subComponents:Te(this.components),label:""};Ot(o),this.batchDeleteComponent(this.components),ae.appendComponent(o);const e=ae.componentData.length-1;ae.setCurComponent(ae.componentData[e]),this.components=[]},batchDeleteComponent(o){o.forEach(e=>{for(let t=0,a=ae.componentData.length;t<a;t++)if(e.id===ae.componentData[t].id){ae.componentData.splice(t,1);break}})},decompose(){var t;const o=ae.curComponent.style,e=((t=ae.curComponent)==null?void 0:t.subComponents)||[];if(e.length>0){const a=ae.getComponentIndexById(ae.curComponent.id);ae.removeComponent(a.toString()),e.forEach(s=>{ht(s,o),ae.appendComponent(s)})}},flushRight(){const{right:o,items:e}=ze(this.components);e.forEach(t=>{const a=o-t.right;t.component.style.left=t.component.style.left+a}),ae.saveComponentData()},flushLeft(){const{left:o,items:e}=ze(this.components);e.forEach(t=>{const a=t.left-o;t.component.style.left=t.component.style.left-a}),ae.saveComponentData()},flushTop(){const{top:o,items:e}=ze(this.components);e.forEach(t=>{const a=t.top-o;t.component.style.top=t.component.style.top-a}),ae.saveComponentData()},flushBottom(){const{bottom:o,items:e}=ze(this.components);e.forEach(t=>{const a=o-t.bottom;t.component.style.top=t.component.style.top+a}),ae.saveComponentData()},flushRow(){const{top:o,bottom:e,items:t}=ze(this.components);t.forEach(a=>{const s=(e+o)/2-a.center.y;a.component.style.top=a.component.style.top+s}),ae.saveComponentData()},flushColumn(){const{left:o,right:e,items:t}=ze(this.components);t.forEach(a=>{const s=(o+e)/2-a.center.x;a.component.style.left=a.component.style.left+s}),ae.saveComponentData()}}}),ut=()=>yn(ft);const _n=Y({props:{start:null,width:null,height:null},setup(o){const e=ut(),t=()=>{e.compose(),xe.emit("hideArea")},a=()=>{e.flushLeft(),xe.emit("hideArea")},s=()=>{e.flushRight(),xe.emit("hideArea")},i=()=>{e.flushTop(),xe.emit("hideArea")},m=()=>{e.flushBottom(),xe.emit("hideArea")},l=()=>{e.flushRow(),xe.emit("hideArea")},r=()=>{e.flushColumn(),xe.emit("hideArea")},u=()=>[{text:"\u7EC4\u5408",subText:"",disable:!e.canCompose,handler:t},{divider:!0},{text:"\u5DE6\u5BF9\u9F50",subText:"",handler:a},{text:"\u53F3\u5BF9\u9F50",subText:"",handler:s},{text:"\u9876\u5BF9\u9F50",subText:"",handler:i},{text:"\u5E95\u5BF9\u9F50",subText:"",handler:m},{divider:!0},{text:"\u6C34\u5E73\u5BF9\u9F50",subText:"",handler:l},{text:"\u5782\u76F4\u5BF9\u9F50",subText:"",handler:r}];return(v,c)=>{const f=Re("contextmenu");return U((d(),k("div",{style:ge({left:o.start.x+"px",top:o.start.y+"px",width:o.width+"px",height:o.height+"px"}),class:"area"},null,4)),[[f,u]])}}});var $t=le(_n,[["__scopeId","data-v-a9838500"]]);const gn={},Cn={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},bn=Qt('<defs data-v-c1eb8d14><pattern id="smallGrid" width="7.236328125" height="7.236328125" patternUnits="userSpaceOnUse" data-v-c1eb8d14><path d="M 7.236328125 0 L 0 0 0 7.236328125" fill="none" stroke="rgba(207, 207, 207, 0.3)" stroke-width="1" data-v-c1eb8d14></path></pattern><pattern id="grid" width="36.181640625" height="36.181640625" patternUnits="userSpaceOnUse" data-v-c1eb8d14><rect width="36.181640625" height="36.181640625" fill="url(#smallGrid)" data-v-c1eb8d14></rect><path d="M 36.181640625 0 L 0 0 0 36.181640625" fill="none" stroke="rgba(186, 186, 186, 0.5)" stroke-width="1" data-v-c1eb8d14></path></pattern></defs><rect width="100%" height="100%" fill="url(#grid)" data-v-c1eb8d14></rect>',2),xn=[bn];function Sn(o,e){return d(),k("svg",Cn,xn)}var En=le(gn,[["render",Sn],["__scopeId","data-v-c1eb8d14"]]);const Dn={class:"mark-line"},wn=Y({setup(o){const e=de(),t=D([]),a=ue(["xt","xc","xb","yl","yc","yr"]),s=D(3),i=ue({xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}),m=f=>{t.value.push(f)},l=()=>{Object.keys(i).forEach(f=>{i[f]=!1})};Ae("move",f=>{r(f.isDownward,f.isRightward)}),Ae("unmove",()=>{l()});const r=(f,b)=>{const S=e.componentData;if(e.curComponent){const{top:T,left:B,right:P,bottom:j}=Je(e.curComponent.style),ne=(P-B)/2,O=(j-T)/2;l(),S.forEach(ie=>{if(ie==e.curComponent)return;const x=Je(ie.style),{top:E,left:$,bottom:V,right:A}=x,_=(A-$)/2,y=(V-E)/2,R={top:[{isNearly:u(T,E),lineNode:t.value[0],line:"xt",dragShift:E,lineShift:E},{isNearly:u(j,E),lineNode:t.value[0],line:"xt",dragShift:E-(j-T||0),lineShift:E},{isNearly:u((T||0)+O,E+y),lineNode:t.value[1],line:"xc",dragShift:E+y-O,lineShift:E+y},{isNearly:u(T,V),lineNode:t.value[2],line:"xb",dragShift:V,lineShift:V},{isNearly:u(j,V),lineNode:t.value[2],line:"xb",dragShift:V-(j-T||0),lineShift:V}],left:[{isNearly:u(B,$),lineNode:t.value[3],line:"yl",dragShift:$,lineShift:$},{isNearly:u(P,$),lineNode:t.value[3],line:"yl",dragShift:$-(P-B||0),lineShift:$},{isNearly:u((B||0)+ne,$+_),lineNode:t.value[4],line:"yc",dragShift:$+_-ne,lineShift:$+_},{isNearly:u(B,A),lineNode:t.value[5],line:"yr",dragShift:A,lineShift:A},{isNearly:u(P,A),lineNode:t.value[5],line:"yr",dragShift:A-(P-B||0),lineShift:A}]},N=[],{rotate:z}=e.curComponent.style;Object.keys(R).forEach(Z=>{R[Z].forEach(se=>{if(!se.isNearly)return;const Q=z!=0?v(Z,se,{width:P-B,height:j-T}):se.dragShift;e.setComponentSingleStyle({key:Z,value:Q}),se.lineNode.style[Z]=`${se.lineShift}px`,N.push(se.line)})}),N.length&&c(N,f,b)})}},u=(f,b)=>Math.abs(f-b)<=s.value,v=(f,b,S)=>{const{width:T,height:B}=e.curComponent.style;return f=="top"?Math.round(b.dragShift-(B-S.height)/2):Math.round(b.dragShift-(T-S.width)/2)},c=(f,b,S)=>{S?f.includes("yr")?i.yr=!0:f.includes("yc")?i.yc=!0:f.includes("yl")&&(i.yl=!0):f.includes("yl")?i.yl=!0:f.includes("yc")?i.yc=!0:f.includes("yr")&&(i.yr=!0),b?f.includes("xb")?i.xb=!0:f.includes("xc")?i.xc=!0:f.includes("xt")&&(i.xt=!0):f.includes("xt")?i.xt=!0:f.includes("xc")?i.xc=!0:f.includes("xb")&&(i.xb=!0)};return(f,b)=>(d(),k("div",Dn,[(d(!0),k(q,null,oe(n(a),S=>U((d(),k("div",{key:S,class:pe(["line",S.includes("x")?"xline":"yline"]),ref:m},null,2)),[[W,n(i)[S]||!1]])),128))]))}});var kn=le(wn,[["__scopeId","data-v-b4937e88"]]);const Fn=mt({id:"copy",state:()=>({copyData:void 0,isCut:!1}),actions:{copy(){const o=de(),e=o.curComponent||o.layerComponent;!e||(this.copyData=Te(e))},paste(o,e,t){if(!this.copyData){Ht("\u8BF7\u9009\u62E9\u7EC4\u4EF6");return}const a=de();o?(this.copyData.style.top=t,this.copyData.style.left=e):(this.copyData.style.top=this.copyData.style.top+10,this.copyData.style.left=this.copyData.style.left+10),a.appendComponent(Te(this.copyData))}}});function it(){return Fn(ft)}const Bn={lt:$n,t:Vn,rt:An,r:Mn,rb:jn,b:In,lb:Ln,l:zn};function ke(o){const{top:e,left:t,height:a,width:s}=o;return{y:e+a/2,x:t+s/2}}function zt(o,e,t){return o*(t-e.x)+e.y}function Lt(o,e,t){return e.x-(e.y-t)/o}function $n(o,e){const{top:t,left:a,rotate:s,width:i,height:m}=o,l=ke(o),r={x:a+i,y:t+m},u=J(r,l,s),v={x:(u.x+e.x)/2,y:(u.y+e.y)/2},c=J(e,v,-s),f=J(u,v,-s),b=f.y-c.y,S=f.x-c.x;return{top:c.y,left:c.x,width:S,height:b}}function zn(o,e){const{left:t,rotate:a,width:s,height:i,top:m}=o,l=ke(o),r={x:t+s,y:m+i/2},u=J(r,l,a);if(a%180!=90){const S=(l.y-u.y)/(l.x-u.x),T=zt(S,l,e.x);e.y=T}else e.x=l.x;const v={x:(u.x+e.x)/2,y:(u.y+e.y)/2},c=J(e,v,-a),b=J(u,v,-a).x-c.x;return{top:v.y-i/2,left:c.x,width:b,height:i}}function Ln(o,e){const{top:t,left:a,rotate:s,width:i}=o,m=ke(o),l={x:a+i,y:t},r=J(l,m,s),u={x:(r.x+e.x)/2,y:(r.y+e.y)/2},v=J(e,u,-s),c=J(r,u,-s),f=v.y-c.y,b=c.x-v.x;return{top:v.y-f,left:v.x,width:b,height:f}}function In(o,e){const{top:t,left:a,rotate:s,width:i}=o,m=ke(o),l={x:a+i/2,y:t},r=J(l,m,s);if(s%180!=90){const b=(m.y-r.y)/(m.x-r.x),S=Lt(b,m,e.y);e.x=S}else e.y=m.y;const u={x:(r.x+e.x)/2,y:(r.y+e.y)/2},v=J(e,u,-s),c=J(r,u,-s),f=v.y-c.y;return{top:v.y-f,left:u.x-i/2,width:i,height:f}}function Vn(o,e){const{top:t,left:a,rotate:s,width:i,height:m}=o,l=ke(o),r={x:a+i/2,y:t+m},u=J(r,l,s);if(s%180!=90){const S=(l.y-u.y)/(l.x-u.x),T=Lt(S,l,e.y);e.x=T}else e.y=l.y;const v={x:(u.x+e.x)/2,y:(u.y+e.y)/2},c=J(e,v,-s),b=J(u,v,-s).y-c.y;return{top:c.y,left:v.x-i/2,width:i,height:b}}function An(o,e){const{top:t,left:a,rotate:s,height:i}=o,m=ke(o),l={x:a,y:t+i},r=J(l,m,s),u={x:(r.x+e.x)/2,y:(r.y+e.y)/2},v=J(e,u,-s),c=J(r,u,-s),f=c.y-v.y,b=v.x-c.x;return{top:v.y,left:c.x,width:b,height:f}}function jn(o,e){const{top:t,left:a,rotate:s}=o,i=ke(o),l=J({x:a,y:t},i,s),r={x:(l.x+e.x)/2,y:(l.y+e.y)/2},u=J(e,r,-s),v=J(l,r,-s),c=u.y-v.y,f=u.x-v.x;return{top:v.y,left:v.x,width:f,height:c}}function Mn(o,e){const{top:t,left:a,rotate:s,height:i}=o,m=ke(o),l={x:a,y:t+i/2},r=J(l,m,s);if(s%180!=90){const b=(m.y-r.y)/(m.x-r.x),S=zt(b,m,e.x);e.y=S}else e.x=m.x;const u={x:(r.x+e.x)/2,y:(r.y+e.y)/2},v=J(e,u,-s),c=J(r,u,-s),f=v.x-c.x;return{top:c.y-i/2,left:c.x,width:f,height:i}}function Tn(o,e,t){const{top:a,left:s,width:i,height:m}=Bn[o](e,t);return{top:Math.round(a),left:Math.round(s),width:Math.round(i),height:Math.round(m)}}const Rn=["onClick"],Nn={class:"iconfont icon-jiesuo"},Pn=Y({props:{active:{default:!1},element:null,defaultStyle:null,index:null},setup(o){const e=o;et(w=>({a78dcdc8:ie.value,a9bbca8e:x.value,a7f3edf2:E.value}));const t=de(),a=ut(),s=it(),i=()=>{s.copy(),je(JSON.stringify(t.curComponent))},m=()=>{e.index&&t.removeComponent(e.index)},l=()=>{e.index&&t.upComponent(e.index)},r=()=>{e.index&&t.downComponent(e.index)},u=()=>{e.index&&t.topComponent(e.index)},v=()=>{if(e.index){let w=t.curComponent.id;je(w)}},c=()=>{e.index&&t.bottomComponent(e.index)},f=()=>{a.decompose()},b=()=>(t.setCurComponent(e.element),[{text:"\u62C6\u5206",subText:"",disable:a.canDecompose,handler:f},{divider:!0},{text:"\u590D\u5236",subText:"Ctrl + C",handler:i},{text:"\u590D\u5236ID",subText:"",handler:v},{text:"\u5220\u9664",subText:"",handler:m},{divider:!0},{text:"\u7F6E\u4E8E\u9876\u5C42",handler:u,children:[{text:"\u7F6E\u4E8E\u9876\u5C42",handler:u},{text:"\u4E0A\u79FB\u4E00\u5C42",handler:l}]},{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:c,children:[{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:c},{text:"\u4E0B\u79FB\u4E00\u5C42",handler:r}]}]),S=X(()=>t.isShowEm),T=D(null),{element:B}=me({},en(e)),P=ue(["lt","t","rt","r","rb","b","lb","l"]),j=ue({lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315}),ne=ue([{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}]),O=D({}),ie=D("0px"),x=D("#fff0"),E=D("none"),$=D(!1),V=D("");tn((w,C,K)=>{if(console.log(w),K==="render function"){if(t.isEditMode){if(C){const{id:L,label:H}=C.element||{};V.value=`\u7EC4\u4EF6[${H}][${L}]\u6E32\u67D3\u5F02\u5E38`}else V.value="\u7EC4\u4EF6\u6E32\u67D3\u5F02\u5E38";ie.value="5px",x.value="red",E.value="dashed",$.value=!0}return!1}else return!0});const A=X(()=>e.active&&!e.element.isLock||a.isActived(e.element)),_=X(()=>t.layerComponent?t.layerComponent.id===e.element.id:!1),y=()=>{a.appendComponent(e.element)},R=w=>{if(w.button===0){if(t.setClickComponentStatus(!0),w.preventDefault(),w.stopPropagation(),t.setCurComponent(e.element),e.element.isLock)return;O.value=se();let{top:C,left:K}=e.defaultStyle;const L=w.clientY,H=w.clientX,ye=C,he=K,be=ee=>{const M=ee.clientX;C=ee.clientY-L+ye,K=M-H+he,t.syncComponentLoction({top:C,left:K})},I=()=>{xe.emit("unmove"),document.removeEventListener("mousemove",be),document.removeEventListener("mouseup",I)};document.addEventListener("mousemove",be),document.addEventListener("mouseup",I)}},N=w=>{w.stopPropagation(),w.preventDefault(),t.setCurComponent(e.element)},z=(w,C)=>{if(C.button===0){t.setClickComponentStatus(!0),C.stopPropagation(),C.preventDefault();const K={top:e.defaultStyle.top,left:e.defaultStyle.left,height:e.defaultStyle.height,width:e.defaultStyle.width,rotate:e.defaultStyle.rotate},L=document.querySelector("#editor").getBoundingClientRect(),H=he=>{const be={x:he.clientX-L.left,y:he.clientY-L.top},{top:I,left:ee,width:M,height:G}=Tn(w,K,be);t.syncComponentLoction({top:I,left:ee,width:M,height:G})},ye=()=>{document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",ye)};document.addEventListener("mousemove",H),document.addEventListener("mouseup",ye)}},Z=w=>{if(t.setCurComponent(e.element),w.button===0){if(!T.value)return;t.setClickComponentStatus(!0),w.preventDefault(),w.stopPropagation();let{rotate:C}=me({},e.defaultStyle);const K=w.clientY,L=w.clientX,H=C,ye=T.value.getBoundingClientRect(),he=ye.left+ye.width/2,be=ye.top+ye.height/2,I=Math.atan2(K-be,L-he)/(Math.PI/180),ee=G=>{const Ke=G.clientX,Ie=G.clientY,Ve=Math.atan2(Ie-be,Ke-he)/(Math.PI/180);C=H+Ve-I,t.syncComponentLoction({rotate:C})},M=()=>{document.removeEventListener("mousemove",ee),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",ee),document.addEventListener("mouseup",M)}},se=()=>{if(!t.curComponent)return{};const w=yt(t.curComponent.style.rotate),C={};let K=-1;return P.forEach(L=>{const H=yt(j[L]+w),ye=ne.length;for(;;){K=(K+1)%ye;const he=ne[K];if(H<23||H>=338){C[L]="nw-resize";return}if(he.start<=H&&H<he.end){C[L]=he.cursor+"-resize";return}}}),C},Q=X(()=>{const w="rotate-",C=e.defaultStyle.rotate;return C>-22.5&&C<=22.5?w+0:C>22.5&&C<=67.5?w+45:C>67.5&&C<=112.5?w+90:C>112.5&&C<=157.5?w+135:C>157.5||C<=-157.5?w+0:C>-157.5&&C<=-112.5?w+45:C>-112.5&&C<=-67.5?w+90:C>-67.5&&C<=-22.5?w+135:w+0});return Fe(()=>{O.value=se()}),(w,C)=>{const K=Re("contextmenu");return U((d(),k("div",{ref:(L,H)=>{H.shape=L,T.value=L},class:pe(["shape",{active:n(A)||o.active,layerActive:n(_)}]),onClick:[Ee(y,["ctrl","exact"]),Ee(N,["exact"])],onMousedown:R},[U(g("span",{class:"error-info"},_e(V.value),513),[[W,$.value]]),U(g("span",{class:"iconfont icon-xuanzhuan",onMousedown:Z},null,544),[[W,n(A)]]),U(g("span",Nn,null,512),[[W,n(B).isLock]]),U(g("em",null,"("+_e(o.defaultStyle.left)+","+_e(o.defaultStyle.top)+")",513),[[W,n(S)]]),U(g("div",{class:pe(["shape-point","lt",n(Q)]),style:{top:"0%",left:"0%"},onMousedown:C[0]||(C[0]=L=>z("lt",L))},null,34),[[W,n(A)]]),U(g("div",{class:pe(["shape-point","t",n(Q)]),style:{top:"0%",left:"50%"},onMousedown:C[1]||(C[1]=L=>z("t",L))},null,34),[[W,n(A)]]),U(g("div",{class:pe(["shape-point","rt",n(Q)]),style:{top:"0%",left:"100%"},onMousedown:C[2]||(C[2]=L=>z("rt",L))},null,34),[[W,n(A)]]),U(g("div",{class:pe(["shape-point","r",n(Q)]),style:{top:"50%",left:"100%"},onMousedown:C[3]||(C[3]=L=>z("r",L))},null,34),[[W,n(A)]]),U(g("div",{class:pe(["shape-point","rb",n(Q)]),style:{top:"100%",left:"100%"},onMousedown:C[4]||(C[4]=L=>z("rb",L))},null,34),[[W,n(A)]]),U(g("div",{class:pe(["shape-point","b",n(Q)]),style:{top:"100%",left:"50%"},onMousedown:C[5]||(C[5]=L=>z("b",L))},null,34),[[W,n(A)]]),U(g("div",{class:pe(["shape-point",["shape-point","lb",n(Q)]]),style:{top:"100%",left:"0%"},onMousedown:C[6]||(C[6]=L=>z("lb",L))},null,34),[[W,n(A)]]),U(g("div",{class:pe(["shape-point","l",n(Q)]),style:{top:"50%",left:"0%"},onMousedown:C[7]||(C[7]=L=>z("l",L))},null,34),[[W,n(A)]]),Ne(w.$slots,"default",{},void 0,!0)],42,Rn)),[[K,b]])}}});var Un=le(Pn,[["__scopeId","data-v-2c8acd4a"]]);const Xn=Y({setup(o){const e=de(),t=ut(),a=it(),s=y=>gt(y,["top","left","width","height","rotate"]),i=X(()=>t.style.width>0&&!E.value),m=X(()=>({x:t.style.left,y:t.style.top})),l=X(()=>t.style.width),r=X(()=>t.style.height),u=()=>{E.value=!1,ie.value=0,x.value=0,t.setAreaData({left:0,top:0,width:0,height:0,rotate:0},[])},v=()=>{e.clearCanvas()},c=()=>{a.paste(!1)},f=()=>[{text:"\u7C98\u8D34",subText:"Ctrl + V",handler:c},{text:"\u6E05\u7A7A\u753B\u5E03",subText:"",handler:v}];Ae("hideArea",u),Fe(()=>{console.log("\u8FDB\u5165\u7F16\u8F91\u6A21\u5F0F"),e.setEditMode(_t.EDIT),document.addEventListener("keydown",_),document.addEventListener("paste",P)}),Oe(()=>{console.log("\u8FDB\u5165\u9884\u89C8\u6A21\u5F0F"),e.setEditMode(_t.PREVIEW),document.removeEventListener("keydown",_),document.removeEventListener("paste",P),e.clearCanvas()});const b=X(()=>e.componentData),S=X(()=>e.canvasStyleData),T=X(()=>e.curComponent),B=X(()=>{const y=Xe(me({},S.value),{backgroundImage:S.value.image,backgroundSize:"cover"});return gt(y,["width","height","backgroundImage","backgroundSize"])}),P=y=>{if(y.clipboardData){const R=y.clipboardData.getData("text");try{const N=JSON.parse(R);"component"in N&&(y.preventDefault(),e.appendComponent(N))}catch(N){console.log(N)}}},j=D(0),ne=D(0),O=ue({x:0,y:0}),ie=D(0),x=D(0),E=D(!1),$=D(null),V=y=>{var R;if(y.button===0){e.setCurComponent(void 0),y.preventDefault(),y.stopPropagation(),u();const N=(R=$.value)==null?void 0:R.getBoundingClientRect();j.value=N.x,ne.value=N.y;const z=y.clientX,Z=y.clientY;O.x=z-j.value,O.y=Z-ne.value,E.value=!0;const se=w=>{w.preventDefault(),w.stopPropagation(),ie.value=Math.abs(w.clientX-z),x.value=Math.abs(w.clientY-Z),w.clientX<z&&(O.x=w.clientX-j.value),w.clientY<Z&&(O.y=w.clientY-ne.value)},Q=w=>{if(document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",Q),w.clientX==z&&w.clientY==Z){u();return}const C={left:O.x,top:O.y,right:ie.value+O.x,bottom:O.y+x.value},K=A(C);if(K){const L=K.rect;t.setAreaData({top:L.top,left:L.left,width:L.right-L.left,height:L.bottom-L.top,rotate:0},K.components),O.x=L.left,O.y=L.top,ie.value=L.right-L.left,x.value=L.bottom-L.top}};document.addEventListener("mousemove",se),document.addEventListener("mouseup",Q)}},A=y=>{const R=[],N=new Set,z=new Set,Z=new Set,se=new Set;if(e.componentData.forEach(Q=>{const w=Q.style,C=Je(w);C.left>=y.left&&C.right<=y.right&&C.top>=y.top&&C.bottom<=y.bottom&&(R.push(Q),N.add(C.left),z.add(C.top),Z.add(C.right),se.add(C.bottom))}),R.length>0){const Q=Math.min(...N),w=Math.max(...Z),C=Math.min(...z),K=Math.max(...se);return{components:R,rect:{left:Q,right:w,top:C,bottom:K}}}},_=y=>{if(T.value&&y.ctrlKey)switch(y.key){case"ArrowLeft":y.preventDefault(),e.syncComponentLoction({left:T.value.style.left-1});break;case"ArrowUp":y.preventDefault(),e.syncComponentLoction({top:T.value.style.top-1});break;case"ArrowRight":y.preventDefault(),e.syncComponentLoction({left:T.value.style.left+1});break;case"ArrowDown":y.preventDefault(),e.syncComponentLoction({top:T.value.style.top+1});break;default:y.stopPropagation()}else y.stopPropagation()};return(y,R)=>{const N=Re("contextmenu");return U((d(),k("div",{class:"editor edit",ref:(z,Z)=>{Z.editor=z,$.value=z},id:"editor",style:ge(n(B)),onMousedown:V},[p(En),(d(!0),k(q,null,oe(n(b),(z,Z)=>(d(),k(q,{key:z.id},[n(e).isEditMode&&z.display?(d(),F(Un,{key:0,id:"shape"+z.id,defaultStyle:z.style,style:ge(s(z.style)),active:z.id===(n(T)||{}).id,element:z,index:Z.toString(),class:pe({lock:z.isLock})},{default:h(()=>[(d(),F(nn(z.component),{class:"component",style:ge(n(Wt)(z)),propValue:z.propValue,element:z,id:"component"+z.id,subComponents:z.subComponents},null,8,["style","propValue","element","id","subComponents"]))]),_:2},1032,["id","defaultStyle","style","active","element","index","class"])):De("",!0)],64))),128)),p(kn),E.value?(d(),F($t,{key:0,start:n(O),width:ie.value,height:x.value},null,8,["start","width","height"])):n(i)?(d(),F($t,{key:1,start:n(m),width:n(l),height:n(r)},null,8,["start","width","height"])):De("",!0)],36)),[[N,f]])}}});var On=le(Xn,[["__scopeId","data-v-4d057ccc"]]),Hn=["icon-zu","icon-zhuxingtu","icon-yibiaopan","icon-tubiao-bingtu","icon-tubiao-qiapian","icon-tubiao-zhexiantu","icon-anniuzu","icon-daohang","icon-liebiao","icon-caimeiji","icon-qita","icon-dingzhi","icon-jichu","icon-chartt","icon-zhuangshizhuangxiu","icon-wenduji","icon-tiaoxingjindutu","icon-biankuang","icon-jindutu","icon-jinggao1","icon-yujingdeng","icon-zidongxitongjinggaodeng1","icon-yujing1","icon-yujing3","icon-jinggaodeng","icon-baojing1","icon-hong","icon-yujingdeng1","icon-a-baojingjinggaoyujingjinggaodeng","icon-light","icon-gaojingdeng9","icon-jinggaodeng1","icon-yujing5","icon-shanchu","icon-shanchu1","icon-shouye","icon-chakan","icon-bianji","icon-fuzhi","icon-shouye-moren","icon-jiesuo","icon-xuanzhuan","icon-kaiguan","icon-clock","icon-fankuixinxi","icon-leijianzhuxiulix","icon-weibiaoti-","icon-sds_di37leijianzhuxiuli","icon-liandongkongzhi","icon-unlock-full","icon-ascend","icon-falling","icon-buttonoff","icon-buttonon","icon-jiantoushang","icon-jiantouyou","icon-jiantouxia","icon-24gl-next","icon-24gl-pauseCircle","icon-24gl-previous","icon-24gl-stopCircle","icon-anniu_kaiqi","icon-anniu_guanbi","icon-jiantoushangzuo-copy","icon-xiangzuo2-copy","icon-guanbibofang","icon-xiangshang3","icon-xiangxia5","icon-xiangyou2","icon-youbofang","icon-zuobofang","icon-bofang2","icon-bofang5","icon-xiangzuojiaohuan","icon-xiangyoujiaohuan","icon-bofang6","icon-24gl-playCircle","icon-xiangshang7","icon-bofang26","icon-play1","icon-bofang-kuaitui","icon-bofang09","icon-bofang-kuaijin","icon-xiangxia7"];const Wn={class:"total"},Yn={class:"icon_lists"},Gn=["onClick"],qn=Y({props:{visible:null},emits:["update:visible"],setup(o,{emit:e}){const t=ue(Hn),a=D(null);Dt(a,()=>{e("update:visible",!1)});const s=i=>{je(i),Me(`\u590D\u5236\u56FE\u6807: ${i}`)};return(i,m)=>(d(),k("div",null,[(d(),F(xt,{to:"body"},[U(g("div",{class:"tab-container",ref:(l,r)=>{r.iconDiv=l,a.value=l}},[g("div",Wn,"\u56FE\u6807\u6570\u91CF\uFF1A"+_e(n(t).length),1),g("ul",Yn,[(d(!0),k(q,null,oe(n(t),l=>(d(),k("li",{key:l,class:"dib",onClick:r=>s(l)},[g("span",{class:pe(`icon iconfont ${l}`)},null,2)],8,Gn))),128))])],512),[[W,o.visible]])]))]))}});var Kn=le(qn,[["__scopeId","data-v-59237f31"]]);const Jn=()=>ce(void 0,null,function*(){return rn.get({url:"/files"})});const Zn=["src","onClick"],Qn=Le("\u4E0A\u4F20"),eo=Y({props:{visible:null},emits:["update:visible"],setup(o,{emit:e}){const t=Yt(),a=()=>ce(this,null,function*(){Me("\u4E0A\u4F20\u6210\u529F"),yield v()}),s=()=>ce(this,null,function*(){Ze("\u4E0A\u4F20\u5931\u8D25")}),i=D("http://localhost:13000"),m=X(()=>{const c=t.userToken;if(c)return{authorization:c}}),l=D(null);let r=D([]);Dt(l,()=>{e("update:visible",!1)});const u=c=>{je(`${i.value}${c}`),Me(`\u590D\u5236\u56FE\u7247\u5730\u5740: ${c}`)};Fe(()=>ce(this,null,function*(){yield v()}));const v=()=>ce(this,null,function*(){try{r.value=yield Jn()}catch(c){console.log(c)}});return(c,f)=>(d(),k("div",null,[(d(),F(xt,{to:"body"},[U(p(n(Pe),{class:"container",ref:(b,S)=>{S.imgDiv=b,l.value=b}},{default:h(()=>[(d(!0),k(q,null,oe(n(r),b=>(d(),k("div",{key:b.md5},[p(n(wt),{class:"card"},{default:h(()=>[g("img",{src:`${i.value}${b.url}`,class:"image",onClick:S=>u(b.url)},null,8,Zn)]),_:2},1024)]))),128)),g("div",null,[p(n(wt),{class:"card upload-card"},{default:h(()=>[p(n(dn),{class:"upload",action:`${i.value}/upload`,"list-type":"picture-card","thumbnail-mode":!1,"show-file-list":!1,"on-success":a,"on-error":s,headers:n(m)},{default:h(()=>[p(n(re),null,{default:h(()=>[Qn]),_:1})]),_:1},8,["action","headers"])]),_:1})])]),_:1},512),[[W,o.visible]])]))]))}});var to=le(eo,[["__scopeId","data-v-429f0806"]]);const Se=o=>(He("data-v-1e6f45c7"),o=o(),We(),o),no={class:"tool-bar"},oo={class:"tool-bar-item"},ao=Se(()=>g("span",null,"\u4FDD\u5B58",-1)),lo=Se(()=>g("span",null,"\u9884\u89C8",-1)),so=Se(()=>g("span",null,"\u64A4\u9500",-1)),uo=Se(()=>g("span",null,"\u6062\u590D",-1)),io=Se(()=>g("span",null,"\u5BFC\u51FA",-1)),co=Se(()=>g("span",null,"\u5BFC\u5165",-1)),ro=Se(()=>g("span",null,"\u5168\u5C4F",-1)),po=Se(()=>g("span",null,"\u5750\u6807",-1)),mo=Se(()=>g("span",null,"\u56FE\u6807",-1)),vo=Se(()=>g("span",null,"\u56FE\u7247",-1)),ho={class:"dialog-footer"},fo=Le("\u53D6\u6D88"),yo=Le("\u65B0\u589E\u9875\u9762"),_o=Le("\u66F4\u65B0\u9875\u9762"),go=Y({setup(o){const e=de(),t=Gt(),a=ln(),s=Et(),i=X(()=>e.componentData),m=X(()=>e.canvasStyleData),l=X(()=>s.path==="/create");let r="";const u=D(!1),v=D(!1),c=D(!1),f=ue({name:"",thumbnail:""}),b=ue({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0",trigger:"blur"}]});let S=0;Fe(()=>{setTimeout(()=>{f.name=e.name,f.thumbnail=e.thumbnail},500)});const T=()=>ce(this,null,function*(){let _;S<=0?_=yield t.undo():_=yield t.undo(S-1),_?(S=_.id,e.setLayoutData({canvasData:_.canvasData,canvasStyle:_.canvasStyle})):Ze("\u6CA1\u6709\u5FEB\u7167\u4E86")}),B=()=>{const{href:_}=a.resolve("/preview");window.open(_,"_blank")},P=()=>{u.value=!0},j=()=>ce(this,null,function*(){let _;S<=0?_=yield t.undo():_=yield t.undo(S+1),_?(S=_.id,e.setLayoutData({canvasData:_.canvasData,canvasStyle:_.canvasStyle})):Ze("\u6CA1\u6709\u5FEB\u7167\u4E86")}),ne=()=>{e.toggleShowEm()},O=()=>{v.value=!v.value},ie=()=>{const _=document.querySelector(".center.scrollbar");document.fullscreenEnabled&&_&&_.requestFullscreen()},x=_=>ce(this,null,function*(){const{name:y,thumbnail:R}=f;if(!y){Qe("\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0");return}const N={name:y,thumbnail:R,canvasData:i.value,canvasStyle:m.value};if(e.setName(y),e.setThumbnail(R),_==="update")try{yield sn(r,N),Me("\u4FEE\u6539\u6210\u529F")}catch(z){Qe("\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u5BFC\u51FA\u5230\u672C\u5730\uFF0C\u5E76\u91CD\u65B0\u8FDB\u5165\u6B64\u9875\u9762")}finally{u.value=!1}else try{const z=yield un(N);Me("\u4FDD\u5B58\u6210\u529F"),a.push({name:"Editor",params:{index:z.id}})}catch(z){Qe(`\u4FDD\u5B58\u5931\u8D25\uFF0C\u5931\u8D25\u4FE1\u606F:${(z==null?void 0:z.message)||z}`)}finally{u.value=!1}}),E=()=>{const _=`${e.name}`||"layout";qt(`${_}.json`,JSON.stringify({canvasData:i.value,canvasStyle:m.value}))},$=()=>{Kt(V,".json")},V=_=>{if(_.target&&_.target.result){const y=JSON.parse(_.target.result);y&&(e.setComponentData(y.canvasData),e.setCanvasStyle(y.canvasStyle))}},A=we(()=>s.params.index,(_,y)=>{r=_},{immediate:!0});return Oe(()=>{A()}),(_,y)=>{const R=te("icon-save-one"),N=te("icon-computer"),z=te("icon-back"),Z=te("icon-next"),se=te("icon-download-one"),Q=te("icon-upload-one"),w=te("icon-full-screen"),C=te("icon-cones"),K=te("icon-game-ps"),L=te("icon-picture");return d(),k(q,null,[g("div",no,[g("div",oo,[g("div",null,[p(n(fe),{size:"small",onClick:P,title:"\u4FDD\u5B58"},{default:h(()=>[p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[p(R,{theme:"outline",size:"22",fill:"var(--el-color-primary)"})]),_:1}),ao]),_:1}),p(n(fe),{size:"small",onClick:B,title:"\u9884\u89C8"},{default:h(()=>[p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[p(N,{theme:"outline",size:"22",fill:"var(--el-color-primary)"})]),_:1}),lo]),_:1}),p(n(fe),{size:"small",onClick:T,title:"\u64A4\u9500"},{default:h(()=>[p(n(re),{style:{"vertical-align":"middle"},onClick:T},{default:h(()=>[p(z,{theme:"outline",size:"22",fill:"var(--el-color-primary)"})]),_:1}),so]),_:1}),p(n(fe),{size:"small",onClick:j,title:"\u6062\u590D"},{default:h(()=>[p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[p(Z,{theme:"outline",size:"22",fill:"var(--el-color-primary)"})]),_:1}),uo]),_:1}),p(n(fe),{size:"small",onClick:E,title:"\u5BFC\u51FA"},{default:h(()=>[p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[p(se,{theme:"outline",size:"22",fill:"var(--el-color-primary)"})]),_:1}),io]),_:1}),p(n(fe),{size:"small",onClick:$,title:"\u5BFC\u5165"},{default:h(()=>[p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[p(Q,{theme:"outline",size:"22",fill:"var(--el-color-primary)"})]),_:1}),co]),_:1}),p(n(fe),{size:"small",onClick:ie,title:"\u5168\u5C4F"},{default:h(()=>[p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[p(w,{theme:"outline",size:"22",fill:"var(--el-color-primary)"})]),_:1}),ro]),_:1}),p(n(fe),{size:"small",onClick:ne,title:"\u5750\u6807"},{default:h(()=>[p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[p(C,{theme:"outline",size:"22",fill:"var(--el-color-primary)"})]),_:1}),po]),_:1})]),g("div",null,[p(n(fe),{class:"resource",size:"small",onClick:O,title:"\u56FE\u6807"},{default:h(()=>[p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[p(K,{theme:"outline",size:"22",fill:"var(--el-color-primary)"})]),_:1}),mo]),_:1}),p(n(fe),{class:"resource",size:"small",onClick:y[0]||(y[0]=()=>c.value=!0),title:"\u56FE\u7247"},{default:h(()=>[p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[p(L,{theme:"outline",size:"22",fill:"var(--el-color-primary)"})]),_:1}),vo]),_:1})])])]),p(n(pn),{modelValue:u.value,"onUpdate:modelValue":y[6]||(y[6]=H=>u.value=H),title:"\u4FDD\u5B58\u5F53\u524D\u5E03\u5C40",width:"30%",center:""},{footer:h(()=>[g("span",ho,[p(n(fe),{onClick:y[3]||(y[3]=H=>u.value=!1)},{default:h(()=>[fo]),_:1}),n(l)?(d(),F(n(fe),{key:0,type:"primary",onClick:y[4]||(y[4]=H=>x("new"))},{default:h(()=>[yo]),_:1})):(d(),F(n(fe),{key:1,type:"primary",onClick:y[5]||(y[5]=H=>x("update"))},{default:h(()=>[_o]),_:1}))])]),default:h(()=>[p(n(Ye),{model:n(f),rules:n(b),onSubmit:y[2]||(y[2]=Ee(()=>{},["prevent"]))},{default:h(()=>[p(n(Be),{label:"\u9875\u9762\u540D\u79F0",prop:"name"},{default:h(()=>[p(n($e),{modelValue:n(f).name,"onUpdate:modelValue":y[1]||(y[1]=H=>n(f).name=H),placeholder:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),p(Kn,{visible:v.value,"onUpdate:visible":y[7]||(y[7]=H=>v.value=H)},null,8,["visible"]),p(to,{visible:c.value,"onUpdate:visible":y[8]||(y[8]=H=>c.value=H)},null,8,["visible"])],64)}}});var Co=le(go,[["__scopeId","data-v-1e6f45c7"]]);const bo=["onMousedown"],xo=["onMousedown"],So=["title","onMousedown"],Eo={class:"vue-ruler-content-mask"},Do=Y({props:{isHotKey:{default:!0},isScaleRevise:{default:!1},contentLayout:{default:{top:0,left:0}},visible:{default:!0},stepLength:{default:50},borderStyle:{default:{color:"#red",type:"dashed",width:1}},canvas:{default:!0}},emits:["update:visible"],setup(o,{emit:e}){const t=o,a=ue([]),s=D(17),i=D(18);let m=D([]),l=D([]);const r=D(0),u=D(0),v=D(!1),c=D(""),f=D(-999),b=D(-999),S=D(0),T=D(0),B=D(""),P=ue({r:82}),j=D(!0),ne=D(null),O=D(null),ie=D(null),x=de(),E=X(()=>{const I=x.canvasData.height;return{width:x.canvasData.width+18+"px",height:I+18+"px"}}),$=X(()=>({left:t.contentLayout.left+"px",top:t.contentLayout.top+"px",padding:i.value+"px 0px 0px "+i.value+"px"})),V=X(()=>{let I=0,ee=0;return a.map(M=>{const G=M.type==="h";return{id:`${M.type}_${G?I++:ee++}`,type:M.type,title:M.site.toFixed(2)+"px",[G?"top":"left"]:M.site/(t.stepLength/50)+s.value}})});we(()=>t.visible,I=>{j.value=I},{immediate:!0}),we(()=>x.canvasData,I=>{z()},{deep:!0}),Fe(()=>{document.addEventListener("mousemove",Q),document.addEventListener("mouseup",w),document.addEventListener("keyup",be),A()}),Oe(()=>{document.removeEventListener("mousemove",Q),document.removeEventListener("mouseup",w),document.removeEventListener("keyup",be)});const A=()=>{R(),z()},_=({type:I,top:ee,left:M})=>{const G={borderWidth:t.borderStyle.width+"px",borderLeftStyle:t.borderStyle.type,borderTopStyle:t.borderStyle.type,borderRightStyle:"none",borderBottomStyle:"none",borderColor:t.borderStyle.color};return me(I==="h"?{top:`${ee}px`}:{left:M+"px"},G)},y=({type:I,id:ee})=>I==="h"?H(ee):ye(ee),R=()=>{S.value=O.value.clientWidth,T.value=ie.value.clientHeight,N()},N=()=>{r.value=ie.value.getBoundingClientRect().y,u.value=O.value.getBoundingClientRect().x},z=()=>{m.value=[],l.value=[];const I=x.canvasData.height,ee=x.canvasData.width;Z(m.value,ee+18),Z(l.value,I+18)},Z=(I,ee)=>{for(let M=0;M<ee*t.stepLength/50;M+=t.stepLength)M%t.stepLength==0&&I.push({id:M})},se=I=>{v.value=!0,c.value=I},Q=I=>{switch(N(),c.value){case"h":case"x":v.value&&(b.value=I.pageY-r.value);break;case"v":case"y":v.value&&(f.value=I.pageX-u.value);break}},w=I=>{if(N(),v.value){switch(c.value){case"x":he({type:"h",site:(I.pageY-r.value-s.value)*(t.stepLength/50)});break;case"y":he({type:"v",site:(I.pageX-u.value-s.value)*(t.stepLength/50)});break;case"h":C(a,I.pageY,r.value,T.value,"h");break;case"v":C(a,I.pageX,u.value,S.value,"v");break}b.value=f.value=-50,v.value=!1,B.value=""}},C=(I,ee,M,G,Ke)=>{ee-M<G?V.value.forEach((Ie,Ve)=>{Ie.id===B.value&&I.splice(Ve,1)}):V.value.forEach((Ie,Ve)=>{Ie.id===B.value&&I.splice(Ve,1,{type:Ke,site:(ee-M-s.value)*(t.stepLength/50)})})},K=()=>{se("x")},L=()=>{se("y")},H=I=>{v.value=!0,c.value="h",B.value=I},ye=I=>{v.value=!0,c.value="v",B.value=I},he=I=>{I.site>s.value&&a.push(I)},be=I=>{t.isHotKey&&I.keyCode===P.r&&(j.value=!j.value,e("update:visible",j.value),j.value?i.value=18:i.value=0)};return(I,ee)=>(d(),k("div",{style:ge(n(E)),class:"vue-ruler-wrapper",onselectstart:"return false;"},[U(g("section",null,[g("div",{ref:(M,G)=>{G.horizontalRuler=M,ie.value=M},class:"vue-ruler-h",onMousedown:Ee(K,["stop"])},[(d(!0),k(q,null,oe(n(m),(M,G)=>(d(),k("span",{key:G,style:ge({left:G*50+2+"px"}),class:"n"},_e(M.id),5))),128))],40,bo),g("div",{ref:(M,G)=>{G.verticalRuler=M,O.value=M},class:"vue-ruler-v",onMousedown:Ee(L,["stop"])},[(d(!0),k(q,null,oe(n(l),(M,G)=>(d(),k("span",{key:G,style:ge({top:G*50+2+"px"}),class:"n"},_e(M.id),5))),128))],40,xo),g("div",{style:ge({top:b.value+"px"}),class:"vue-ruler-ref-dot-h"},null,4),g("div",{style:ge({left:f.value+"px"}),class:"vue-ruler-ref-dot-v"},null,4),(d(!0),k(q,null,oe(n(V),M=>(d(),k("div",{title:M.title,style:ge(_(M)),key:M.id,class:pe(`vue-ruler-ref-line-${M.type}`),onMousedown:G=>y(M)},[g("span",null,_e(M.title),1)],46,So))),128))],512),[[W,j.value]]),g("div",{ref:(M,G)=>{G.contentEl=M,ne.value=M},class:"vue-ruler-content",style:ge(n($))},[Ne(I.$slots,"default",{},void 0,!0)],4),U(g("div",Eo,null,512),[[W,v.value]])],4))}});var wo=le(Do,[["__scopeId","data-v-2afd9900"]]);const It={[ve.TEXT]:"icon-bianji",[ve.BASIC]:"icon-jichu",[ve.BORDER]:"icon-biankuang",[ve.DECORATION]:"icon-zhuangshizhuangxiu",[ve.LINE]:"icon-tubiao-zhexiantu",[ve.BAR]:"icon-zhuxingtu",[ve.PERCENTAGE]:"icon-jindutu",[ve.GAUGE]:"icon-yibiaopan",[ve.CUSTOM]:"icon-dingzhi",[ve.Navigation]:"icon-daohang",[ve.Thermometer]:"icon-wenduji",[ve.OTHER]:"icon-qita",[ve.Progress]:"icon-tiaoxingjindutu"};const ko={class:"components"},Fo=Y({props:{mode:{default:"expand"}},setup(o){const e=X(()=>Object.keys(ve).map(s=>ve[s])),t=X(()=>{const s={};return Object.keys(Ce).filter(i=>{if(Ce[i].component.show!==!1)return Ce[i]}).forEach(i=>{const m=Ce[i].component.group;!m||(s[m]||(s[m]=[]),s[m].push(Ce[i].component))}),s}),a=s=>{s.dataTransfer.setData("componentName",s.target.dataset.component)};return(s,i)=>(d(),k("div",{onDragstart:a,style:{height:"calc(100vh - 100px)"}},[g("div",ko,[p(n(Pe),null,{default:h(()=>[p(n(kt),{"unique-opened":!0},{default:h(()=>[i[0]||(St(-1),i[0]=(d(!0),k(q,null,oe(n(e),(m,l)=>(d(),F(n(Bt),{index:l.toString(),key:l},{title:h(()=>[g("span",{class:pe(`icon iconfont ${n(It)[m]}`)},null,2),U(g("span",null,_e(m),513),[[W,o.mode==="expand"]])]),default:h(()=>[(d(!0),k(q,null,oe(n(t)[m],(r,u)=>(d(),F(n(Ft),{key:u,index:`${l}-${u}`,draggable:"true","data-component":r.component},{title:h(()=>[g("span",null,_e(r.label),1)]),_:2},1032,["index","data-component"]))),128))]),_:2},1032,["index"]))),128)),St(1),i[0])]),_:1})]),_:1})])],32))}});var Bo=le(Fo,[["__scopeId","data-v-170d54e3"]]);const $o=o=>(He("data-v-71067aaf"),o=o(),We(),o),zo=$o(()=>g("span",{class:"icon iconfont icon-zu"},null,-1)),Lo=Y({props:{components:null,index:null,activeKey:null,mode:{default:"expand"}},emits:["select"],setup(o,{emit:e}){const t=o,a=de(),s=it(),i=x=>{let E=t.index;return E?`${E}-${x}`:x.toString()},m=x=>{const E=x.split("-").map(V=>Number(V)),$=a.getComponentByIndex(E);$&&(je(JSON.stringify($)),s.copy())},l=x=>ce(this,null,function*(){e("select",x),a.removeComponent(x)}),r=x=>ce(this,null,function*(){e("select",x),a.upComponent(x)}),u=x=>ce(this,null,function*(){e("select",x),a.downComponent(x)}),v=x=>ce(this,null,function*(){e("select",x),a.topComponent(x)}),c=x=>ce(this,null,function*(){e("select",x),a.bottomComponent(x)}),f=x=>{e("select",x),a.hiddenComponent(x)},b=x=>{e("select",x),a.showComponent(x)},S=(x,E)=>{const $=E.split("-").map(V=>parseInt(V));return[{text:"\u590D\u5236",subText:"Ctrl + C",handler:()=>m(E)},{text:"\u5220\u9664",subText:"",handler:()=>l(E)},{divider:!0},{text:"\u7F6E\u4E8E\u9876\u5C42",handler:()=>v(E),children:[{text:"\u7F6E\u4E8E\u9876\u5C42",handler:()=>v(E)},{text:"\u4E0A\u79FB\u4E00\u5C42",handler:()=>r(E)}]},{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:()=>c(E),children:[{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:()=>c(E)},{text:"\u4E0B\u79FB\u4E00\u5C42",handler:()=>u(E)}]},{divider:!0},{text:"\u663E\u793A",disable:a.getComponentByIndex($).display,subText:"",handler:()=>b(E)},{text:"\u9690\u85CF",disable:!a.getComponentByIndex($).display,subText:"",handler:()=>f(E)}]},T=(x,E)=>{var $;($=x.dataTransfer)==null||$.setData("compomentIndex",E),x.stopPropagation()},B=(x,E,$=!1)=>{x.preventDefault(),x.stopPropagation(),$&&E!==t.activeKey&&xe.emit("ActiveMenu",E)},P=(x,E)=>{var y;x.preventDefault(),x.stopPropagation();const $=(y=x.dataTransfer)==null?void 0:y.getData("compomentIndex"),V=ne($,E),A=O($,E),_=j($,A);_&&V&&ie(V,_,A)},j=(x,E)=>{const $=x.split("-").map(_=>Number(_)),V=$.pop(),A=a.getComponentByIndex($);if(A&&A.subComponents){const y=A.subComponents.splice(V,1)[0];if(E||A.component==="Root")return y;if(A.component==="Group"){const R=A.style;return ht(y,R),y}}},ne=(x,E)=>{const $=x.split("-").map(_=>parseInt(_)),V=E.split("-").map(_=>parseInt(_)),A=$.length;for(let _=0;_<A;_++)if($[_]!==V[_]){if($[_]>V[_])return E;if($[_]<V[_])return _+1==A?(V[_]=V[_]-1,V.join("-")):E}return E},O=(x,E)=>{const $=x.split("-").map(y=>parseInt(y)),V=E.split("-").map(y=>parseInt(y));$.pop(),V.pop();const A=$.join("-"),_=V.join("-");return A===_},ie=(x,E,$)=>{const V=x.split("-").map(y=>Number(y)),A=V.pop(),_=a.getComponentByIndex(V);if(_&&_.subComponents){if(_.component==="Root"||$)_.subComponents.splice(A,0,E);else if(_.component==="Group"){const y=_.style,R=me({},E.style);E.groupStyle={gtop:1.1,gleft:1.1,grotate:E.style.rotate,gheight:parseFloat((R.height*100/y.height).toFixed(4)),gwidth:parseFloat((R.width*100/y.width).toFixed(4))},_.subComponents.splice(A,0,E),e("select",x)}}};return(x,E)=>{const $=te("icon-preview-open"),V=te("icon-preview-close-one"),A=te("LayerItem",!0),_=Re("contextmenu");return d(!0),k(q,null,oe(o.components,(y,R)=>(d(),k(q,{key:R},[y.component==="Group"?U((d(),F(n(Bt),{key:0,index:i(R),draggable:"true",onDragstart:N=>T(N,i(R)),onDrop:N=>P(N,i(R)),onDragover:N=>B(N,i(R),!0)},{title:h(()=>[zo,U(g("span",null,_e(y.label||"\u5206\u7EC4"),513),[[W,o.mode==="expand"]]),p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[y.display?(d(),F($,{key:0,theme:"outline",size:"24",fill:"var(--el-color-primary)"})):(d(),F(V,{key:1,theme:"outline",size:"24",fill:"var(--el-color-primary)"}))]),_:2},1024)]),default:h(()=>[y.subComponents&&y.subComponents.length>0?(d(),F(A,{key:0,components:y.subComponents,index:i(R)},null,8,["components","index"])):De("",!0)]),_:2},1032,["index","onDragstart","onDrop","onDragover"])),[[_,()=>S(x.$el,i(R))]]):U((d(),F(n(Ft),{key:1,draggable:"true",index:i(R),onDrop:N=>P(N,i(R)),onDragover:N=>B(N,i(R)),onDragstart:N=>T(N,i(R))},{title:h(()=>[g("span",{class:pe(`icon iconfont ${n(It)[y.group]}`)},null,2),U(g("span",null,_e(y.label),513),[[W,o.mode==="expand"]]),p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[y.display?(d(),F($,{key:0,theme:"outline",size:"24",fill:"var(--el-color-primary)"})):(d(),F(V,{key:1,theme:"outline",size:"24",fill:"var(--el-color-primary)"}))]),_:2},1024)]),_:2},1032,["index","onDrop","onDragover","onDragstart"])),[[_,()=>S(x.$el,i(R))]])],64))),128)}}});var Io=le(Lo,[["__scopeId","data-v-71067aaf"]]);const Vo={style:{height:"calc(100vh - 100px)"}},Ao=Y({props:{mode:{default:"expand"}},setup(o){const e=de(),t=X(()=>e.componentData),a=D(null),s=D("");Ae("ActiveMenu",l=>{const r=l;s.value=r,a.value&&a.value.open&&a.value.open(r)});const m=l=>{s.value=l;const r=l.split("-").map(v=>Number(v)),u=e.getComponentByIndex(r);e.setActiveComponent(u)};return(l,r)=>(d(),k("div",Vo,[n(t).length>0?(d(),F(n(Pe),{key:0},{default:h(()=>[p(n(kt),{"unique-opened":!0,"collapse-transition":!1,onSelect:m,onOpen:m,mode:"vertical",ref:(u,v)=>{v.menu=u,a.value=u}},{default:h(()=>[p(Io,{components:n(t),onSelect:m,activeKey:"activeKey",mode:o.mode},null,8,["components","mode"])]),_:1},512)]),_:1})):(d(),F(n(ot),{key:1,class:"placeholder"},{default:h(()=>[U(p(n(nt),null,{default:h(()=>[p(n(tt),{description:"\u753B\u5E03\u4E3A\u7A7A"})]),_:1},512),[[W,o.mode==="expand"]])]),_:1}))]))}});var jo=le(Ao,[["__scopeId","data-v-42736f2f"]]),ct=Y({props:{slots:{type:Object,default:()=>{}}},setup(o){return()=>[on("div",{props:o.slots.props},o.slots)]}});const Mo={class:"dv-tabs"},To={class:"tabs-nav"},Ro={class:"prefix"},No=["onClick"],Po={key:0},Uo={key:1},Xo={class:"suffix"},Oo={key:0,class:"tabs-content"},Ho={key:0},Wo=Y({props:{modelValue:{default:"tab-1"},showContent:{default:!0},mode:{default:"expand"}},emits:["update:modelValue","change"],setup(o,{emit:e}){const t=o,a=X(()=>an().default()),s=D(t.modelValue),i=(l,r)=>{s.value=l.props.name||"tab-"+(r+1),e("change",l,r),e("update:modelValue",s.value)},m=(l,r)=>{var u;return((u=l.props)==null?void 0:u.name)===s.value||s.value==="tab-"+(r+1)};return Fe(()=>{const l=a.value;l&&l.length>0&&l[0].props&&l[0].props.name&&(s.value=l[0].props.name)}),(l,r)=>(d(),k("div",Mo,[Ne(l.$slots,"default",{},void 0,!0),g("div",To,[g("div",Ro,[Ne(l.$slots,"prefix",{},void 0,!0)]),o.mode==="expand"?(d(!0),k(q,{key:0},oe(n(a),(u,v)=>{var c;return d(),k("div",{key:v,class:pe(["tabs-tab",{disabled:(c=u.props)==null?void 0:c.disabled,active:m(u,v)}]),onClick:f=>i(u,v)},[u.props.label?(d(),k("span",Po,[p(n(ct),{slots:u.props.label},null,8,["slots"])])):u.children.label?(d(),k("span",Uo,[p(n(ct),{slots:u.children.label()},null,8,["slots"])])):De("",!0)],10,No)}),128)):De("",!0),g("div",Xo,[Ne(l.$slots,"suffix",{},void 0,!0)])]),o.showContent?(d(),k("div",Oo,[(d(!0),k(q,null,oe(n(a),(u,v)=>(d(),k("div",{key:v},[u.type.name==="DvTabPane"?U((d(),k("div",Ho,[p(n(ct),{slots:u.children.default()},null,8,["slots"])],512)),[[W,m(u,v+1)]]):De("",!0)]))),128))])):De("",!0)]))}});var Vt=le(Wo,[["__scopeId","data-v-f36a7670"]]);const Ue=Y({name:"DvTabPane",props:{className:{type:String},label:{type:String},name:{type:String},disabled:{type:String}},render(){return null}});const At=o=>(He("data-v-4c04292c"),o=o(),We(),o),Yo={class:"side-bar"},Go={class:"label"},qo=At(()=>g("div",null,"\u7EC4\u4EF6",-1)),Ko={class:"label"},Jo=At(()=>g("div",null,"\u56FE\u5C42",-1)),Zo=Y({setup(o){et(i=>({"400e6896":a.value}));const e=D("expand"),t=D(!0),a=D("200px"),s=()=>{t.value=!t.value,t.value?(a.value="200px",e.value="expand"):(a.value="60px",e.value="shrink")};return(i,m)=>{const l=te("icon-components"),r=te("icon-layers"),u=te("icon-indent-left"),v=te("icon-indent-right");return d(),k("div",Yo,[p(n(Vt),{mode:e.value},{suffix:h(()=>[t.value?(d(),F(u,{key:0,theme:"outline",size:"18",fill:"var(--el-color-primary)",onClick:s})):(d(),F(v,{key:1,theme:"outline",size:"18",fill:"var(--el-color-primary)",onClick:s}))]),default:h(()=>[p(n(Ue),{name:"component"},{label:h(()=>[U(g("div",Go,[g("div",null,[p(l,{theme:"outline",size:"18",fill:"var(--el-color-primary)"})]),qo],512),[[W,t.value]])]),default:h(()=>[p(Bo,{mode:e.value},null,8,["mode"])]),_:1}),p(n(Ue),{name:"layer"},{label:h(()=>[U(g("div",Ko,[g("div",null,[p(r,{theme:"outline",size:"18",fill:"var(--el-color-primary)"})]),Jo],512),[[W,t.value]])]),default:h(()=>[p(jo,{mode:e.value},null,8,["mode"])]),_:1})]),_:1},8,["mode"])])}}});var Qo=le(Zo,[["__scopeId","data-v-4c04292c"]]);const ea=[{label:"4K",value:"3840X2160"},{label:"2k",value:"2048X1080"},{label:"1080P",value:"1920X1080"},{label:"720P",value:"1366X768"},{label:"iPhoneXR",value:"414X896"},{label:"iPhoneSE",value:"375X667"},{label:"iPhone12Pro",value:"390X884"},{label:"GalaxyS8+",value:"360X740"},{label:"GalaxyS20Ultra+",value:"412X915"},{label:"iPadAir",value:"820X1180"},{label:"iPadMini",value:"768X1024"},{label:"SurfacePro7",value:"912X1368"},{label:"NestHub",value:"1024X600"},{label:"NestMax",value:"1028X800"}];const ta={class:"attr-list",style:{height:"calc(100vh - 100px)"}},na=Y({setup(o){const e=X(()=>[{label:"\u672C\u8BBE\u5907",value:`${window.innerWidth}X${window.innerHeight}`},...ea]),t=de(),a=X(()=>t.canvasStyleData),s=D(""),i=[{key:"width",label:"\u5BBD\u5EA6",type:"number"},{key:"height",label:"\u9AD8\u5EA6",type:"number"},{key:"scale",label:"\u6BD4\u4F8B",type:"number"},{key:"dataWs",label:"\u5B9E\u65F6\u6570\u636E",type:"text"},{key:"image",label:"\u80CC\u666F\u56FE",type:"text"}],m=ue(["top","left","width","height","fontSize","borderWidth"]),l=D(a.value.scale),r=f=>f*l.value/100,u=f=>f/(a.value.scale/100),v=bt(()=>{l.value=~~l.value||1;const f=Te(t.componentData);f.forEach(b=>{Object.keys(b.style).forEach(S=>{m.includes(S)&&(b.style[S]=Math.ceil(r(u(b.style[S]))))})}),t.setComponentData(f),t.setCanvasStyle(Xe(me({},a.value),{scale:l.value}))},1e3),c=f=>{const b=f.split("X"),S=parseInt(b[0]),T=parseInt(b[1]);t.setCanvasStyle(Xe(me({},a.value),{width:S,height:T}))};return(f,b)=>(d(),k("div",ta,[p(n(Ye),{size:"mini",onSubmit:b[2]||(b[2]=Ee(()=>{},["prevent"]))},{default:h(()=>[p(n(Be),{label:"\u5206\u8FA8\u7387"},{default:h(()=>[p(n(Ge),{modelValue:s.value,"onUpdate:modelValue":b[0]||(b[0]=S=>s.value=S),onChange:c,placeholder:"\u9009\u62E9\u5206\u8FA8\u7387"},{default:h(()=>[(d(!0),k(q,null,oe(n(e),S=>(d(),F(n(qe),{key:S.label,value:S.value,label:S.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),(d(),k(q,null,oe(i,({key:S,label:T,type:B},P)=>p(n(Be),{key:P,label:T},{default:h(()=>[S==="scale"?(d(),F(n(at),{key:0,modelValue:l.value,"onUpdate:modelValue":b[1]||(b[1]=j=>l.value=j),onInput:n(v)},null,8,["modelValue","onInput"])):B==="number"?(d(),F(n(at),{key:1,modelValue:n(a)[S],"onUpdate:modelValue":j=>n(a)[S]=j},null,8,["modelValue","onUpdate:modelValue"])):(d(),F(n($e),{key:2,modelValue:n(a)[S],"onUpdate:modelValue":j=>n(a)[S]=j},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label"])),64))]),_:1})]))}});var oa=le(na,[["__scopeId","data-v-cffb31ec"]]);const aa=Y({props:{value:{default:""}},emits:["update:value","change"],setup(o,{emit:e}){const t=o,a=ue(["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"]),s=D(t.value),i=m=>{s.value=m||"",e("update:value",s.value),e("change",s.value)};return(m,l)=>(d(),F(n($e),{clearable:"",modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=r=>s.value=r),placeholder:"\u8BF7\u8F93\u5165\u989C\u8272",size:"mini",onChange:i},{append:h(()=>[p(n(mn),{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=r=>s.value=r),predefine:n(a),"show-alpha":"",size:"mini",onChange:i},null,8,["modelValue","predefine"])]),_:1},8,["modelValue"]))}});var la=le(aa,[["__scopeId","data-v-d3017dae"]]);const sa=[{label:"Arial",value:"Arial"},{label:"\u5FAE\u8F6F\u96C5\u9ED1",value:"Microsoft Yahei"},{label:"\u5B8B\u4F53",value:"SimSun"},{label:"\u9ED1\u4F53",value:"SimHei"},{label:"\u6977\u4F53",value:"KaiTi"},{label:"\u65B0\u5B8B\u4F53",value:"NSimSun"},{label:"\u4EFF\u5B8B",value:"FangSong"},{label:"\u82F9\u65B9",value:"PingFang SC"},{label:"\u534E\u6587\u9ED1\u4F53",value:"STHeiti"},{label:"\u534E\u6587\u6977\u4F53",value:"STKaiti"},{label:"\u534E\u6587\u5B8B\u4F53",value:"STSong"},{label:"\u534E\u6587\u4EFF\u5B8B",value:"STFangSong"},{label:"\u534E\u6587\u4E2D\u5B8B",value:"STZhongSong"},{label:"\u534E\u6587\u7425\u73C0",value:"STHupo"},{label:"\u534E\u6587\u65B0\u9B4F",value:"STXinwei"},{label:"\u534E\u6587\u96B6\u4E66",value:"STLiti"},{label:"\u534E\u6587\u884C\u6977",value:"STXingkai"},{label:"\u51AC\u9752\u9ED1\u4F53",value:"Hiragino Sans GB"},{label:"\u5170\u4EAD\u9ED1",value:"Lantinghei SC"},{label:"\u504F\u504F\u4F53",value:"Hanzipen SC"},{label:"\u624B\u672D\u4F53",value:"Hannotate SC"},{label:"\u5B8B\u4F53",value:"Songti SC"},{label:"\u5A03\u5A03\u4F53",value:"Wawati SC"},{label:"\u884C\u6977",value:"Xingkai SC"},{label:"\u5706\u4F53",value:"Yuanti SC"},{label:"\u534E\u6587\u7EC6\u9ED1",value:"STXihei"},{label:"\u5E7C\u5706",value:"YouYuan"},{label:"\u96B6\u4E66",value:"LiSu"},{label:"LED",value:"LED"},{label:"LCD",value:"LCD"}],ua=[{label:"100 Thin",value:100},{label:"200 ExtraThin",value:200},{label:"300 Light",value:300},{label:"400 Normal",value:400},{label:"500 Medium",value:500},{label:"600 Semi Bold",value:600},{label:"700 Bold",value:700},{label:"Extra Bold",value:800},{label:"Black",value:900}],ia=Y({props:{value:{default:""}},emits:["update:value","change"],setup(o,{emit:e}){const t=D(""),a=ue(sa),s=i=>{t.value=i,e("update:value",t.value),e("change",t.value)};return(i,m)=>(d(),F(n(Ge),{clearable:"",modelValue:t.value,"onUpdate:modelValue":m[0]||(m[0]=l=>t.value=l),placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53",size:"mini",onChange:s},{default:h(()=>[(d(!0),k(q,null,oe(n(a),(l,r)=>(d(),F(n(qe),{key:r,value:l.value,label:l.label,filterable:!0},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]))}}),ca=Y({props:{value:{default:""}},emits:["update:value","change"],setup(o,{emit:e}){const t=D(""),a=ue(ua),s=i=>{t.value=i,e("update:value",t.value),e("change",t.value)};return(i,m)=>(d(),F(n(Ge),{clearable:"",modelValue:t.value,"onUpdate:modelValue":m[0]||(m[0]=l=>t.value=l),placeholder:"\u8BF7\u9009\u62E9\u5B57\u91CD",size:"mini",onChange:s},{default:h(()=>[(d(!0),k(q,null,oe(n(a),(l,r)=>(d(),F(n(qe),{key:r,value:l.value,label:l.label,filterable:!0},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]))}}),jt=Y({props:{data:null,children:null,ukey:null},emits:["change"],setup(o,{emit:e}){const t=o,a=ue(t.data),s=(i,m)=>{e("change",i,m)};return we(()=>t.data,i=>{Object.assign(a,i)},{deep:!0}),(i,m)=>(d(!0),k(q,null,oe(o.children,({key:l,label:r,type:u,selectOptions:v})=>(d(),F(n(Be),{key:`${o.ukey}${l}`,label:r},{default:h(()=>[u==="color"?(d(),F(la,{key:0,value:n(a)[l],"onUpdate:value":c=>n(a)[l]=c,onChange:c=>s(c,l)},null,8,["value","onUpdate:value","onChange"])):u==="select"?(d(),F(n(Ge),{key:1,modelValue:n(a)[l],"onUpdate:modelValue":c=>n(a)[l]=c,placeholder:r,onChange:c=>s(c,l)},{default:h(()=>[(d(!0),k(q,null,oe(v,c=>(d(),F(n(qe),{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])):u==="radio"?(d(),F(n(vn),{key:2,modelValue:n(a)[l],"onUpdate:modelValue":c=>n(a)[l]=c,placeholder:r,onChange:c=>s(c,l)},{default:h(()=>[(d(!0),k(q,null,oe(v,c=>(d(),F(n(hn),{label:c.value,key:c.value},{default:h(()=>[Le(_e(c.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])):u==="number"?(d(),F(n(at),{key:3,modelValue:n(a)[l],"onUpdate:modelValue":c=>n(a)[l]=c,onChange:c=>s(c,l)},null,8,["modelValue","onUpdate:modelValue","onChange"])):u==="switch"?(d(),F(n(fn),{key:4,modelValue:n(a)[l],"onUpdate:modelValue":c=>n(a)[l]=c,onChange:c=>s(c,l)},null,8,["modelValue","onUpdate:modelValue","onChange"])):u==="fontStyle"?(d(),F(ia,{key:5,modelValue:n(a)[l],"onUpdate:modelValue":c=>n(a)[l]=c,onChange:c=>s(c,l)},null,8,["modelValue","onUpdate:modelValue","onChange"])):u==="fontWeight"?(d(),F(ca,{key:6,modelValue:n(a)[l],"onUpdate:modelValue":c=>n(a)[l]=c,onChange:c=>s(c,l)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(d(),F(n($e),{key:7,type:u,modelValue:n(a)[l],"onUpdate:modelValue":c=>n(a)[l]=c,onChange:c=>s(c,l)},null,8,["type","modelValue","onUpdate:modelValue","onChange"]))]),_:2},1032,["label"]))),128))}}),Mt=Y({props:{data:null,children:null,name:null,uid:null,ukey:null},emits:["change"],setup(o,{emit:e}){const a=ue(o.data),s=(i,m)=>{e("change",m,i)};return(i,m)=>(d(),F(n(lt),{title:o.name,name:o.uid},{default:h(()=>[p(jt,{children:o.children,data:n(a),ukey:o.ukey,onChange:s},null,8,["children","data","ukey"])]),_:1},8,["title","name"]))}});const ra={class:"attr-list",style:{height:"calc(100vh - 100px)"}},da=Y({props:{curComponent:null},setup(o){const e=o,t=D(),a=de(),s=ue({}),i=X(()=>{if(e.curComponent&&e.curComponent.component in Ce){const v=Ce[e.curComponent.component].style;return e.curComponent.groupStyle&&(v[0]=Jt),Ce[e.curComponent.component].style}return[]}),m=(v,c)=>{e.curComponent&&a.setCurComponentStyle(v,c)};Ae("changeStyle",v=>{const c=v;e.curComponent&&e.curComponent.id===c.id&&r(c.style)});const r=bt(v=>{const c=Zt(v,s);c&&Object.keys(c).forEach(f=>{s[f]=c[f]})},200),u=()=>{Ct(s),e.curComponent&&r(me(me({},e.curComponent.style),e.curComponent.groupStyle||{}))};return we(()=>e.curComponent.id,()=>{u()},{immediate:!0}),(v,c)=>(d(),k("div",ra,[p(n(Pe),null,{default:h(()=>[p(n(Ye),{size:"mini",onSubmit:c[1]||(c[1]=Ee(()=>{},["prevent"]))},{default:h(()=>[(d(!0),k(q,null,oe(n(i),({name:f,uid:b,children:S})=>(d(),F(n(st),{modelValue:t.value,"onUpdate:modelValue":c[0]||(c[0]=T=>t.value=T),accordion:"",key:`${o.curComponent.id}${b}`},{default:h(()=>[p(Mt,{children:S,data:n(s),onChange:m,name:f,uid:b,ukey:o.curComponent.id},null,8,["children","data","name","uid","ukey"])]),_:2},1032,["modelValue"]))),128))]),_:1})]),_:1})]))}});var pa=le(da,[["__scopeId","data-v-b7f8652e"]]);const ma=Y({props:{curComponent:null},setup(o){const e=o,t=D(""),a=de(),s=i=>{a.setCurComponentProps("label",i)};return we(()=>e.curComponent,()=>{t.value=e.curComponent.label||""},{immediate:!0}),(i,m)=>(d(),F(n(st),null,{default:h(()=>[p(n(lt),{title:"\u516C\u5171\u5C5E\u6027",name:"commonAttr"},{default:h(()=>[p(n(Be),{label:"\u7C7B\u578B"},{default:h(()=>[p(n($e),{"model-value":o.curComponent.component,readonly:!0},null,8,["model-value"])]),_:1}),p(n(Be),{label:"ID"},{default:h(()=>[p(n($e),{"model-value":o.curComponent.id,readonly:!0},null,8,["model-value"])]),_:1}),p(n(Be),{label:"\u540D\u79F0"},{default:h(()=>[p(n($e),{modelValue:t.value,"onUpdate:modelValue":m[0]||(m[0]=l=>t.value=l),onChange:m[1]||(m[1]=l=>s(l))},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}))}});const va={class:"dynamic"},ha={class:"title"},fa={class:"delete"},ya=Le("+"),_a=Y({props:{data:null,children:null,name:null,uid:null,max:null,ukey:null},emits:["change"],setup(o,{emit:e}){const t=o,a=D(t.data),s=()=>{e("change",a.value,t.uid)},i=X(()=>a.value.length<t.max),m=r=>{a.value.splice(r,1),e("change",a.value,t.uid)},l=()=>{const r=a.value.length,u={};t.children.map(v=>{r>0?u[v.key]=a.value[r-1][v.key]:u[v.key]=""}),a.value.push(u),e("change",a.value,t.uid)};return(r,u)=>{const v=te("icon-delete-one");return d(),k(q,null,[(d(!0),k(q,null,oe(a.value,(c,f)=>(d(),F(n(lt),{key:`${o.ukey}${f}`,title:o.max>1?`${o.name}${f}`:o.name,name:o.max>1?`${o.uid}${f}`:o.uid},{title:h(()=>[g("div",va,[g("div",ha,_e(o.max>1?`${o.name}${f}`:o.name),1),g("div",fa,[p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[p(v,{theme:"outline",size:"24",fill:"var(--el-color-primary)",onClick:b=>m(f)},null,8,["onClick"])]),_:2},1024)])])]),default:h(()=>[p(jt,{children:o.children,data:c,ukey:o.ukey,onChange:s},null,8,["children","data","ukey"])]),_:2},1032,["title","name"]))),128)),U(p(n(fe),{class:"add",onClick:l},{default:h(()=>[ya]),_:1},512),[[W,n(i)]])],64)}}});var ga=le(_a,[["__scopeId","data-v-3cd1ff2a"]]);const Ca={class:"attr-list",style:{height:"calc(100vh - 120px)"}},ba=Y({props:{curComponent:null},setup(o){const e=o,t=D(),a=de(),s=ue({}),i=X(()=>e.curComponent&&e.curComponent.component in Ce?Ce[e.curComponent.component].attrs:[]),m=(r,u)=>{a.setCurComponentPropValue(r,u)},l=()=>{if(Ct(s),e.curComponent&&e.curComponent.propValue){const r=e.curComponent.propValue;Object.keys(r).forEach(u=>{s[u]=r[u]})}};return we(()=>e.curComponent.id,()=>{l()},{immediate:!0}),(r,u)=>(d(),k("div",Ca,[o.curComponent?(d(),F(n(Pe),{key:0},{default:h(()=>[p(n(Ye),{size:"mini",onSubmit:u[1]||(u[1]=Ee(()=>{},["prevent"]))},{default:h(()=>[p(ma,{curComponent:o.curComponent},null,8,["curComponent"]),(d(!0),k(q,null,oe(n(i),({name:v,uid:c,children:f,max:b})=>(d(),F(n(st),{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=S=>t.value=S),accordion:"",key:`${o.curComponent.id}${c}`},{default:h(()=>[!b||b<1?(d(),F(Mt,{key:0,children:f,data:n(s),onChange:m,name:v,uid:c,ukey:o.curComponent.id},null,8,["children","data","name","uid","ukey"])):(d(),F(ga,{key:1,children:f,data:n(s)[c]||[],onChange:m,name:v,uid:c,max:b,ukey:o.curComponent.id},null,8,["children","data","name","uid","max","ukey"]))]),_:2},1032,["modelValue"]))),128))]),_:1})]),_:1})):De("",!0)]))}});var xa=le(ba,[["__scopeId","data-v-1273abb0"]]);const rt=o=>(He("data-v-0051bb92"),o=o(),We(),o),Sa={class:"side-bar"},Ea=rt(()=>g("span",null,"\u6837\u5F0F",-1)),Da=rt(()=>g("span",null,"\u5C5E\u6027",-1)),wa=rt(()=>g("span",null,"\u753B\u5E03",-1)),ka=Y({setup(o){et(l=>({"62d5ac3f":s.value}));const e=de(),t=D("expand"),a=D(!0),s=D("240px"),i=()=>{a.value=!a.value,a.value?(s.value="240px",t.value="expand"):(s.value="20px",t.value="shrink")},m=X(()=>e.curComponent||e.layerComponent);return(l,r)=>{const u=te("icon-indent-right"),v=te("icon-indent-left"),c=te("icon-text-style"),f=te("icon-internal-data"),b=te("icon-page");return d(),k("div",Sa,[p(n(Vt),{mode:t.value},{prefix:h(()=>[a.value?(d(),F(u,{key:0,theme:"outline",size:"18",fill:"var(--el-color-primary)",onClick:i})):(d(),F(v,{key:1,theme:"outline",size:"18",fill:"var(--el-color-primary)",onClick:i}))]),default:h(()=>[p(n(Ue),{name:"style"},{label:h(()=>[p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[p(c,{theme:"outline",size:"24"})]),_:1}),Ea]),default:h(()=>[U(g("div",null,[n(m)?(d(),F(n(pa),{key:0,curComponent:n(m)},null,8,["curComponent"])):(d(),F(n(ot),{key:1,class:"placeholder"},{default:h(()=>[p(n(nt),null,{default:h(()=>[p(n(tt),{description:"\u8BF7\u9009\u62E9\u7EC4\u4EF6"})]),_:1})]),_:1}))],512),[[W,t.value==="expand"]])]),_:1}),p(n(Ue),{name:"attr"},{label:h(()=>[p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[p(f,{theme:"outline",size:"24"})]),_:1}),Da]),default:h(()=>[U(g("div",null,[n(m)?(d(),F(n(xa),{key:0,curComponent:n(m)},null,8,["curComponent"])):(d(),F(n(ot),{key:1,class:"placeholder"},{default:h(()=>[p(n(nt),null,{default:h(()=>[p(n(tt),{description:"\u8BF7\u9009\u62E9\u7EC4\u4EF6"})]),_:1})]),_:1}))],512),[[W,t.value==="expand"]])]),_:1}),p(n(Ue),{name:"canvas"},{label:h(()=>[p(n(re),{style:{"vertical-align":"middle"}},{default:h(()=>[p(b,{theme:"outline",size:"24"})]),_:1}),wa]),default:h(()=>[U(p(oa,null,null,512),[[W,t.value==="expand"]])]),_:1})]),_:1},8,["mode"])])}}});var Fa=le(ka,[["__scopeId","data-v-0051bb92"]]);const Ba={class:"home"},$a={class:"left"},za={class:"right"},La=Y({setup(o){const e=de(),t=D(null),a=D(null),s=ue({type:"dashed",width:1,color:"red"}),i=Et();Fe(()=>ce(this,null,function*(){const B=i.params.index;B&&(yield m(B))}));const m=B=>ce(this,null,function*(){const P=yield cn(B);!P||e.setLayoutData(P)}),l=D(0),r=D(0),u=X(()=>({width:l.value-18+"px",height:r.value-18+"px"})),v=B=>{const P=B[0],{width:j,height:ne}=P.contentRect;l.value=j,r.value=ne},c=B=>ce(this,null,function*(){B.preventDefault(),B.stopPropagation();const P=B.dataTransfer.getData("componentName");if(P){const j=Te(Ce[P].component);j.style.top=B.offsetY,j.style.left=B.offsetX,e.appendComponent(j)}}),f=B=>{B.preventDefault(),B.dataTransfer.dropEffect="copy"},b=()=>{e.setClickComponentStatus(!1)},S=()=>{e.isClickComponent||e.setCurComponent(void 0)};we(()=>e.canvasStyleData.dataWs,B=>{var P;(P=t.value)==null||P.close(),B&&(t.value=T("actual",B))});const T=(B,P)=>{const j=new WebSocket(P);return j.onopen=()=>{console.log("websocket\u8FDE\u63A5\u6210\u529F")},j.onclose=()=>{console.log("websocket\u8FDE\u63A5\u88AB\u5173\u95ED")},j.onmessage=ne=>{const O=JSON.parse(ne.data);xe.emit(B,O)},j};return Oe(()=>{var B;(B=t.value)==null||B.close(),e.clearCanvas()}),(B,P)=>{const j=Re("resize");return d(),k("div",Ba,[p(n(Co)),g("main",null,[g("section",$a,[p(n(Qo))]),U(g("section",{class:"center scrollbar",ref:(ne,O)=>{O.editor=ne,a.value=ne}},[g("div",{class:"content scrollbar",style:ge(n(u))},[p(wo,{borderStyle:n(s)},{default:h(()=>[p(On,{onDrop:c,onDragover:f,onMousedown:b,onMouseup:S})]),_:1},8,["borderStyle"])],4)],512),[[j,v]]),g("section",za,[p(n(Fa))])])])}}});var Qa=le(La,[["__scopeId","data-v-6e1f6e93"]]);export{Qa as default};
