var k=(r,_,c)=>new Promise((e,b)=>{var p=s=>{try{i(c.next(s))}catch(u){b(u)}},v=s=>{try{i(c.throw(s))}catch(u){b(u)}},i=s=>s.done?e(s.value):Promise.resolve(s.value).then(p,v);i((c=c.apply(r,_)).next())});import{d as M,A as t,c as E,u as z,C as G,N as A,o as g,b as C,F as N,r as T,W as P,P as n,T as f,f as W,a as $,Q as L,R as O,_ as Q}from"./index.1dcaaf11.js";import{u as U}from"./useProp.b9693bc0.js";import{h as j}from"./index.b703efc8.js";const q=r=>(L("data-v-22d6e9db"),r=r(),O(),r),J={class:"ranking-info"},K={class:"rank"},X={class:"info-name"},Y={class:"ranking-value"},Z={class:"ranking-column"},aa=q(()=>n("div",{class:"shine"},null,-1)),ea=[aa],oa=M({__name:"RankBoard",props:{component:null},setup(r){const _=r;P(o=>({"08b9726a":v.value,"431f0c5d":u.value,e2bb586e:i.value,"6abe476c":s.value,"587c7d96":D.value,"035e74d6":V.value,ced88640:p.value,"7de4436f":$(F),"76af80d0":w.value,b77eff50:B.value,"3e70b5b0":h.value}));const c=(o,l,a)=>{if(o==="bar")switch(l){case"barHeight":p.value=`${a}px`;break;case"borderRadius":B.value=`${a}px`;break;case"color1":h.value=a;break;case"color2":S.value=a;break}else if(o==="line")switch(l){case"lineHeight":D.value=`${a}px`;break;case"borderGap":w.value=`${a}px`;break;case"lineColor":V.value=a;break}else if(o==="text")switch(l){case"fontSize":v.value=`${a}px`;break;case"labelColor":i.value=a;break;case"valueColor":s.value=a;break;case"rankColor":u.value=a;break}o==="data"&&l==="unit"&&(b.value=a)},{propValue:e}=U(_.component,c),b=t(e.data.unit),p=t(`${e.bar.barHeight}px`),v=t(`${e.text.fontSize}px`),i=t(e.text.labelColor||"#fff"),s=t(e.text.valueColor||"#fff"),u=t(e.text.rankColor||"#fff"),h=t(e.bar.color1||"#3DE7C9"),S=t(e.bar.color2||"#00BAFF"),B=t(`${e.bar.borderRadius}px`),D=t(`${e.line.lineHeight}px`),w=t(`${e.line.borderGap}px`),V=t(e.line.lineColor||"#3DE7C9"),F=E(()=>`linear-gradient(to right, ${h.value}, ${S.value})`);let d;const I=z(),m=t([]),H=E(()=>e.data.maxValue?e.data.maxValue:Math.max(...m.value.map(o=>o.value))),R=o=>{o.sort((l,a)=>a.value-l.value),m.value=o},y=()=>k(this,null,function*(){if(e.data.url)try{const o=yield j.post({url:e.data.url});o.status===200&&R(o.data)}catch(o){if(console.log(o.message||o),I.isEditMode){const a=["\u79E6","\u9F50","\u695A","\u8D75","\u71D5","\u97E9","\u9B4F"].map(x=>({label:x,value:Math.round(Math.random()*(e.data.maxValue||100))}));R(a)}}console.log("update Data")});return G(()=>k(this,null,function*(){yield y(),d&&clearTimeout(d),d=setInterval(y,e.data.interval||1e5),console.log(d)})),A(()=>{d&&clearTimeout(d)}),(o,l)=>(g(),C("div",{class:"dv-scroll-ranking-board",ref:t},[(g(!0),C(N,null,T(m.value,(a,x)=>(g(),C("div",{class:"row-item",key:a.label},[n("div",J,[n("div",K,"No."+f(x+1),1),n("div",X,f(a.label),1),n("div",Y,f(a.value)+" "+f(b.value),1)]),n("div",Z,[n("div",{class:"inside-column",style:W({width:`${$(H)?a.value*100/$(H):100}%`})},ea,4)])]))),128))]))}});const na=Q(oa,[["__scopeId","data-v-22d6e9db"]]);export{na as default};
