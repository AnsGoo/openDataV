var k=(r,_,c)=>new Promise((e,d)=>{var v=s=>{try{i(c.next(s))}catch(u){d(u)}},b=s=>{try{i(c.throw(s))}catch(u){d(u)}},i=s=>s.done?e(s.value):Promise.resolve(s.value).then(v,b);i((c=c.apply(r,_)).next())});import{d as M,r as t,i as F,q as z,a as G,v as A,o as g,c as C,F as N,e as T,b as n,t as f,l as j,u as $,x as q,p as L,j as O,_ as P}from"./index.f4fea15b.js";import{u as U}from"./useProp.afe31ed3.js";import{h as W}from"./index.d51a824f.js";const J=r=>(L("data-v-d2aadc5f"),r=r(),O(),r),K={class:"ranking-info"},Q={class:"rank"},X={class:"info-name"},Y={class:"ranking-value"},Z={class:"ranking-column"},aa=J(()=>n("div",{class:"shine"},null,-1)),ea=[aa],oa=M({__name:"RankBoard",props:{component:null},setup(r){const _=r;q(o=>({"5f092864":b.value,"9273d4ba":u.value,e047197a:i.value,"6bf866e6":s.value,"56083ea2":w.value,"71f7cedb":V.value,"0c3ac626":v.value,"0dae15e9":$(R),"2b52ebd4":D.value,"3f70a952":B.value,"09a091a2":h.value}));const c=(o,l,a)=>{if(o==="bar")switch(l){case"barHeight":v.value=`${a}px`;break;case"borderRadius":B.value=`${a}px`;break;case"color1":h.value=a;break;case"color2":S.value=a;break}else if(o==="line")switch(l){case"lineHeight":w.value=`${a}px`;break;case"borderGap":D.value=`${a}px`;break;case"lineColor":V.value=a;break}else if(o==="text")switch(l){case"fontSize":b.value=`${a}px`;break;case"labelColor":i.value=a;break;case"valueColor":s.value=a;break;case"rankColor":u.value=a;break}o==="data"&&l==="unit"&&(d.value=a)},{propValue:e}=U(_.component,c),d=t(e.data.unit),v=t(`${e.bar.barHeight}px`),b=t(`${e.text.fontSize}px`),i=t(e.text.labelColor||"#fff"),s=t(e.text.valueColor||"#fff"),u=t(e.text.rankColor||"#fff"),h=t(e.bar.color1||"#3DE7C9"),S=t(e.bar.color2||"#00BAFF"),B=t(`${e.bar.borderRadius}px`),w=t(`${e.line.lineHeight}px`),D=t(`${e.line.borderGap}px`),V=t(e.line.lineColor||"#3DE7C9"),R=F(()=>`linear-gradient(to right, ${h.value}, ${S.value})`);let p;const I=z(),m=t([]),H=F(()=>e.data.maxValue?e.data.maxValue:Math.max(...m.value.map(o=>o.value))),y=o=>{o.sort((l,a)=>a.value-l.value),m.value=o},E=()=>k(this,null,function*(){if(e.data.url)try{const o=yield W.post({url:e.data.url});o.status===200&&y(o.data)}catch(o){if(console.log(o.message||o),I.isEditMode){const a=["\u79E6","\u9F50","\u695A","\u8D75","\u71D5","\u97E9","\u9B4F"].map(x=>({label:x,value:Math.round(Math.random()*(e.data.maxValue||100))}));y(a)}}});return G(()=>k(this,null,function*(){yield E(),p&&clearTimeout(p),p=setInterval(E,e.data.interval||1e5)})),A(()=>{p&&clearTimeout(p)}),(o,l)=>(g(),C("div",{class:"dv-scroll-ranking-board",ref:t},[(g(!0),C(N,null,T(m.value,(a,x)=>(g(),C("div",{class:"row-item",key:a.label},[n("div",K,[n("div",Q,"No."+f(x+1),1),n("div",X,f(a.label),1),n("div",Y,f(a.value)+" "+f(d.value),1)]),n("div",Z,[n("div",{class:"inside-column",style:j({width:`${$(H)?a.value*100/$(H):100}%`})},ea,4)])]))),128))]))}});const na=P(oa,[["__scopeId","data-v-d2aadc5f"]]);export{na as default};
