var rt=Object.defineProperty,dt=Object.defineProperties;var mt=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var pt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable;var Pe=(t,a,e)=>a in t?rt(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,de=(t,a)=>{for(var e in a||(a={}))pt.call(a,e)&&Pe(t,e,a[e]);if(Me)for(var e of Me(a))vt.call(a,e)&&Pe(t,e,a[e]);return t},Ce=(t,a)=>dt(t,mt(a));var ee=(t,a,e)=>new Promise((l,c)=>{var s=p=>{try{i(e.next(p))}catch(d){c(d)}},v=p=>{try{i(e.throw(p))}catch(d){c(d)}},i=p=>p.done?l(p.value):Promise.resolve(p.value).then(s,v);i((e=e.apply(t,a)).next())});import{d as R,r as B,e as we,k as U,a5 as ge,u as P,v as ae,O as _,X as A,Y as z,Z as _e,R as me,G as n,B as Y,w as ve,c as u,F as G,_ as oe,P as S,a2 as Ie,a8 as ft,y as Re,Q as m,W as _t,$ as xe,U as Fe,a3 as De,a as Ee,a0 as ht,a1 as gt,m as le}from"./@vue.a2815691.js";import{_ as q,n as ie,u as ue,b as Se,o as Le,E as je,f as Xe,q as yt,l as Je,m as ce,t as bt,v as Ct,w as xt,x as re,y as Qe,I as ne,i as St,F as J,G as Te,z as wt,A as Ze}from"./index.512f7100.js";import{u as et,a as tt,S as Ft}from"./Shape.e4db0ada.js";import{u as Dt,a as nt}from"./vue-router.c997c3e8.js";import{u as Et,s as kt,g as Bt}from"./pages.28de9e81.js";import{A as at,B as lt,C as W,h as te,g as $t,D as ke,E as H,F as pe,f as Ue,G as It,H as Nt,I as Lt,J as fe,K as Be,k as he,L as ye,M as ot,O as Ae,P as Tt,Q as At,i as ut,R as $e,S as Ve,v as zt,t as Oe,y as Ne,w as Rt}from"./naive-ui.3474528c.js";import{d as ze,c as st}from"./lodash-es.5f1bdab1.js";import"./pinia.6e1173f7.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./dexie.78e6a997.js";import"./lodash.f91bfcd2.js";import"./axios.744bc20e.js";import"./nprogress.5b68415b.js";import"./@icon-park.b1426ebe.js";import"./date-fns.3c009aaa.js";import"./seemly.50a99b79.js";import"./vueuc.e50d3fb2.js";import"./evtd.9eee5233.js";import"./@css-render.8efa119b.js";import"./vooks.5c35c0ee.js";import"./vdirs.9c42edfb.js";import"./@juggle.37ed2144.js";import"./css-render.d5050412.js";import"./@emotion.6322e2ae.js";import"./treemate.80cdf2c2.js";import"./date-fns-tz.851ed5df.js";import"./async-validator.fb49d0f5.js";import"./index.44c3d648.js";const Ut={class:"value"},Vt=R({__name:"RulerLine",props:{scale:null,thick:null,palette:null,index:null,start:null,vertical:{type:Boolean},value:null,isShowReferLine:{type:Boolean}},emits:["onMouseDown","onRelease","onRemove"],setup(t,{emit:a}){const e=t,l=B(0),c=B(!0);we(()=>{l.value=e.value});const s=r=>{c.value=r>=0},v=U(()=>{const r=(l.value-e.start)*e.scale;s(r);const g=r+"px";return e.vertical?{top:g}:{left:g}}),i=U(()=>{var y,b;const r=`1px ${((y=e.palette)==null?void 0:y.lineBoardStyle)||"dashed"} ${(b=e.palette)==null?void 0:b.lineColor}`,g=e.vertical?{borderTop:r}:{borderLeft:r},h=e.isShowReferLine?e.vertical?"ns-resize":"ew-resize":"none";return de({cursor:h},g)}),p=U(()=>e.vertical?{left:e.thick+"px"}:{top:e.thick+"px"}),d=r=>{r.stopPropagation();const g=e.vertical?r.clientY:r.clientX,h=l.value;a("onMouseDown");const y=T=>{const I=e.vertical?T.clientY:T.clientX,j=Math.round(h+(I-g)/e.scale);l.value=j},b=()=>{a("onRelease",l.value,e.index),document.removeEventListener("mousemove",y,!0),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",y,!0),document.addEventListener("mouseup",b)},f=()=>{a("onRemove",e.index)},o=()=>[{text:"\u5220\u9664",subText:"",handler:()=>f()}];return(r,g)=>{const h=ge("contextmenu");return P((_(),A("div",{class:"line",style:me([n(v),n(i)]),onMousedown:d},[z("div",{class:"action",style:me(n(p))},[z("span",Ut,_e(l.value),1)],4)],36)),[[ae,c.value],[h,o]])}}});var Mt=q(Vt,[["__scopeId","data-v-9030b9ae"]]);const Pt=t=>t<=.25?40:t<=.5?20:t<=1?10:t<=2?5:t<=4?2:1,He=.83,jt=(t,a,e,l,c,s)=>{const{scale:v,width:i,height:p,ratio:d,palette:f}=c,{bgColor:o,fontColor:r,shadowColor:g,longfgColor:h,shortfgColor:y}=f;if(t.scale(d,d),t.clearRect(0,0,i,p),t.fillStyle=o,t.fillRect(0,0,i,p),l){const k=(e-a)*v,D=l*v;t.fillStyle=g,s?t.fillRect(k,0,D,p*3/8):t.fillRect(0,k,i*3/8,D)}const b=Pt(v),T=b*v,I=b*10,j=I*v,M=Math.floor(a/b)*b,C=Math.floor(a/I)*I,x=(M-a)/b*T,w=(C-a)/I*j,$=a+Math.ceil((s?i:p)/v);t.beginPath(),t.fillStyle=r,t.strokeStyle=h;for(let k=C,D=0;k<$;k+=I,D++){const F=w+D*j+.5;s?t.moveTo(F,0):t.moveTo(0,F),t.save(),s?t.translate(F,p*.4):t.translate(i*.4,F),s||t.rotate(-Math.PI/2),t.scale(He/d,He/d),t.fillText(k.toString(),4*d,7*d),t.restore(),s?t.lineTo(F,p*9/16):t.lineTo(i*9/16,F)}t.stroke(),t.closePath(),t.beginPath(),t.strokeStyle=y;for(let k=M,D=0;k<$;k+=b,D++){const F=x+D*T+.5;s?t.moveTo(F,0):t.moveTo(0,F),k%I!==0&&(s?t.lineTo(F,p*1/4):t.lineTo(i*1/4,F))}t.stroke(),t.closePath(),t.setTransform(1,0,0,1,0,0)},Xt=R({__name:"index",props:{showIndicator:{type:Boolean},valueNum:null,scale:null,ratio:null,palette:null,vertical:{type:Boolean},start:null,width:null,height:null,selectStart:null,selectLength:null},emits:["onAddLine","update:showIndicator","update:valueNum"],setup(t,{emit:a}){const e=t,l=Y({canvasContext:null});let c=1;const s=B(null);we(()=>{c=e.ratio||window.devicePixelRatio||1,v(),i(c),p(c)});const v=()=>{l.canvasContext=s.value&&s.value.getContext("2d")},i=f=>{if(s.value){s.value.width=e.width*f,s.value.height=e.height*f;const o=l.canvasContext;o&&(o.font=`${12*f}px -apple-system,
                "Helvetica Neue", ".SFNSText-Regular",
                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",
                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif`,o.lineWidth=1,o.textBaseline="middle")}},p=f=>{const o={scale:e.scale,width:e.width,height:e.height,palette:e.palette,ratio:f};l.canvasContext&&jt(l.canvasContext,e.start,e.selectStart,e.selectLength,o,!e.vertical)};ve(()=>e.start,()=>p(c)),ve([()=>e.width,()=>e.height],()=>{i(c),p(c)});const d=(f,o)=>{const r=(y,b,T)=>Math.round(b+y/T),g=e.vertical?f.offsetY:f.offsetX,h=r(g,e.start,e.scale);switch(o){case"click":a("onAddLine",h);break;case"enter":a("update:valueNum",h),a("update:showIndicator",!0);break;default:a("update:valueNum",h);break}};return(f,o)=>(_(),A("canvas",{ref_key:"canvas",ref:s,class:"ruler",onClick:o[0]||(o[0]=r=>d(r,"click")),onMouseenter:o[1]||(o[1]=r=>d(r,"enter")),onMousemove:o[2]||(o[2]=r=>d(r,"move")),onMouseleave:o[3]||(o[3]=r=>f.$emit("update:showIndicator",!1))},null,544))}});const Ot={class:"lines"},Ht={class:"value"},Wt=R({__name:"RulerWrapper",props:{scale:null,ratio:null,thick:null,selectStart:null,selectLength:null,isShowReferLine:{type:Boolean},palette:null,vertical:{type:Boolean,default:!0},width:{default:200},height:{default:200},start:{default:0}},setup(t,{expose:a}){const e=t,l=B(!1),c=B(0),s=B([]),v=U(()=>e.vertical?"v-container":"h-container");a({clearLines:()=>{s.value=[]}});const p=U(()=>{const g={width:`calc(100% - ${e.thick}px)`,height:`${e.thick+1}px`,left:`${e.start}px`},h={width:`${e.thick&&e.thick+1}px`,height:`calc(100% - ${e.thick}px)`,top:`${e.start}px`};return e.vertical?h:g}),d=U(()=>{var b,T;const g=(c.value-(e.start||0))*e.scale;let h="top",y="borderLeft";return h=e.vertical?"top":"left",y=e.vertical?"borderBottom":"borderLeft",{[h]:g+"px",[y]:`1px ${((b=e.palette)==null?void 0:b.lineBoardStyle)||"dashed"} ${(T=e.palette)==null?void 0:T.lineColor}`}}),f=g=>{s.value.push(g)},o=(g,h)=>{const y=g-(e.start||0),b=(e.vertical?e.height||200:e.width||200)/e.scale;y<0||y>b?r(h):s.value[h]=g},r=g=>{s.value.splice(g,1)};return(g,h)=>(_(),A("div",{class:Ie(n(v)),style:me(n(p))},[u(Xt,{vertical:t.vertical,scale:t.scale,width:t.width,height:t.height,start:t.start,ratio:t.ratio,"select-start":t.selectStart,"select-length":t.selectLength,palette:t.palette,valueNum:c.value,"onUpdate:valueNum":h[0]||(h[0]=y=>c.value=y),showIndicator:l.value,"onUpdate:showIndicator":h[1]||(h[1]=y=>l.value=y),onOnAddLine:f},null,8,["vertical","scale","width","height","start","ratio","select-start","select-length","palette","valueNum","showIndicator"]),P(z("div",Ot,[(_(!0),A(G,null,oe(s.value,(y,b)=>(_(),S(Mt,{key:y+b,index:b,value:y>>0,scale:t.scale,start:t.start,thick:t.thick,palette:t.palette,vertical:t.vertical,"is-show-refer-line":t.isShowReferLine,onOnRemove:r,onOnRelease:o},null,8,["index","value","scale","start","thick","palette","vertical","is-show-refer-line"]))),128))],512),[[ae,t.isShowReferLine]]),P(z("div",{class:"indicator",style:me(n(d))},[z("div",Ht,_e(c.value),1)],4),[[ae,l.value]])],6))}});var We=q(Wt,[["__scopeId","data-v-5a545815"]]);const Yt={id:"mb-ruler",class:"style-ruler mb-ruler"},Gt=R({__name:"Index",props:{scale:{default:1},ratio:{default:0},thick:{default:16},palette:null,startX:null,startY:null,width:{default:200},height:{default:200},shadow:null},setup(t){const a=t,e=B(null),l=B(null),c=B(!0),s=()=>{var p,d;(p=e.value)==null||p.clearLines(),(d=l.value)==null||d.clearLines(),c.value=!0},v=()=>[{text:"\u663E\u793A\u8F85\u52A9\u7EBF",subText:"",disable:c.value,handler:()=>c.value=!0},{text:"\u9690\u85CF\u8F85\u52A9\u7EBF",subText:"",disable:!c.value,handler:()=>c.value=!1},{text:"\u6E05\u7A7A\u8F85\u52A9\u7EBF",subText:"",disable:!c.value,handler:s}],i=U(()=>{function p(d,f){return Object.keys(d).forEach(o=>{o&&d.hasOwnProperty(o)&&(typeof f.key=="object"?d[o]=p(d[o],f[o]):f.hasOwnProperty(o)&&(d[o]=f[o]))}),d}return p({bgColor:"rgba(225,225,225, 0)",longfgColor:"#BABBBC",shortfgColor:"#C8CDD0",fontColor:"#7D8694",shadowColor:"#E8E8E8",lineColor:"#37d4cf",lineBoardStyle:"dashed",borderColor:"#DADADC",cornerActiveColor:"rgb(235, 86, 72, 0.6)",menu:{bgColor:"#fff",dividerColor:"#DBDBDB",listItem:{textColor:"#415058",hoverTextColor:"#298DF8",disabledTextColor:"rgba(65, 80, 88, 0.4)",bgColor:"#fff",hoverBgColor:"#F2F2F2"}}},a.palette||{})});return(p,d)=>{var o,r,g,h;const f=ge("contextmenu");return P((_(),A("div",Yt,[u(We,{vertical:!1,ref_key:"HRulerWrapperref",ref:l,width:t.width,height:16,"is-show-refer-line":c.value,thick:t.thick,ratio:t.ratio,start:t.startX,"select-start":((o=t.shadow)==null?void 0:o.x)||0,"select-length":((r=t.shadow)==null?void 0:r.width)||0,scale:t.scale,palette:n(i)},null,8,["width","is-show-refer-line","thick","ratio","start","select-start","select-length","scale","palette"]),u(We,{vertical:!0,ref_key:"VRulerWrapperref",ref:e,width:16,height:t.height,"is-show-refer-line":c.value,thick:t.thick,ratio:t.ratio,start:t.startY,"select-start":((g=t.shadow)==null?void 0:g.y)||0,"select-length":((h=t.shadow)==null?void 0:h.height)||0,scale:t.scale,palette:n(i)},null,8,["height","is-show-refer-line","thick","ratio","start","select-start","select-length","scale","palette"])])),[[f,v]])}}}),qt=R({__name:"Ruler",props:{width:null,height:null,startX:null,startY:null},setup(t){return(a,e)=>(_(),S(n(Gt),{thick:16,scale:1,width:t.width,height:t.height,startX:t.startX,startY:t.startY},null,8,["width","height","startX","startY"]))}});const Kt=R({__name:"Area",props:{start:null,width:null,height:null},setup(t){const a=et(),e=()=>{a.compose(),ie.emit("hideArea")},l=()=>{a.flushLeft(),ie.emit("hideArea")},c=()=>{a.flushRight(),ie.emit("hideArea")},s=()=>{a.flushTop(),ie.emit("hideArea")},v=()=>{a.flushBottom(),ie.emit("hideArea")},i=()=>{a.flushRow(),ie.emit("hideArea")},p=()=>{a.flushColumn(),ie.emit("hideArea")},d=()=>{a.batchDeleteComponent(a.components),ie.emit("hideArea")},f=()=>[{text:"\u7EC4\u5408",subText:"",disable:!a.canCompose,handler:e},{divider:!0},{text:"\u5220\u9664",subText:"",disable:a.components.length<=0,handler:d},{divider:!0},{text:"\u5DE6\u5BF9\u9F50",subText:"",handler:l},{text:"\u53F3\u5BF9\u9F50",subText:"",handler:c},{text:"\u9876\u5BF9\u9F50",subText:"",handler:s},{text:"\u5E95\u5BF9\u9F50",subText:"",handler:v},{divider:!0},{text:"\u6C34\u5E73\u5BF9\u9F50",subText:"",handler:i},{text:"\u5782\u76F4\u5BF9\u9F50",subText:"",handler:p}];return(o,r)=>{const g=ge("contextmenu");return P((_(),A("div",{style:me({left:t.start.x+"px",top:t.start.y+"px",width:t.width+"px",height:t.height+"px"}),class:"area"},null,4)),[[g,f]])}}});var Ye=q(Kt,[["__scopeId","data-v-37e75a17"]]);const Jt={},Qt={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},Zt=ft('<defs data-v-c1eb8d14><pattern id="smallGrid" width="7.236328125" height="7.236328125" patternUnits="userSpaceOnUse" data-v-c1eb8d14><path d="M 7.236328125 0 L 0 0 0 7.236328125" fill="none" stroke="rgba(207, 207, 207, 0.3)" stroke-width="1" data-v-c1eb8d14></path></pattern><pattern id="grid" width="36.181640625" height="36.181640625" patternUnits="userSpaceOnUse" data-v-c1eb8d14><rect width="36.181640625" height="36.181640625" fill="url(#smallGrid)" data-v-c1eb8d14></rect><path d="M 36.181640625 0 L 0 0 0 36.181640625" fill="none" stroke="rgba(186, 186, 186, 0.5)" stroke-width="1" data-v-c1eb8d14></path></pattern></defs><rect width="100%" height="100%" fill="url(#grid)" data-v-c1eb8d14></rect>',2),en=[Zt];function tn(t,a){return _(),A("svg",Qt,en)}var nn=q(Jt,[["render",tn],["__scopeId","data-v-c1eb8d14"]]);const an={class:"mark-line"},ln=R({__name:"MarkLine",setup(t){const a=ue(),e=B([]),l=Y(["xt","xc","xb","yl","yc","yr"]),c=B(3),s=Y({xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}),v=r=>{e.value.push(r)},i=()=>{Object.keys(s).forEach(r=>{s[r]=!1})};Se("move",r=>{p(r.isDownward,r.isRightward)}),Se("unmove",()=>{i()});const p=(r,g)=>{const h=a.componentData;if(a.curComponent){const{top:y,left:b,right:T,bottom:I}=Le(a.curComponent.style),j=(T-b)/2,M=(I-y)/2;i(),h.forEach(C=>{if(C==a.curComponent)return;const x=Le(C.style),{top:w,left:$,bottom:k,right:D}=x,F=(D-$)/2,E=(k-w)/2,N={top:[{isNearly:d(y,w),lineNode:e.value[0],line:"xt",dragShift:w,lineShift:w},{isNearly:d(I,w),lineNode:e.value[0],line:"xt",dragShift:w-(I-y||0),lineShift:w},{isNearly:d((y||0)+M,w+E),lineNode:e.value[1],line:"xc",dragShift:w+E-M,lineShift:w+E},{isNearly:d(y,k),lineNode:e.value[2],line:"xb",dragShift:k,lineShift:k},{isNearly:d(I,k),lineNode:e.value[2],line:"xb",dragShift:k-(I-y||0),lineShift:k}],left:[{isNearly:d(b,$),lineNode:e.value[3],line:"yl",dragShift:$,lineShift:$},{isNearly:d(T,$),lineNode:e.value[3],line:"yl",dragShift:$-(T-b||0),lineShift:$},{isNearly:d((b||0)+j,$+F),lineNode:e.value[4],line:"yc",dragShift:$+F-j,lineShift:$+F},{isNearly:d(b,D),lineNode:e.value[5],line:"yr",dragShift:D,lineShift:D},{isNearly:d(T,D),lineNode:e.value[5],line:"yr",dragShift:D-(T-b||0),lineShift:D}]},L=[],{rotate:X}=a.curComponent.style;Object.keys(N).forEach(V=>{N[V].forEach(K=>{if(!K.isNearly)return;const O=X!=0?f(V,K,{width:T-b,height:I-y}):K.dragShift;a.setComponentSingleStyle({key:V,value:O}),K.lineNode.style[V]=`${K.lineShift}px`,L.push(K.line)})}),L.length&&o(L,r,g)})}},d=(r,g)=>Math.abs(r-g)<=c.value,f=(r,g,h)=>{const{width:y,height:b}=a.curComponent.style;return r=="top"?Math.round(g.dragShift-(b-h.height)/2):Math.round(g.dragShift-(y-h.width)/2)},o=(r,g,h)=>{h?r.includes("yr")?s.yr=!0:r.includes("yc")?s.yc=!0:r.includes("yl")&&(s.yl=!0):r.includes("yl")?s.yl=!0:r.includes("yc")?s.yc=!0:r.includes("yr")&&(s.yr=!0),g?r.includes("xb")?s.xb=!0:r.includes("xc")?s.xc=!0:r.includes("xt")&&(s.xt=!0):r.includes("xt")?s.xt=!0:r.includes("xc")?s.xc=!0:r.includes("xb")&&(s.xb=!0)};return(r,g)=>(_(),A("div",an,[(_(!0),A(G,null,oe(l,h=>P((_(),A("div",{key:h,class:Ie(["line",h.includes("x")?"xline":"yline"]),ref_for:!0,ref:v},null,2)),[[ae,s[h]||!1]])),128))]))}});var on=q(ln,[["__scopeId","data-v-b4937e88"]]);const un=R({__name:"Index",setup(t){const a=ue(),e=et(),l=tt(),c=F=>Xe(F,["top","left","width","height","rotate"]),s=U(()=>e.style.width>0&&!w.value),v=U(()=>({x:e.style.left,y:e.style.top})),i=U(()=>e.style.width),p=U(()=>e.style.height),d=()=>{w.value=!1,C.value=0,x.value=0,e.setAreaData({left:0,top:0,width:0,height:0,rotate:0},[])},f=()=>{a.clearCanvas()},o=()=>{l.paste(!1)},r=()=>[{text:"\u7C98\u8D34",subText:"Ctrl + V",handler:o},{text:"\u6E05\u7A7A\u753B\u5E03",subText:"",handler:f}];Se("hideArea",d),we(()=>{console.log("\u8FDB\u5165\u7F16\u8F91\u6A21\u5F0F"),a.setEditMode(je.EDIT),document.addEventListener("paste",T)}),Re(()=>{console.log("\u8FDB\u5165\u9884\u89C8\u6A21\u5F0F"),a.setEditMode(je.PREVIEW),document.removeEventListener("paste",T),a.clearCanvas()});const g=U(()=>a.componentData),h=U(()=>a.canvasStyleData),y=U(()=>a.curComponent),b=U(()=>{const F=Ce(de({},h.value),{backgroundImage:h.value.image,backgroundSize:"cover"});return Xe(F,["width","height","backgroundImage","backgroundSize"])}),T=F=>{if(F.clipboardData){const E=F.clipboardData.getData("text");try{const N=JSON.parse(E);"component"in N&&(F.preventDefault(),a.appendComponent(N))}catch(N){console.log(N)}}},I=B(0),j=B(0),M=Y({x:0,y:0}),C=B(0),x=B(0),w=B(!1),$=B(null),k=F=>{var E;if(F.button===0){a.setCurComponent(void 0,void 0),F.preventDefault(),F.stopPropagation(),d();const N=(E=$.value)==null?void 0:E.getBoundingClientRect();I.value=N.x,j.value=N.y;const L=F.clientX,X=F.clientY;M.x=L-I.value,M.y=X-j.value,w.value=!0;const V=O=>{O.preventDefault(),O.stopPropagation(),C.value=Math.abs(O.clientX-L),x.value=Math.abs(O.clientY-X),O.clientX<L&&(M.x=O.clientX-I.value),O.clientY<X&&(M.y=O.clientY-j.value)},K=O=>{if(document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",K),O.clientX==L&&O.clientY==X){d();return}const Q={left:M.x,top:M.y,right:C.value+M.x,bottom:M.y+x.value},be=D(Q);if(be){const Z=be.rect;e.setAreaData({top:Z.top,left:Z.left,width:Z.right-Z.left,height:Z.bottom-Z.top,rotate:0},be.components),M.x=Z.left,M.y=Z.top,C.value=Z.right-Z.left,x.value=Z.bottom-Z.top}else d()};document.addEventListener("mousemove",V),document.addEventListener("mouseup",K)}},D=F=>{const E=[],N=new Set,L=new Set,X=new Set,V=new Set;if(a.componentData.forEach(K=>{const O=K.style,Q=Le(O);Q.left>=F.left&&Q.right<=F.right&&Q.top>=F.top&&Q.bottom<=F.bottom&&(E.push(K),N.add(Q.left),L.add(Q.top),X.add(Q.right),V.add(Q.bottom))}),E.length>0){const K=Math.min(...N),O=Math.max(...X),Q=Math.min(...L),be=Math.max(...V);return{components:E,rect:{left:K,right:O,top:Q,bottom:be}}}};return(F,E)=>{const N=ge("contextmenu");return P((_(),A("div",{class:"editor edit",ref_key:"editor",ref:$,id:"editor",style:me(n(b)),onMousedown:k},[u(nn),u(qt,{width:n(h).width,height:n(h).height,startY:0,startX:0},null,8,["width","height"]),(_(!0),A(G,null,oe(n(g),(L,X)=>(_(),A(G,{key:L.id},[n(a).isEditMode&&L.display?(_(),S(Ft,{key:0,id:"shape"+L.id,defaultStyle:L.style,style:me(c(L.style)),active:L.id===(n(y)||{}).id,info:L,index:X.toString(),class:Ie({lock:L.isLock})},{default:m(()=>[(_(),S(_t(L.component),{class:"component",style:me(n(yt)(L)),propValue:L.propValue,componentId:L.id,id:"component"+L.id,index:X.toString(),subComponents:L.subComponents},null,8,["style","propValue","componentId","id","index","subComponents"]))]),_:2},1032,["id","defaultStyle","style","active","info","index","class"])):xe("",!0)],64))),128)),u(on),w.value?(_(),S(Ye,{key:0,start:M,width:C.value,height:x.value},null,8,["start","width","height"])):n(s)?(_(),S(Ye,{key:1,start:n(v),width:n(i),height:n(p)},null,8,["start","width","height"])):xe("",!0)],36)),[[N,r]])}}});var sn=q(un,[["__scopeId","data-v-2881894a"]]);const cn="2946854",rn="\u65B9\u5411",dn="iconfont",mn="icon-",pn="",vn=[{icon_id:"11291350",name:"\u7EC4",font_class:"zu",unicode:"e854",unicode_decimal:59476},{icon_id:"1817751",name:"\u67F1\u5F62\u56FE",font_class:"zhuxingtu",unicode:"e626",unicode_decimal:58918},{icon_id:"3868284",name:"\u4EEA\u8868\u76D8",font_class:"yibiaopan",unicode:"eb67",unicode_decimal:60263},{icon_id:"4354243",name:"\u56FE\u8868-\u997C\u56FE",font_class:"tubiao-bingtu",unicode:"eb95",unicode_decimal:60309},{icon_id:"4354246",name:"\u56FE\u8868-\u5361\u7247",font_class:"tubiao-qiapian",unicode:"eb96",unicode_decimal:60310},{icon_id:"4354248",name:"\u56FE\u8868-\u6298\u7EBF\u56FE",font_class:"tubiao-zhexiantu",unicode:"eb97",unicode_decimal:60311},{icon_id:"4906240",name:"\u6309\u94AE\u7EC4",font_class:"anniuzu",unicode:"e782",unicode_decimal:59266},{icon_id:"5383645",name:"\u5BFC\u822A",font_class:"daohang",unicode:"e77d",unicode_decimal:59261},{icon_id:"5961366",name:"\u5217\u8868",font_class:"liebiao",unicode:"ec6b",unicode_decimal:60523},{icon_id:"5971297",name:"\u91C7\u7164\u673A",font_class:"caimeiji",unicode:"e603",unicode_decimal:58883},{icon_id:"7040619",name:"\u5176\u4ED6",font_class:"qita",unicode:"e63b",unicode_decimal:58939},{icon_id:"7556180",name:"\u5B9A\u5236",font_class:"dingzhi",unicode:"e609",unicode_decimal:58889},{icon_id:"9752796",name:"\u57FA\u7840",font_class:"jichu",unicode:"e60f",unicode_decimal:58895},{icon_id:"9921108",name:"chart",font_class:"chartt",unicode:"e60a",unicode_decimal:58890},{icon_id:"14475731",name:"\u88C5\u9970\u88C5\u4FEE",font_class:"zhuangshizhuangxiu",unicode:"e6a6",unicode_decimal:59046},{icon_id:"16562592",name:"\u6E29\u5EA6\u8BA1",font_class:"wenduji",unicode:"e6de",unicode_decimal:59102},{icon_id:"22712019",name:"\u6761\u5F62\u8FDB\u5EA6\u56FE",font_class:"tiaoxingjindutu",unicode:"e66b",unicode_decimal:58987},{icon_id:"22761375",name:"\u8FB9\u6846",font_class:"biankuang",unicode:"e6b7",unicode_decimal:59063},{icon_id:"22885432",name:"\u8FDB\u5EA6\u56FE",font_class:"jindutu",unicode:"f24b",unicode_decimal:62027},{icon_id:"124495",name:"\u8B66\u544A",font_class:"jinggao1",unicode:"e601",unicode_decimal:58881},{icon_id:"1846445",name:"\u9884\u8B66\u706F",font_class:"yujingdeng",unicode:"e67f",unicode_decimal:59007},{icon_id:"2239579",name:"\u81EA\u52A8\u7CFB\u7EDF\u8B66\u544A\u706F",font_class:"zidongxitongjinggaodeng1",unicode:"e605",unicode_decimal:58885},{icon_id:"4988542",name:"\u9884\u8B66",font_class:"yujing1",unicode:"e644",unicode_decimal:58948},{icon_id:"9974390",name:"\u9884\u8B66",font_class:"yujing3",unicode:"e6fe",unicode_decimal:59134},{icon_id:"10817515",name:"\u8B66\u544A\u706F",font_class:"jinggaodeng",unicode:"e64b",unicode_decimal:58955},{icon_id:"14151833",name:"\u62A5\u8B66",font_class:"baojing1",unicode:"e630",unicode_decimal:58928},{icon_id:"16965399",name:"\u8B66\u544A\u706F",font_class:"hong",unicode:"e60d",unicode_decimal:58893},{icon_id:"20379044",name:"\u9884\u8B66\u706F",font_class:"yujingdeng1",unicode:"e623",unicode_decimal:58915},{icon_id:"23819336",name:"\u62A5\u8B66 \u8B66\u544A \u9884\u8B66 \u8B66\u544A\u706F",font_class:"a-baojingjinggaoyujingjinggaodeng",unicode:"e628",unicode_decimal:58920},{icon_id:"24312218",name:"light",font_class:"light",unicode:"e63a",unicode_decimal:58938},{icon_id:"24614518",name:"\u544A\u8B66\u706F",font_class:"gaojingdeng9",unicode:"e664",unicode_decimal:58980},{icon_id:"25567211",name:"\u8B66\u544A\u706F",font_class:"jinggaodeng1",unicode:"e613",unicode_decimal:58899},{icon_id:"12041083",name:"\u9884\u8B66",font_class:"yujing5",unicode:"e671",unicode_decimal:58993},{icon_id:"577357",name:"\u5220\u9664",font_class:"shanchu",unicode:"e74b",unicode_decimal:59211},{icon_id:"1986988",name:"\u5220\u9664",font_class:"shanchu1",unicode:"e625",unicode_decimal:58917},{icon_id:"12795401",name:"\u9996\u9875",font_class:"shouye",unicode:"e62d",unicode_decimal:58925},{icon_id:"201556",name:"\u67E5\u770B",font_class:"chakan",unicode:"e600",unicode_decimal:58880},{icon_id:"201638",name:"\u7F16\u8F91",font_class:"bianji",unicode:"e602",unicode_decimal:58882},{icon_id:"11729723",name:"\u590D\u5236",font_class:"fuzhi",unicode:"e608",unicode_decimal:58888},{icon_id:"7269302",name:"\u9996\u9875-\u9ED8\u8BA4",font_class:"shouye-moren",unicode:"e619",unicode_decimal:58905},{icon_id:"658044",name:"\u89E3\u9501",font_class:"jiesuo",unicode:"e669",unicode_decimal:58985},{icon_id:"10097949",name:"\u65CB\u8F6C",font_class:"xuanzhuan",unicode:"e680",unicode_decimal:59008},{icon_id:"374774",name:"\u5F00\u5173",font_class:"kaiguan",unicode:"e61f",unicode_decimal:58911},{icon_id:"122162",name:"\u65F6\u949F",font_class:"clock",unicode:"e63e",unicode_decimal:58942},{icon_id:"1242185",name:"\u53CD\u9988\u4FE1\u606F",font_class:"fankuixinxi",unicode:"e660",unicode_decimal:58976},{icon_id:"2468505",name:"37\u7C7B\u5EFA\u7B51\u4FEE\u7406x16",font_class:"leijianzhuxiulix",unicode:"e695",unicode_decimal:59029},{icon_id:"11747267",name:"\u65F6\u95F4",font_class:"weibiaoti-",unicode:"e618",unicode_decimal:58904},{icon_id:"14794143",name:"sds_\u7B2C37\u7C7B \u5EFA\u7B51\u4FEE\u7406",font_class:"sds_di37leijianzhuxiuli",unicode:"e61e",unicode_decimal:58910},{icon_id:"17762035",name:"\u8054\u52A8\u63A7\u5236",font_class:"liandongkongzhi",unicode:"e624",unicode_decimal:58916},{icon_id:"18165278",name:"\u9501,\u5BC6\u7801,\u5F00\u9501,\u89E3\u9501",font_class:"unlock-full",unicode:"e882",unicode_decimal:59522},{icon_id:"288554",name:"ascend",font_class:"ascend",unicode:"e6b4",unicode_decimal:59060},{icon_id:"288556",name:"falling",font_class:"falling",unicode:"e6b6",unicode_decimal:59062},{icon_id:"815867",name:"\u6309\u94AE-\u5173",font_class:"buttonoff",unicode:"e614",unicode_decimal:58900},{icon_id:"815872",name:"\u6309\u94AE-\u5F00",font_class:"buttonon",unicode:"e615",unicode_decimal:58901},{icon_id:"2674878",name:"\u7BAD\u5934 \u4E0A",font_class:"jiantoushang",unicode:"e62c",unicode_decimal:58924},{icon_id:"2674928",name:"\u7BAD\u5934 \u53F3",font_class:"jiantouyou",unicode:"e632",unicode_decimal:58930},{icon_id:"2674929",name:"\u7BAD\u5934 \u4E0B",font_class:"jiantouxia",unicode:"e633",unicode_decimal:58931},{icon_id:"7594038",name:"24gl-next",font_class:"24gl-next",unicode:"ea6b",unicode_decimal:60011},{icon_id:"7594046",name:"24gl-pauseCircle",font_class:"24gl-pauseCircle",unicode:"ea6f",unicode_decimal:60015},{icon_id:"7594068",name:"24gl-previous",font_class:"24gl-previous",unicode:"ea73",unicode_decimal:60019},{icon_id:"7594086",name:"24gl-stopCircle",font_class:"24gl-stopCircle",unicode:"ea79",unicode_decimal:60025},{icon_id:"10268256",name:"\u6309\u94AE_\u5F00\u542F",font_class:"anniu_kaiqi",unicode:"e659",unicode_decimal:58969},{icon_id:"10268257",name:"\u6309\u94AE_\u5173\u95ED",font_class:"anniu_guanbi",unicode:"e65b",unicode_decimal:58971},{icon_id:"25807963",name:"\u7BAD\u5934 \u4E0A",font_class:"jiantoushangzuo-copy",unicode:"ec63",unicode_decimal:60515},{icon_id:"25808146",name:"\u5411\u53F32",font_class:"xiangzuo2-copy",unicode:"ec64",unicode_decimal:60516},{icon_id:"166602",name:"\u5173\u95ED\u64AD\u653E",font_class:"guanbibofang",unicode:"e61d",unicode_decimal:58909},{icon_id:"577396",name:"\u5411\u4E0A3",font_class:"xiangshang3",unicode:"e76f",unicode_decimal:59247},{icon_id:"577401",name:"\u5411\u4E0B5",font_class:"xiangxia5",unicode:"e774",unicode_decimal:59252},{icon_id:"577403",name:"\u5411\u53F32",font_class:"xiangyou2",unicode:"e776",unicode_decimal:59254},{icon_id:"1159910",name:"\u53F3\u64AD\u653E",font_class:"youbofang",unicode:"e62e",unicode_decimal:58926},{icon_id:"1159911",name:"\u5DE6\u64AD\u653E",font_class:"zuobofang",unicode:"e62f",unicode_decimal:58927},{icon_id:"1185945",name:"\u64AD\u653E",font_class:"bofang2",unicode:"e606",unicode_decimal:58886},{icon_id:"1488892",name:"\u64AD\u653E",font_class:"bofang5",unicode:"e607",unicode_decimal:58887},{icon_id:"1727559",name:"323\u5411\u5DE6\u4EA4\u6362",font_class:"xiangzuojiaohuan",unicode:"e8f8",unicode_decimal:59640},{icon_id:"1727561",name:"324\u5411\u53F3\u4EA4\u6362",font_class:"xiangyoujiaohuan",unicode:"e8f9",unicode_decimal:59641},{icon_id:"2076218",name:"\u64AD\u653E2",font_class:"bofang6",unicode:"e87c",unicode_decimal:59516},{icon_id:"7594051",name:"24gl-playCircle",font_class:"24gl-playCircle",unicode:"ea6e",unicode_decimal:60014},{icon_id:"11121478",name:"\u5411\u4E0A",font_class:"xiangshang7",unicode:"e63c",unicode_decimal:58940},{icon_id:"16388177",name:"\u64AD\u653E",font_class:"bofang26",unicode:"e60e",unicode_decimal:58894},{icon_id:"18176557",name:"\u64AD\u653E",font_class:"play1",unicode:"ea8d",unicode_decimal:60045},{icon_id:"24267227",name:"\u64AD\u653E-\u5FEB\u9000",font_class:"bofang-kuaitui",unicode:"e68a",unicode_decimal:59018},{icon_id:"24267260",name:"\u64AD\u653E09",font_class:"bofang09",unicode:"e690",unicode_decimal:59024},{icon_id:"24268374",name:"\u64AD\u653E-\u5FEB\u8FDB",font_class:"bofang-kuaijin",unicode:"e6d8",unicode_decimal:59096},{icon_id:"25807740",name:"\u5411\u4E0A",font_class:"xiangxia7",unicode:"ec62",unicode_decimal:60514}];var fn={id:cn,name:rn,font_family:dn,css_prefix_text:mn,description:pn,glyphs:vn};const _n={class:"icon_lists"},hn=["onClick"],gn=R({__name:"IconFont",props:{visible:{type:Boolean}},emits:["update:visible"],setup(t,{emit:a}){const e=U(()=>fn.glyphs.map(s=>`icon-${s.font_class}`)),l=()=>{a("update:visible",!1)},c=s=>{Je(s),ce.success(`\u590D\u5236\u56FE\u6807: ${s}`)};return(s,v)=>{const i=ge("click-outside");return _(),A("div",null,[u(n(lt),{show:t.visible},{default:m(()=>[P((_(),S(n(at),{title:`\u56FE\u6807\u6570\u91CF${n(e).length}`,class:"tab-container"},{default:m(()=>[z("ul",_n,[(_(!0),A(G,null,oe(n(e),p=>(_(),A("li",{key:p,class:"dib",onClick:d=>c(p)},[z("span",{class:Ie(`icon iconfont ${p}`)},null,2)],8,hn))),128))])]),_:1},8,["title"])),[[i,l]])]),_:1},8,["show"])])}}});var yn=q(gn,[["__scopeId","data-v-c07295dc"]]);const se=t=>(ht("data-v-28993e7d"),t=t(),gt(),t),bn={class:"tool-bar"},Cn={class:"tool-bar-item"},xn=se(()=>z("span",null,"\u9996\u9875",-1)),Sn=se(()=>z("span",null,"\u4FDD\u5B58",-1)),wn=se(()=>z("span",null,"\u9884\u89C8",-1)),Fn=se(()=>z("span",null,"\u64A4\u9500",-1)),Dn=se(()=>z("span",null,"\u6062\u590D",-1)),En=se(()=>z("span",null,"\u5BFC\u51FA",-1)),kn=se(()=>z("span",null,"\u5BFC\u5165",-1)),Bn=se(()=>z("span",null,"\u5168\u5C4F",-1)),$n=se(()=>z("span",null,"\u5750\u6807",-1)),In={class:"tool-bar-item"},Nn=se(()=>z("span",null,"\u56FE\u6807",-1)),Ln=se(()=>z("span",null,"\u56FE\u7247",-1)),Tn={class:"dialog-footer"},An=Ee("\u53D6\u6D88"),zn=Ee("\u65B0\u589E"),Rn=Ee("\u66F4\u65B0"),Un=R({__name:"Toolbar",setup(t){const a=ue(),e=bt(),l=Dt(),c=nt(),s=U(()=>a.componentData),v=U(()=>a.canvasStyleData),i=U(()=>c.name==="Create");let p="";const d=B(!1),f=B(!1),o=B(!1),r=Y({name:"",thumbnail:""}),g=Y({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0",trigger:"blur"}]});let h=0;we(()=>{setTimeout(()=>{r.name=a.name,r.thumbnail=a.thumbnail},500)});const y=()=>ee(this,null,function*(){let E;h<=0?E=yield e.undo():E=yield e.undo(h-1),E?(h=E.id,a.setLayoutData({canvasData:E.canvasData,canvasStyle:E.canvasStyle})):ce.warning("\u6CA1\u6709\u5FEB\u7167\u4E86")}),b=()=>{const{href:E}=l.resolve("/preview");window.open(E,"_blank")},T=()=>{l.push({name:"Pages"})},I=()=>{d.value=!0},j=()=>ee(this,null,function*(){let E;h<=0?E=yield e.undo():E=yield e.undo(h+1),E?(h=E.id,a.setLayoutData({canvasData:E.canvasData,canvasStyle:E.canvasStyle})):ce.warning("\u6CA1\u6709\u5FEB\u7167\u4E86")}),M=()=>{a.toggleShowEm()},C=()=>{f.value=!f.value},x=()=>{const E=document.querySelector(".center.scrollbar");document.fullscreenEnabled&&E&&E.requestFullscreen()},w=E=>ee(this,null,function*(){const{name:N,thumbnail:L}=r;if(!N){ce.error("\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0");return}const X={name:N,thumbnail:L,canvasData:s.value,canvasStyle:v.value};if(a.setName(N),a.setThumbnail(L),E==="update")try{yield Et(p,X),ce.success("\u4FEE\u6539\u6210\u529F")}catch(V){ce.error("\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u5BFC\u51FA\u5230\u672C\u5730\uFF0C\u5E76\u91CD\u65B0\u8FDB\u5165\u6B64\u9875\u9762")}finally{d.value=!1}else try{const V=yield kt(X);ce.success("\u4FDD\u5B58\u6210\u529F"),l.push({name:"Editor",params:{index:V.id}})}catch(V){ce.error(`\u4FDD\u5B58\u5931\u8D25\uFF0C\u5931\u8D25\u4FE1\u606F:${(V==null?void 0:V.message)||V}`)}finally{d.value=!1}}),$=()=>{const E=`${a.name}`||"layout";Ct(`${E}.json`,JSON.stringify({canvasData:s.value,canvasStyle:v.value}))},k=()=>{xt(D,".json")},D=E=>{if(E.target&&E.target.result){const N=JSON.parse(E.target.result);N&&(a.setComponentData(N.canvasData),a.setCanvasStyle(N.canvasStyle))}},F=ve(()=>c.params.index,(E,N)=>{p=E},{immediate:!0});return Re(()=>{F()}),(E,N)=>{const L=Fe("icon-park"),X=ge("action");return _(),A(G,null,[z("div",bn,[z("div",Cn,[u(n(te),null,{trigger:m(()=>[u(n(W),{quaternary:"",size:"small",onClick:T,title:"\u9996\u9875"},{default:m(()=>[u(L,{name:"home",size:"24"})]),_:1})]),default:m(()=>[xn]),_:1}),u(n($t),{vertical:""}),u(n(te),null,{trigger:m(()=>[P((_(),S(n(W),{quaternary:"",size:"small",onClick:I,title:"\u4FDD\u5B58"},{default:m(()=>[u(L,{name:"save-one",size:"22"})]),_:1})),[[X,"add"]])]),default:m(()=>[Sn]),_:1}),u(n(te),null,{trigger:m(()=>[u(n(W),{quaternary:"",size:"small",onClick:b,title:"\u9884\u89C8"},{default:m(()=>[u(L,{name:"computer",size:"22"})]),_:1})]),default:m(()=>[wn]),_:1}),u(n(te),null,{trigger:m(()=>[u(n(W),{quaternary:"",size:"small",onClick:y,title:"\u64A4\u9500"},{default:m(()=>[u(L,{name:"back",size:"22"})]),_:1})]),default:m(()=>[Fn]),_:1}),u(n(te),null,{trigger:m(()=>[u(n(W),{quaternary:"",size:"small",onClick:j,title:"\u6062\u590D"},{default:m(()=>[u(L,{name:"next",size:"22"})]),_:1})]),default:m(()=>[Dn]),_:1}),u(n(te),null,{trigger:m(()=>[u(n(W),{quaternary:"",size:"small",onClick:$,title:"\u5BFC\u51FA"},{default:m(()=>[u(L,{name:"download-one",size:"22"})]),_:1})]),default:m(()=>[En]),_:1}),u(n(te),null,{trigger:m(()=>[u(n(W),{quaternary:"",size:"small",onClick:k,title:"\u5BFC\u5165"},{default:m(()=>[u(L,{name:"upload-one",size:"22"})]),_:1})]),default:m(()=>[kn]),_:1}),u(n(te),null,{trigger:m(()=>[u(n(W),{quaternary:"",size:"small",onClick:x,title:"\u5168\u5C4F"},{default:m(()=>[u(L,{name:"full-screen",size:"22"})]),_:1})]),default:m(()=>[Bn]),_:1}),u(n(te),null,{trigger:m(()=>[u(n(W),{quaternary:"",size:"small",onClick:M,title:"\u5750\u6807"},{default:m(()=>[u(L,{name:"cones",size:"22"})]),_:1})]),default:m(()=>[$n]),_:1})]),z("div",In,[u(n(te),null,{trigger:m(()=>[u(n(W),{quaternary:"",class:"resource",size:"small",onClick:C,title:"\u56FE\u6807"},{default:m(()=>[u(L,{name:"game-ps",size:"22"})]),_:1})]),default:m(()=>[Nn]),_:1}),u(n(te),null,{trigger:m(()=>[u(n(W),{quaternary:"",class:"resource",size:"small",onClick:N[0]||(N[0]=()=>o.value=!0),title:"\u56FE\u7247"},{default:m(()=>[u(L,{name:"picture",size:"22"})]),_:1})]),default:m(()=>[Ln]),_:1})])]),u(n(lt),{show:d.value,"onUpdate:show":N[6]||(N[6]=V=>d.value=V),center:""},{default:m(()=>[u(n(at),{title:"\u4FDD\u5B58\u5F53\u524D\u5E03\u5C40",style:{width:"30%"},size:"medium"},{footer:m(()=>[z("span",Tn,[u(n(W),{onClick:N[3]||(N[3]=V=>d.value=!1)},{default:m(()=>[An]),_:1}),n(i)?(_(),S(n(W),{key:0,type:"primary",onClick:N[4]||(N[4]=V=>w("new"))},{default:m(()=>[zn]),_:1})):(_(),S(n(W),{key:1,type:"primary",onClick:N[5]||(N[5]=V=>w("update"))},{default:m(()=>[Rn]),_:1}))])]),default:m(()=>[u(n(ke),{model:r,rules:g,onSubmit:N[2]||(N[2]=De(()=>{},["prevent"]))},{default:m(()=>[u(n(H),{label:"\u9875\u9762\u540D\u79F0",prop:"name"},{default:m(()=>[u(n(pe),{modelValue:r.name,"onUpdate:modelValue":N[1]||(N[1]=V=>r.name=V),placeholder:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["show"]),u(yn,{visible:f.value,"onUpdate:visible":N[7]||(N[7]=V=>f.value=V)},null,8,["visible"])],64)}}});var Vn=q(Un,[["__scopeId","data-v-28993e7d"]]);const Mn=["data-component"],Pn=R({__name:"ComponentItem",props:{component:null,name:null},setup(t){return(a,e)=>(_(),A("div",{draggable:"true","data-component":t.component},[z("div",null,_e(t.name),1)],8,Mn))}}),jn={class:"components"},Ge=R({__name:"ComponentList",setup(t){const a=U(()=>{const l={};Object.keys(re).filter(s=>{if(re[s].component.show!==!1)return re[s]}).forEach(s=>{const v=re[s].component.group;!v||(l[v]||(l[v]=[]),l[v].push(re[s].component))});const c=[];return Qe.forEach(s=>{var v;c.push({label:()=>s.name,key:s.key,icon:()=>le(ne,{name:`${s.icon}`}),children:(v=l[s.key])==null?void 0:v.map(i=>({label:()=>le(Pn,{component:i.component,name:i.label,ondragstart:e}),key:i.component}))})}),c}),e=l=>{l.dataTransfer.setData("componentName",l.target.dataset.component)};return(l,c)=>(_(),A("div",jn,[u(n(Ue),{options:n(a),accordion:!1},null,8,["options"])]))}});const Xn={key:0},On={key:1},Hn=R({__name:"LayerItem",props:{component:null,index:null,activeKey:null,mode:{default:"expand"}},emits:["select"],setup(t,{emit:a}){const e=t,l=ue(),c=tt(),s=C=>{const x=C.split("-").map($=>Number($)),w=l.getComponentByIndex(x);w&&(w.groupStyle=void 0,Je(JSON.stringify(w)),c.copy())},v=C=>ee(this,null,function*(){a("select",C),l.removeComponent(C)}),i=C=>ee(this,null,function*(){a("select",C),l.upComponent(C)}),p=C=>ee(this,null,function*(){a("select",C),l.downComponent(C)}),d=C=>ee(this,null,function*(){a("select",C),l.topComponent(C)}),f=C=>ee(this,null,function*(){a("select",C),l.bottomComponent(C)}),o=C=>{a("select",C),l.hiddenComponent(C)},r=C=>{a("select",C),l.showComponent(C)},g=(C,x)=>{const w=x.split("-").map($=>parseInt($));return[{text:"\u590D\u5236",subText:"Ctrl + C",handler:()=>s(x)},{text:"\u5220\u9664",subText:"",handler:()=>v(x)},{divider:!0},{text:"\u7F6E\u4E8E\u9876\u5C42",handler:()=>d(x),children:[{text:"\u7F6E\u4E8E\u9876\u5C42",handler:()=>d(x)},{text:"\u4E0A\u79FB\u4E00\u5C42",handler:()=>i(x)}]},{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:()=>f(x),children:[{text:"\u7F6E\u4E8E\u5E95\u5C42",handler:()=>f(x)},{text:"\u4E0B\u79FB\u4E00\u5C42",handler:()=>p(x)}]},{divider:!0},{text:"\u663E\u793A",disable:l.getComponentByIndex(w).display,subText:"",handler:()=>r(x)},{text:"\u9690\u85CF",disable:!l.getComponentByIndex(w).display,subText:"",handler:()=>o(x)}]},h=(C,x)=>{var w;(w=C.dataTransfer)==null||w.setData("compomentIndex",x),C.stopPropagation()},y=(C,x,w=!1)=>{C.preventDefault(),C.stopPropagation(),w&&x!==e.activeKey&&ie.emit("ActiveMenu",x)},b=(C,x)=>{var F;C.preventDefault(),C.stopPropagation();const w=(F=C.dataTransfer)==null?void 0:F.getData("compomentIndex"),$=I(w,x),k=j(w,x),D=T(w,k);console.log(D),D&&$&&M($,D,k)},T=(C,x)=>{const w=C.split("-").map(D=>Number(D)),$=w.pop(),k=l.getComponentByIndex(w);if(k&&k.subComponents){const F=k.subComponents.splice($,1)[0];if(console.log(F),console.log(k),x||k.component==="Root")return F;if(k.component==="Group"){const E=k.style;return St(F,E),F}}},I=(C,x)=>{const w=C.split("-").map(D=>parseInt(D)),$=x.split("-").map(D=>parseInt(D)),k=w.length;for(let D=0;D<k;D++)if(w[D]!==$[D]){if(w[D]>$[D])return x;if(w[D]<$[D])return D+1==k?($[D]=$[D]-1,$.join("-")):x}return x},j=(C,x)=>{const w=C.split("-").map(F=>parseInt(F)),$=x.split("-").map(F=>parseInt(F));w.pop(),$.pop();const k=w.join("-"),D=$.join("-");return k===D},M=(C,x,w)=>{const $=C.split("-").map(F=>Number(F)),k=$.pop(),D=l.getComponentByIndex($);if(D&&D.subComponents){if(D.component==="Root"||w)D.subComponents.splice(k,0,x);else if(D.component==="Group"){const F=D.style,E=de({},x.style);x.groupStyle={gtop:1.1,gleft:1.1,grotate:x.style.rotate,gheight:parseFloat((E.height*100/F.height).toFixed(4)),gwidth:parseFloat((E.width*100/F.width).toFixed(4))},D.subComponents.splice(k,0,x),a("select",C)}}};return(C,x)=>{const w=Fe("icon-park"),$=ge("contextmenu");return P((_(),A("div",{draggable:"true",onDragstart:x[0]||(x[0]=k=>h(k,t.index)),onDrop:x[1]||(x[1]=k=>b(k,t.index)),onDragover:x[2]||(x[2]=k=>y(k,t.index,!0))},[t.component.component==="Group"?(_(),A("div",Xn,[P(z("span",null,_e(t.component.label||"\u5206\u7EC4"),513),[[ae,t.mode==="expand"]]),t.component.display?(_(),S(w,{key:0,name:"preview-open",size:"24"})):(_(),S(w,{key:1,name:"preview-close-one",size:"24"}))])):(_(),A("div",On,[P(z("span",null,_e(t.component.label),513),[[ae,t.mode==="expand"]]),t.component.display?(_(),S(w,{key:0,size:"24",name:"preview-open"})):(_(),S(w,{key:1,size:"24",name:"preview-close-one"}))]))],32)),[[$,()=>g(C.$el,t.index)]])}}});var qe=q(Hn,[["__scopeId","data-v-7ec22128"]]);const Ke=R({__name:"Layer",setup(t){const a=ue(),e={};Qe.map(o=>{e[o.key]=o.icon});const l=U(()=>a.componentData),c=B(null),s=B("");Se("ActiveMenu",o=>{const r=o;s.value=r,c.value&&c.value.open&&c.value.open(r)});const i=o=>{s.value=o;const r=o.split("-").map(h=>Number(h)),g=a.getComponentByIndex(r);a.setCurComponent(g,o)},p=B([]),d=(o,r,g)=>{for(let h=0;h<r.length;h++){const y=r[h];if(y.component==="Group"){const b=[];g.push({label:()=>le(qe,{component:y,index:f(h,o),onclick:()=>i(f(h,o))}),key:f(h,o),icon:()=>le(ne,{name:"branch-one"}),children:d(f(h,o),y.subComponents||[],b)})}else g.push({label:()=>le(qe,{component:y,index:f(h,o)}),key:f(h,o),icon:()=>le(ne,{name:`${e[y.group]}`})})}return g},f=(o,r)=>r?`${r}-${o}`:o.toString();return ve(()=>a.componentData,()=>{const o=a.componentData;p.value=[],p.value=d("",o,[])},{deep:!0,immediate:!0}),(o,r)=>(_(),A("div",null,[n(l).length>0?(_(),S(n(Ue),{key:0,options:p.value,"onUpdate:value":i},null,8,["options"])):(_(),S(n(Lt),{key:1,class:"placeholder"},{default:m(()=>[u(n(Nt),null,{default:m(()=>[u(n(It),{description:"\u753B\u5E03\u4E3A\u7A7A"})]),_:1})]),_:1}))]))}}),Wn=z("span",null,"\u7EC4\u4EF6",-1),Yn=z("span",null,"\u56FE\u5C42",-1),Gn=R({__name:"SideBar",props:{iscollapsed:{type:Boolean,default:!1}},emits:["update:iscollapsed"],setup(t,{emit:a}){const e=B("components"),l=s=>{a("update:iscollapsed",!1),e.value=s},c=s=>{e.value=s};return(s,v)=>{const i=Fe("IconPark");return t.iscollapsed?(_(),S(n(Be),{key:1,type:"line",animated:"","bar-width":48,"justify-content":"center","onUpdate:value":[l,v[4]||(v[4]=p=>e.value=p)],value:e.value},{default:m(()=>[e.value==="components"?(_(),S(n(fe),{key:0,name:"components","display-directive":"show:lazy"},{tab:m(()=>[u(i,{name:"components",onClick:v[2]||(v[2]=p=>c("layer"))})]),default:m(()=>[u(Ge)]),_:1})):e.value==="layer"?(_(),S(n(fe),{key:1,name:"layer","display-directive":"show:lazy"},{tab:m(()=>[u(i,{name:"layers",onClick:v[3]||(v[3]=p=>c("components"))})]),default:m(()=>[u(Ke)]),_:1})):xe("",!0)]),_:1},8,["value"])):(_(),S(n(Be),{key:0,type:"line",animated:"","bar-width":100,"justify-content":"center",value:e.value,"onUpdate:value":[v[0]||(v[0]=p=>e.value=p),v[1]||(v[1]=p=>e.value=p)]},{default:m(()=>[u(n(fe),{name:"components","display-directive":"show:lazy"},{tab:m(()=>[u(i,{name:"components"}),Wn]),default:m(()=>[u(Ge)]),_:1}),u(n(fe),{name:"layer","display-directive":"show:lazy"},{tab:m(()=>[u(i,{name:"layers"}),Yn]),default:m(()=>[u(Ke)]),_:1})]),_:1},8,["value"]))}}}),qn=[{label:"4K",value:"3840X2160"},{label:"2k",value:"2048X1080"},{label:"1080P",value:"1920X1080"},{label:"720P",value:"1366X768"},{label:"iPhoneXR",value:"414X896"},{label:"iPhoneSE",value:"375X667"},{label:"iPhone12Pro",value:"390X884"},{label:"GalaxyS8+",value:"360X740"},{label:"GalaxyS20Ultra+",value:"412X915"},{label:"iPadAir",value:"820X1180"},{label:"iPadMini",value:"768X1024"},{label:"SurfacePro7",value:"912X1368"},{label:"NestHub",value:"1024X600"},{label:"NestMax",value:"1028X800"}];const Kn={class:"attr-list"},Jn=R({__name:"Canvas",setup(t){const a=U(()=>[{label:"\u672C\u8BBE\u5907",value:`${window.innerWidth}X${window.innerHeight}`},...qn]),e=ue(),l=U(()=>e.canvasStyleData),c=B("\u672C\u8BBE\u5907"),s=[{key:"width",label:"\u5BBD\u5EA6",type:J.NUMBER},{key:"height",label:"\u9AD8\u5EA6",type:J.NUMBER},{key:"scale",label:"\u6BD4\u4F8B",type:J.NUMBER},{key:"dataWs",label:"\u5B9E\u65F6\u6570\u636E",type:J.TEXT},{key:"image",label:"\u80CC\u666F\u56FE",type:J.TEXT}],v=Y(["top","left","width","height","fontSize","borderWidth"]),i=B(l.value.scale),p=r=>r*i.value/100,d=r=>r/(l.value.scale/100),f=ze(()=>{i.value=~~i.value||1;const r=st(e.componentData);r.forEach(g=>{Object.keys(g.style).forEach(h=>{v.includes(h)&&(g.style[h]=Math.ceil(p(d(g.style[h]))))})}),e.setComponentData(r),e.setCanvasStyle(Ce(de({},l.value),{scale:i.value}))},1e3),o=r=>{const g=r.split("X"),h=parseInt(g[0]),y=parseInt(g[1]);e.setCanvasStyle(Ce(de({},l.value),{width:h,height:y}))};return(r,g)=>(_(),A("div",Kn,[u(n(ot),null,{default:m(()=>[u(n(ke),{size:"small",onSubmit:g[2]||(g[2]=De(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:m(()=>[u(n(H),{label:"\u5206\u8FA8\u7387"},{default:m(()=>[u(n(he),{value:c.value,"onUpdate:value":[g[0]||(g[0]=h=>c.value=h),o],placeholder:"\u9009\u62E9\u5206\u8FA8\u7387",options:n(a)},null,8,["value","options"])]),_:1}),(_(),A(G,null,oe(s,({key:h,label:y,type:b},T)=>u(n(H),{key:T,label:y},{default:m(()=>[h==="scale"?(_(),S(n(ye),{key:0,modelValue:i.value,"onUpdate:modelValue":g[1]||(g[1]=I=>i.value=I),onInput:n(f)},null,8,["modelValue","onInput"])):b==="number"?(_(),S(n(ye),{key:1,value:n(l)[h],"onUpdate:value":I=>n(l)[h]=I},null,8,["value","onUpdate:value"])):(_(),S(n(pe),{key:2,value:n(l)[h],"onUpdate:value":I=>n(l)[h]=I},null,8,["value","onUpdate:value"]))]),_:2},1032,["label"])),64))]),_:1})]),_:1})]))}});var Qn=q(Jn,[["__scopeId","data-v-636ad53a"]]);const Zn=[{label:"Arial",value:"Arial"},{label:"\u5FAE\u8F6F\u96C5\u9ED1",value:"Microsoft Yahei"},{label:"\u5B8B\u4F53",value:"SimSun"},{label:"\u9ED1\u4F53",value:"SimHei"},{label:"\u6977\u4F53",value:"KaiTi"},{label:"\u65B0\u5B8B\u4F53",value:"NSimSun"},{label:"\u4EFF\u5B8B",value:"FangSong"},{label:"\u82F9\u65B9",value:"PingFang SC"},{label:"\u534E\u6587\u9ED1\u4F53",value:"STHeiti"},{label:"\u534E\u6587\u6977\u4F53",value:"STKaiti"},{label:"\u534E\u6587\u5B8B\u4F53",value:"STSong"},{label:"\u534E\u6587\u4EFF\u5B8B",value:"STFangSong"},{label:"\u534E\u6587\u4E2D\u5B8B",value:"STZhongSong"},{label:"\u534E\u6587\u7425\u73C0",value:"STHupo"},{label:"\u534E\u6587\u65B0\u9B4F",value:"STXinwei"},{label:"\u534E\u6587\u96B6\u4E66",value:"STLiti"},{label:"\u534E\u6587\u884C\u6977",value:"STXingkai"},{label:"\u51AC\u9752\u9ED1\u4F53",value:"Hiragino Sans GB"},{label:"\u5170\u4EAD\u9ED1",value:"Lantinghei SC"},{label:"\u504F\u504F\u4F53",value:"Hanzipen SC"},{label:"\u624B\u672D\u4F53",value:"Hannotate SC"},{label:"\u5B8B\u4F53",value:"Songti SC"},{label:"\u5A03\u5A03\u4F53",value:"Wawati SC"},{label:"\u884C\u6977",value:"Xingkai SC"},{label:"\u5706\u4F53",value:"Yuanti SC"},{label:"\u534E\u6587\u7EC6\u9ED1",value:"STXihei"},{label:"\u5E7C\u5706",value:"YouYuan"},{label:"\u96B6\u4E66",value:"LiSu"},{label:"LED",value:"LED"},{label:"LCD",value:"LCD"}],ea=[{label:"100 Thin",value:100},{label:"200 ExtraThin",value:200},{label:"300 Light",value:300},{label:"400 Normal",value:400},{label:"500 Medium",value:500},{label:"600 Semi Bold",value:600},{label:"700 Bold",value:700},{label:"Extra Bold",value:800},{label:"Black",value:900}],ta=R({__name:"FontStyle",props:{value:{default:""}},emits:["update:value","change"],setup(t,{emit:a}){const e=B(""),l=Y(Zn),c=s=>{e.value=s,a("update:value",e.value),a("change",e.value)};return(s,v)=>(_(),S(n(he),{clearable:"",modelValue:e.value,"onUpdate:modelValue":v[0]||(v[0]=i=>e.value=i),placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53","onUpdate:value":c,options:l},null,8,["modelValue","options"]))}}),na=R({__name:"FontWeight",props:{value:{default:""}},emits:["update:value","change"],setup(t,{emit:a}){const e=B(""),l=Y(ea),c=s=>{e.value=s,a("update:value",e.value),a("change",e.value)};return(s,v)=>(_(),S(n(he),{clearable:"",modelValue:e.value,"onUpdate:modelValue":v[0]||(v[0]=i=>e.value=i),placeholder:"\u8BF7\u9009\u62E9\u5B57\u91CD","onUpdate:value":c,options:l},null,8,["modelValue","options"]))}}),aa={class:"linear-gradient"},la=R({__name:"LinearGradient",props:{value:{default:{angle:0,color1:"",color2:""}}},emits:["update:value","change"],setup(t,{emit:a}){const e=t,l=B({angle:e.value.angle||0,color1:e.value.color1||"",color2:e.value.color2||""}),c=(s,v)=>{l.value[s]=v,a("update:value",l.value),a("change",l.value)};return(s,v)=>(_(),A("div",aa,[u(n(ye),{modelValue:t.value.angle,"onUpdate:value":v[0]||(v[0]=i=>c("angle",i)),controls:!0,min:0,max:360,step:1},null,8,["modelValue"]),u(n(Ae),{size:"small",value:t.value.color1,"onUpdate:value":v[1]||(v[1]=i=>c("color1",i)),modes:["hex","rgb","hsl"],swatches:n(Te)},null,8,["value","swatches"]),u(n(Ae),{size:"small",value:t.value.color2,"onUpdate:value":v[2]||(v[2]=i=>c("color2",i)),modes:["hex","rgb","hsl"],swatches:n(Te)},null,8,["value","swatches"])]))}});var oa=R({props:{args:{type:Object,default:()=>{}},component:{type:Object,default:()=>{}},value:{type:Object}},emits:["update:value","change"],setup(t,{emit:a}){const e=l=>{a("update:value",l),a("change",l)};return()=>[le(t.component,Ce(de({},t.args),{value:t.value,onChange:e}))]}});const it=R({__name:"FormItem",props:{data:null,children:null,ukey:null},emits:["change"],setup(t,{emit:a}){const e=t,l=Y(e.data),c=(s,v)=>{a("change",s,v)};return ve(()=>e.data,s=>{Object.assign(l,s)},{deep:!0}),(s,v)=>(_(!0),A(G,null,oe(t.children,({key:i,label:p,type:d,componentOptions:f})=>(_(),S(n(H),{key:`${t.ukey}${i}`,label:p},{default:m(()=>[d===n(J).COLOR?(_(),S(n(Ae),{key:0,value:l[i],"onUpdate:value":[o=>l[i]=o,o=>c(o,i)],swatches:n(Te),modes:["hex","rgb","hsl"],size:"small"},null,8,["value","onUpdate:value","swatches"])):d===n(J).SELECT?(_(),S(n(he),{key:1,modelValue:l[i],"onUpdate:modelValue":o=>l[i]=o,placeholder:p,"onUpdate:value":o=>c(o,i),options:(f==null?void 0:f.options)||[]},null,8,["modelValue","onUpdate:modelValue","placeholder","onUpdate:value","options"])):d===n(J).RADIO?(_(),S(n(Tt),{key:2,value:l[i],"onUpdate:value":[o=>l[i]=o,o=>c(o,i)],placeholder:p},{default:m(()=>[(_(!0),A(G,null,oe((f==null?void 0:f.options)||[],o=>(_(),S(n(At),{label:o.value,key:o.value},{default:m(()=>[Ee(_e(o.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["value","onUpdate:value","placeholder"])):d===n(J).NUMBER?(_(),S(n(ye),{key:3,value:l[i],"onUpdate:value":[o=>l[i]=o,o=>c(o,i)]},null,8,["value","onUpdate:value"])):d===n(J).SWITCH?(_(),S(n(ut),{key:4,value:l[i],"onUpdate:value":[o=>l[i]=o,o=>c(o,i)]},null,8,["value","onUpdate:value"])):d===n(J).FONT_STYLE?(_(),S(ta,{key:5,modelValue:l[i],"onUpdate:modelValue":o=>l[i]=o,onChange:o=>c(o,i)},null,8,["modelValue","onUpdate:modelValue","onChange"])):d===n(J).FONT_WEIGHT?(_(),S(na,{key:6,modelValue:l[i],"onUpdate:modelValue":o=>l[i]=o,onChange:o=>c(o,i)},null,8,["modelValue","onUpdate:modelValue","onChange"])):d===n(J).LINEAR_GRADIENT?(_(),S(la,{key:7,value:l[i],"onUpdate:value":o=>l[i]=o,onChange:o=>c(o,i)},null,8,["value","onUpdate:value","onChange"])):d===n(J).CUSTOM?(_(),S(n(oa),{key:8,value:l[i],"onUpdate:value":o=>l[i]=o,onChange:o=>c(o,i),component:f.componentType,args:f.args},null,8,["value","onUpdate:value","onChange","component","args"])):(_(),S(n(pe),{key:9,clearable:"",value:l[i],"onUpdate:value":[o=>l[i]=o,o=>c(o,i)]},null,8,["value","onUpdate:value"]))]),_:2},1032,["label"]))),128))}}),ct=R({__name:"FormAttr",props:{data:null,children:null,name:null,uid:null,ukey:null},emits:["change"],setup(t,{emit:a}){const l=Y(t.data),c=(s,v)=>{a("change",v,s)};return(s,v)=>(_(),S(n(ke),{size:"small",onSubmit:v[0]||(v[0]=De(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:m(()=>[u(it,{children:t.children,data:l,ukey:t.ukey,onChange:c},null,8,["children","data","ukey"])]),_:1}))}});const ua={class:"attr-list"},sa=R({__name:"StyleList",props:{curComponent:null},setup(t){const a=t,e=ue(),l=Y({}),c=U(()=>a.curComponent&&a.curComponent.component in re?re[a.curComponent.component].style:[]),s=ze((d,f)=>{if(a.curComponent)if(["top","left","width","height","rotate"].findIndex(r=>r===d)>-1){const r=e.activeIndex.split("-").map(h=>Number(h));r.pop();const g=e.getComponentByIndex(r);e.syncComponentLoction({[d]:f},g.component==="Root"?void 0:g),g&&e.resizeAutoComponent(r)}else e.setCurComponentStyle(d,f)},300);Se("changeStyle",d=>{const f=d;a.curComponent&&a.curComponent.id===f.id&&i(f.style)});const i=ze(d=>{const f=wt(d,l);f&&Object.keys(f).forEach(o=>{l[o]=f[o]})},200),p=()=>{if(a.curComponent){Ze(l);const d=de(de({},a.curComponent.style),a.curComponent.groupStyle||{});i(d)}};return ve([()=>a.curComponent.id,()=>a.curComponent.style],()=>{a.curComponent&&a.curComponent.id&&p()},{immediate:!0,deep:!0}),(d,f)=>(_(),A("div",ua,[u(n(Ve),{accordion:""},{default:m(()=>[(_(!0),A(G,null,oe(n(c),({name:o,uid:r,children:g})=>(_(),S(n($e),{key:`${t.curComponent.id}${r}`,title:o,name:r},{default:m(()=>[u(ct,{children:g,data:l,onChange:n(s),name:o,uid:r,ukey:t.curComponent.id},null,8,["children","data","onChange","name","uid","ukey"])]),_:2},1032,["title","name"]))),128))]),_:1})]))}});var ia=q(sa,[["__scopeId","data-v-a3f05a6a"]]);const ca=R({__name:"CompAttr",props:{curComponent:null},setup(t){const a=t,e=B(""),l=ue(),c=s=>{l.setCurComponentProps("label",s)};return ve(()=>a.curComponent,()=>{e.value=a.curComponent.label||""},{immediate:!0}),(s,v)=>(_(),S(n(ke),{size:"small",onSubmit:v[2]||(v[2]=De(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:m(()=>[u(n(H),{label:"\u7C7B\u578B"},{default:m(()=>[u(n(pe),{value:t.curComponent.component,readonly:!0},null,8,["value"])]),_:1}),u(n(H),{label:"ID"},{default:m(()=>[u(n(pe),{value:t.curComponent.id,readonly:!0},null,8,["value"])]),_:1}),u(n(H),{label:"\u540D\u79F0"},{default:m(()=>[u(n(pe),{value:e.value,"onUpdate:value":v[0]||(v[0]=i=>e.value=i),onChange:v[1]||(v[1]=i=>c(i))},null,8,["value"])]),_:1})]),_:1}))}});const ra={class:"title"},da=Ee("+"),ma=R({__name:"DynamicAttr",props:{data:null,children:null,name:null,uid:null,max:null,ukey:null},emits:["change"],setup(t,{emit:a}){const e=t,l=B(e.data),c=()=>{a("change",l.value,e.uid)},s=U(()=>l.value.length<e.max),v=p=>{l.value.splice(p,1),a("change",l.value,e.uid)},i=()=>{const p=l.value.length,d={};e.children.map(f=>{p>0?d[f.key]=l.value[p-1][f.key]:d[f.key]=void 0}),l.value.push(d),a("change",l.value,e.uid)};return(p,d)=>{const f=Fe("icon-park");return _(),A(G,null,[u(n(Ve),{accordion:""},{default:m(()=>[(_(!0),A(G,null,oe(l.value,(o,r)=>(_(),S(n($e),{key:`${t.ukey}${r}`,name:t.max>1?`${t.uid}${r}`:t.uid},{header:m(()=>[z("div",ra,_e(t.name)+_e(r+1),1)]),"header-extra":m(()=>[u(f,{name:"delete-one",size:"14",onClick:g=>v(r)},null,8,["onClick"])]),default:m(()=>[u(it,{children:t.children,data:o,ukey:t.ukey,onChange:c},null,8,["children","data","ukey"])]),_:2},1032,["name"]))),128))]),_:1}),P(u(n(W),{class:"add",onClick:i},{default:m(()=>[da]),_:1},512),[[ae,n(s)]])],64)}}});var pa=q(ma,[["__scopeId","data-v-62b141de"]]);const va={class:"attr-list"},fa=R({__name:"AttrList",props:{curComponent:null},setup(t){const a=t,e=ue(),l=Y({}),c=U(()=>a.curComponent&&a.curComponent.component in re?re[a.curComponent.component].attrs:[]),s=(i,p)=>{e.setCurComponentPropValue(i,p)},v=()=>{if(Ze(l),a.curComponent&&a.curComponent.propValue){const i=a.curComponent.propValue;Object.keys(i).forEach(p=>{l[p]=i[p]})}};return ve(()=>a.curComponent.id,()=>{v()},{immediate:!0}),(i,p)=>(_(),A("div",va,[u(n(Ve),{accordion:""},{default:m(()=>[u(n($e),{title:"\u516C\u5171\u5C5E\u6027"},{default:m(()=>[u(ca,{curComponent:t.curComponent},null,8,["curComponent"])]),_:1}),(_(!0),A(G,null,oe(n(c),({name:d,uid:f,children:o,max:r})=>(_(),S(n($e),{key:`${t.curComponent.id}${f}`,title:d,name:f},{default:m(()=>[!r||r<1?(_(),S(ct,{key:0,children:o,data:l,onChange:s,name:d,uid:f,ukey:t.curComponent.id},null,8,["children","data","name","uid","ukey"])):(_(),S(pa,{key:1,children:o,data:l[f]||[],onChange:s,name:d,uid:f,max:r,ukey:t.curComponent.id},null,8,["children","data","name","uid","max","ukey"]))]),_:2},1032,["title","name"]))),128))]),_:1})]))}});var _a=q(fa,[["__scopeId","data-v-cd08404e"]]);const ha=R({__name:"StaticData",setup(t){const a=B([]),e=B(null),l=c=>{console.log(c)};return(c,s)=>(_(),S(n(H),{key:"staticData",label:"\u9759\u6001\u6570\u636E"},{default:m(()=>[u(n(he),{value:e.value,"onUpdate:value":[s[0]||(s[0]=v=>e.value=v),s[1]||(s[1]=v=>l(v))],placeholder:"\u8BF7\u9009\u62E9\u9759\u6001\u6570\u636E",options:a.value},null,8,["value","options"])]),_:1}))}});const ga=R({__name:"DynamicData",setup(t){const a=B([]),e=B([]),l=Y({data:void 0,timeout:1e3,isInterval:!1,intervalTime:1e3,params:{}}),c=B(),s=i=>{console.log(i)},v=()=>{c.value?e.value.includes(c.value)?ce.warning("\u53C2\u6570\u91CD\u590D"):e.value.push(c.value):ce.warning("\u8BF7\u586B\u5199\u53C2\u6570")};return(i,p)=>{const d=Fe("icon-park");return _(),A(G,null,[u(n(H),{key:"dynamicData",label:"\u52A8\u6001\u6570\u636E"},{default:m(()=>[u(n(he),{value:l.data,"onUpdate:value":[p[0]||(p[0]=f=>l.data=f),s],placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u63A5\u53E3",options:a.value},null,8,["value","options"])]),_:1}),u(n(H),{key:"timeout",label:"\u8D85\u65F6\u65F6\u95F4"},{default:m(()=>[u(n(ye),{value:l.timeout,"onUpdate:value":[p[1]||(p[1]=f=>l.timeout=f),s],placeholder:"\u8D85\u65F6\u65F6\u95F4"},null,8,["value"])]),_:1}),u(n(H),{key:"isInterval",label:"\u662F\u5426\u5B9A\u65F6\u83B7\u53D6\u65F6\u95F4"},{default:m(()=>[u(n(ut),{modelValue:l.isInterval,"onUpdate:modelValue":p[2]||(p[2]=f=>l.isInterval=f)},null,8,["modelValue"])]),_:1}),l.isInterval?(_(),S(n(H),{key:"intervalTime",label:"\u95F4\u9694\u65F6\u95F4"},{default:m(()=>[u(n(ye),{value:l.intervalTime,"onUpdate:value":p[3]||(p[3]=f=>l.intervalTime=f),placeholder:"\u95F4\u9694\u65F6\u95F4"},null,8,["value"])]),_:1})):xe("",!0),(_(!0),A(G,null,oe(e.value,f=>(_(),S(n(H),{label:`\u53C2\u6570:${f}`,key:f},{default:m(()=>[u(n(pe),{value:l.params[f],"onUpdate:value":o=>l.params[f]=o},null,8,["value","onUpdate:value"])]),_:2},1032,["label"]))),128)),u(n(H),{key:"addParams",label:"\u8BF7\u6C42\u53C2\u6570"},{default:m(()=>[u(n(pe),{placeholder:"\u53C2\u6570",value:c.value,"onUpdate:value":p[4]||(p[4]=f=>c.value=f)},{suffix:m(()=>[u(d,{name:"add-three",onClick:v})]),_:1},8,["value"])]),_:1})],64)}}});var ya=q(ga,[["__scopeId","data-v-4b9262b5"]]);const ba=R({__name:"RealTimeData",setup(t){const a=B(null),e=l=>{console.log(l)};return(l,c)=>(_(),S(n(H),{key:"realTimeData",label:"\u5B9E\u65F6\u6570\u636E"},{default:m(()=>[u(n(pe),{value:a.value,"onUpdate:value":[c[0]||(c[0]=s=>a.value=s),c[1]||(c[1]=s=>e(s))],placeholder:"\u5B9E\u65F6\u6570\u636E"},null,8,["value"])]),_:1}))}});const Ca={class:"data-list"},xa=R({__name:"DataAttr",setup(t){const a=B("Static"),e=B(),l=Y([{label:"\u9759\u6001\u6570\u636E",value:"Static"},{label:"\u5B9E\u65F6\u6570\u636E",value:"RealTime"},{label:"\u52A8\u6001\u6570\u636E",value:"Dynamic"}]),c=B([]),s=i=>{console.log(i)},v=i=>{console.log(i)};return(i,p)=>(_(),A("div",Ca,[u(n(ke),{size:"small",onSubmit:p[4]||(p[4]=De(()=>{},["prevent"])),"label-placement":"left","label-align":"left"},{default:m(()=>[u(n(H),{key:"dataType",label:"\u6570\u636E\u7C7B\u578B"},{default:m(()=>[u(n(he),{value:a.value,"onUpdate:value":[p[0]||(p[0]=d=>a.value=d),p[1]||(p[1]=d=>v(d))],placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5904\u7406\u7B97\u6CD5",options:l},null,8,["value","options"])]),_:1}),a.value==="Static"?(_(),S(ha,{key:0})):a.value==="RealTime"?(_(),S(ba,{key:1})):a.value==="Dynamic"?(_(),S(ya,{key:2})):xe("",!0),u(n(H),{key:"algorithm",label:"\u7B97\u6CD5"},{default:m(()=>[u(n(he),{value:e.value,"onUpdate:value":[p[2]||(p[2]=d=>e.value=d),p[3]||(p[3]=d=>s(d))],placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5904\u7406\u7B97\u6CD5",options:c.value},null,8,["value","options"])]),_:1})]),_:1})]))}}),Sa={key:0},wa={key:1},Fa=R({__name:"SideBar",props:{iscollapsed:{type:Boolean,default:!1}},emits:["update:iscollapsed"],setup(t,{emit:a}){const e=B("attr"),l=ue(),c=U(()=>l.curComponent),s=U(()=>l.curComponent?[{label:"\u6837\u5F0F",key:"4",icon:()=>le(ne,{name:"text-style",onClick:()=>v("style")})},{label:"\u5C5E\u6027",key:"2",icon:()=>le(ne,{name:"internal-data",onClick:()=>v("attr")})},{label:"\u6570\u636E",key:"3",icon:()=>le(ne,{name:"data",onClick:()=>v("data")})}]:[{label:"\u753B\u5E03",key:"1",icon:()=>le(ne,{name:"page",onClick:()=>v("canvas")})}]),v=i=>{a("update:iscollapsed",!1),e.value=i};return(i,p)=>t.iscollapsed?(_(),A("div",wa,[u(n(Ue),{options:n(s)},null,8,["options"])])):(_(),A("div",Sa,[n(c)?(_(),S(n(Be),{key:0,type:"line",animated:"","justify-content":"center",value:e.value,"onUpdate:value":[p[0]||(p[0]=d=>e.value=d),p[1]||(p[1]=d=>e.value=d)]},{default:m(()=>[u(n(fe),{name:"style","display-directive":"show:lazy"},{tab:m(()=>[u(n(ne),{name:"text-style"}),P(z("span",null,"\u6837\u5F0F",512),[[ae,!t.iscollapsed]])]),default:m(()=>[u(n(ia),{curComponent:n(c)},null,8,["curComponent"])]),_:1}),u(n(fe),{name:"attr","display-directive":"show:lazy"},{tab:m(()=>[u(n(ne),{name:"internal-data"}),P(z("span",null,"\u5C5E\u6027",512),[[ae,!t.iscollapsed]])]),default:m(()=>[u(n(_a),{curComponent:n(c)},null,8,["curComponent"])]),_:1}),u(n(fe),{name:"data","display-directive":"show:lazy"},{tab:m(()=>[u(n(ne),{name:"data"}),P(z("span",null,"\u6570\u636E",512),[[ae,!t.iscollapsed]])]),default:m(()=>[u(n(xa))]),_:1})]),_:1},8,["value"])):(_(),S(n(Be),{key:1,type:"line",animated:"","justify-content":"center"},{default:m(()=>[u(n(fe),{name:"canvas","display-directive":"show:lazy"},{tab:m(()=>[u(n(ne),{name:"canvas"}),P(z("span",null,"\u753B\u5E03",512),[[ae,!t.iscollapsed]])]),default:m(()=>[u(Qn)]),_:1})]),_:1}))]))}});const Da=R({__name:"DesignerPage",setup(t){const a=ue(),e=B(null),l=B(!1),c=B(!1),s=nt();we(()=>ee(this,null,function*(){const y=s.params.index;y&&(yield v(y))}));const v=y=>ee(this,null,function*(){const b=yield Bt(y);!b||a.setLayoutData(b)}),i=B(0),p=B(0),d=U(()=>({width:i.value+"px",height:p.value+"px"})),f=y=>{const b=y[0],{width:T,height:I}=b.contentRect;i.value=T,p.value=I},o=y=>ee(this,null,function*(){y.preventDefault(),y.stopPropagation();const b=y.dataTransfer.getData("componentName");if(b){const T=st(re[b].component);T.style.top=y.offsetY,T.style.left=y.offsetX,a.appendComponent(T)}}),r=y=>{y.preventDefault(),y.dataTransfer.dropEffect="copy"},g=()=>{a.curComponent||a.setCurComponent(void 0,void 0)};ve(()=>a.canvasStyleData.dataWs,y=>{var b;(b=e.value)==null||b.close(),y&&(e.value=h("actual",y))});const h=(y,b)=>{const T=new WebSocket(b);return T.onopen=()=>{console.log("websocket\u8FDE\u63A5\u6210\u529F")},T.onclose=()=>{console.log("websocket\u8FDE\u63A5\u88AB\u5173\u95ED")},T.onmessage=I=>{const j=JSON.parse(I.data);ie.emit(y,j)},T};return Re(()=>{var y;(y=e.value)==null||y.close(),a.clearCanvas()}),(y,b)=>{const T=ge("resize");return _(),S(n(Ne),{class:"home"},{default:m(()=>[u(n(zt),{class:"header"},{default:m(()=>[u(n(Vn))]),_:1}),u(n(Ne),{"has-sider":"",class:"main"},{default:m(()=>[u(n(Oe),{class:"left",width:"200",collapsed:l.value,"native-scrollbar":!1,bordered:"","collapse-mode":"width","show-trigger":"",onCollapse:b[2]||(b[2]=()=>l.value=!0),onExpand:b[3]||(b[3]=()=>l.value=!1)},{default:m(()=>[u(n(Gn),{iscollapsed:l.value,"onUpdate:iscollapsed":[b[0]||(b[0]=I=>l.value=I),b[1]||(b[1]=I=>l.value=I)]},null,8,["iscollapsed"])]),_:1},8,["collapsed"]),u(n(Ne),{"has-sider":"","sider-placement":"right"},{default:m(()=>[P((_(),S(n(Rt),{class:"content"},{default:m(()=>[u(n(ot),{"x-scrollable":"",style:me(n(d))},{default:m(()=>[u(sn,{onDrop:o,onDragover:r,onMousedown:g,onClick:g})]),_:1},8,["style"])]),_:1})),[[T,f]]),u(n(Oe),{class:"right",width:"240",collapsed:c.value,"native-scrollbar":!1,bordered:"","collapsed-width":35,"collapse-mode":"width","show-trigger":"arrow-circle",onCollapse:b[6]||(b[6]=()=>c.value=!0),onExpand:b[7]||(b[7]=()=>c.value=!1)},{default:m(()=>[u(n(Fa),{iscollapsed:c.value,"onUpdate:iscollapsed":[b[4]||(b[4]=I=>c.value=I),b[5]||(b[5]=I=>c.value=I)]},null,8,["iscollapsed"])]),_:1},8,["collapsed"])]),_:1})]),_:1})]),_:1})}}});var al=q(Da,[["__scopeId","data-v-cd2ff760"]]);export{al as default};
