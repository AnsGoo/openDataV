var B=(w,a,r)=>new Promise((k,s)=>{var D=l=>{try{S(r.next(l))}catch(b){s(b)}},x=l=>{try{S(r.throw(l))}catch(b){s(b)}},S=l=>l.done?k(l.value):Promise.resolve(l.value).then(D,x);S((r=r.apply(w,a)).next())});import{d as P,m as W,i as y,q,r as E,o as f,c as v,b as A,F,f as H,n as C,u as e,s as _,t as O,v as I,x as K,y as U,z as X,A as Y,B as j,C as N,D as J,E as Q,G as g,H as Z,h as tt,_ as et}from"./index.6ecd5136.js";import{u as ot}from"./index.f9a5bc2d.js";import{S as nt}from"./Shape.aa27d24f.js";import M from"./Group.22a61e49.js";import"./enums.27e2d34b.js";import"./useEventBus.8f871294.js";const st=["onClick"],at=P({__name:"Tabs",props:{component:null},setup(w){const a=w,r=W(),k=y(()=>r.isEditMode),{propValue:s}=ot(a.component),D=y(()=>s.label.items||[]);q(()=>s.label.mode,()=>{const o=(s.label.items||[]).length,h=s.label.mode||"horizontal",n=s.style.height,{top:p,left:d,width:u,height:m}=a.component.style;for(let c=0;c<o;c++)if(console.log(a.component.subComponents[c]),a.component.subComponents[c]){const t=a.component.subComponents[c];h==="horizontal"?(t.change("top",p+n),t.change("left",d)):(t.change("top",p),t.change("left",d+n)),t.groupStyle={gleft:g((t.positionStyle.left-d)/u),gtop:g((t.positionStyle.top-p)/m),gwidth:g(t.positionStyle.width/u),gheight:g(t.positionStyle.height/m),grotate:t.groupStyle.grotate||0}}else{const t=new Z(tt());h==="horizontal"?(t.change("top",p+n),t.change("left",d),t.change("width",u),t.change("height",m-n)):(t.change("top",p),t.change("left",d+n),t.change("width",u-n),t.change("height",m)),t.parent=a.component,t.groupStyle={gleft:0,gtop:g((t.positionStyle.top-p)/m),gwidth:100,gheight:g(t.positionStyle.height/m),grotate:a.component.positionStyle.rotate||0},a.component.updateChild(c,t)}},{immediate:!0});const x=o=>{var h;return(h=o.groupStyle)!=null&&h.gheight?N(o.groupStyle,["gtop","gleft","gwidth","gheight","grotate"]):N(o.style,["top","left","width","height","rotate"])},S=y(()=>r.curComponent),l=E(0),b=o=>!(r.isEditMode&&o===!1),T=o=>{l.value=o},V=o=>l.value===o,z=y(()=>(console.log(s.label.mode),s.label.mode?s.label.mode:"horizontal")),$=E(null),i=y(()=>(console.log(a.component.subComponents[l.value]),a.component.subComponents[l.value])),R=y(()=>({[s.label.mode==="horizontal"?"height":"width"]:`${s.style.height}px`,color:s.style.color,fontSize:`${s.style.fontSize}px`,weight:`${s.style.fontWeight}px`,family:`${s.style.fontWeight}px`})),G=o=>{o.preventDefault(),o.dataTransfer.dropEffect="copy"},L=o=>B(this,null,function*(){o.preventDefault(),o.stopPropagation();const h=o.dataTransfer.getData("componentName");if(h){const n=new J[h];n.dataIntegrationMode===Q.UNIVERSAL&&n.loadDemoData();const{top:p,left:d}=document.querySelector("#editor").getBoundingClientRect(),u=(o.pageY-p)/r.scale,m=(o.pageX-d)/r.scale,c=a.component.subComponents[l.value].style;n.change("top",u),n.change("left",m),n.groupStyle={gleft:g((n.positionStyle.left-c.left)/c.width),gtop:g((n.positionStyle.top-c.top)/c.height),gwidth:g(n.positionStyle.width/c.width),gheight:g(n.positionStyle.height/c.height),grotate:n.positionStyle.rotate||0},n.parent=a.component,a.component.subComponents[l.value].appendChild(n)}});return(o,h)=>(f(),v("div",{class:C(["dv-tabs",e(z)])},[A("div",{class:C(["tabs-nav",e(z)])},[(f(!0),v(F,null,H(e(D),(n,p)=>(f(),v("div",{key:p,class:C(["tabs-tab",{active:V(p),[e(z)]:!0}]),style:_(e(R)),onClick:d=>T(p)},O(n),15,st))),128))],2),e(k)?(f(),v("div",{key:1,ref_key:"contentRef",ref:$,class:"tabs-content",onDrop:L,onDragover:G},[b(e(i).display||!1)?(f(),U(e(nt),{key:0,id:"shape"+e(i).id,defaultStyle:e(i).style,style:_(x(e(i))),active:e(i).id===(e(S)||{}).id,info:e(i),class:C({lock:e(i).locked}),isInner:!0,index:l.value},{default:X(()=>[I(M,{id:"component"+e(i).id,class:"component",style:_(e(Y)(e(i))),component:e(i)},null,8,["id","style","component"])]),_:1},8,["id","defaultStyle","style","active","info","class","index"])):j("",!0)],544)):(f(),v("div",{key:0,ref_key:"content",ref:i,class:"tabs-content"},[I(M,{id:"component"+e(i).id,class:"component",style:_(e(K)(e(i))),component:e(i)},null,8,["id","style","component"])],512))],2))}});const dt=et(at,[["__scopeId","data-v-658d4384"]]);export{dt as default};
