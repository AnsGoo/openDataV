import{d as x,e as y,ad as B,f as G,h as D,o,y as g,z as s,b as a,u as e,N as Q,T as K,S as N,c as b,F as k,i as L,w as R,a as T,t as h,ae as z,O as w,U as V,af as W,L as P,Y,ab as q,ag as j,ah as F,ai as M,aj as J,ak as X,R as Z,_ as H,l as U,Q as ee,al as te,am as ae,an as se,ao as ne,ap as $,aq as O,ar as le,n as oe}from"./index-dfdef63a.js";import{N as A,T as ce}from"./Toolbar-081c4a4c.js";import{N as E}from"./li-ae5b0f33.js";import{_ as ie}from"./404-ef83427e.js";import{N as re}from"./Result-0993fed0.js";import{N as ue}from"./Scrollbar-69c005e9.js";import"./ToolBar-5c09210c.js";/* empty css                                                                */const de={class:"rest-detail"},_e={class:"desc"},pe={class:"rest-detail"},ve={class:"desc"},me=x({__name:"Rest",setup(r){const l=y([]),u=B("REST",!0),c=y([]),m=async()=>{try{const t=await W();t.status===200&&(l.value=t.data)}catch(t){P.log(t||t.message)}},_=t=>{Y.emit(q.REST_KEY,t)},i=async()=>{const t=await u.list();c.value=t.map(f=>f.data)};G(async()=>{await m(),await i()});const d=async t=>{try{(await j(t)).status===200&&(F.success("删除成功"),await m())}catch{return}},p=async()=>{await u.clear(),await i()},v=t=>[{text:"删除",subText:"",handler:()=>d(t)}],S=t=>[{text:"清除",subText:"",handler:()=>p()}];return(t,f)=>{const C=D("contextmenu");return o(),g(e(V),{title:"REST数据",size:"small"},{default:s(()=>[a(e(Q),{placeholder:"请输入搜索条件"}),a(e(K),null,{default:s(()=>[a(e(N),{name:"REST数据"},{default:s(()=>[a(e(A),{"align-text":""},{default:s(()=>[(o(!0),b(k,null,L(l.value,n=>R((o(),g(e(E),{key:n.id,class:"data-item",onClick:I=>_(n.id)},{default:s(()=>[T("div",de,[T("div",_e,h(n.name),1),T("div",null,[a(e(z),{type:"success",style:{"font-weight":"800"}},{default:s(()=>[w(h(n.method),1)]),_:2},1024),w(" "+h(n.url),1)])])]),_:2},1032,["onClick"])),[[C,()=>v(n.id)]])),128))]),_:1})]),_:1}),a(e(N),{name:"最近使用"},{default:s(()=>[a(e(A),{"align-text":""},{default:s(()=>[(o(!0),b(k,null,L(c.value,n=>R((o(),g(e(E),{key:n.id,class:"data-item",onClick:I=>_(n.id)},{default:s(()=>[T("div",pe,[T("div",ve,h(n.name),1),T("div",null,[a(e(z),{type:"success",style:{"font-weight":"800"}},{default:s(()=>[w(h(n.method),1)]),_:2},1024),w(" "+h(n.url),1)])])]),_:2},1032,["onClick"])),[[C,()=>S(n.id)]])),128))]),_:1})]),_:1})]),_:1})]),_:1})}}});const fe=x({__name:"Static",setup(r){const l=B("STATIC",!0),u=y([]),c=y([]),m=async()=>{try{const t=await J();t.status===200&&(c.value=t.data)}catch(t){P.log(t||t.message)}},_=t=>{Y.emit(q.STATIC_KEY,t)},i=async()=>{const t=await l.list();u.value=t.map(f=>f.data)};G(async()=>{await m(),await i()});const d=async t=>{try{(await X(t)).status===200&&(F.success("删除成功"),await m())}catch{return}},p=async()=>{await l.clear(),await i()},v=t=>[{text:"删除",subText:"",handler:()=>d(t)}],S=t=>[{text:"清除",subText:"",handler:()=>p()}];return(t,f)=>{const C=D("contextmenu");return o(),g(e(V),{title:"静态数据",size:"small"},{default:s(()=>[a(e(Q),{placeholder:"请输入搜索条件"}),a(e(K),null,{default:s(()=>[a(e(N),{name:"静态数据"},{default:s(()=>[a(e(A),{"align-text":""},{default:s(()=>[(o(!0),b(k,null,L(c.value,n=>R((o(),g(e(E),{key:n.id,class:"data-item",onClick:I=>_(n.id)},{default:s(()=>[a(e(M),null,{default:s(()=>[w(h(n.name),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[C,()=>v(n.id)]])),128))]),_:1})]),_:1}),a(e(N),{name:"最近使用"},{default:s(()=>[a(e(A),{"align-text":""},{default:s(()=>[(o(!0),b(k,null,L(u.value,n=>R((o(),g(e(E),{key:n.id,class:"data-item",onClick:I=>_(n.id)},{default:s(()=>[a(e(M),null,{default:s(()=>[w(h(n.name),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[C,()=>S(n.id)]])),128))]),_:1})]),_:1})]),_:1})]),_:1})}}});const he=x({props:{active:{type:String,default:"REST"}},setup(r){return()=>{if(r.active=="REST")return a(me,null,null);if(r.active=="STATIC")return a(fe,null,null)}}}),ye={class:"sider-bar-item"},ge={class:"label"},Te=x({__name:"TypeItem",props:{icon:{},label:{}},setup(r){return(l,u)=>{const c=Z("x-icon");return o(),b("div",ye,[a(c,{name:l.icon,class:"icon"},null,8,["name"]),T("span",ge,h(l.label),1)])}}});const xe=H(Te,[["__scopeId","data-v-cd011a99"]]),Se={class:"main"},we=x({__name:"ApiType",emits:["change"],setup(r,{emit:l}){const u=[{label:"STATIC",icon:"data",key:"STATIC"},{label:"REST",icon:"http",key:"REST"},{label:"GraphQL",icon:"earth",key:"GRAPHQL"},{label:"实时",icon:"transform",key:"REALTIME"}],c=y("REST"),m=i=>{c.value=i,l("change",i)},_=U(()=>{const i=[];return u.forEach(d=>{i.push({key:d.key,icon:()=>ee(xe,{icon:d.icon,label:d.label})})}),i});return(i,d)=>(o(),b("div",Se,[a(e(te),{value:c.value,"onUpdate:value":[d[0]||(d[0]=p=>c.value=p),m],options:_.value,class:"sider-bar-item",collapsed:!1,"icon-size":30},null,8,["value","options"])]))}});const be=H(we,[["__scopeId","data-v-1ad4efd1"]]),Ce=T("img",{src:ie},null,-1),Re=x({__name:"GraphQL",setup(r){return(l,u)=>(o(),g(e(re),{status:"404",title:"模块正在开发中...",description:"star一下，来为OpenDataV加速吧",style:{height:"100%"}},{icon:s(()=>[Ce]),_:1}))}}),Ne=x({props:{active:{type:String,default:"REST"}},setup(r){return()=>{if(r.active=="REST")return a(ae,{mode:"debug"},null);if(r.active=="STATIC")return a(se,{mode:"debug"},null);if(r.active=="GRAPHQL")return a(Re,null,null)}}}),ke=x({__name:"OpenApi",setup(r){const l=y(!1),u=y(0),c=y(0),m=U(()=>({width:u.value+"px",height:c.value+"px"})),_=y("REST"),i=p=>{_.value=p},d=p=>{const{width:v,height:S}=p.contentRect;u.value=v,c.value=S};return(p,v)=>{const S=D("resize");return o(),g(e($),{class:"home"},{default:s(()=>[a(e(ne),{class:"header"},{default:s(()=>[a(e(ce))]),_:1}),a(e($),{"has-sider":"",class:"main"},{default:s(()=>[a(e(O),{class:"left",width:400,collapsed:!0,"native-scrollbar":!1,"collapsed-width":80,bordered:"","collapse-mode":"width"},{default:s(()=>[a(e(be),{onChange:i})]),_:1}),a(e($),{"has-sider":"","sider-placement":"right"},{default:s(()=>[R((o(),g(e(le),{class:"content"},{default:s(()=>[a(e(ue),{"x-scrollable":"",style:oe(m.value)},{default:s(()=>[a(e(Ne),{active:_.value},null,8,["active"])]),_:1},8,["style"])]),_:1})),[[S,d]]),a(e(O),{class:"right",width:"240",collapsed:l.value,"native-scrollbar":!1,bordered:"","collapsed-width":35,"collapse-mode":"width","show-trigger":"arrow-circle",onCollapse:v[0]||(v[0]=t=>l.value=!0),onExpand:v[1]||(v[1]=t=>l.value=!1)},{default:s(()=>[a(e(he),{active:_.value},null,8,["active"])]),_:1},8,["collapsed"])]),_:1})]),_:1})]),_:1})}}});const Me=H(ke,[["__scopeId","data-v-479dbc73"]]);export{Me as default};
