![](./public/logo.png)


![](https://img.shields.io/github/license/AnsGoo/openDataV)
![](https://img.shields.io/github/stars/AnsGoo/openDataV)
![](https://img.shields.io/github/issues/AnsGoo/openDataV)
![](https://img.shields.io/github/forks/AnsGoo/openDataV)

## ç®€ä»‹
ğŸƒOpenDataV æ˜¯ä¸€ä¸ªçº¯å‰ç«¯çš„`æ‹–æ‹½å¼`ã€`å¯è§†åŒ–`ã€`ä½ä»£ç `æ•°æ®å¯è§†åŒ–ğŸŒˆå¼€å‘å¹³å°ï¼Œä½ å¯ä»¥ç”¨å®ƒè‡ªç”±çš„æ‹¼æ¥æˆå„ç§âœ¨ç‚«é…·çš„å¤§å±ï¼ŒåŒæ—¶æ”¯æŒç”¨æˆ·æ–¹ä¾¿çš„å¼€å‘è‡ªå·±çš„ç»„ä»¶å¹¶æ¥å…¥å¹³å°ã€‚

## ä½“éªŒ
ğŸ§™å›½å¤–ï¼š[http://datav.byteportrait.com/](http://datav.byteportrait.com/)

ğŸ§™æ–‡æ¡£: [https://datav.byteportrait.com/#/docs/quick-satrt/quick-start](https://datav.byteportrait.com/#/docs/quick-satrt/quick-start)


## æºç åœ°å€ï¼š

ğŸ¨github: [https://github.com/AnsGoo/openDataV](https://github.com/AnsGoo/openDataV)

ğŸ¨gitee: [https://gitee.com/small_bud_star/OpenDataV](https://gitee.com/small_bud_star/OpenDataV)


## ç»„ä»¶åŒ…ä»‹ç»

|npmåŒ…| åç§°       | ç”¨é€”                                             |
|--|----------|------------------------------------------------|
|@open-data-v/base| åŸºç¡€å…¬å…±åŒ…    | open-data-v å…¬å…±åŸºç¡€åŒ…                              |
|@open-data-v/designer| é¡µé¢è®¾è®¡å™¨ç»„ä»¶åŒ… | ç»™open-data-v æä¾›é¡µé¢ç¼–è¾‘å’Œé¢„è§ˆèƒ½åŠ›                       |
|@open-data-v/scripts| æ•°æ®å¤„ç†åŸºç¡€åŒ…  | ç»™open-data-v æä¾›å¤šæ ·åŒ–çš„æ•°æ®é¢„å¤„ç†æ–¹å¼ï¼Œä¾‹å¦‚è‡ªå®šä¹‰è„šæœ¬å’Œè¿œç¨‹è„šæœ¬        |
|@open-data-v/data| æ•°æ®åŠ è½½åŸºç¡€åŒ…  | ç»™open-data-væä¾›å¤šæ ·åŒ–çš„æ•°æ®åŠ è½½æ–¹å¼ã€‚ä¾‹å¦‚HTTPã€Websocketã€MQTT |
|@open-data-v/ui| é»˜è®¤UIåº“    | ç”¨äºæä¾›open-data-våŸºæœ¬çš„UIç»„ä»¶                         |

ç›®å‰è¯¥é¡¹ç›®åœ¨ä¸æ–­çš„å®Œå–„ä¸­ï¼ŒğŸ‰æ¬¢è¿ issuer,ğŸŒ¹æ¬¢è¿ start, ğŸ¨æ¬¢è¿ commit, ğŸš€æ¬¢è¿ use...ï¼ŒğŸ’ªæ¬¢è¿ä¸€åˆ‡æŠ€æœ¯äº¤æµæ´»åŠ¨

## ğŸ‘ï¸é¢„è§ˆ

### ğŸ¤¿ é¡µé¢ç¼–è¾‘

1. ç»„ä»¶æ·»åŠ 
   ![screenshots2.gif](https://s2.loli.net/2022/10/31/nApiFm7PogI1dHS.gif)

2. ç»„ä»¶æ“ä½œ
   ![screenshots1.gif](https://s2.loli.net/2022/10/31/9lkiR15sVMLapIe.gif)

3. ç»„ä»¶æ•°æ®é…ç½®
   ![screenshots.gif](https://s2.loli.net/2022/10/31/28lf6NK35EaY9wJ.gif)


## ğŸ’’åŠŸèƒ½
- ğŸŠ ç¼–è¾‘å™¨é¡µé¢åŸºæœ¬åŠŸèƒ½å®Œæˆï¼ŒåŒ…æ‹¬ç¼–è¾‘ã€é¢„è§ˆã€å¯¼å…¥ã€å¯¼å‡ºã€ä¿å­˜
- ğŸª„ å›¾å±‚çš„ç½®é¡¶ã€ç½®åº•ã€ä¸Šä¸‹ç§»åŠ¨ã€æ˜¾ç¤ºã€éšè—ã€å¤åˆ¶ã€å‰ªåˆ‡ã€ç²˜è´´
- ğŸ–¼ï¸ ç»„ä»¶çš„ç¼©æ”¾ã€æ—‹è½¬ã€æ‹–åŠ¨ã€å¤åˆ¶ã€ç²˜è´´ã€ç»„åˆã€æ‹†åˆ†ã€ç§»é™¤ã€è‡ªåŠ¨å¯¹é½
- ğŸ”® æ”¯æŒç”¨æˆ·æ“ä½œè®°å½•çš„æ¢å¤ã€æ’¤é”€åŠŸèƒ½
- ğŸ§¶ æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ç»„ä»¶
- ğŸ“” æ”¯æŒç»„ä»¶çš„ç”¨æˆ·è‡ªå®šç»„ä»¶é…ç½®é¡¹
- ğŸª æ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢
- ğŸ§¶ æ”¯æŒè‡ªå®šä¹‰æ•°æ®åŠ è½½æ–¹å¼
- ğŸ”Œ æ”¯æŒä»è¿œç¨‹è„šæœ¬è‡ªå®šä¹‰è„šæœ¬çš„æ•°æ®é¢„å¤„ç†

## ğŸ’‚å¼€å‘

```shell
npm install @open-data-v/base @open-data-v/designer @open-data-v/scripts @open-data-v/data @open-data-v/ui

```

### æ³¨å†Œå…¨å±€æŒ‡ä»¤å’Œæ’ä»¶
```typescript

// æ³¨å†Œå…¨å±€æŒ‡ä»¤å’Œæ’ä»¶
import '@open-data-v/ui/style'
import '@open-data-v/designer/style'
import '@open-data-v/data/style'
import '@open-data-v/scripts/style'

import { Directive, useComponentPlugin } from '@open-data-v/designer'
const componentPlugin = useComponentPlugin()

app.use(Directive)
app.use(AsyncComponent)
```

### åŠ è½½ç¼–è¾‘å™¨ç»„ä»¶åˆ—è¡¨

```typescript

// ç»„ä»¶åŠ è½½å™¨
import type { BaseComponent } from '@open-data-v/base'
import { useCanvasState } from '@open-data-v/designer'
import type { App } from 'vue'
import { defineAsyncComponent } from 'vue'

const canvasState = useCanvasState()
const useLoadComponent = () => {
  return {
    install: (app: App) => {
      // æ³¨å†ŒGroupç»„ä»¶ globå‡½æ•°åé¢çš„ ä¸ºç»„ä»¶åŒ…è·¯å¾„
      const moduleFilesTs: any = import.meta.glob('../../resource/**/index.ts', {
        eager: true
      })
      Object.keys(moduleFilesTs).forEach((key: string) => {
        const componentOptions = moduleFilesTs[key]?.default

        if (componentOptions) {
          // åŠ è½½ç»„ä»¶
          canvasState.loadComponent(
            componentOptions.componentName,
            componentOptions.config as BaseComponent
          )
          // æ³¨å†Œå¼‚æ­¥ç»„ä»¶
          const asyncComp = defineAsyncComponent({
            loader: componentOptions.component,
            delay: 200,
            timeout: 3000
          })
          app.component(componentOptions.componentName, asyncComp)
        } else {
          console.error(`${key} is not a valid component`)
        }
      })
    }
  }
}

export { useLoadComponent }


// å…¨å±€æ³¨å†Œ
// main.ts

const AsyncComponent = useLoadComponent()
app.use(componentPlugin)
```


### ä½¿ç”¨é¡µé¢è®¾è®¡å™¨


```vue
<template>
  <Designer ref="designer" />
</template>

<script setup lang="ts">
import { StaticKey, useEventBus } from '@open-data-v/base'
import { Designer, useCanvasState, useDataState, useScriptState } from '@open-data-v/designer'
import { CustomScriptPlugin, SystemScriptPlugin } from '@open-data-v/scripts'
import { useRoute, useRouter } from 'vue-router'
import {
  RestDataPlugin,
  StaticDataPlugin,
  SubDataPlugin,
  WebsocketDataPlugin
} from '@open-data-v/data'

const scriptState = useScriptState()
const canvasState = useCanvasState()

const dataState = useDataState()
// åŠ è½½è„šæœ¬æ’ä»¶
scriptState.loadPlugins([CustomScriptPlugin, SystemScriptPlugin])

useEventBus(StaticKey.STDOUT, (event) => {
  const stdout = event as { type: string; name: string; message: any }
  console.log(stdout)
})



// åŠ è½½æ•°æ®æ’ä»¶
dataState.loadPlugins([
  RestDataPlugin,
  StaticDataPlugin,
  SubDataPlugin,
  WebsocketDataPlugin
])
  
</script>

```


### ä½¿ç”¨é¡µé¢é¢„è§ˆå™¨

```vue

<template>
  <Previewer ref="designer" />
</template>

<script setup lang="ts">
import { StaticKey, useEventBus } from '@open-data-v/base'
import { Previewer, useCanvasState, useDataState, useScriptState } from '@open-data-v/designer'
import { CustomScriptPlugin, SystemScriptPlugin } from '@open-data-v/scripts'
import { useRoute, useRouter } from 'vue-router'
import {
  RestDataPlugin,
  StaticDataPlugin,
  SubDataPlugin,
  WebsocketDataPlugin
} from '@open-data-v/data'

const scriptState = useScriptState()
const canvasState = useCanvasState()

const dataState = useDataState()
// åŠ è½½è„šæœ¬æ’ä»¶
scriptState.loadPlugins([CustomScriptPlugin, SystemScriptPlugin])

useEventBus(StaticKey.STDOUT, (event) => {
  const stdout = event as { type: string; name: string; message: any }
  console.log(stdout)
})

// åŠ è½½æ•°æ®æ’ä»¶
dataState.loadPlugins([
  RestDataPlugin,
  StaticDataPlugin,
  SubDataPlugin,
  WebsocketDataPlugin
])

```












